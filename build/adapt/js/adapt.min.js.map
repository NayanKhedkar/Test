{
  "version": 3,
  "sources": [
    "core/js/libraries/underscore.js",
    "core/js/libraries/backbone.js",
    "core/js/models/lockingModel.js",
    "core/js/libraries/handlebars.js",
    "core/js/helpers.js",
    "core/js/adapt.js",
    "core/js/models/routerModel.js",
    "core/js/views/adaptView.js",
    "core/js/views/blockView.js",
    "core/js/views/articleView.js",
    "core/js/views/pageView.js",
    "core/js/router.js",
    "core/js/views/drawerView.js",
    "core/js/drawer.js",
    "core/js/libraries/bowser.js",
    "core/js/device.js",
    "core/js/popupManager.js",
    "core/js/views/notifyView.js",
    "core/js/views/notifyPushView.js",
    "core/js/models/notifyModel.js",
    "core/js/notify.js",
    "core/js/libraries/jquery.a11y.js",
    "core/js/views/accessibilityView.js",
    "core/js/accessibility.js",
    "core/js/views/navigationView.js",
    "core/js/adaptCollection.js",
    "core/js/models/configModel.js",
    "core/js/models/adaptModel.js",
    "core/js/models/courseModel.js",
    "core/js/models/contentObjectModel.js",
    "core/js/models/articleModel.js",
    "core/js/models/blockModel.js",
    "core/js/models/componentModel.js",
    "core/js/offlineStorage.js",
    "core/js/libraries/velocity.js",
    "core/js/libraries/imageReady.js",
    "core/js/libraries/inview.js",
    "core/js/views/componentView.js",
    "components/adapt-Tables/js/generic.js",
    "components/adapt-Tables/js/cas.js",
    "components/adapt-Tables/js/casInteractivePopupView.js",
    "components/adapt-Tables/js/casInteractive.js",
    "components/adapt-Tables/js/adapt-Tables.js",
    "components/adapt-accordionWithAudio/js/mediaelement-and-player.min.js",
    "components/adapt-accordionWithAudio/js/adapt-accordionWithAudio.js",
    "components/adapt-contrib-accordion/js/adapt-contrib-accordion.js",
    "components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults.js",
    "components/adapt-contrib-blank/js/adapt-contrib-blank.js",
    "core/js/views/buttonsView.js",
    "core/js/views/questionView.js",
    "components/adapt-contrib-mcq/js/adapt-contrib-mcq.js",
    "components/adapt-contrib-gmcq/js/adapt-contrib-gmcq.js",
    "components/adapt-contrib-graphic/js/adapt-contrib-graphic.js",
    "components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic.js",
    "components/adapt-contrib-matching/js/adapt-contrib-matching.js",
    "components/adapt-contrib-media/libraries/mediaelement-and-player.js",
    "components/adapt-contrib-media/libraries/mediaelement-and-player-accessible-captions.js",
    "components/adapt-contrib-media/js/adapt-contrib-media.js",
    "components/adapt-contrib-narrative/js/adapt-contrib-narrative.js",
    "components/adapt-contrib-responsiveIframe/js/adapt-contrib-responsiveIframe.js",
    "components/adapt-contrib-slider/js/adapt-contrib-slider.js",
    "components/adapt-contrib-text/js/adapt-contrib-text.js",
    "components/adapt-contrib-textInput/js/adapt-contrib-textInput.js",
    "components/adapt-dragAndDrop/js/adapt-dragAndDrop.js",
    "components/adapt-embeddedLink/js/mediaelement-and-player.min.js",
    "components/adapt-embeddedLink/js/jquery.jsmodal.js",
    "components/adapt-embeddedLink/js/adapt-embeddedLink.js",
    "components/adapt-focalpointGenerator/js/adapt-focalpointGenerator.js",
    "components/adapt-hotSpot/js/adapt-hotSpot.js",
    "components/adapt-iframewithedgeAnimate/js/adapt-iframewithedgeAnimate.js",
    "components/adapt-labelGenerator/js/adapt-labelGenerator.js",
    "components/adapt-narrativeWithEdgeAnimation/js/adapt-narrativeWithEdgeAnimation.js",
    "components/adapt-objectMatching/js/adapt-objectMatching.js",
    "extensions/adapt-EOM-pageLevelProgress/js/blockNumericProgressView.js",
    "extensions/adapt-EOM-pageLevelProgress/js/adapt-EOM-pageLevelProgress.js",
    "extensions/adapt-TOC/js/jquery.jsmodal.js",
    "extensions/adapt-TOC/js/TOCView.js",
    "extensions/adapt-TOC/js/TOCNavigationView.js",
    "extensions/adapt-TOC/js/adapt-TOC.js",
    "extensions/adapt-wcn/js/mediaelement-and-player.min.js",
    "extensions/adapt-WCN/js/adapt-wcnContainerView.js",
    "extensions/adapt-WCN/js/adapt-wcn.js",
    "extensions/adapt-blockAutoPlay/js/adapt-blockAutoPlay.js",
    "extensions/adapt-blockBullets/js/utils/utils.js",
    "extensions/adapt-blockBullets/js/bulletsView.js",
    "extensions/adapt-blockBullets/js/bulletsIconView.js",
    "extensions/adapt-blockBullets/js/adapt-blockBullets.js",
    "extensions/adapt-blockContentItems/js/jquery.jsmodal.js",
    "extensions/adapt-blockContentItems/js/utils/utils.js",
    "extensions/adapt-blockContentItems/js/BlockContentItemsTOCView.js",
    "extensions/adapt-blockContentItems/js/BlockContentItemsSpearkersNotesView.js",
    "extensions/adapt-blockContentItems/js/BlockContentItemsInfoView.js",
    "extensions/adapt-expandableNavBar/js/adapt-expandableNavBar.js",
    "extensions/adapt-blockContentItems/js/BlockContentItemsNavigationView.js",
    "extensions/adapt-blockContentItems/js/BlockContentItemsTOCIconView.js",
    "extensions/adapt-contrib-pageLevelProgress/js/completionCalculations.js",
    "extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView.js",
    "extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView.js",
    "extensions/adapt-blockContentItems/js/adapt-blockContentItems.js",
    "extensions/adapt-blockIdentifier/js/adapt-blockIdentifier.js",
    "extensions/adapt-blockLevelProgress/js/adapt-blockLevelProgress.js",
    "extensions/adapt-bottomnavigation/js/adapt-bottomnavigation.js",
    "extensions/adapt-contrib-assessment/js/adapt-assessmentArticleView.js",
    "extensions/adapt-contrib-assessment/js/adapt-assessmentQuestionBank.js",
    "extensions/adapt-contrib-assessment/js/adapt-assessmentArticleModel.js",
    "extensions/adapt-contrib-assessment/js/assessment.js",
    "extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension.js",
    "extensions/adapt-contrib-bookmarking/js/adapt-contrib-bookmarking.js",
    "extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView.js",
    "extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress.js",
    "extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView.js",
    "extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers.js",
    "extensions/adapt-contrib-resources/js/adapt-contrib-resources.js",
    "extensions/adapt-contrib-spoor/js/scorm/API.js",
    "extensions/adapt-contrib-spoor/js/scorm/wrapper.js",
    "extensions/adapt-contrib-spoor/js/scorm/logger.js",
    "extensions/adapt-contrib-spoor/js/scorm.js",
    "extensions/adapt-contrib-spoor/js/serializers/default.js",
    "extensions/adapt-contrib-spoor/js/serializers/scormSuspendDataSerializer.js",
    "extensions/adapt-contrib-spoor/js/serializers/questions.js",
    "extensions/adapt-contrib-spoor/js/adapt-stateful-session.js",
    "extensions/adapt-contrib-spoor/js/adapt-offlineStorage-scorm.js",
    "extensions/adapt-contrib-spoor/js/adapt-contrib-spoor.js",
    "extensions/adapt-contrib-trickle/js/Defaults/DefaultTrickleConfig.js",
    "extensions/adapt-contrib-trickle/js/DataTypes/StructureType.js",
    "extensions/adapt-contrib-trickle/js/Utility/Models.js",
    "extensions/adapt-contrib-trickle/js/trickle-tutorPlugin.js",
    "extensions/adapt-contrib-trickle/js/trickle-buttonView.js",
    "extensions/adapt-contrib-trickle/js/Defaults/FullWidthButtonConstants.js",
    "extensions/adapt-contrib-trickle/js/trickle-buttonModel.js",
    "extensions/adapt-contrib-trickle/js/trickle-buttonPlugin.js",
    "extensions/adapt-contrib-trickle/js/lib/jquery.resize.js",
    "extensions/adapt-contrib-trickle/js/adapt-contrib-trickle.js",
    "extensions/adapt-contrib-tutor/js/adapt-contrib-tutor.js",
    "extensions/adapt-didYouKnow/js/adapt-didYouKnowPopView.js",
    "extensions/adapt-didYouKnow/js/adapt-didYouKnowButtonView.js",
    "extensions/adapt-didYouKnow/js/adapt-didYouKnow.js",
    "extensions/adapt-navigationDrawer/js/adapt-navigationDrawerView.js",
    "extensions/adapt-navigationDrawer/js/adapt-navigationDrawer.js",
    "extensions/adapt-panZoom/js/jquery.panzoom.js",
    "extensions/adapt-panZoom/js/adapt-panZoomContainerView.js",
    "extensions/adapt-panZoom/js/adapt-panZoom.js",
    "extensions/adapt-progressTracking/js/helper.min.js",
    "extensions/adapt-progressTracking/js/adapt-progressTrackingView.js",
    "extensions/adapt-progressTracking/js/adapt-progressTracking.js",
    "extensions/adapt-verticalBlockSlider/js/adapt-verticalBlockSlider.js",
    "core/js/views/menuView.js",
    "menu/adapt-contrib-boxMenu/js/adapt-contrib-boxmenu.js",
    "theme/EOM/js/theme-block.js",
    "theme/EOM/js/eom.js",
    "plugins.js",
    "core/js/libraries/scrollTo.js",
    "core/js/app.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1uLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACttBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACh7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC50BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1gCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrZA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "adapt.min.js",
  "sourcesContent": [
    "//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if(\"number\"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i=\"constructor\";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION=\"1.8.3\";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w(\"length\"),k=function(n){var t=O(n);return\"number\"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),(\"number\"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),\"value\")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError(\"Bind must be called on a function\");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error(\"bindAll must be passed function names\");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=\"\"+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable(\"toString\"),I=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case\"[object RegExp]\":case\"[object String]\":return\"\"+n==\"\"+t;case\"[object Number]\":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case\"[object Date]\":case\"[object Boolean]\":return+n===+t}var i=\"[object Array]\"===u;if(!i){if(\"object\"!=typeof n||\"object\"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&\"constructor\"in n&&\"constructor\"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return\"[object Array]\"===s.call(n)},m.isObject=function(n){var t=typeof n;return\"function\"===t||\"object\"===t&&!!n},m.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],function(n){m[\"is\"+n]=function(t){return s.call(t)===\"[object \"+n+\"]\"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(m.isFunction=function(n){return\"function\"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||\"[object Boolean]\"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r=\"(?:\"+m.keys(n).join(\"|\")+\")\",e=RegExp(r),u=RegExp(r,\"g\");return function(n){return n=null==n?\"\":\"\"+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+\"\";return n?n+t:t},m.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var K=/(.)^/,z={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},D=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,L=function(n){return\"\\\\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join(\"|\")+\"|$\",\"g\"),u=0,i=\"__p+='\";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+=\"'+\\n((__t=(\"+r+\"))==null?'':_.escape(__t))+\\n'\":e?i+=\"'+\\n((__t=(\"+e+\"))==null?'':__t)+\\n'\":o&&(i+=\"';\\n\"+o+\"\\n__p+='\"),t}),i+=\"';\\n\",t.variable||(i=\"with(obj||{}){\\n\"+i+\"}\\n\"),i=\"var __t,__p='',__j=Array.prototype.join,\"+\"print=function(){__p+=__j.call(arguments,'');};\\n\"+i+\"return __p;\\n\";try{var o=new Function(t.variable||\"obj\",\"_\",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||\"obj\";return c.source=\"function(\"+f+\"){\\n\"+i+\"}\",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),\"shift\"!==n&&\"splice\"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each([\"concat\",\"join\",\"slice\"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return\"\"+this._wrapped},\"function\"==typeof define&&define.amd&&define(\"underscore\",[],function(){return m})}).call(this);\n",
    "//Backbone.js v1.2.1\n(function(t){var e=typeof self==\"object\"&&self.self==self&&self||typeof global==\"object\"&&global.global==global&&global;if(typeof define===\"function\"&&define.amd){define('backbone',[\"underscore\",\"jquery\",\"exports\"],function(i,r,s){e.Backbone=t(e,s,i,r)})}else if(typeof exports!==\"undefined\"){var i=require(\"underscore\"),r;try{r=require(\"jquery\")}catch(s){}t(e,exports,i,r)}else{e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}})(function(t,e,i,r){var s=t.Backbone;var n=[].slice;e.VERSION=\"1.2.1\";e.$=r;e.noConflict=function(){t.Backbone=s;return this};e.emulateHTTP=false;e.emulateJSON=false;var a=function(t,e,r){switch(t){case 1:return function(){return i[e](this[r])};case 2:return function(t){return i[e](this[r],t)};case 3:return function(t,s){return i[e](this[r],t,s)};case 4:return function(t,s,n){return i[e](this[r],t,s,n)};default:return function(){var t=n.call(arguments);t.unshift(this[r]);return i[e].apply(i,t)}}};var o=function(t,e,r){i.each(e,function(e,s){if(i[s])t.prototype[s]=a(e,s,r)})};var h=e.Events={};var u=/\\s+/;var l=function(t,e,r,s,n){var a=0,o;if(r&&typeof r===\"object\"){if(s!==void 0&&\"context\"in n&&n.context===void 0)n.context=s;for(o=i.keys(r);a<o.length;a++){e=t(e,o[a],r[o[a]],n)}}else if(r&&u.test(r)){for(o=r.split(u);a<o.length;a++){e=t(e,o[a],s,n)}}else{e=t(e,r,s,n)}return e};h.on=function(t,e,i){return c(this,t,e,i)};var c=function(t,e,i,r,s){t._events=l(f,t._events||{},e,i,{context:r,ctx:t,listening:s});if(s){var n=t._listeners||(t._listeners={});n[s.id]=s}return t};h.listenTo=function(t,e,r){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId(\"l\"));var n=this._listeningTo||(this._listeningTo={});var a=n[s];if(!a){var o=this._listenId||(this._listenId=i.uniqueId(\"l\"));a=n[s]={obj:t,objId:s,id:o,listeningTo:n,count:0}}c(t,e,r,this,a);return this};var f=function(t,e,i,r){if(i){var s=t[e]||(t[e]=[]);var n=r.context,a=r.ctx,o=r.listening;if(o)o.count++;s.push({callback:i,context:n,ctx:n||a,listening:o})}return t};h.off=function(t,e,i){if(!this._events)return this;this._events=l(d,this._events,t,e,{context:i,listeners:this._listeners});return this};h.stopListening=function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=t?[t._listenId]:i.keys(s);for(var a=0;a<n.length;a++){var o=s[n[a]];if(!o)break;o.obj.off(e,r,this)}if(i.isEmpty(s))this._listeningTo=void 0;return this};var d=function(t,e,r,s){if(!t)return;var n=0,a;var o=s.context,h=s.listeners;if(!e&&!r&&!o){var u=i.keys(h);for(;n<u.length;n++){a=h[u[n]];delete h[a.id];delete a.listeningTo[a.objId]}return}var l=e?[e]:i.keys(t);for(;n<l.length;n++){e=l[n];var c=t[e];if(!c)break;var f=[];for(var d=0;d<c.length;d++){var v=c[d];if(r&&r!==v.callback&&r!==v.callback._callback||o&&o!==v.context){f.push(v)}else{a=v.listening;if(a&&--a.count===0){delete h[a.id];delete a.listeningTo[a.objId]}}}if(f.length){t[e]=f}else{delete t[e]}}if(i.size(t))return t};h.once=function(t,e,r){var s=l(v,{},t,e,i.bind(this.off,this));return this.on(s,void 0,r)};h.listenToOnce=function(t,e,r){var s=l(v,{},e,r,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var v=function(t,e,r,s){if(r){var n=t[e]=i.once(function(){s(e,n);r.apply(this,arguments)});n._callback=r}return t};h.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var r=0;r<e;r++)i[r]=arguments[r+1];l(g,this._events,t,void 0,i);return this};var g=function(t,e,i,r){if(t){var s=t[e];var n=t.all;if(s&&n)n=n.slice();if(s)p(s,r);if(n)p(n,[e].concat(r))}return t};var p=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e);return}};h.bind=h.on;h.unbind=h.off;i.extend(e,h);var m=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};r=i.defaults({},r,i.result(this,\"defaults\"));this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:\"id\",cidPrefix:\"c\",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(t==null)return this;var s;if(typeof t===\"object\"){s=t;r=e}else{(s={})[t]=e}r||(r={});if(!this._validate(s,r))return false;var n=r.unset;var a=r.silent;var o=[];var h=this._changing;this._changing=true;if(!h){this._previousAttributes=i.clone(this.attributes);this.changed={}}var u=this.attributes;var l=this.changed;var c=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(var f in s){e=s[f];if(!i.isEqual(u[f],e))o.push(f);if(!i.isEqual(c[f],e)){l[f]=e}else{delete l[f]}n?delete u[f]:u[f]=e}if(!a){if(o.length)this._pending=r;for(var d=0;d<o.length;d++){this.trigger(\"change:\"+o[d],this,u[o[d]],r)}}if(h)return this;if(!a){while(this._pending){r=this._pending;this._pending=false;this.trigger(\"change\",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var r={};for(var s in t){var n=t[s];if(i.isEqual(e[s],n))continue;r[s]=n}return i.size(r)?r:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:true},t);var e=this;var r=t.success;t.success=function(i){var s=t.parse?e.parse(i,t):i;if(!e.set(s,t))return false;if(r)r.call(t.context,e,i,t);e.trigger(\"sync\",e,i,t)};q(this,t);return this.sync(\"read\",this,t)},save:function(t,e,r){var s;if(t==null||typeof t===\"object\"){s=t;r=e}else{(s={})[t]=e}r=i.extend({validate:true,parse:true},r);var n=r.wait;if(s&&!n){if(!this.set(s,r))return false}else{if(!this._validate(s,r))return false}var a=this;var o=r.success;var h=this.attributes;r.success=function(t){a.attributes=h;var e=r.parse?a.parse(t,r):t;if(n)e=i.extend({},s,e);if(e&&!a.set(e,r))return false;if(o)o.call(r.context,a,t,r);a.trigger(\"sync\",a,t,r)};q(this,r);if(s&&n)this.attributes=i.extend({},h,s);var u=this.isNew()?\"create\":r.patch?\"patch\":\"update\";if(u===\"patch\"&&!r.attrs)r.attrs=s;var l=this.sync(u,this,r);this.attributes=h;return l},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var s=t.wait;var n=function(){e.stopListening();e.trigger(\"destroy\",e,e.collection,t)};t.success=function(i){if(s)n();if(r)r.call(t.context,e,i,t);if(!e.isNew())e.trigger(\"sync\",e,i,t)};var a=false;if(this.isNew()){i.defer(t.success)}else{q(this,t);a=this.sync(\"delete\",this,t)}if(!s)n();return a},url:function(){var t=i.result(this,\"urlRoot\")||i.result(this.collection,\"url\")||M();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\\/]$/,\"$&/\")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:true},t))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger(\"invalid\",this,r,i.extend(e,{validationError:r}));return false}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};o(m,_,\"attributes\");var y=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var b={add:true,remove:true,merge:true};var x={add:true,remove:false};i.extend(y.prototype,h,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,x))},remove:function(t,e){e=i.extend({},e);var r=!i.isArray(t);t=r?[t]:i.clone(t);var s=this._removeModels(t,e);if(!e.silent&&s)this.trigger(\"update\",this,e);return r?s[0]:s},set:function(t,e){e=i.defaults({},e,b);if(e.parse&&!this._isModel(t))t=this.parse(t,e);var r=!i.isArray(t);t=r?t?[t]:[]:t.slice();var s,n,a,o,h;var u=e.at;if(u!=null)u=+u;if(u<0)u+=this.length+1;var l=this.comparator&&u==null&&e.sort!==false;var c=i.isString(this.comparator)?this.comparator:null;var f=[],d=[],v={};var g=e.add,p=e.merge,m=e.remove;var _=!l&&g&&m?[]:false;var y=false;for(var x=0;x<t.length;x++){a=t[x];if(o=this.get(a)){if(m)v[o.cid]=true;if(p&&a!==o){a=this._isModel(a)?a.attributes:a;if(e.parse)a=o.parse(a,e);o.set(a,e);if(l&&!h&&o.hasChanged(c))h=true}t[x]=o}else if(g){n=t[x]=this._prepareModel(a,e);if(!n)continue;f.push(n);this._addReference(n,e)}n=o||n;if(!n)continue;s=this.modelId(n.attributes);if(_&&(n.isNew()||!v[s])){_.push(n);y=y||!this.models[x]||n.cid!==this.models[x].cid}v[s]=true}if(m){for(var x=0;x<this.length;x++){if(!v[(n=this.models[x]).cid])d.push(n)}if(d.length)this._removeModels(d,e)}if(f.length||y){if(l)h=true;this.length+=f.length;if(u!=null){for(var x=0;x<f.length;x++){this.models.splice(u+x,0,f[x])}}else{if(_)this.models.length=0;var w=_||f;for(var x=0;x<w.length;x++){this.models.push(w[x])}}}if(h)this.sort({silent:true});if(!e.silent){var E=u!=null?i.clone(e):e;for(var x=0;x<f.length;x++){if(u!=null)E.index=u+x;(n=f[x]).trigger(\"add\",n,this,E)}if(h||y)this.trigger(\"sort\",this,e);if(f.length||d.length)this.trigger(\"update\",this,e)}return r?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var r=0;r<this.models.length;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger(\"reset\",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return n.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){var r=i.matches(t);return this[e?\"find\":\"filter\"](function(t){return r(t.attributes)})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error(\"Cannot sort a set without a comparator\");t||(t={});if(i.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(i.bind(this.comparator,this))}if(!t.silent)this.trigger(\"sort\",this,t);return this},pluck:function(t){return i.invoke(this.models,\"get\",t)},fetch:function(t){t=i.extend({parse:true},t);var e=t.success;var r=this;t.success=function(i){var s=t.reset?\"reset\":\"set\";r[s](i,t);if(e)e.call(t.context,r,i,t);r.trigger(\"sync\",r,i,t)};q(this,t);return this.sync(\"read\",this,t)},create:function(t,e){e=e?i.clone(e):{};var r=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!r)this.add(t,e);var s=this;var n=e.success;e.success=function(t,e,i){if(r)s.add(t,i);if(n)n.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||\"id\"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger(\"invalid\",this,r.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var r=0;r<t.length;r++){var s=this.get(t[r]);if(!s)continue;var n=this.indexOf(s);this.models.splice(n,1);this.length--;if(!e.silent){e.index=n;s.trigger(\"remove\",s,this,e)}i.push(s);this._removeReference(s,e)}return i.length?i:false},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);if(i!=null)this._byId[i]=t;t.on(\"all\",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off(\"all\",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t===\"add\"||t===\"remove\")&&i!==this)return;if(t===\"destroy\")this.remove(e,r);if(t===\"change\"){var s=this.modelId(e.previousAttributes());var n=this.modelId(e.attributes);if(s!==n){if(s!=null)delete this._byId[s];if(n!=null)this._byId[n]=e}}this.trigger.apply(this,arguments)}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};o(y,w,\"models\");var E=[\"groupBy\",\"countBy\",\"sortBy\",\"indexBy\"];i.each(E,function(t){if(!i[t])return;y.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var k=e.View=function(t){this.cid=i.uniqueId(\"view\");i.extend(this,i.pick(t,I));this._ensureElement();this.initialize.apply(this,arguments)};var S=/^(\\S+)\\s*(.*)$/;var I=[\"model\",\"collection\",\"el\",\"id\",\"attributes\",\"className\",\"tagName\",\"events\"];i.extend(k.prototype,h,{tagName:\"div\",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=i.result(this,\"events\"));if(!t)return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[r];if(!r)continue;var s=e.match(S);this.delegate(s[1],s[2],i.bind(r,this))}return this},delegate:function(t,e,i){this.$el.on(t+\".delegateEvents\"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(\".delegateEvents\"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+\".delegateEvents\"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,\"attributes\"));if(this.id)t.id=i.result(this,\"id\");if(this.className)t[\"class\"]=i.result(this,\"className\");this.setElement(this._createElement(i.result(this,\"tagName\")));this._setAttributes(t)}else{this.setElement(i.result(this,\"el\"))}},_setAttributes:function(t){this.$el.attr(t)}});e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:\"json\"};if(!s.url){a.url=i.result(r,\"url\")||M()}if(s.data==null&&r&&(t===\"create\"||t===\"update\"||t===\"patch\")){a.contentType=\"application/json\";a.data=JSON.stringify(s.attrs||r.toJSON(s))}if(s.emulateJSON){a.contentType=\"application/x-www-form-urlencoded\";a.data=a.data?{model:a.data}:{}}if(s.emulateHTTP&&(n===\"PUT\"||n===\"DELETE\"||n===\"PATCH\")){a.type=\"POST\";if(s.emulateJSON)a.data._method=n;var o=s.beforeSend;s.beforeSend=function(t){t.setRequestHeader(\"X-HTTP-Method-Override\",n);if(o)return o.apply(this,arguments)}}if(a.type!==\"GET\"&&!s.emulateJSON){a.processData=false}var h=s.error;s.error=function(t,e,i){s.textStatus=e;s.errorThrown=i;if(h)h.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(a,s));r.trigger(\"request\",r,u,s);return u};var T={create:\"POST\",update:\"PUT\",patch:\"PATCH\",\"delete\":\"DELETE\",read:\"GET\"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var H=/\\((.*?)\\)/g;var $=/(\\(\\?)?:\\w+/g;var A=/\\*\\w+/g;var C=/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;i.extend(P.prototype,h,{initialize:function(){},route:function(t,r,s){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){s=r;r=\"\"}if(!s)s=this[r];var n=this;e.history.route(t,function(i){var a=n._extractParameters(t,i);if(n.execute(s,a,r)!==false){n.trigger.apply(n,[\"route:\"+r].concat(a));n.trigger(\"route\",r,a);e.history.trigger(\"route\",n,r,a)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,\"routes\");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(C,\"\\\\$&\").replace(H,\"(?:$1)?\").replace($,function(t,e){return e?t:\"([^/?]+)\"}).replace(A,\"([^?]*?)\");return new RegExp(\"^\"+t+\"(?:\\\\?([\\\\s\\\\S]*))?$\")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];i.bindAll(this,\"checkUrl\");if(typeof window!==\"undefined\"){this.location=window.location;this.history=window.history}};var R=/^[#\\/]|\\s+$/g;var j=/^\\/+|\\/+$/g;var O=/#.*$/;N.started=false;i.extend(N.prototype,h,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\\/]$/,\"$&/\");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+\"/\";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,\"%2525\"))},getSearch:function(){var t=this.location.href.replace(/#.*/,\"\").match(/\\?.+/);return t?t[0]:\"\"},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:\"\"},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)===\"/\"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(R,\"\")},start:function(t){if(N.started)throw new Error(\"Backbone.history has already been started\");N.started=true;this.options=i.extend({root:\"/\"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange=\"onhashchange\"in window;this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=(\"/\"+this.root+\"/\").replace(j,\"/\");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||\"/\";this.location.replace(e+\"#\"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement(\"iframe\");this.iframe.src=\"javascript:0\";this.iframe.style.display=\"none\";this.iframe.tabIndex=-1;var r=document.body;var s=r.insertBefore(this.iframe,r.firstChild).contentWindow;s.document.open();s.document.close();s.location.hash=\"#\"+this.fragment}var n=window.addEventListener||function(t,e){return attachEvent(\"on\"+t,e)};if(this._usePushState){n(\"popstate\",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){n(\"hashchange\",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent(\"on\"+t,e)};if(this._usePushState){t(\"popstate\",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t(\"hashchange\",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){if(!this.matchRoot())return false;t=this.fragment=this.getFragment(t);return i.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||\"\");var i=this.root;if(t===\"\"||t.charAt(0)===\"?\"){i=i.slice(0,-1)||\"/\"}var r=i+t;t=this.decodeFragment(t.replace(O,\"\"));if(this.fragment===t)return;this.fragment=t;if(this._usePushState){this.history[e.replace?\"replaceState\":\"pushState\"]({},document.title,r)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;if(!e.replace){s.document.open();s.document.close()}this._updateHash(s.location,t,e.replace)}}else{return this.location.assign(r)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,\"\");t.replace(r+\"#\"+e)}else{t.hash=\"#\"+e}}});e.history=new N;var U=function(t,e){var r=this;var s;if(t&&i.has(t,\"constructor\")){s=t.constructor}else{s=function(){return r.apply(this,arguments)}}i.extend(s,r,e);var n=function(){this.constructor=s};n.prototype=r.prototype;s.prototype=new n;if(t)i.extend(s.prototype,t);s.__super__=r.prototype;return s};m.extend=y.extend=P.extend=k.extend=N.extend=U;var M=function(){throw new Error('A \"url\" property or function must be specified')};var q=function(t,e){var i=e.error;e.error=function(r){if(i)i.call(e.context,t,r,e);t.trigger(\"error\",t,r,e)}};return e});\n",
    "define('coreModels/lockingModel',[\n\t'backbone'\n], function() {\n\n\tvar set = Backbone.Model.prototype.set;\n\n\t_.extend(Backbone.Model.prototype, {\n\n\t\tset: function(attrName, attrVal, options) {\n\t\t\tvar stopProcessing = !this.lockedAttributes || typeof attrName === \"object\" || typeof attrVal !== \"boolean\" || !this.isLocking(attrName);\n\t\t\tif (stopProcessing) return set.apply(this, arguments);\n\t\t\t\n\t\t\toptions = options || {};\n\n\t\t\tvar isSettingValueForSpecificPlugin = options && options.pluginName;\n\t\t\tif (!isSettingValueForSpecificPlugin) {\n\t\t\t\tconsole.error(\"Must supply a pluginName to change a locked attribute\");\n\t\t\t\toptions.pluginName = \"compatibility\";\n\t\t\t}\n\n\t\t\tvar pluginName  = options.pluginName;\n\t\t\tif (this.defaults[attrName] !== undefined) {\n\t\t\t\tthis.lockedAttributes[attrName] = !this.defaults[attrName];\n\t\t\t}\n\t\t\tvar lockingValue = this.lockedAttributes[attrName];\n\t\t\tvar isAttemptingToLock = (lockingValue === attrVal);\n\n\t\t\tif (isAttemptingToLock) {\n\n\t\t\t\tthis.setLockState(attrName, true, {pluginName:pluginName, skipcheck: true});\n\n\t\t\t\t//console.log(options.pluginName, \"locking\", attrName, \"on\", this.get(\"_id\"));\n\t\t\t\treturn set.call(this, attrName, lockingValue);\n\n\t\t\t}\n\n\t\t\tthis.setLockState(attrName, false, {pluginName:pluginName, skipcheck: true});\n\n\t\t\tvar totalLockValue = this.getLockCount(attrName, {skipcheck: true})\n\t\t\t//console.log(options.pluginName, \"attempting to unlock\", attrName, \"on\", this.get(\"_id\"), \"lockValue\", totalLockValue, this._lockedAttributesValues[attrName]);\n\t\t\tif (totalLockValue === 0) {\n\t\t\t\t//console.log(options.pluginName, \"unlocking\", attrName, \"on\", this.get(\"_id\"));\n\t\t\t\treturn set.call(this, attrName, !lockingValue);\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetLocking: function(attrName, defaultLockValue) {\n\t\t\tif (this.isLocking(attrName)) return;\n\t\t\tif (!this.lockedAttributes) this.lockedAttributes = {};\n\t\t\tthis.lockedAttributes[attrName] = defaultLockValue;\n\t\t},\n\n\t\tunsetLocking: function(attrName) {\n\t\t\tif (!this.isLocking(attrName)) return;\n\t\t\tif (!this.lockedAttributes) return;\n\t\t\tdelete this.lockedAttributes[attrName];\n\t\t\tdelete this._lockedAttributesValues[attrName];\n\t\t\tif (_.keys(this.lockedAttributes).length === 0) {\n\t\t\t\tdelete this.lockedAttributes;\n\t\t\t\tdelete this._lockedAttributesValues;\n\t\t\t}\n\t\t},\n\n\t\tisLocking: function(attrName) {\n\t\t\tvar isCheckingGeneralLockingState = (attrName === undefined);\n\t\t\tvar isUsingLockedAttributes = (this.lockedAttributes !== undefined);\n\n\t\t\tif (isCheckingGeneralLockingState) {\n\t\t\t\treturn isUsingLockedAttributes;\n\t\t\t}\n\n\t\t\tif (!isUsingLockedAttributes) return false;\n\n\t\t\tvar isAttributeALockingAttribute = this.lockedAttributes[attrName] !== undefined;\n\t\t\tif (!isAttributeALockingAttribute) return false;\n\n\t\t\tif (this._lockedAttributesValues === undefined) {\n\t\t\t\tthis._lockedAttributesValues = {};\n\t\t\t}\n\n\t\t\tif (this._lockedAttributesValues[attrName] === undefined) {\n\t\t\t\tthis._lockedAttributesValues[attrName] = {};\t\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tisLocked: function(attrName, options) {\n\t\t\tvar shouldSkipCheck = (options && options.skipcheck);\n\t\t\tif (!shouldSkipCheck) { \n\t\t\t\tvar stopProcessing =  !this.isLocking(attrName);\n\t\t\t\tif (stopProcessing) return;\n\t\t\t}\n\n\t\t\treturn this.getLockCount(attrName) > 0;\n\t\t},\n\n\t\tgetLockCount: function(attrName, options) {\n\t\t\tvar shouldSkipCheck = (options && options.skipcheck);\n\t\t\tif (!shouldSkipCheck) { \n\t\t\t\tvar stopProcessing =  !this.isLocking(attrName);\n\t\t\t\tif (stopProcessing) return;\n\t\t\t}\n\n\t\t\tvar isGettingValueForSpecificPlugin = options && options.pluginName;\n\t\t\tif (isGettingValueForSpecificPlugin) {\n\n\t\t\t\treturn this._lockedAttributesValues[attrName][options.pluginName] ? 1 : 0;\n\t\t\t}\n\n\t\t\tvar lockingAttributeValues = _.values(this._lockedAttributesValues[attrName]);\n\t\t\tvar lockingAttributeValuesSum = _.reduce(lockingAttributeValues, function(sum, value){ return sum + (value ? 1 : 0); }, 0);\n\t\t\t\n\t\t\treturn lockingAttributeValuesSum;\n\t\t},\n\n\t\tsetLockState: function(attrName, value, options) {\n\t\t\tvar shouldSkipCheck = (options && options.skipcheck);\n\t\t\tif (!shouldSkipCheck) { \n\t\t\t\tvar stopProcessing =  !this.isLocking(attrName);\n\t\t\t\tif (stopProcessing) return this;\n\t\t\t}\n\n\t\t\tvar isSettingValueForSpecificPlugin = options && options.pluginName;\n\t\t\tif (!isSettingValueForSpecificPlugin) {\n\t\t\t\tconsole.error(\"Must supply a pluginName to set a locked attribute lock value\");\n\t\t\t\toptions.pluginName = \"compatibility\";\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tthis._lockedAttributesValues[attrName][options.pluginName] = value;\n\t\t\t} else {\n\t\t\t\tdelete this._lockedAttributesValues[attrName][options.pluginName];\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t});\n\n});\n\n",
    "/*!\n\n handlebars v2.0.0\n\nCopyright (C) 2011-2014 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n@license\n*/\n!function(a,b){\"function\"==typeof define&&define.amd?define('handlebars',[],b):\"object\"==typeof exports?module.exports=b():a.Handlebars=a.Handlebars||b()}(this,function(){var a=function(){\"use strict\";function a(a){this.string=a}var b;return a.prototype.toString=function(){return\"\"+this.string},b=a}(),b=function(a){\"use strict\";function b(a){return i[a]}function c(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function d(a){return a instanceof h?a.toString():null==a?\"\":a?(a=\"\"+a,k.test(a)?a.replace(j,b):a):a+\"\"}function e(a){return a||0===a?n(a)&&0===a.length?!0:!1:!0}function f(a,b){return(a?a+\".\":\"\")+b}var g={},h=a,i={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},j=/[&<>\"'`]/g,k=/[&<>\"'`]/;g.extend=c;var l=Object.prototype.toString;g.toString=l;var m=function(a){return\"function\"==typeof a};m(/x/)&&(m=function(a){return\"function\"==typeof a&&\"[object Function]\"===l.call(a)});var m;g.isFunction=m;var n=Array.isArray||function(a){return a&&\"object\"==typeof a?\"[object Array]\"===l.call(a):!1};return g.isArray=n,g.escapeExpression=d,g.isEmpty=e,g.appendContextPath=f,g}(a),c=function(){\"use strict\";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=\" - \"+d+\":\"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=[\"description\",\"fileName\",\"lineNumber\",\"message\",\"name\",\"number\",\"stack\"];return a.prototype=new Error,b=a}(),d=function(a,b){\"use strict\";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper(\"helperMissing\",function(){if(1===arguments.length)return void 0;throw new g(\"Missing helper: '\"+arguments[arguments.length-1].name+\"'\")}),a.registerHelper(\"blockHelperMissing\",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper(\"each\",function(a,b){if(!b)throw new g(\"Must pass iterator to #each\");var c,d,e=b.fn,h=b.inverse,i=0,j=\"\";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+\".\"),l(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&\"object\"==typeof a)if(k(a))for(var m=a.length;m>i;i++)c&&(c.index=i,c.first=0===i,c.last=i===a.length-1,d&&(c.contextPath=d+i)),j+=e(a[i],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=i,c.first=0===i,d&&(c.contextPath=d+n)),j+=e(a[n],{data:c}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper(\"if\",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper(\"unless\",function(b,c){return a.helpers[\"if\"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper(\"with\",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper(\"log\",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper(\"lookup\",function(a,b){return a&&a[b]})}var e={},f=a,g=b,h=\"2.0.0\";e.VERSION=h;var i=6;e.COMPILER_REVISION=i;var j={1:\"<= 1.0.rc.2\",2:\"== 1.0.0-rc.3\",3:\"== 1.0.0-rc.4\",4:\"== 1.x.x\",5:\"== 2.0.0-alpha.x\",6:\">= 2.0.0-beta.1\"};e.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n=\"[object Object]\";e.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g(\"Arg not supported with multiple helpers\");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){m.call(a)===n?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:\"debug\",1:\"info\",2:\"warn\",3:\"error\"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];\"undefined\"!=typeof console&&console[c]&&console[c].call(console,b)}}};e.logger=o;var p=o.log;e.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};return e.createFrame=q,e}(b,c),e=function(a,b,c){\"use strict\";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l(\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\"+d+\") or downgrade your runtime to an older version (\"+e+\").\")}throw new l(\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\"+a[1]+\").\")}}function e(a,b){if(!b)throw new l(\"No environment passed to template\");if(!a||!a.main)throw new l(\"Unknown template object: \"+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,j,m){g&&(f=k.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,j,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:j,depths:m};i[e]=b.compile(c,{data:void 0!==j,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split(\"\\n\"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join(\"\\n\")}return n}throw new l(\"The partial \"+e+\" could not be compiled when running in runtime-only mode\")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return\"function\"==typeof a?a.call(b):a},escapeExpression:k.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=k.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new l(\"must pass parent depths\");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new l(\"The partial \"+b+\" could not be found\");return a instanceof Function?a(c,h):void 0}function h(){return\"\"}function i(a,b){return b&&\"root\"in b||(b=b?o(b):{},b.root=a),b}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES,o=c.createFrame;return j.checkRevision=d,j.template=e,j.program=f,j.invokePartial=g,j.noop=h,j}(b,c,d),f=function(a,b,c,d,e){\"use strict\";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.escapeExpression=j.escapeExpression,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,m[\"default\"]=m,f=m}(d,a,c,b,e),g=function(a){\"use strict\";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d){b.call(this,d),this.type=\"program\",this.statements=a,this.strip=c},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type=\"mustache\",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped=\"{\"!==h&&\"&\"!==h}else this.escaped=!!d;this.sexpr=a instanceof e.SexprNode?a:new e.SexprNode(a,c),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type=\"sexpr\",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1);this.isHelper=!(!f.length&&!c),this.eligibleHelper=this.isHelper||e.isSimple},PartialNode:function(a,c,d,e,f){b.call(this,f),this.type=\"partial\",this.partialName=a,this.context=c,this.hash=d,this.strip=e,this.strip.inlineStandalone=!0},BlockNode:function(a,c,d,e,f){b.call(this,f),this.type=\"block\",this.mustache=a,this.program=c,this.inverse=d,this.strip=e,d&&!c&&(this.isInverse=!0)},RawBlockNode:function(a,c,f,g){if(b.call(this,g),a.sexpr.id.original!==f)throw new d(a.sexpr.id.original+\" doesn't match \"+f,this);c=new e.ContentNode(c,g),this.type=\"block\",this.mustache=a,this.program=new e.ProgramNode([c],{},g)},ContentNode:function(a,c){b.call(this,c),this.type=\"content\",this.original=this.string=a},HashNode:function(a,c){b.call(this,c),this.type=\"hash\",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type=\"ID\";for(var e=\"\",f=[],g=0,h=\"\",i=0,j=a.length;j>i;i++){var k=a[i].part;if(e+=(a[i].separator||\"\")+k,\"..\"===k||\".\"===k||\"this\"===k){if(f.length>0)throw new d(\"Invalid path: \"+e,this);\"..\"===k?(g++,h+=\"../\"):this.isScoped=!0}else f.push(k)}this.original=e,this.parts=f,this.string=f.join(\".\"),this.depth=g,this.idName=h+this.string,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type=\"PARTIAL_NAME\",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type=\"DATA\",this.id=a,this.stringModeValue=a.stringModeValue,this.idName=\"@\"+a.stringModeValue},StringNode:function(a,c){b.call(this,c),this.type=\"STRING\",this.original=this.string=this.stringModeValue=a},NumberNode:function(a,c){b.call(this,c),this.type=\"NUMBER\",this.original=this.number=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type=\"BOOLEAN\",this.bool=a,this.stringModeValue=\"true\"===a},CommentNode:function(a,c){b.call(this,c),this.type=\"comment\",this.comment=a,this.strip={inlineStandalone:!0}}};return c=e}(c),h=function(){\"use strict\";var a,b=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:\"error\",5:\"EOF\",12:\"CONTENT\",13:\"COMMENT\",15:\"END_RAW_BLOCK\",16:\"OPEN_RAW_BLOCK\",18:\"CLOSE_RAW_BLOCK\",24:\"OPEN_BLOCK\",25:\"CLOSE\",26:\"OPEN_INVERSE\",28:\"INVERSE\",29:\"OPEN_ENDBLOCK\",31:\"OPEN\",32:\"OPEN_UNESCAPED\",33:\"CLOSE_UNESCAPED\",34:\"OPEN_PARTIAL\",42:\"STRING\",43:\"NUMBER\",44:\"BOOLEAN\",45:\"OPEN_SEXPR\",46:\"CLOSE_SEXPR\",50:\"ID\",51:\"EQUALS\",52:\"DATA\",54:\"SEP\"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return d.prepareProgram(f[g-1].statements,!0),f[g-1];case 2:this.$=new d.ProgramNode(d.prepareProgram(f[g]),{},this._$);break;case 3:this.$=f[g];break;case 4:this.$=f[g];break;case 5:this.$=f[g];break;case 6:this.$=f[g];break;case 7:this.$=new d.ContentNode(f[g],this._$);break;case 8:this.$=new d.CommentNode(f[g],this._$);break;case 9:this.$=new d.RawBlockNode(f[g-2],f[g-1],f[g],this._$);break;case 10:this.$=new d.MustacheNode(f[g-1],null,\"\",\"\",this._$);break;case 11:this.$=d.prepareBlock(f[g-3],f[g-2],f[g-1],f[g],!1,this._$);break;case 12:this.$=d.prepareBlock(f[g-3],f[g-2],f[g-1],f[g],!0,this._$);break;case 13:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 14:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 15:this.$={strip:d.stripFlags(f[g-1],f[g-1]),program:f[g]};break;case 16:this.$={path:f[g-1],strip:d.stripFlags(f[g-2],f[g])};break;case 17:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 18:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 19:this.$=new d.PartialNode(f[g-3],f[g-2],f[g-1],d.stripFlags(f[g-4],f[g]),this._$);break;case 20:this.$=new d.PartialNode(f[g-2],void 0,f[g-1],d.stripFlags(f[g-3],f[g]),this._$);break;case 21:this.$=new d.SexprNode([f[g-2]].concat(f[g-1]),f[g],this._$);break;case 22:this.$=new d.SexprNode([f[g]],null,this._$);break;case 23:this.$=f[g];break;case 24:this.$=new d.StringNode(f[g],this._$);break;case 25:this.$=new d.NumberNode(f[g],this._$);break;case 26:this.$=new d.BooleanNode(f[g],this._$);break;case 27:this.$=f[g];break;case 28:f[g-1].isHelper=!0,this.$=f[g-1];break;case 29:this.$=new d.HashNode(f[g],this._$);break;case 30:this.$=[f[g-2],f[g]];break;case 31:this.$=new d.PartialNameNode(f[g],this._$);break;case 32:this.$=new d.PartialNameNode(new d.StringNode(f[g],this._$),this._$);break;case 33:this.$=new d.PartialNameNode(new d.NumberNode(f[g],this._$));break;case 34:this.$=new d.DataNode(f[g],this._$);break;case 35:this.$=new d.IdNode(f[g],this._$);break;case 36:f[g-2].push({part:f[g],separator:f[g-1]}),this.$=f[g-2];break;case 37:this.$=[{part:f[g]}];break;case 38:this.$=[];break;case 39:f[g-1].push(f[g]);break;case 48:this.$=[];break;case 49:f[g-1].push(f[g]);break;case 52:this.$=[f[g]];break;case 53:f[g-1].push(f[g])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,\"number\"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h=\"\",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,\"undefined\"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;\"function\"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||\"undefined\"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),\"undefined\"==typeof q||!q.length||!q[0]){var x=\"\";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push(\"'\"+this.terminals_[s]+\"'\");x=this.lexer.showPosition?\"Parse error on line \"+(i+1)+\":\\n\"+this.lexer.showPosition()+\"\\nExpecting \"+v.join(\", \")+\", got '\"+(this.terminals_[n]||n)+\"'\":\"Parse error on line \"+(i+1)+\": Unexpected \"+(1==n?\"end of input\":\"'\"+(this.terminals_[n]||n)+\"'\"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error(\"Parse Error: multiple actions possible at state: \"+p+\", token: \"+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),\"undefined\"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match=\"\",this.conditionStack=[\"INITIAL\"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\\r\\n?|\\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\\r\\n?|\\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\\r\\n?|\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?\"...\":\"\")+a.substr(-20).replace(/\\n/g,\"\")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?\"...\":\"\")).replace(/\\n/g,\"\")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join(\"-\");return a+this.upcomingInput()+\"\\n\"+b+\"^\"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext=\"\",this.match=\"\");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\\r\\n?|\\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\\r?\\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):\"\"===this._input?this.EOF:this.parseError(\"Lexical error on line \"+(this.yylineno+1)+\". Unrecognized text.\\n\"+this.showPosition(),{text:\"\",token:null,line:this.yylineno})},lex:function(){var a=this.next();return\"undefined\"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if(\"\\\\\\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin(\"mu\")):\"\\\\\"===b.yytext.slice(-1)?(e(0,1),this.begin(\"emu\")):this.begin(\"mu\"),b.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return b.yytext=b.yytext.substr(5,b.yyleng-9),this.popState(),15;case 4:return 12;case 5:return e(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin(\"raw\"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin(\"com\");break;case 20:return e(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return b.yytext=e(1,2).replace(/\\\\\"/g,'\"'),42;case 30:return b.yytext=e(1,2).replace(/\\\\'/g,\"'\"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return b.yytext=e(1,2),50;case 37:return\"INVALID\";case 38:return 5}},a.rules=[/^(?:[^\\x00]*?(?=(\\{\\{)))/,/^(?:[^\\x00]+)/,/^(?:[^\\x00]{2,}?(?=(\\{\\{|\\\\\\{\\{|\\\\\\\\\\{\\{|$)))/,/^(?:\\{\\{\\{\\{\\/[^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=[=}\\s\\/.])\\}\\}\\}\\})/,/^(?:[^\\x00]*?(?=(\\{\\{\\{\\{\\/)))/,/^(?:[\\s\\S]*?--\\}\\})/,/^(?:\\()/,/^(?:\\))/,/^(?:\\{\\{\\{\\{)/,/^(?:\\}\\}\\}\\})/,/^(?:\\{\\{(~)?>)/,/^(?:\\{\\{(~)?#)/,/^(?:\\{\\{(~)?\\/)/,/^(?:\\{\\{(~)?\\^\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\s*else\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\^)/,/^(?:\\{\\{(~)?\\s*else\\b)/,/^(?:\\{\\{(~)?\\{)/,/^(?:\\{\\{(~)?&)/,/^(?:\\{\\{!--)/,/^(?:\\{\\{![\\s\\S]*?\\}\\})/,/^(?:\\{\\{(~)?)/,/^(?:=)/,/^(?:\\.\\.)/,/^(?:\\.(?=([=~}\\s\\/.)])))/,/^(?:[\\/.])/,/^(?:\\s+)/,/^(?:\\}(~)?\\}\\})/,/^(?:(~)?\\}\\})/,/^(?:\"(\\\\[\"]|[^\"])*\")/,/^(?:'(\\\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\\s)])))/,/^(?:false(?=([~}\\s)])))/,/^(?:-?[0-9]+(?:\\.[0-9]+)?(?=([~}\\s)])))/,/^(?:([^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=([=~}\\s\\/.)]))))/,/^(?:\\[[^\\]]*\\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();return a=b}(),i=function(a){\"use strict\";function b(a,b){return{left:\"~\"===a.charAt(2),right:\"~\"===b.charAt(b.length-3)}}function c(a,b,c,d,i,k){if(a.sexpr.id.original!==d.path.original)throw new j(a.sexpr.id.original+\" doesn't match \"+d.path.original,a);var l=c&&c.program,m={left:a.strip.left,right:d.strip.right,openStandalone:f(b.statements),closeStandalone:e((l||b).statements)};if(a.strip.right&&g(b.statements,null,!0),l){var n=c.strip;n.left&&h(b.statements,null,!0),n.right&&g(l.statements,null,!0),d.strip.left&&h(l.statements,null,!0),e(b.statements)&&f(l.statements)&&(h(b.statements),g(l.statements))}else d.strip.left&&h(b.statements,null,!0);return i?new this.BlockNode(a,l,b,m,k):new this.BlockNode(a,b,l,m,k)}function d(a,b){for(var c=0,d=a.length;d>c;c++){var i=a[c],j=i.strip;if(j){var k=e(a,c,b,\"partial\"===i.type),l=f(a,c,b),m=j.openStandalone&&k,n=j.closeStandalone&&l,o=j.inlineStandalone&&k&&l;j.right&&g(a,c,!0),j.left&&h(a,c,!0),o&&(g(a,c),h(a,c)&&\"partial\"===i.type&&(i.indent=/([ \\t]+$)/.exec(a[c-1].original)?RegExp.$1:\"\")),m&&(g((i.program||i.inverse).statements),h(a,c)),n&&(g(a,c),h((i.inverse||i.program).statements))}}return a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?\"content\"===d.type?(e||!c?/\\r?\\n\\s*?$/:/(^|\\r?\\n)\\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?\"content\"===d.type?(e||!c?/^\\s*?\\r?\\n/:/^\\s*?(\\r?\\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&\"content\"===d.type&&(c||!d.rightStripped)){var e=d.string;d.string=d.string.replace(c?/^\\s+/:/^[ \\t]*\\r?\\n?/,\"\"),d.rightStripped=d.string!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&\"content\"===d.type&&(c||!d.leftStripped)){var e=d.string;return d.string=d.string.replace(c?/\\s+$/:/[ \\t]+$/,\"\"),d.leftStripped=d.string!==e,d.leftStripped}}var i={},j=a;return i.stripFlags=b,i.prepareBlock=c,i.prepareProgram=d,i}(c),j=function(a,b,c,d){\"use strict\";function e(a){return a.constructor===h.ProgramNode?a:(g.yy=k,g.parse(a))}var f={},g=a,h=b,i=c,j=d.extend;f.parser=g;var k={};return j(k,i,h),f.parse=e,f}(h,g,i,b),k=function(a,b){\"use strict\";function c(){}function d(a,b,c){if(null==a||\"string\"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h(\"You must pass a string or Handlebars AST to Handlebars.precompile. You passed \"+a);b=b||{},\"data\"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function e(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||\"string\"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h(\"You must pass a string or Handlebars AST to Handlebars.compile. You passed \"+a);b=b||{},\"data\"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var e,f=function(a,b){return e||(e=d()),e.call(this,a,b)};return f._setup=function(a){return e||(e=d()),e._setup(a)},f._child=function(a,b,c){return e||(e=d()),e._child(a,b,c)},f}function f(a,b){if(a===b)return!0;if(i(a)&&i(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!f(a[c],b[c]))return!1;return!0}}var g={},h=a,i=b.isArray,j=[].slice;return g.Compiler=c,c.prototype={compiler:c,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!f(d.args,e.args))return!1}for(b=this.children.length,c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,\"if\":!0,unless:!0,\"with\":!0,log:!0,lookup:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){return this[a.type](a)},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;\nthis.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);\"helper\"===f?this.helperSexpr(e,c,d):\"simple\"===f?(this.simpleSexpr(e),this.opcode(\"pushProgram\",c),this.opcode(\"pushProgram\",d),this.opcode(\"emptyHash\"),this.opcode(\"blockValue\",e.id.original)):(this.ambiguousSexpr(e,c,d),this.opcode(\"pushProgram\",c),this.opcode(\"pushProgram\",d),this.opcode(\"emptyHash\"),this.opcode(\"ambiguousBlockValue\")),this.opcode(\"append\")},hash:function(a){var b,c,d=a.pairs;for(this.opcode(\"pushHash\"),b=0,c=d.length;c>b;b++)this.pushParam(d[b][1]);for(;b--;)this.opcode(\"assignToHash\",d[b][0]);this.opcode(\"popHash\")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.hash?this.accept(a.hash):this.opcode(\"push\",\"undefined\"),a.context?this.accept(a.context):(this.opcode(\"getContext\",0),this.opcode(\"pushContext\")),this.opcode(\"invokePartial\",b.name,a.indent||\"\"),this.opcode(\"append\")},content:function(a){a.string&&this.opcode(\"appendContent\",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode(\"appendEscaped\"):this.opcode(\"append\")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode(\"getContext\",d.depth),this.opcode(\"pushProgram\",b),this.opcode(\"pushProgram\",c),this.ID(d),this.opcode(\"invokeAmbiguous\",e,f)},simpleSexpr:function(a){var b=a.id;\"DATA\"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode(\"getContext\",b.depth),this.opcode(\"pushContext\")),this.opcode(\"resolvePossibleLambda\")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode(\"invokeKnownHelper\",d.length,f);else{if(this.options.knownHelpersOnly)throw new h(\"You specified knownHelpersOnly, but used the unknown helper \"+f,a);e.falsy=!0,this.ID(e),this.opcode(\"invokeHelper\",d.length,e.original,e.isSimple)}},sexpr:function(a){var b=this.classifySexpr(a);\"simple\"===b?this.simpleSexpr(a):\"helper\"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode(\"getContext\",a.depth);var b=a.parts[0];b?this.opcode(\"lookupOnContext\",a.parts,a.falsy,a.isScoped):this.opcode(\"pushContext\")},DATA:function(a){this.options.data=!0,this.opcode(\"lookupData\",a.id.depth,a.id.parts)},STRING:function(a){this.opcode(\"pushString\",a.string)},NUMBER:function(a){this.opcode(\"pushLiteral\",a.number)},BOOLEAN:function(a){this.opcode(\"pushLiteral\",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:j.call(arguments,1)})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?\"helper\":c?\"ambiguous\":\"simple\"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){this.stringParams?(a.depth&&this.addDepth(a.depth),this.opcode(\"getContext\",a.depth||0),this.opcode(\"pushStringParam\",a.stringModeValue,a.type),\"sexpr\"===a.type&&this.sexpr(a)):(this.trackIds&&this.opcode(\"pushId\",a.type,a.idName||a.stringModeValue),this.accept(a))},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode(\"pushProgram\",b),this.opcode(\"pushProgram\",c),a.hash?this.hash(a.hash):this.opcode(\"emptyHash\"),d}},g.precompile=d,g.compile=e,g}(c,b),l=function(a,b){\"use strict\";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=b;d.prototype={nameLookup:function(a,b){return d.isValidJavaScriptVariableName(b)?a+\".\"+b:a+\"['\"+b+\"']\"},depthedLookup:function(a){return this.aliases.lookup=\"this.lookup\",'lookup(depths, \"'+a+'\")'},compilerInfo:function(){var a=f,b=g[a];return[a,b]},appendToBuffer:function(a){return this.environment.isSimple?\"return \"+a+\";\":{appendToBuffer:!0,content:a,toString:function(){return\"buffer += \"+a+\";\"}}},initializeBuffer:function(){return this.quotedString(\"\")},namespace:\"Handlebars\",compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.depths.list.length||this.options.compat;var e,f,g,i=a.opcodes;for(f=0,g=i.length;g>f;f++)e=i[f],this[e.opcode].apply(this,e.args);if(this.pushSource(\"\"),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h(\"Compile completed with content left on stack\");var j=this.createFunctionContext(d);if(this.isChild)return j;var k={compiler:this.compilerInfo(),main:j},l=this.context.programs;for(f=0,g=l.length;g>f;f++)l[f]&&(k[f]=l[f]);return this.environment.usePartial&&(k.usePartial=!0),this.options.data&&(k.useData=!0),this.useDepths&&(k.useDepths=!0),this.options.compat&&(k.compat=!0),d||(k.compiler=JSON.stringify(k.compiler),k=this.objectLiteral(k)),k},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(a){var b=\"\",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=\", \"+c.join(\", \"));for(var d in this.aliases)this.aliases.hasOwnProperty(d)&&(b+=\", \"+d+\"=\"+this.aliases[d]);var e=[\"depth0\",\"helpers\",\"partials\",\"data\"];this.useDepths&&e.push(\"depths\");var f=this.mergeSource(b);return a?(e.push(f),Function.apply(this,e)):\"function(\"+e.join(\",\")+\") {\\n  \"+f+\"}\"},mergeSource:function(a){for(var b,c,d=\"\",e=!this.forceBuffer,f=0,g=this.source.length;g>f;f++){var h=this.source[f];h.appendToBuffer?b=b?b+\"\\n    + \"+h.content:h.content:(b&&(d?d+=\"buffer += \"+b+\";\\n  \":(c=!0,d=b+\";\\n  \"),b=void 0),d+=h+\"\\n  \",this.environment.isSimple||(e=!1))}return e?(b||!d)&&(d+=\"return \"+(b||'\"\"')+\";\\n\"):(a+=\", buffer = \"+(c?\"\":this.initializeBuffer()),d+=b?\"return buffer + \"+b+\";\\n\":\"return buffer;\\n\"),a&&(d=\"var \"+a.substring(2)+(c?\"\":\";\\n  \")+d),d},blockValue:function(a){this.aliases.blockHelperMissing=\"helpers.blockHelperMissing\";var b=[this.contextName(0)];this.setupParams(a,0,b);var c=this.popStack();b.splice(1,0,c),this.push(\"blockHelperMissing.call(\"+b.join(\", \")+\")\")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing=\"helpers.blockHelperMissing\";var a=[this.contextName(0)];this.setupParams(\"\",0,a,!0),this.flushInline();var b=this.topStack();a.splice(1,0,b),this.pushSource(\"if (!\"+this.lastHelper+\") { \"+b+\" = blockHelperMissing.call(\"+a.join(\", \")+\"); }\")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.pendingContent=a},append:function(){this.flushInline();var a=this.popStack();this.pushSource(\"if (\"+a+\" != null) { \"+this.appendToBuffer(a)+\" }\"),this.environment.isSimple&&this.pushSource(\"else { \"+this.appendToBuffer(\"''\")+\" }\")},appendEscaped:function(){this.aliases.escapeExpression=\"this.escapeExpression\",this.pushSource(this.appendToBuffer(\"escapeExpression(\"+this.popStack()+\")\"))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c){var d=0,e=a.length;for(c||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[d++]));e>d;d++)this.replaceStack(function(c){var e=this.nameLookup(c,a[d],\"context\");return b?\" && \"+e:\" != null ? \"+e+\" : \"+c})},lookupData:function(a,b){a?this.pushStackLiteral(\"this.data(data, \"+a+\")\"):this.pushStackLiteral(\"data\");for(var c=b.length,d=0;c>d;d++)this.replaceStack(function(a){return\" && \"+this.nameLookup(a,b[d],\"data\")})},resolvePossibleLambda:function(){this.aliases.lambda=\"this.lambda\",this.push(\"lambda(\"+this.popStack()+\", \"+this.contextName(0)+\")\")},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),\"sexpr\"!==b&&(\"string\"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral(\"{}\"),this.trackIds&&this.push(\"{}\"),this.stringParams&&(this.push(\"{}\"),this.push(\"{}\"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(\"{\"+a.ids.join(\",\")+\"}\"),this.stringParams&&(this.push(\"{\"+a.contexts.join(\",\")+\"}\"),this.push(\"{\"+a.types.join(\",\")+\"}\")),this.push(\"{\\n    \"+a.values.join(\",\\n    \")+\"\\n  }\")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.aliases.helperMissing=\"helpers.helperMissing\";var d=this.popStack(),e=this.setupHelper(a,b),f=(c?e.name+\" || \":\"\")+d+\" || helperMissing\";this.push(\"((\"+f+\").call(\"+e.callParams+\"))\")},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+\".call(\"+c.callParams+\")\")},invokeAmbiguous:function(a,b){this.aliases.functionType='\"function\"',this.aliases.helperMissing=\"helpers.helperMissing\",this.useRegister(\"helper\");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup(\"helpers\",a,\"helper\");this.push(\"((helper = (helper = \"+e+\" || \"+c+\") != null ? helper : helperMissing\"+(d.paramsInit?\"),(\"+d.paramsInit:\"\")+\"),(typeof helper === functionType ? helper.call(\"+d.callParams+\") : helper))\")},invokePartial:function(a,b){var c=[this.nameLookup(\"partials\",a,\"partial\"),\"'\"+b+\"'\",\"'\"+a+\"'\",this.popStack(),this.popStack(),\"helpers\",\"partials\"];this.options.data?c.push(\"data\"):this.options.compat&&c.push(\"undefined\"),this.options.compat&&c.push(\"depths\"),this.push(\"this.invokePartial(\"+c.join(\", \")+\")\")},assignToHash:function(a){var b,c,d,e=this.popStack();this.trackIds&&(d=this.popStack()),this.stringParams&&(c=this.popStack(),b=this.popStack());var f=this.hash;b&&f.contexts.push(\"'\"+a+\"': \"+b),c&&f.types.push(\"'\"+a+\"': \"+c),d&&f.ids.push(\"'\"+a+\"': \"+d),f.values.push(\"'\"+a+\"': (\"+e+\")\")},pushId:function(a,b){\"ID\"===a||\"DATA\"===a?this.pushString(b):\"sexpr\"===a?this.pushStackLiteral(\"true\"):this.pushStackLiteral(\"null\")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(\"\"),h=this.context.programs.length,c.index=h,c.name=\"program\"+h,this.context.programs[h]=d.compile(c,b,this.context,!this.precompile),this.context.environments[h]=c,this.useDepths=this.useDepths||d.useDepths):(c.index=h,c.name=\"program\"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=(b.depths.list,this.useDepths),d=[b.index,\"data\"];return c&&d.push(\"depths\"),\"this.program(\"+d.join(\", \")+\")\"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return this.pushSource(b+\" = \"+a+\";\"),this.compileStack.push(b),b},replaceStack:function(a){{var b,d,e,f=\"\";this.isInline()}if(!this.isInline())throw new h(\"replaceStack on non-inline\");var g=this.popStack(!0);if(g instanceof c)f=b=g.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f=\"(\"+this.push(i)+\" = \"+g+\")\",b=this.topStack()}var j=a.call(this,b);e||this.popStack(),d&&this.stackSlot--,this.push(\"(\"+f+j+\")\")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push(\"stack\"+this.stackSlot),this.topStackName()},topStackName:function(){return\"stack\"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new h(\"Invalid stack pop\");this.stackSlot--}return d},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof c?b.value:b},contextName:function(a){return this.useDepths&&a?\"depths[\"+a+\"]\":\"depth\"+a},quotedString:function(a){return'\"'+a.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/\\u2028/g,\"\\\\u2028\").replace(/\\u2029/g,\"\\\\u2029\")+'\"'},objectLiteral:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(this.quotedString(c)+\":\"+a[c]);return\"{\"+b.join(\",\")+\"}\"},setupHelper:function(a,b,c){var d=[],e=this.setupParams(b,a,d,c),f=this.nameLookup(\"helpers\",b,\"helper\");return{params:d,paramsInit:e,name:f,callParams:[this.contextName(0)].concat(d).join(\", \")}},setupOptions:function(a,b,c){var d,e,f,g={},h=[],i=[],j=[];g.name=this.quotedString(a),g.hash=this.popStack(),this.trackIds&&(g.hashIds=this.popStack()),this.stringParams&&(g.hashTypes=this.popStack(),g.hashContexts=this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(f=\"this.noop\"),e||(e=\"this.noop\"),g.fn=f,g.inverse=e);for(var k=b;k--;)d=this.popStack(),c[k]=d,this.trackIds&&(j[k]=this.popStack()),this.stringParams&&(i[k]=this.popStack(),h[k]=this.popStack());return this.trackIds&&(g.ids=\"[\"+j.join(\",\")+\"]\"),this.stringParams&&(g.types=\"[\"+i.join(\",\")+\"]\",g.contexts=\"[\"+h.join(\",\")+\"]\"),this.options.data&&(g.data=\"data\"),g},setupParams:function(a,b,c,d){var e=this.objectLiteral(this.setupOptions(a,b,c));return d?(this.useRegister(\"options\"),c.push(\"options\"),\"options=\"+e):(c.push(e),\"\")}};for(var i=\"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield\".split(\" \"),j=d.RESERVED_WORDS={},k=0,l=i.length;l>k;k++)j[i[k]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},e=d}(d,c),m=function(a,b,c,d,e){\"use strict\";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,g[\"default\"]=g,f=g}(f,g,j,k,l);return m});\n",
    "define('coreHelpers',['require','handlebars'],function(require){\n\n    var Handlebars = require('handlebars'),\n        helpers = {\n            lowerCase: function(text) {\n                return text.toLowerCase();\n            },\n            numbers: function(index) {\n                return index +1;\n            },\n            capitalise:  function(text) {\n                return text.charAt(0).toUpperCase() + text.slice(1);\n            },\n            odd: function (index) {\n                return (index +1) % 2 === 0  ? 'even' : 'odd';\n            },\n            if_value_equals: function(value, text, block) {\n                if (value === text) {\n                    return block.fn(this);\n                } else {\n                    return block.inverse(this);\n                }\n            },\n            math: function(lvalue, operator, rvalue, options) {\n                lvalue = parseFloat(lvalue);\n                rvalue = parseFloat(rvalue);\n                switch (operator) {\n                case \"+\": return lvalue + rvalue;\n                case \"-\": return lvalue - rvalue;\n                case \"*\": return lvalue * rvalue;\n                case \"/\": return lvalue / rvalue;\n                case \"%\": return lvalue % rvalue;\n                }\n            }\n        };\n\n    for(var name in helpers) {\n       if(helpers.hasOwnProperty(name)) {\n             Handlebars.registerHelper(name, helpers[name]);\n        }\n    }\n    return helpers;\n});\n\n",
    "define('coreJS/adapt',[\n    'coreModels/lockingModel',\n    'coreHelpers'\n], function(lockingModel, Helpers) {\n\n    var AdaptModel = Backbone.Model.extend({\n\n        defaults: {\n            _canScroll: true //to stop scrollTo behaviour\n        },\n\n        lockedAttributes: {\n            _canScroll: false\n        }\n\n    });\n\n    var Adapt = new AdaptModel();\n\n    Adapt.location = {};\n    Adapt.componentStore = {};\n    var mappedIds = {};\n\n    Adapt.initialize = _.once(function() {\n        Backbone.history.start();\n        Adapt.trigger('adapt:initialize');\n    });\n\n    Adapt.scrollTo = function(selector, settings) {\n        // Get the current location - this is set in the router\n        var location = (Adapt.location._contentType) ?\n            Adapt.location._contentType : Adapt.location._currentLocation;\n        // Trigger initial scrollTo event\n        Adapt.trigger(location+':scrollTo', selector);\n        //Setup duration variable passed upon arguments\n        var settings = (settings || {});\n        var disableScrollToAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n        if (disableScrollToAnimation) {\n            settings.duration = 0;\n        }\n        else if (!settings.duration) {\n            settings.duration = $.scrollTo.defaults.duration;\n        }\n\n        var navigationHeight = $(\".navigation\").outerHeight();\n\n        if (!settings.offset) settings.offset = { top: -navigationHeight, left: 0 };\n        if (settings.offset.top === undefined) settings.offset.top = -navigationHeight;\n        if (settings.offset.left === undefined) settings.offset.left = 0;\n\n        if (settings.offset.left === 0) settings.axis = \"y\";\n\n        if (Adapt.get(\"_canScroll\") !== false) {\n        // Trigger scrollTo plugin\n        $.scrollTo(selector, settings);\n        }\n\n        // Trigger an event after animation\n        // 300 milliseconds added to make sure queue has finished\n        _.delay(function() {\n            $(selector).a11y_focus();\n            Adapt.trigger(location+':scrolledTo', selector);\n        }, settings.duration+300);\n\n    }\n\n    Adapt.navigateToElement = function(selector, settings) {\n        // Allows a selector to be passed in and Adapt will navigate to this element\n\n        // Setup settings object\n        var settings = (settings || {});\n\n        // Removes . symbol from the selector to find the model\n        var currentModelId = selector.replace(/\\./g, '');\n        var currentModel = Adapt.findById(currentModelId);\n        // Get current page to check whether this is the current page\n        var currentPage = (currentModel._siblings === 'contentObjects') ? currentModel : currentModel.findAncestor('contentObjects');\n\n        // If current page - scrollTo element\n        if (currentPage.get('_id') === Adapt.location._currentId) {\n           return Adapt.scrollTo(selector, settings);\n        }\n\n        // If the element is on another page navigate and wait until pageView:ready is fired\n        // Then scrollTo element\n        Adapt.once('pageView:ready', function() {\n            _.defer(function() {\n                Adapt.scrollTo(selector, settings)\n            })\n        });\n\n        var shouldReplaceRoute = settings.replace || false;\n\n        Backbone.history.navigate('#/id/' + currentPage.get('_id'), {trigger: true, replace: shouldReplaceRoute});\n    }\n\n    Adapt.register = function(name, object) {\n        // Used to register components\n        // Store the component view\n        if (Adapt.componentStore[name])\n            throw Error('This component already exists in your project');\n        if(!object.template) object.template = name;\n        Adapt.componentStore[name] = object;\n\n    }\n\n    // Used to map ids to collections\n    Adapt.setupMapping = function() {\n\n        // Setup course Id\n        mappedIds[Adapt.course.get('_id')] = \"course\";\n\n        // Setup each collection\n        var collections = [\"contentObjects\", \"articles\", \"blocks\", \"components\"];\n\n        for (var i = 0, len = collections.length; i < len; i++) {\n            var collection = collections[i];\n            var models = Adapt[collection].models;\n            for (var j = 0, lenj = models.length; j < lenj; j++) {\n                var model = models[j];\n                mappedIds[model.get('_id')] = collection;\n\n            }\n        }\n\n    }\n\n    Adapt.mapById = function(id) {\n        // Returns collection name that contains this models Id\n        return mappedIds[id];\n\n    }\n\n    Adapt.findById = function(id) {\n\n        // Return a model\n        // Checks if the Id passed in is the course Id\n        if (id === Adapt.course.get('_id')) {\n            return Adapt.course;\n        }\n\n        return Adapt[Adapt.mapById(id)]._byAdaptID[id][0];\n\n    }\n\n    return Adapt;\n\n});\n\n",
    " define('coreModels/routerModel',['require','backbone','coreJS/adapt'],function(require) {\n\n \tvar Backbone = require('backbone');\n \tvar Adapt = require('coreJS/adapt');\n\n \tvar RouterModel = Backbone.Model.extend({\n\n \t\tdefaults: {\n \t\t\t_canNavigate: true\n \t\t},\n\n \t\tlockedAttributes: {\n \t\t\t_canNavigate: false\n \t\t}\n \t\t\n \t});\n\n \treturn RouterModel;\n\n });\n\n",
    "define('coreViews/adaptView',['require','backbone','handlebars','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Handlebars = require('handlebars');\n    var Adapt = require('coreJS/adapt');\n\n    var AdaptView = Backbone.View.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_isVisible', this.toggleVisibility);\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.model.set('_isReady', false);\n            this._isRemoved = false;\n            this.preRender();\n            this.render();\n        },\n\n        preRender: function() {},\n\n        postRender: function() {\n            this.addChildren();\n        },\n\n        render: function() {\n            Adapt.trigger(this.constructor.type + 'View:preRender', this);\n\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[this.constructor.template];\n            this.$el.html(template(data));\n\n            _.defer(_.bind(function() {\n                // don't call postRender after remove\n                if(this._isRemoved) return;\n\n                this.postRender();\n                Adapt.trigger(this.constructor.type + 'View:postRender', this);\n            }, this));\n\n            return this;\n        },\n\n        addChildren: function() {\n            var nthChild = 0;\n            var children = this.model.getChildren();\n            var models = children.models;\n            for (var i = 0, len = models.length; i < len; i++) {\n                var model = models[i];\n                if (model.get('_isAvailable')) {\n                    nthChild ++;\n\n                    var ChildView = this.constructor.childView || Adapt.componentStore[model.get(\"_component\")];\n                    if (ChildView) {\n                        var $parentContainer = this.$(this.constructor.childContainer);\n                        model.set(\"_nthChild\", nthChild);\n                        $parentContainer.append(new ChildView({model:model}).$el);\n                    } else {\n                        throw 'The component \\'' + models[i].attributes._id + '\\'' +\n                              ' (\\'' + models[i].attributes._component + '\\')' +\n                              ' has not been installed, and so is not available in your project.';\n                    }\n                }\n            }\n        },\n\n        setReadyStatus: function() {\n            this.model.set('_isReady', true);\n        },\n\n        setCompletionStatus: function() {\n            if (this.model.get('_isVisible')) {\n                this.model.set('_isComplete', true);\n                this.model.set('_isInteractionComplete', true);\n            }\n        },\n\n        resetCompletionStatus: function(type) {\n            if (!this.model.get(\"_canReset\")) return;\n\n            var descendantComponents = this.model.findDescendants('components');\n            if (descendantComponents.length === 0) {\n                this.model.reset(type);\n            } else {\n                descendantComponents.each(function(model) {\n                    model.reset(type);\n                });\n            }\n        },\n\n        remove: function() {\n            this._isRemoved = true;\n            this.model.setOnChildren('_isReady', false);\n            this.model.set('_isReady', false);\n            this.$el.remove();\n            this.stopListening();\n            return this;\n        },\n\n        setVisibility: function() {\n            var visible = \"visibility-hidden\";\n            if (this.model.get('_isVisible')) {\n                visible = \"\";\n            }\n            return visible;\n        },\n\n        toggleVisibility: function() {\n            if (this.model.get('_isVisible')) {\n                return this.$el.removeClass('visibility-hidden');\n            }\n            this.$el.addClass('visibility-hidden');\n        }\n\n    });\n\n    return AdaptView;\n\n});\n\n",
    "define('coreViews/blockView',['require','coreViews/adaptView'],function(require) {\n\n\tvar AdaptView = require('coreViews/adaptView');\n\n    var BlockView = AdaptView.extend({\n\n        className: function() {\n            return \"block \"\n            + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility()\n            + \" nth-child-\"\n            + this.model.get(\"_nthChild\");\n        }\n\n    }, {\n        childContainer: '.component-container',\n        type: 'block',\n        template: 'block'\n    });\n\n    return BlockView;\n\n});\n\n",
    "define('coreViews/articleView',['require','coreViews/adaptView','coreViews/blockView'],function(require) {\n\n    var AdaptView = require('coreViews/adaptView');\n    var BlockView = require('coreViews/blockView');\n\n    var ArticleView = AdaptView.extend({\n\n        className: function() {\n            return \"article \"\n            + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility()\n            + \" nth-child-\"\n            + this.model.get(\"_nthChild\");\n        }\n\n    }, {\n        childContainer: '.block-container',\n        childView: BlockView,\n        type: 'article',\n        template: 'article'\n    });\n\n    return ArticleView;\n\n});\n\n",
    "define('coreViews/pageView',['require','coreViews/adaptView','coreViews/articleView','coreJS/adapt'],function(require) {\n\n    var AdaptView = require('coreViews/adaptView');\n    var ArticleView = require('coreViews/articleView');\n    var Adapt = require('coreJS/adapt');\n\n    var PageView = AdaptView.extend({\n\n        className: function() {\n            return \"page \"\n            + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility();\n        },\n\n        preRender: function() {\n            this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n            this.$el.css('opacity', 0);\n            this.listenTo(this.model, 'change:_isReady', this.isReady);\n        },\n\n        isReady: function() {\n            if (this.model.get('_isReady')) {\n                _.defer(_.bind(function() {\n                    $('.loading').hide();\n                    $(window).scrollTop(0);\n                    Adapt.trigger('pageView:ready', this);\n                    var styleOptions = { opacity: 1 };\n                    if (this.disableAnimation) {\n                        this.$el.css(styleOptions)\n                    } else {\n                        this.$el.velocity(styleOptions, 'fast');\n                    }\n                    $(window).scroll();\n                }, this));\n            }\n        }\n\n    }, {\n        childContainer: '.article-container',\n        childView: ArticleView,\n        type: 'page',\n        template: 'page'\n    });\n\n    return PageView;\n\n});\n\n",
    "define('coreJS/router',[\n    'coreJS/adapt',\n    'coreModels/routerModel',\n    'coreViews/pageView',\n], function(Adapt, RouterModel, PageView) {\n\n    Adapt.router = new RouterModel(null, {reset: true});\n\n    var Router = Backbone.Router.extend({\n\n        initialize: function() {\n            this.showLoading();\n            // Store #wrapper element to cache for later\n            this.$wrapper = $('#wrapper');\n            Adapt.once('app:dataReady', function() {\n                document.title = Adapt.course.get('title');\n            });\n            this.listenTo(Adapt, 'navigation:backButton', this.navigateToPreviousRoute);\n            this.listenTo(Adapt, 'navigation:homeButton', this.navigateToHomeRoute);\n            this.listenTo(Adapt, 'navigation:parentButton', this.navigateToParent);\n            this.listenTo(Adapt, \"router:navigateTo\", this.navigateToArguments);\n        },\n\n        routes: {\n            \"\":\"handleRoute\",\n            \"id/:id\":\"handleRoute\",\n            \":pluginName(/*location)(/*action)\": \"handleRoute\"\n        },\n\n        handleRoute: function() {\n            var args = [].slice.call(arguments, 0, arguments.length);\n            if (arguments[arguments.length-1] === null) args.pop();\n\n            //check if the current page is in the progress of navigating to itself\n            //it will redirect to itself if the url was changed and _canNavigate is false\n            if (!this._isCircularNavigationInProgress) {\n                //trigger an event pre 'router:location' to allow extensions to stop routing\n                Adapt.trigger(\"router:navigate\", arguments);\n            }\n\n            if (Adapt.router.get('_canNavigate')) {\n                \n                //disable navigation whilst rendering\n                Adapt.router.set('_canNavigate', false, {pluginName: \"adapt\"});\n\n                //only navigate if this switch is set\n                switch (args.length) {\n                case 1:\n                    //if only one parameter assume id\n                    return this.handleId.apply(this, arguments);\n                case 2:\n                    //if two parameters assume plugin\n                    return this.handlePluginRouter.apply(this, arguments);\n                }\n                //if < 1 || > 2 parameters, route to course\n                return this.handleCourse();\n            }\n\n            \n            if (this._isCircularNavigationInProgress) {\n                //navigation correction finished\n                //router has successfully renavigated to the current id as the url was changed whilst _canNavigate: false\n                delete this._isCircularNavigationInProgress;\n                return;\n            }\n            \n            //cancel navigation to stay at current location\n            this._isCircularNavigationInProgress = true;\n            Adapt.trigger(\"router:navigationCancelled\", arguments);\n\n            //reset url to current one\n            this.navigateToCurrentRoute(true);\n\n        },\n\n        handlePluginRouter: function(pluginName, location, action) {\n            var pluginLocation = pluginName;\n            if (location) {\n                pluginLocation = pluginLocation + '-' +location;\n                if (action) {\n                    pluginLocation = pluginLocation + '-' + action;\n                }\n            }\n            this.updateLocation(pluginLocation);\n            Adapt.trigger('router:plugin:' + pluginName, pluginName, location, action);\n            Adapt.trigger('router:plugin', pluginName, location, action);\n        },\n\n        handleCourse: function() {\n            this.showLoading();\n            this.removeViews();\n            Adapt.course.set('_isReady', false);\n            this.setContentObjectToVisited(Adapt.course);\n            this.updateLocation('course');\n            Adapt.once('menuView:ready', function() {\n                //allow navigation\n                Adapt.router.set('_canNavigate', true, {pluginName: \"adapt\"});\n            });\n            Adapt.trigger('router:menu', Adapt.course);\n        },\n\n        handleId: function(id) {\n\n            var currentModel = Adapt.findById(id);\n\n            switch (currentModel.get('_type')) {\n                case 'page': case 'menu':\n                    this.showLoading();\n                    this.removeViews();\n\n                    this.setContentObjectToVisited(currentModel);\n\n                    if (currentModel.get('_type') == 'page') {\n                        var location = 'page-' + id;\n                        this.updateLocation(location, 'page', id);\n                        Adapt.once('pageView:ready', function() {\n                            //allow navigation\n                            Adapt.router.set('_canNavigate', true, {pluginName: \"adapt\"});\n                        });\n                        Adapt.trigger('router:page', currentModel);\n                        this.$wrapper.append(new PageView({model:currentModel}).$el);\n                    } else {\n                        var location = 'menu-' + id;\n                        this.updateLocation(location, 'menu', id);\n                        Adapt.once('menuView:ready', function() {\n                            //allow navigation\n                            Adapt.router.set('_canNavigate', true, {pluginName: \"adapt\"});\n                        });\n                        Adapt.trigger('router:menu', currentModel);\n                    }\n                break;\n                default:\n                    //allow navigation\n                    Adapt.router.set('_canNavigate', true, {pluginName: \"adapt\"});\n                    Adapt.navigateToElement('.' + id, {replace:true});\n            }\n        },\n\n        removeViews: function() {\n            Adapt.trigger('remove');\n        },\n\n        showLoading: function() {\n            $('.loading').show();\n        },\n        \n        navigateToArguments: function(args) {\n            args = [].slice.call(args, 0, args.length);\n            if (args[args.length-1] === null) args.pop();\n            switch (args.length) {\n            case 0:\n                this.navigate(\"#/\", {trigger:false, replace:false});\n                break;\n            case 1:\n                var foundId = false;\n                try {\n                    Adapt.findById(args[0]);\n                    foundId = true;\n                } catch(e) {\n\n                }\n                if (foundId) {\n                    this.navigate(\"#/id/\"+args[0], {trigger:false, replace:false});\n                } else {\n                    this.navigate(\"#/\"+args[0], {trigger:false, replace:false});\n                }\n                break;\n            case 2:\n                this.navigate(\"#/\"+args[0]+\"/\"+args[1], {trigger:false, replace:false});\n                break;\n            case 3:\n                this.navigate(\"#/\"+args[0]+\"/\"+args[1]+\"/\"+args[2], {trigger:false, replace:false});\n                break;\n            }\n            this.handleRoute.apply(this, args);\n        },\n\n        navigateToPreviousRoute: function(force) {\n            // Sometimes a plugin might want to stop the default navigation\n            // Check whether default navigation has changed\n            if (Adapt.router.get('_canNavigate') || force) {\n                if (!Adapt.location._currentId) {\n                    return Backbone.history.history.back();\n                }\n                if (Adapt.location._previousContentType === \"page\" && Adapt.location._contentType === \"menu\") {\n                    return this.navigateToParent();\n                }\n                if (Adapt.location._previousContentType === \"page\") {\n                    return Backbone.history.history.back();\n                }\n                if (Adapt.location._currentLocation === 'course') {\n                    return;\n                }\n                this.navigateToParent();\n            }\n        },\n        \n        navigateToHomeRoute: function(force) {\n            if (Adapt.router.get('_canNavigate') || force ) {\n                this.navigate('#', {trigger: true});                \n            }\n        },\n\n        navigateToCurrentRoute: function(force) {\n            \n            if (Adapt.router.get('_canNavigate') || force) {\n                if (!Adapt.location._currentId) {\n                    return;\n                }\n                var currentId = Adapt.location._currentId;\n                var route = (currentId === Adapt.course.get(\"_id\")) ? \"#/\" : \"#/id/\" + currentId;\n                this.navigate(route, { trigger: true, replace: true });\n            }\n        },\n\n        navigateToParent: function() {\n            var parentId = Adapt.contentObjects.findWhere({_id:Adapt.location._currentId}).get(\"_parentId\");\n            var route = (parentId === Adapt.course.get(\"_id\")) ? \"#/\" : \"#/id/\" + parentId;\n            this.navigate(route, { trigger: true });\n        },\n\n        setContentObjectToVisited: function(model) {\n            model.set('_isVisited', true);\n        },\n\n        updateLocation: function(currentLocation, type, id) {\n            // Handles updating the location\n            Adapt.location._previousId = Adapt.location._currentId;\n            Adapt.location._previousContentType = Adapt.location._contentType;\n\n            if (currentLocation === 'course') {\n                Adapt.location._currentId = Adapt.course.get('_id');\n                Adapt.location._contentType = 'menu';\n                Adapt.location._lastVisitedMenu = currentLocation;\n            } else if (!type) {\n                Adapt.location._currentId = null;\n                Adapt.location._contentType = null;\n\n            } else if (arguments.length === 3) {\n                Adapt.location._currentId = id;\n                Adapt.location._contentType = type;\n                if (type === 'menu') {\n                    Adapt.location._lastVisitedType = 'menu';\n                    Adapt.location._lastVisitedMenu = id;\n                } else if (type === 'page') {\n                    Adapt.location._lastVisitedType = 'page';\n                    Adapt.location._lastVisitedPage = id;\n                }\n            }\n\n            Adapt.location._currentLocation = currentLocation;\n\n            var classes = (Adapt.location._currentId) ? 'location-'\n                    + Adapt.location._contentType\n                    + ' location-id-'\n                    + Adapt.location._currentId :\n                    'location-' + Adapt.location._currentLocation;\n            this.$wrapper\n                .removeClass()\n                .addClass(classes)\n                .attr('data-location', Adapt.location._currentLocation);\n\n            this.setDocumentTitle();\n\n            // Trigger event when location changes\n            Adapt.trigger('router:location', Adapt.location);\n        },\n\n        setDocumentTitle: function() {\n            if (!Adapt.location._currentId) return;\n\n            var currentModel = Adapt.findById(Adapt.location._currentId);\n\n            var pageTitle = \"\";\n            if (currentModel && currentModel.get(\"_type\") !== \"course\") {\n                var currentTitle = currentModel.get(\"title\");\n                if (currentTitle) pageTitle = \" | \" + currentTitle;\n            }\n\n            var courseTitle = Adapt.course.get(\"title\");\n            var documentTitle = $(\"<div>\" + courseTitle + pageTitle + \"</div>\").text();\n\n            Adapt.once(\"pageView:ready menuView:ready\", function() {\n                document.title = documentTitle;\n            });\n\n        }\n\n\n    });\n\n    return new Router({model: new Backbone.Model()});\n\n});\n\n",
    "define('coreViews/drawerView',['require','backbone','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var DrawerView = Backbone.View.extend({\n\n        className: 'drawer display-none',\n        disableAnimation: false,\n        escapeKeyAttached: false,\n\n        initialize: function() {\n            this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n            this._isVisible = false;\n            this.drawerDir = 'right';\n            if(Adapt.config.get('_defaultDirection')=='rtl'){//on RTL drawer on the left\n                this.drawerDir = 'left';\n            }\n            this.setupEventListeners();\n            this.render();\n            this.drawerDuration = Adapt.config.get('_drawer')._duration;\n            this.drawerDuration = (this.drawerDuration) ? this.drawerDuration : 400;\n            // Setup cached selectors\n            this.$wrapper = $('#wrapper');\n        },\n\n        setupEventListeners: function() {\n            this.listenTo(Adapt, 'navigation:toggleDrawer', this.toggleDrawer);\n            this.listenTo(Adapt, 'drawer:triggerCustomView', this.openCustomView);\n            this.listenToOnce(Adapt, 'adapt:initialize', this.checkIfDrawerIsAvailable);\n            this.listenTo(Adapt, 'drawer:closeDrawer', this.onCloseDrawer);\n            this.listenTo(Adapt, 'remove', this.onCloseDrawer);\n            this.listenTo(Adapt, 'accessibility:toggle', this.onAccessibilityToggle);\n            this._onKeyUp = _.bind(this.onKeyUp, this);\n            this.setupEscapeKey();\n        },\n\n        setupEscapeKey: function() {\n            var hasAccessibility = Adapt.config.has('_accessibility') && Adapt.config.get('_accessibility')._isEnabled;\n\n            if (!hasAccessibility && ! this.escapeKeyAttached) {\n                $(window).on(\"keyup\", this._onKeyUp);\n                this.escapeKeyAttached = true;\n            } else {\n                $(window).off(\"keyup\", this._onKeyUp);\n                this.escapeKeyAttached = false;\n            }\n        },\n\n        onAccessibilityToggle: function() {\n            this.setupEscapeKey();\n        },\n\n        onKeyUp: function(event) {\n            if (event.which != 27) return;\n            event.preventDefault();\n\n            this.onCloseDrawer();\n        },\n\n        events: {\n            'click .drawer-back': 'onBackButtonClicked',\n            'click .drawer-close':'onCloseDrawer'\n        },\n\n        render: function() {\n            var template = Handlebars.templates['drawer']\n            $(this.el).html(template({_globals: Adapt.course.get(\"_globals\")})).prependTo('body');\n            var shadowTemplate = Handlebars.templates['shadow'];\n            $(shadowTemplate()).prependTo('body');\n            // Set defer on post render\n            _.defer(_.bind(function() {\n                this.postRender();\n            }, this));\n            return this;\n        },\n\n        // Set tabindex for select elements\n        postRender: function() {\n            this.$('a, button, input, select, textarea').attr('tabindex', -1);\n        },\n\n        openCustomView: function(view, hasBackButton) {\n            // Set whether back button should display\n            this._hasBackButton = hasBackButton;\n            this._isCustomViewVisible = true;\n            Adapt.trigger('drawer:empty');\n            this.showDrawer();\n            this.$('.drawer-holder').html(view);\n        },\n\n        checkIfDrawerIsAvailable: function() {\n            if(this.collection.length == 0) {\n                $('.navigation-drawer-toggle-button').addClass('display-none');\n                Adapt.trigger('drawer:noItems');\n            }\n        },\n\n        onBackButtonClicked: function(event) {\n            event.preventDefault();\n            this.showDrawer(true);\n        },\n\n        onCloseDrawer: function(event) {\n            if (event) {\n                event.preventDefault();\n            }\n            this.hideDrawer();\n        },\n\n        toggleDrawer: function() {\n            if (this._isVisible && this._isCustomViewVisible === false) {\n                this.hideDrawer();\n            } else {\n                this.showDrawer(true);\n            }\n        },\n\n        showDrawer: function(emptyDrawer) {\n            this.$el.removeClass('display-none');\n            //only trigger popup:opened if drawer is visible, pass popup manager drawer element\n            if (!this._isVisible) {\n                Adapt.trigger('popup:opened', this.$el);\n                $('body').scrollDisable();\n                this._isVisible = true;\n            }\n\n            var drawerWidth = this.$el.width();\n            // Sets tab index to 0 for all tabbable elements in Drawer\n            this.$('a, button, input, select, textarea').attr('tabindex', 0);\n\n            if (emptyDrawer) {\n                this.$('.drawer-back').addClass('display-none');\n                this._isCustomViewVisible = false;\n                this.emptyDrawer();\n                if(this.collection.models.length === 1) {\n                    Adapt.trigger(this.collection.models[0].get('eventCallback'));\n                } else {\n                    this.renderItems();\n                    Adapt.trigger('drawer:openedItemView');\n                }\n            } else {\n                if (this._hasBackButton && this.collection.models.length > 1) {\n                    this.$('.drawer-back').removeClass('display-none');\n                } else {\n                    this.$('.drawer-back').addClass('display-none');\n                }\n                Adapt.trigger('drawer:openedCustomView');\n            }\n\n            //delay drawer animation until after background fadeout animation is complete\n            if (this.disableAnimation) {\n                $('#shadow').removeClass(\"display-none\");\n\n                var direction={};\n                direction[this.drawerDir]=0;\n                this.$el.css(direction);\n                complete.call(this);\n                \n            } else {\n\n                $('#shadow').velocity({opacity:1},{duration:this.drawerDuration, begin: _.bind(function() {\n                    $(\"#shadow\").removeClass(\"display-none\");\n                    complete.call(this);\n                }, this)});\n\n                var showEasingAnimation = Adapt.config.get('_drawer')._showEasing;\n                var easing = (showEasingAnimation) ? showEasingAnimation : 'easeOutQuart';\n                var direction={};\n                direction[this.drawerDir]=0;\n                this.$el.velocity(direction, this.drawerDuration, easing);\n\n            }\n\n            function complete() {\n                this.addShadowEvent();\n                Adapt.trigger('drawer:opened');\n                \n                //focus on first tabbable element in drawer\n                this.$el.a11y_focus();\n\t\t\t}\n\n        },\n\n        emptyDrawer: function() {\n            this.$('.drawer-holder').empty();\n        },\n\n        renderItems: function() {\n            Adapt.trigger('drawer:empty');\n            this.emptyDrawer();\n            var models = this.collection.models;\n            for (var i = 0, len = models.length; i < len; i++) {\n                var item = models[i];\n                new DrawerItemView({model: item});\n            }\n        },\n\n        hideDrawer: function() {\n            //only trigger popup:closed if drawer is visible\n            if (this._isVisible) {\n                Adapt.trigger('popup:closed');\n                this._isVisible = false;\n                $('body').scrollEnable();\n            } else {\n                return;\n            }\n\n            if (this.disableAnimation) {\n\n                var direction={};\n                direction[this.drawerDir]=-this.$el.width();\n                this.$el.css(direction).addClass('display-none');\n\n                $('#shadow').addClass(\"display-none\");\n\n                Adapt.trigger('drawer:closed');\n\n            } else {\n\n                var showEasingAnimation = Adapt.config.get('_drawer')._hideEasing;\n                var easing = (showEasingAnimation) ? showEasingAnimation : 'easeOutQuart';\n\n                var direction={};\n                direction[this.drawerDir]=-this.$el.width();\n                this.$el.velocity(direction, this.drawerDuration, easing, _.bind(function() {\n                    this.$el.addClass('display-none');\n                    Adapt.trigger('drawer:closed');\n                }, this));\n\n                $('#shadow').velocity({opacity:0}, {duration:this.drawerDuration, complete:function() {\n                    $('#shadow').addClass(\"display-none\");\n                }});\n\n            }\n\n            this._isCustomViewVisible = false;\n            this.removeShadowEvent();\n\n\n        },\n\n        addShadowEvent: function() {\n            $('#shadow').one('click touchstart', _.bind(function() {\n                this.onCloseDrawer();\n            }, this));\n        },\n\n        removeShadowEvent: function() {\n            $('#shadow').off('click touchstart');\n        }\n\n    });\n\n    var DrawerItemView = Backbone.View.extend({\n\n        className: 'drawer-item',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'drawer:empty', this.remove);\n            this.render();\n        },\n\n        events: {\n            'click .drawer-item-open': 'onDrawerItemClicked'\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates['drawerItem']\n            $(this.el).html(template(data)).appendTo('.drawer-holder');\n            return this;\n        },\n\n        onDrawerItemClicked: function(event) {\n            event.preventDefault();\n            var eventCallback = this.model.get('eventCallback');\n            Adapt.trigger(eventCallback);\n        }\n    });\n\n    return DrawerView;\n});\n\n",
    "define('coreJS/drawer',['require','coreViews/drawerView','coreJS/adapt'],function(require) {\n\n\tvar DrawerView = require('coreViews/drawerView');\n\tvar DrawerCollection = new Backbone.Collection();\n\tvar Adapt = require('coreJS/adapt');\n\n\tvar Drawer = {};\n\n\tDrawer.addItem = function(drawerObject, eventCallback) {\n\t\tdrawerObject.eventCallback = eventCallback;\n\t\tDrawerCollection.add(drawerObject);\n\t}\n\n\tDrawer.triggerCustomView = function(view, hasBackButton) {\n\t\tif (hasBackButton !== false) {\n\t\t\thasBackButton = true;\n\t\t}\n\t\tAdapt.trigger('drawer:triggerCustomView', view, hasBackButton);\n\t}\n\n\tvar init = function() {\n\t\tnew DrawerView({collection: DrawerCollection});\n\t}\n\n\tAdapt.once('app:dataReady', function() {\n\t\tinit();\n\t})\n\n\tAdapt.drawer = Drawer;\n\n});\n\n",
    "/*!\n  * Bowser - a browser detector - v0.7.2\n  * https://github.com/ded/bowser\n  * MIT License | (c) Dustin Diaz 2014\n  */\n!function(e,t){typeof module!=\"undefined\"&&module.exports?module.exports.browser=t():typeof define==\"function\"&&define.amd?define('coreJS/libraries/bowser',t):this[e]=t()}(\"bowser\",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||\"\"}var r=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(t),s=!i&&/android/i.test(t),o=n(/version\\/(\\d+(\\.\\d+)?)/i),u=/tablet/i.test(t),a=!u&&/[^-]mobi/i.test(t),f;/opera|opr/i.test(t)?f={name:\"Opera\",opera:e,version:o||n(/(?:opera|opr)[\\s\\/](\\d+(\\.\\d+)?)/i)}:/windows phone/i.test(t)?f={name:\"Windows Phone\",windowsphone:e,msie:e,version:n(/iemobile\\/(\\d+(\\.\\d+)?)/i)}:/msie|trident/i.test(t)?f={name:\"Internet Explorer\",msie:e,version:n(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)}:/chrome|crios|crmo/i.test(t)?f={name:\"Chrome\",chrome:e,version:n(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)}:r?(f={name:r==\"iphone\"?\"iPhone\":r==\"ipad\"?\"iPad\":\"iPod\"},o&&(f.version=o)):/sailfish/i.test(t)?f={name:\"Sailfish\",sailfish:e,version:n(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)}:/seamonkey\\//i.test(t)?f={name:\"SeaMonkey\",seamonkey:e,version:n(/seamonkey\\/(\\d+(\\.\\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(f={name:\"Firefox\",firefox:e,version:n(/(?:firefox|iceweasel)[ \\/](\\d+(\\.\\d+)?)/i)},/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(t)&&(f.firefoxos=e)):/silk/i.test(t)?f={name:\"Amazon Silk\",silk:e,version:n(/silk\\/(\\d+(\\.\\d+)?)/i)}:s?f={name:\"Android\",version:o}:/phantom/i.test(t)?f={name:\"PhantomJS\",phantom:e,version:n(/phantomjs\\/(\\d+(\\.\\d+)?)/i)}:/blackberry|\\bbb\\d+/i.test(t)||/rim\\stablet/i.test(t)?f={name:\"BlackBerry\",blackberry:e,version:o||n(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)}:/(web|hpw)os/i.test(t)?(f={name:\"WebOS\",webos:e,version:o||n(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)},/touchpad\\//i.test(t)&&(f.touchpad=e)):/bada/i.test(t)?f={name:\"Bada\",bada:e,version:n(/dolfin\\/(\\d+(\\.\\d+)?)/i)}:/tizen/i.test(t)?f={name:\"Tizen\",tizen:e,version:n(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i)||o}:/safari/i.test(t)?f={name:\"Safari\",safari:e,version:o}:f={},/(apple)?webkit/i.test(t)?(f.name=f.name||\"Webkit\",f.webkit=e,!f.version&&o&&(f.version=o)):!f.opera&&/gecko\\//i.test(t)&&(f.name=f.name||\"Gecko\",f.gecko=e,f.version=f.version||n(/gecko\\/(\\d+(\\.\\d+)?)/i)),s||f.silk?f.android=e:r&&(f[r]=e,f.ios=e);var l=\"\";r?(l=n(/os (\\d+([_\\s]\\d+)*) like mac os x/i),l=l.replace(/[_\\s]/g,\".\")):s?l=n(/android[ \\/-](\\d+(\\.\\d+)*)/i):f.windowsphone?l=n(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i):f.webos?l=n(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i):f.blackberry?l=n(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i):f.bada?l=n(/bada\\/(\\d+(\\.\\d+)*)/i):f.tizen&&(l=n(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i)),l&&(f.osversion=l);var c=l.split(\".\")[0];if(u||r==\"ipad\"||s&&(c==3||c==4&&!a)||f.silk)f.tablet=e;else if(a||r==\"iphone\"||r==\"ipod\"||s||f.blackberry||f.webos||f.bada)f.mobile=e;return f.msie&&f.version>=10||f.chrome&&f.version>=20||f.firefox&&f.version>=20||f.safari&&f.version>=6||f.opera&&f.version>=10||f.ios&&f.osversion&&f.osversion.split(\".\")[0]>=6||f.blackberry&&f.version>=10.1?f.a=e:f.msie&&f.version<10||f.chrome&&f.version<20||f.firefox&&f.version<20||f.safari&&f.version<6||f.opera&&f.version<10||f.ios&&f.osversion&&f.osversion.split(\".\")[0]<6?f.c=e:f.x=e,f}var e=!0,n=t(typeof navigator!=\"undefined\"?navigator.userAgent:\"\");return n._detect=t,n});\n",
    "define('coreJS/device',['require','coreJS/adapt','coreJS/libraries/bowser'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Bowser = require('coreJS/libraries/bowser');\n\n    Adapt.device = {};\n\n    var $window = $(window);\n\n    // Check whether device is touch enabled\n    Adapt.device.touch = Modernizr.touch;\n\n    Adapt.once('app:dataReady', function() {\n        // The theme.json will have been loaded at this point\n        Adapt.device.screenSize = checkScreenSize();\n\n        $('html').addClass(\"size-\"+Adapt.device.screenSize);\n    });\n\n    Adapt.device.screenWidth = $window.width();\n\n    function checkScreenSize() {\n\n        var screenSize;\n\n        if (Adapt.device.screenWidth > Adapt.config.get('screenSize').medium) {\n            screenSize = 'large';\n        } else if (Adapt.device.screenWidth > Adapt.config.get('screenSize').small) {\n            screenSize = 'medium';\n        } else {\n            screenSize = 'small';\n        }\n        return screenSize;\n    }\n\n    var onWindowResize = _.debounce(function onScreenSizeChanged() {\n        Adapt.device.screenWidth = window.innerWidth || $window.width();\n        var newScreenSize = checkScreenSize();\n\n        if (newScreenSize !== Adapt.device.screenSize) {\n            Adapt.device.screenSize = newScreenSize;\n\n            $('html').removeClass(\"size-small size-medium size-large\").addClass(\"size-\"+Adapt.device.screenSize);\n\n            Adapt.trigger('device:changed', Adapt.device.screenSize);\n        }\n\n\tAdapt.trigger('device:resize', Adapt.device.screenWidth);\n\n    }, 100);\n\n    $window.on('resize', onWindowResize);\n\n    var browser = Bowser.name;\n    var version = Bowser.version;\n    var OS = Bowser.osversion;\n\n    // Bowser only checks against navigator.userAgent so if the OS is undefined, do a check on the navigator.platform\n    if (OS == undefined) OS = getPlatform();\n\n    function getPlatform() {\n\n        var platform = navigator.platform;\n\n        if (platform.indexOf(\"Win\") != -1) {\n            return \"Windows\";\n        } else if (platform.indexOf(\"Mac\") != -1) {\n            return \"Mac\";\n        } else if (platform.indexOf(\"Linux\") != -1) {\n            return \"Linux\";\n        }\n\n        return \"PlatformUnknown\";\n\n    }\n\n    function pixelDensity() {\n        var fltPixelDensity = ( window.devicePixelRatio || 1 );\n\n        if( fltPixelDensity >= 3 ) {\n            return 'ultra-high';\n        } else if( fltPixelDensity >= 2 ) {\n            return 'high';\n        } else if( fltPixelDensity >= 1.5 ) {\n            return 'medium';\n        } else {\n            return 'low';\n        }\n    }\n\n    var browserString = browser + \" version-\" + version + \" OS-\" + OS;\n\t/* MAKE DEVICE IDENTIFICATION UNIFORM CASE */\n    Adapt.device.browser = browser ? browser.toLowerCase() : \"\";\n    Adapt.device.version = version ? version.toLowerCase() : \"\";\n    Adapt.device.OS = OS ? OS.toLowerCase() : \"\";\n    browserString = browserString.replace(\"Internet Explorer\", \"ie\");\n\n    $(\"html\").addClass(browserString + ' pixel-density-' + pixelDensity());\n\n});\n\n",
    "define('coreJS/popupManager',['require','coreJS/adapt'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n\n    Adapt.on('popup:opened', function($element) {\n\n\t\t//capture currently active element or element specified\n        var $activeElement = $element || $(document.activeElement);\n\n        //save tab indexes\n        $activeElement.a11y_popup();\n    });\n\n    Adapt.on('popup:closed', function() {\n\n        //restore tab indexes\n        $.a11y_popdown();\n\n    });\n\n});\n\n",
    "define('coreViews/notifyView',['require','coreJS/adapt'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n\n    var NotifyView = Backbone.View.extend({\n\n        className: 'notify',\n        disableAnimation: false,\n        escapeKeyAttached: false,\n\n        initialize: function() {\n            this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n\n            this.setupEventListeners();\n\n            //include accessibility globals in notify model\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.render();\n        },\n\n        setupEventListeners: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(Adapt, 'device:resize', this.resetNotifySize);\n            this.listenTo(Adapt, 'accessibility:toggle', this.onAccessibilityToggle);\n            this._onKeyUp = _.bind(this.onKeyUp, this);\n            this.setupEscapeKey();\n        },\n\n        setupEscapeKey: function() {\n            var hasAccessibility = Adapt.config.has('_accessibility') && Adapt.config.get('_accessibility')._isActive;\n\n            if (!hasAccessibility && ! this.escapeKeyAttached) {\n                $(window).on(\"keyup\", this._onKeyUp);\n                this.escapeKeyAttached = true;\n            } else {\n                $(window).off(\"keyup\", this._onKeyUp);\n                this.escapeKeyAttached = false;\n            }\n        },\n\n        onAccessibilityToggle: function() {\n            this.setupEscapeKey();\n        },\n\n        onKeyUp: function(event) {\n            if (event.which != 27) return;\n            event.preventDefault();\n\n            this.closeNotify();\n            Adapt.trigger('notify:closed');\n        },\n\n        events: {\n            'click .notify-popup-alert-button':'onAlertButtonClicked',\n            'click .notify-popup-prompt-button': 'onPromptButtonClicked',\n            'click .notify-popup-done': 'onCloseButtonClicked',\n            'click .notify-shadow': 'onCloseButtonClicked'\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates['notify'];\n\n            //hide notify container\n            this.$el.css(\"visibility\", \"hidden\");\n            //attach popup + shadow\n            this.$el.html(template(data)).prependTo('body');\n            //hide popup\n            this.$('.notify-popup').css(\"visibility\", \"hidden\");\n            //show notify container\n            this.$el.css(\"visibility\", \"visible\");\n\n            this.showNotify();\n            return this;\n        },\n\n        onAlertButtonClicked: function(event) {\n            event.preventDefault();\n            //tab index preservation, notify must close before subsequent callback is triggered\n            this.closeNotify();\n            Adapt.trigger(this.model.get('_callbackEvent'), this);\n        },\n\n        onPromptButtonClicked: function(event) {\n            event.preventDefault();\n            //tab index preservation, notify must close before subsequent callback is triggered\n            this.closeNotify();\n            Adapt.trigger($(event.currentTarget).attr('data-event'));\n        },\n\n        onCloseButtonClicked: function(event) {\n            event.preventDefault();\n            //tab index preservation, notify must close before subsequent callback is triggered\n            this.closeNotify();\n            Adapt.trigger('notify:closed');\n        },\n\n        resetNotifySize: function() {\n            $('.notify-popup').removeAttr('style');\n\n            this.resizeNotify();\n        },\n\n        resizeNotify: function() {\n            var windowHeight = $(window).height();\n            var notifyHeight = this.$('.notify-popup').outerHeight();\n\n            if (notifyHeight > windowHeight) {\n                this.$('.notify-popup').css({\n                    'height':'100%',\n                    'top':0,\n                    'overflow-y': 'scroll',\n                    '-webkit-overflow-scrolling': 'touch'\n                });\n            } else {\n                this.$('.notify-popup').css({\n                    'margin-top': -(notifyHeight/2)\n                });\n            }\n        },\n\n        showNotify: function() {\n\n\n\n            if (this.$(\"img\").length > 0) {\n                this.$el.imageready( _.bind(loaded, this));\n            } else {\n                loaded.call(this);\n            }\n\n            function loaded() {\n                if (this.disableAnimation) {\n                    this.$('.notify-shadow').css(\"display\", \"block\");\n                } else {\n\n                    this.$('.notify-shadow').velocity({ opacity: 0 }, {duration:0}).velocity({ opacity: 1 }, {duration:400, begin: _.bind(function() {\n                        this.$('.notify-shadow').css(\"display\", \"block\");\n                    }, this)});\n\n                }\n\n                this.resizeNotify();\n\n                if (this.disableAnimation) {\n\n                    this.$('.notify-popup').css(\"visibility\", \"visible\");\n                    complete.call(this);\n                    \n                } else {\n\n                    this.$('.notify-popup').velocity({ opacity: 0 }, {duration:0}).velocity({ opacity: 1 }, { duration:400, begin: _.bind(function() {\n                        this.$('.notify-popup').css(\"visibility\", \"visible\");\n                        complete.call(this);\n                    }, this) });\n\n                }\n                \n                function complete() {\n                    /*ALLOWS POPUP MANAGER TO CONTROL FOCUS*/\n                    Adapt.trigger('popup:opened', this.$('.notify-popup'));\n                    $('body').scrollDisable();\n                    \n                    //set focus to first accessible element\n                    this.$('.notify-popup').a11y_focus();\n                }\n            }\n\n        },\n\n        closeNotify: function (event) {\n\n            if (this.disableAnimation) {\n\n                this.$('.notify-popup').css(\"visibility\", \"hidden\");\n                this.$el.css(\"visibility\", \"hidden\");\n\n                this.remove();\n\n            } else {\n\n                this.$('.notify-popup').velocity({ opacity: 0 }, {duration:400, complete: _.bind(function() {\n                    this.$('.notify-popup').css(\"visibility\", \"hidden\");\n                }, this)});\n\n                this.$('.notify-shadow').velocity({ opacity: 0 }, {duration:400, complete:_.bind(function() {\n                    this.$el.css(\"visibility\", \"hidden\");\n                    this.remove();\n                }, this)});\n            }\n\n            $('body').scrollEnable();\n            Adapt.trigger('popup:closed');\n        }\n\n    });\n\n    return NotifyView;\n\n});\n\n",
    "define('coreViews/notifyPushView',['require','backbone','coreJS/adapt'],function(require) {\n\n\tvar Backbone = require('backbone');\n\tvar Adapt = require('coreJS/adapt');\n\n\tvar NotifyPushView = Backbone.View.extend({\n\n\t\tclassName: 'notify-push',\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(Adapt, 'notify:pushShown notify:pushRemoved', this.updateIndexPosition);\n\t\t\tthis.listenTo(this.model.collection, 'remove', this.updateIndexPosition);\n\t\t\tthis.listenTo(this.model.collection, 'change:_index', this.updatePushPosition);\n\t\t\t//include accessibility globals in notify model\n\t\t\tthis.model.set('_globals', Adapt.course.get('_globals'));\n\t\t\tthis.listenTo(Adapt, 'remove', this.remove);\n\t\t\tthis.preRender();\n\t\t\tthis.render();\n\t\t},\n\n\t\tevents: {\n\t\t\t'click .notify-push-close': 'closePush',\n\t\t\t'click .notify-push-inner': 'triggerEvent'\n\t\t},\n\n\t\tpreRender: function() {\n\t\t\tthis.hasBeenRemoved = false;\n\t\t},\n\n\t\trender: function() {\n\n            var data = this.model.toJSON();\n            var template = Handlebars.templates['notifyPush'];\n            this.$el.html(template(data)).appendTo('#wrapper');\n\n            _.defer(_.bind(function() {\n                this.postRender();\n            }, this));\n\n            return this;\n\t\t},\n\n\t\tpostRender: function() {\n\n\t\t\tthis.$el.addClass('show');\n\n\t\t\t_.delay(_.bind(function() {\n\t\t\t\tthis.closePush();\n\t\t\t}, this), this.model.get('_timeout'));\n\n\t\t\tAdapt.trigger('notify:pushShown');\n\n\t\t},\n\n\t\tclosePush: function(event) {\n\n\t\t\tif (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\t// Check whether this view has been removed as the delay can cause it to be fired twice\n\t\t\tif (this.hasBeenRemoved === false) {\n\n\t\t\t\tthis.hasBeenRemoved = true;\n\n\t\t\t\tthis.$el.removeClass('show');\n\n\t\t\t\t_.delay(_.bind(function() {\n\t\t\t\t\tthis.model.collection.remove(this.model);\n\t\t\t\t\tAdapt.trigger('notify:pushRemoved', this);\n\t\t\t\t\tthis.remove();\n\t\t\t\t}, this), 600);\n\n\t\t\t}\n\n\t\t},\n\n\t\ttriggerEvent: function(event) {\n\n\t\t\tAdapt.trigger(this.model.get('_callbackEvent'));\n\t\t\tthis.closePush();\n\n\t\t},\n\n\t\tupdateIndexPosition: function() {\n\t\t\tif (!this.hasBeenRemoved) {\n\t\t\t\tvar models = this.model.collection.models;\n\t\t\t\tfor (var i = 0 , len = models.length; i < len; i++) {\n\t\t\t\t\tvar index = i;\n\t\t\t\t\tvar model = models[i];\n\t\t\t\t\tif (model.get('_isActive') === true) {\n\t\t\t\t\t\tmodel.set('_index', index);\n\t\t\t\t\t\tthis.updatePushPosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tupdatePushPosition: function() {\n\t\t\tif (this.hasBeenRemoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.model.get('_index') != undefined) {\n\t\t\t\tvar elementHeight = this.$el.height();\n\t\t\t\tvar offset = 20;\n\t\t\t\tvar navigationHeight = $('.navigation').height();\n\t\t\t\tvar currentIndex = this.model.get('_index');\n\t\t\t\tvar flippedIndex = (currentIndex == 0) ? 1 : 0;\n\t\t\t\tif (this.model.collection.where({_isActive:true}).length === 1) {\n\t\t\t\t\tflippedIndex = 0;\n\t\t\t\t}\n\t\t\t\tvar positionLowerPush = (elementHeight + offset) * flippedIndex + navigationHeight + offset;\n\t\t\t\tthis.$el.css('top', positionLowerPush);\n\t\t\t}\n\t\t}\n\n\t});\n\n\treturn NotifyPushView;\n\n});\n\n",
    "define('coreModels/notifyModel',['require','backbone'],function(require) {\n\n\tvar Backbone = require('backbone');\n\n    var NotifyModel = Backbone.Model.extend({\n        defaults: {\n        \t_isActive:false,\n        \t_showIcon:false,\n        \t_timeout:3000\n        }\n    });\n\n    return NotifyModel;\n\n});\n\n",
    "define('coreJS/notify',['require','coreJS/adapt','coreViews/notifyView','coreViews/notifyPushView','coreModels/notifyModel'],function(require) {\n\n\tvar Adapt = require('coreJS/adapt');\n\tvar NotifyView = require('coreViews/notifyView');\n\tvar NotifyPushView = require('coreViews/notifyPushView');\n\tvar NotifyModel = require('coreModels/notifyModel');\n\n\t// Build a collection to store push notifications\n\tvar NotifyPushCollection = Backbone.Collection.extend({\n\n\t\tmodel: NotifyModel,\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(this, 'add', this.onPushAdded);\n\t\t\tthis.listenTo(Adapt, 'notify:pushRemoved', this.onRemovePush);\n\t\t},\n\n\t\tonPushAdded: function(model) {\n\t\t\tthis.checkPushCanShow(model);\n\t\t},\n\n\t\tcheckPushCanShow: function(model) {\n\t\t\tif (this.canShowPush()) {\n\t\t\t\tmodel.set('_isActive', true);\n\t\t\t\tthis.showPush(model);\n\t\t\t}\n\t\t},\n\n\t\tcanShowPush: function() {\n\t\t\tvar availablePushNotifications = this.where({_isActive:true});\n\t\t\tif (availablePushNotifications.length >= 2) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tshowPush: function(model) {\n\t\t\tnew NotifyPushView({\n\t\t\t\tmodel: model\n\t\t\t});\n\t\t},\n\n\t\tonRemovePush: function(view) {\n\t\t\tvar inactivePushNotifications = this.where({_isActive:false});\n\t\t\tif (inactivePushNotifications.length > 0) {\n\t\t\t\tthis.checkPushCanShow(inactivePushNotifications[0]);\n\t\t\t}\n\t\t}\n\n\t});\n\n\tvar NotifyPushes = new NotifyPushCollection();\n\n\tAdapt.on('notify:alert', function(notifyObject) {\n\t\taddNotifyView('alert', notifyObject);\n\t});\n\n\tAdapt.on('notify:prompt', function(notifyObject) {\n\t\taddNotifyView('prompt', notifyObject);\n\t});\n\n\tAdapt.on('notify:popup', function(notifyObject) {\n\t\taddNotifyView('popup', notifyObject);\n\t});\n\n\tAdapt.on('notify:push', function(notifyObject) {\n\t\taddNotifyView('push', notifyObject);\n\t});\n\n\tfunction addNotifyView(type, notifyObject) {\n\t\tnotifyObject._type = type;\n\n\t\tif (type === 'push') {\n\n\t\t\tNotifyPushes.push(notifyObject);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar notify = new NotifyView({\n\t\t\tmodel: new NotifyModel(notifyObject)\n\t\t});\n\n\t};\n\n});\n\n",
    "//https://github.com/adaptlearning/jquery.a11y 2015-08-13\n\n(function($, window) {\n    \n    var iOS = /iPad|iPhone|iPod/.test(navigator.platform);\n    \n    // JQUERY FILTERS FOR ELEMENTS\n        var domFilters = {\n            \"globalTabIndexElementFilter\": ':not(.a11y-ignore)',\n            \"focusableElementsFilter\": \":visible:not(.disabled):not([tabindex='-1']):not(:disabled):not(.a11y-ignore-focus)\",\n            \"ariaLabelElementsFilter\": \":not( .a11y-ignore-aria [aria-label] )\",\n            \"ariaHiddenParentsFilter\": \":not(#wrapper):not(body)\",\n        };\n\n    // JQUERY SELECTORS\n        var domSelectors = {\n            \"focuser\": \"#a11y-focuser\",\n            \"focusguard\": \"#a11y-focusguard\",\n            \"selected\": \"#a11y-selected\",\n            \"ignoreFocusElements\": \".a11y-ignore-focus\",\n            \"nativeSpaceElements\": \"textarea, input[type='text']\",\n            \"nativeEnterElements\": \"textarea, a, button, input[type='checkbox'], input[type='radio']\",\n            \"nativeTabElements\": \"textarea, input, select\",\n            \"wrapIgnoreElements\": \"a,button,input,select,textarea,br\",\n            \"wrapStyleElements\": \"b,i,abbr,strong\",\n            \"globalTabIndexElements\": 'a,button,input,select,textarea,[tabindex]',\n            \"focusableElements\": \"a,button,input,select,textarea,[tabindex],label\",\n            \"focusableElementsAccessible\": \":not(a,button,input,select,textarea)[tabindex]\",\n            \"hideableElements\": \".a11y-hideable\",\n            \"ariaLabelElements\": \"div[aria-label], span[aria-label]\",\n        };\n\n    // JQUERY INJECTED ELEMENTS\n        var domInjectElements = {\n            \"focuser\": '<a id=\"a11y-focuser\" href=\"#\" class=\"prevent-default a11y-ignore\" tabindex=\"-1\" role=\"region\">&nbsp;</a>',\n            \"focusguard\": '<a id=\"a11y-focusguard\" class=\"a11y-ignore a11y-ignore-focus\" tabindex=\"0\" role=\"button\">&nbsp;</a>',\n            \"selected\": '<a id=\"a11y-selected\" href=\"#\" class=\"prevent-default a11y-ignore\" tabindex=\"-1\">&nbsp;</a>',\n            \"arialabel\": \"<span class='aria-label prevent-default' tabindex='0' role='region'></span>\"\n        };\n\n\n    // UTILITY FUNCTIONS\n        function stringTrim(str) {\n          return str.replace(stringTrim.regex, '');\n        }\n        stringTrim.regex = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\n        function defer(func, that, t) {\n            var thisHandle = that || this;\n            var args = arguments;\n            return setTimeout(function() {\n                func.apply(thisHandle, args);\n            }, t||0);\n        }\n\n        function preventDefault(event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        function preventScroll(event) {\n            var state = $.a11y.state;\n            var options = $.a11y.options;\n\n            if (options.isDebug) console.log(\"preventScroll1\")\n\n            if (state.scrollDisabledElements && state.scrollDisabledElements.length > 0) {\n                var scrollingParent = getScrollingParent(event);\n                if (scrollingParent.filter(state.scrollDisabledElements).length === 0) {\n                    $(window).scroll(); \n                    return; \n                }\n            }\n\n            if (options.isDebug) console.log(\"preventScroll2\")\n\n            event.preventDefault();\n            return false; \n        }\n\n        var scrollKeys = {37: 1, 38: 1, 39: 1, 40: 1};\n        function preventScrollKeys(event) {\n            var state = $.a11y.state;\n            var options = $.a11y.options;\n\n            if ($(event.target).is( domSelectors.nativeTabElements )) return;\n\n            if (options.isDebug) console.log(\"preventScroll1\")\n\n            if (state.scrollDisabledElements && state.scrollDisabledElements.length > 0) {\n                var scrollingParent = getScrollingParent(event);\n                if (scrollingParent.filter(state.scrollDisabledElements).length === 0) return;    \n            }\n\n            if (options.isDebug) console.log(\"preventScroll2\")\n\n            if (scrollKeys[event.keyCode]) {\n                preventScroll(event);\n                return false;\n            }\n        }\n\n        function getScrollingParent(event) {\n            var $element = $(event.target);\n\n            var isTouchEvent = event.type == \"touchmove\";\n\n            var deltaY; \n            var directionY;\n\n            if (isTouchEvent) {\n                //touch events\n\n                var state = $.a11y.state;\n                if (!state.scrollStartEvent || !state.scrollStartEvent.originalEvent ) return $element;\n\n                //iOS previous + current scroll pos\n                var currentY = event.originalEvent.pageY;\n                var previousY = state.scrollStartEvent.originalEvent.pageY;\n\n                if (currentY === 0 || currentY == previousY) {\n                    //android chrome current scroll pos\n                    currentY = event.originalEvent.touches[0].pageY;\n                    previousY = state.scrollStartEvent.originalEvent.touches[0].pageY;\n                }\n                \n                //touch: delta calculated from touchstart pos vs touchmove pos\n                deltaY = currentY - previousY;\n                if (deltaY === 0) return $('body');\n\n                directionY = deltaY > 0 ? \"up\" : \"down\";\n\n            } else {\n\n                //mouse events\n\n                //desktop: chrome & safari delta || firefox & ie delta inverted\n                deltaY = event.originalEvent.wheelDeltaY || event.originalEvent.deltaY !== undefined ? -event.originalEvent.deltaY : event.originalEvent.wheelDelta || undefined;\n                if (deltaY === 0) return $('body');\n                \n                directionY = deltaY > 0 ? \"up\" : \"down\";\n\n            }           \n\n            var itemParents = $element.parents();\n            var lastScrolling = null;\n            for (var i = 0, l = itemParents.length; i < l; i++) {\n                var $parent = $(itemParents[i]);\n                if ($parent.is(\"body\")) return $parent;\n                var scrollType = $parent.css(\"overflow-y\");\n                switch (scrollType){\n                case \"auto\": case \"scroll\": \n                    var parentScrollTop = Math.ceil($parent.scrollTop());\n                    var parentInnerHeight = $parent.outerHeight();\n                    var parentScrollHeight = $parent[0].scrollHeight;\n\n                    switch (directionY) {\n                    case \"down\":\n                        if (parentScrollTop + parentInnerHeight < parentScrollHeight) return $parent;\n                        break;\n                    case \"up\":\n                       if (parentScrollTop > 0) return $parent;\n                    }\n\n                    lastScrolling = $parent;\n                    \n                    break;\n                default:\n                }\n            }\n            return $('body');\n        }\n\n        //PERFORMS CALCULATIONS TO TURN HTML/TEXT STRINGS INTO TABBABLE CONTENT\n        function makeHTMLOrTextAccessible(text) {\n\n            return getInnerHTML( makeChildNodesAccessible( wrapInDivAndMakeIntoDOMNode(text) ) );\n\n            function wrapInDivAndMakeIntoDOMNode(text) {\n                var $element;\n                try {\n                    // CONVERT ELEMENT TO DOM NODE\n                    $element = $(\"<div>\"+text+\"</div>\");\n                } catch (e) {\n                    throw e;\n                }\n                return $element;\n            }\n\n            function getInnerHTML($element) {\n                var rtn = \"\";\n                for (var i = 0; i < $element[0].children.length; i++) {\n                    rtn += $element[0].children[i].outerHTML;\n                }\n                return rtn;\n            }\n\n            function makeChildNodesAccessible($element) {\n                //CAPTURE DOMNODE CHILDREN\n                var children = $element.children();\n\n                \n                if (children.length === 0) {\n                    //IF NO CHILDREN, ASSUME TEXT ONLY, WRAP IN SPAN TAG\n                    var textContent = $element.text();\n                    if (stringTrim(textContent) === \"\") return $element;\n                    removeChildNodes($element);\n                    $element.append( makeElementTabbable($(\"<span>\"+textContent+\"</span>\")) );\n                    return $element;\n                }\n\n\n                //IF ONLY STYLE TAGS WRAP IN SPAN\n                var styleChildCount = 0;\n                for (var c = 0; c < children.length; c++) {\n                    if ($(children[c]).is(domSelectors.wrapStyleElements)) styleChildCount++;\n                }\n                if (styleChildCount === children.length) {\n                    return $(\"<span>\").append(makeElementTabbable($element));\n                }\n\n                //SEARCH FOR TEXT ONLY NODES AND MAKE TABBABLE\n                var newChildren = [];\n                var added = false;\n                for (var i = 0; i < $element[0].childNodes.length; i++) {\n                    var child = $element[0].childNodes[i];\n                    var cloneChild = $(child.outerHTML)[0];\n                    switch(child.nodeType) {\n                    case 3: //TEXT NODE\n                        // preserve whitespace in ie8 by adding initial zero-width space\n                        var childContent = child.textContent || \"&#8203;\" + child.nodeValue;\n                        //IF TEXT NODE WRAP IN A TABBABLE SPAn\n                        newChildren.push( makeElementTabbable($(\"<span>\"+childContent+\"</span>\")) );\n                        added = true;\n                        break;\n                    case 1: //DOM NODE\n                        var $child = $(cloneChild);\n                        if (($child.is(domSelectors.wrapStyleElements) && !added) || $child.is(domSelectors.wrapIgnoreElements)) {\n                            //IGNORE NATIVELY TABBABLE ELEMENTS AND STYLING ELEMENTS\n                            newChildren.push( $child );\n                        } else {\n                            var childChildren = $child.children();\n                            if (childChildren.length === 0) {\n                                //DO NOT DESCEND INTO TEXT ONLY NODES\n                                var textContent = $child.text();\n                                if (stringTrim(textContent) !== \"\") makeElementTabbable($child);\n                            } else {\n                                //DESCEND INTO NODES WITH CHILDREN\n                                makeChildNodesAccessible($child);\n                            }\n                            newChildren.push( $child );\n                        }\n                        break;\n                    }\n                }\n\n                removeChildNodes($element);\n                $element.append(newChildren);\n\n                return $element;\n\n                function removeChildNodes($element) {\n                    var childNodes = $element[0].childNodes.length;\n                    for (var i = childNodes - 1; i > -1 ; i--) {\n                        if ($element[0].childNodes[i].remove) $element[0].childNodes[i].remove();\n                        else if ($element[0].removeChild) $element[0].removeChild($element[0].childNodes[i]); //safari fix\n                        else if ($element[0].childNodes[i].removeNode) $element[0].childNodes[i].removeNode(true); //ie 11 fix\n                    }\n                    return $element;\n                }\n\n                //MAKES AN ELEMENT TABBABLE\n                function makeElementTabbable($element) {\n                    $element.attr({\n                        \"role\": \"region\",\n                        \"tabindex\": 0,\n                    }).addClass(\"prevent-default\").addClass(\"accessible-text-block\");\n                    return $element;\n                }\n            }\n        }\n\n\n    // JQUERY UTILITY FUNCTIONS\n        $.fn.scrollDisable = function() {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n            var state = $.a11y.state;\n\n            if (!options.isScrollDisableEnabled) return this;\n\n            if (!state.scrollDisabledElements) state.scrollDisabledElements = $(this);\n            else state.scrollDisabledElements = state.scrollDisabledElements.add(this);\n\n            if (state.scrollDisabledElements.length > 0) a11y_setupScrollListeners();\n\n            return this;\n        }\n\n        $.fn.scrollEnable = function() {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n            var state = $.a11y.state;\n\n             if (!options.isScrollDisableEnabled) return this;\n\n            if (!state.scrollDisabledElements) return;            \n\n            state.scrollDisabledElements = state.scrollDisabledElements.not(this);\n\n            if (state.scrollDisabledElements.length === 0) a11y_removeScrollListeners();\n\n        }\n\n        $.fn.isFixedPostion = function() {\n            if (this.length === 0) return false;\n\n            var $element = $(this[0]);\n\n            if (!$element) return false;\n\n            if ($element.css(\"position\") == \"fixed\") return true;\n            if ($element.is(\".fixed\")) return true;\n            var parents = $element.parents();\n            for (var i = 0, l = parents.length; i < l; i++) {\n                if ($(parents[i]).css(\"position\") == \"fixed\") return true;\n                if ($(parents[i]).is(\".fixed\")) return true;\n            }\n            return false;\n        };\n\n        $.fn.limitedScrollTo = function() {\n            var options = $.a11y.options;\n\n            if (!options.isFocusLimited) return this;\n\n            if (this.length === 0) return this;\n\n            var $element = $(this[0]);\n\n            if ($element.isFixedPostion()) return this;\n\n            options = options || {};\n            \n            var topOffset = options.focusOffsetTop || 0;\n            var bottomOffset = options.focusOffsetTop || 0;\n\n            var elementTop = $element.offset()[\"top\"];\n            var scrollTopWithTopOffset = $(window).scrollTop() + topOffset;\n            \n            var windowAvailableHeight = $(window).innerHeight() - bottomOffset - topOffset;\n\n            var scrollBottomWithTopOffset = scrollTopWithTopOffset + windowAvailableHeight\n\n            var scrollToPosition = elementTop - topOffset - (windowAvailableHeight / 2);\n            if (scrollToPosition < 0) scrollToPosition = 0;\n\n            var isElementTopOutOfView = (elementTop < scrollTopWithTopOffset || elementTop > scrollBottomWithTopOffset);\n\n            if (!isElementTopOutOfView) {\n                if ($element.is(\"select, input[type='text'], textarea\") && iOS) { //ios 9.0.4 bugfix for keyboard and picker input\n                    defer(function(){\n                        if (options.isDebug) console.log(\"limitedScrollTo select fix\", this.scrollToPosition);\n                        $.scrollTo(this.scrollToPosition, { duration: 0 });\n                    }, {scrollToPosition:scrollToPosition}, 1000);\n                }\n                return;\n            };\n\n            if ($element.is(\"select, input[type='text'], textarea\") && iOS) {  //ios 9.0.4 bugfix for keyboard and picker input\n                defer(function(){\n                    if (options.isDebug) console.log(\"limitedScrollTo select fix\", this.scrollToPosition);\n                    $.scrollTo(this.scrollToPosition, { duration: 0 });\n                }, {scrollToPosition:scrollToPosition}, 1000);\n            } else {\n                if (options.isDebug) console.log(\"limitedScrollTo\", scrollToPosition);\n            defer(function() {\n                    $.scrollTo(this.scrollToPosition, { duration: 0 });\n                }, {scrollToPosition:scrollToPosition});\n            }\n\n            return this;\n        };\n\n        //jQuery function to focus with no scroll (accessibility requirement for control focus)\n        $.fn.focusNoScroll = function() {\n            if (this.length === 0) return this;\n\n            defer(function() {\n                var options = $.a11y.options;\n                if (options.isDebug) console.log(\"focusNoScroll\", this[0]);\n\n                var y = $(window).scrollTop();\n                try {\n                this[0].focus();\n                } catch(e){}\n                window.scrollTo(null, y);\n            }, this);\n            return this; //chainability\n        };\n\n        $.fn.focusOrNext = function(returnOnly) {\n            if (this.length === 0) return this;\n\n            var $element = $(this[0]);\n\n            var isSpecialElement = $element.is(domSelectors.focuser) || $element.is(domSelectors.focusguard) || $element.is(domSelectors.selected); \n            var isTabbable = $element.is(domSelectors.focusableElements) && $element.is(domFilters.focusableElementsFilter);\n\n            if (!isSpecialElement && !isTabbable) {\n                //if the element is not focusable, find the next focusable element in section\n                //light processing\n                var $nextElement = $element.nextAll(domSelectors.focusableElements);\n                //filter enabled+visible\n                var $nextElementFiltered = $nextElement.filter(domFilters.focusableElementsFilter);\n                if ($nextElement.length === 0 || $nextElementFiltered.length === 0) {\n                    //if next element isn't focusable find next element in document\n                    //heavy processing\n                    //fetch all parents subsequent siblings\n                    var $parents = $element.parents();\n                    var $nextSiblings = $parents.nextAll();\n                    //filter siblings for focusable\n                    var $nextAllElements = $nextSiblings.find(domSelectors.focusableElements);\n                    //filter enabled+visible focusable items\n                    var $nextAllElementsFiltered = $nextAllElements.filter(domFilters.focusableElementsFilter);\n                    //if none found throw error\n                    if ($nextAllElementsFiltered.length === 0) throw \"jquery.a11y: Could not find the next focusable element\";\n                    \n                    //return first found element\n                    $element = $($nextAllElementsFiltered[0]);\n\n                } else {\n\n                    //return first found element\n                    $element = $($nextElementFiltered[0]);\n                }\n            }\n\n            var options = $.a11y.options;\n            if (options.isDebug) console.log(\"focusOrNext\", $element[0]);\n            \n            if (returnOnly !== true) {\n                if (options.OS != \"mac\") $(domSelectors.focuser).focusNoScroll();\n                $element.focusNoScroll();\n            }\n\n            //return element focused\n            return $element;\n\n        };\n\n\n    // PRIVATE EVENT HANDLERS\n        function onKeyUp(event) {\n            var options = $.a11y.options;\n\n            var $element = $(event.target);\n\n            switch (event.which) {\n            case 32: //SPACE\n\n                //IF ELEMENT HANDLES SPACE THEN SKIP\n                if ($element.is(domSelectors.nativeSpaceElements)) return;\n\n                //STOP SPACE FROM SCROLLING / SELECTING\n                preventDefault(event);\n\n                if (options.isDebug) console.log(\"a11y: space keyup > click\");\n\n                //TURN SPACE INTO CLICK\n                $element.trigger(\"click\");\n\n                break;\n            case 27: //ESCAPE\n\n                if (options.isDebug) console.log(\"a11y: escape keyup > focus on first element\");\n                //FOCUS ON FIRST ELEMENT\n                $.a11y_focus();\n                break;\n            }\n        }\n\n        function onKeyDown(event) {\n            var options = $.a11y.options;\n\n            var $element = $(event.target);\n\n            switch (event.which) {\n            case 32: //SPACE\n                //IF ELEMENT HANDLES SPACE SKIP\n                if ($element.is(domSelectors.nativeSpaceElements)) return;\n\n                //STOP SPACE FROM SCROLLING / SELECTING\n                preventDefault(event);\n\n                if (options.isDebug) console.log(\"a11y: space keydown > blocked default\");\n\n                break;\n            case 13: //ENTER\n\n                //IF ELEMENT HANDLES ENTER THEN SKIP\n                if ($element.is(domSelectors.nativeEnterElements)) return;\n\n                //STOP ENTER FROM SCROLLING / SELECTING\n                preventDefault(event);\n\n                if (options.isDebug) console.log(\"a11y: enter keydown > click\");\n\n                //TURN ENTER INTO CLICK\n                $element.trigger(\"click\");\n            }\n        }\n\n        function onFocusCapture(event) {\n            var options = $.a11y.options;\n            var state = $.a11y.state;\n\n            //preventDefault(event);\n            event.stopPropagation();\n            var $element = $(event.target);\n            \n            //search out intended click element\n            if (!$element.is(domSelectors.globalTabIndexElements)) {\n                //if element receiving click is not tabbable, search parents\n                var $parents = $element.parents();\n                var $tabbableParents = $parents.filter(domSelectors.globalTabIndexElements);\n                if ($tabbableParents.length === 0) {\n                    //if no tabbable parents, search for proxy elements\n                    var $proxyElements = $parents.filter(\"[for]\");\n\n                    //if no proxy elements, ignore\n                    if ($proxyElements.length === 0) {\n                        //find next focusable element if no proxy element found\n                        $element = $element.focusOrNext(true);\n                    } else {\n                        //isolate proxy element by id\n                        var $proxyElement = $(\"#\"+$proxyElements.attr(\"for\"));\n                        if (!$proxyElement.is(domSelectors.globalTabIndexElements)) {\n                            //find next focusable element if no tabbable element found\n                            $element = $element.focusOrNext(true);\n                        } else {\n                            //use tabbable proxy\n                            $element = $proxyElement;\n                        }\n                    }\n                } else {\n                    \n                    //use tabbable parent\n                    $element = $($tabbableParents[0]);\n                }\n            }\n\n            state.$activeElement = $element;\n            if (options.isDebug) console.log(\"focusCapture\", $element[0]);\n        }\n\n        function onFocus(event) {\n            var options = $.a11y.options;\n            var state = $.a11y.state;\n\n            var $element = $(event.target);\n\n            if (!$element.is(domSelectors.globalTabIndexElements)) return;\n            a11y_triggerReadEvent($element);\n\n            if (options.isDebug) console.log(\"focus\", $element[0]);\n            \n            state.$activeElement = $(event.currentTarget);\n\n            if (state.$activeElement.is(domSelectors.nativeTabElements)) {\n                //Capture that the user has interacted with a native form element\n                $.a11y.userInteracted = true;\n            }\n\n            var options = $.a11y.options;\n\n            $element.limitedScrollTo();\n        }\n\n        function onScrollStartCapture(event) {\n            var state = $.a11y.state;\n            state.scrollStartEvent = event;\n            return true;\n        }\n\n        function onScrollEndCapture(event) {\n            var state = $.a11y.state;\n            state.scrollStartEvent = null;\n            return true;\n        }\n\n\n    // PRIVATE $.a11y FUNCTIONS\n        function a11y_setupScrollListeners() {\n            var scrollEventName = \"wheel mousewheel\";\n            $(window).on(scrollEventName, preventScroll);\n            $(document).on(scrollEventName, preventScroll);\n            $(window).on(\"touchstart\", onScrollStartCapture); // mobile\n            $(window).on(\"touchmove\", preventScroll); // mobile\n            $(window).on(\"touchend\", onScrollEndCapture); // mobile\n            $(document).on(\"keydown\", preventScrollKeys);\n        }\n\n        function a11y_removeScrollListeners() {\n            var scrollEventName = \"wheel mousewheel\";\n            $(window).off(scrollEventName, preventScroll);\n            $(document).off(scrollEventName, preventScroll);\n            $(window).off(\"touchstart\", onScrollStartCapture); // mobile\n            $(window).off(\"touchmove\", preventScroll); // mobile\n            $(window).off(\"touchend\", onScrollEndCapture); // mobile\n            $(document).off(\"keydown\", preventScrollKeys);  \n        }\n\n        function a11y_triggerReadEvent($element) {\n            var readText;\n            if ($element.attr(\"aria-labelledby\")) {\n                var label = $(\"#\"+$element.attr(\"aria-labelledby\"));\n                readText = label.attr(\"aria-label\") || label.text();\n            } else readText = $element.attr(\"aria-label\") || $element.text();\n\n            $(document).trigger(\"reading\", stringTrim(readText));\n        }\n\n        function a11y_reattachFocusGuard() {\n            var options = $.a11y.options;\n            var $focusguard = $(domSelectors.focusguard);\n\n            if ($focusguard.length === 0) {\n                $focusguard = $(domInjectElements.focusguard);\n            }\n\n            var $currentFloor = $.a11y.state.floorStack[$.a11y.state.floorStack.length-1];\n\n            $focusguard.remove().appendTo($currentFloor).attr(\"tabindex\", 0);\n\n            $focusguard.off(\"click\").off(\"focus\");\n\n            $focusguard.on(\"click\", function(event) {\n\n                if (options.isDebug) console.log (\"focusguard\");\n\n                preventDefault(event)\n                $.a11y_focus(true);\n\n            });\n\n            $focusguard.on(\"focus\", function(event) {\n\n                if (options.isDebug) console.log (\"focusguard\");\n\n                preventDefault(event);\n                $.a11y_focus(true);\n\n                return false;\n\n            });\n        }\n\n        function a11y_setupUserInputControlListeners() {\n             $('body')\n                .off(\"click\", \".prevent-default\", preventDefault)\n                .off(\"keyup\", onKeyUp)\n                .off(\"keydown\", onKeyDown);\n\n            $('body')\n                .on(\"click\", \".prevent-default\", preventDefault)\n                .on(\"keyup\", onKeyUp)\n                .on(\"keydown\", onKeyDown);\n        }\n\n        function a11y_setupFocusControlListeners() {\n            var options = $.a11y.options;\n            $(\"body\")\n                .off(\"mousedown touchstart\", domSelectors.focusableElements, onFocusCapture) //IPAD TOUCH-DOWN FOCUS FIX FOR BUTTONS\n                .off(\"focus\", domSelectors.globalTabIndexElements, onFocus);\n\n            $(\"body\")\n                .on(\"mousedown touchstart\", domSelectors.focusableElements, onFocusCapture) //IPAD TOUCH-DOWN FOCUS FIX FOR BUTTONS\n                .on(\"focus\", domSelectors.globalTabIndexElements, onFocus);\n        }\n\n        function a11y_injectControlElements() {\n            if ($(domSelectors.selected).length === 0) $('body').append($(domInjectElements.selected))\n            if ($(domSelectors.focuser).length === 0)$('body').append($(domInjectElements.focuser))\n        }\n\n        function a11y_removeNotAccessibles() {\n            //STOP ELEMENTS WITH .not-accessible CLASS FROM BEING IN TAB INDEX\n            $(\".not-accessible[tabindex='0'], .not-accessible [tabindex='0']\").attr({\n                \"tabindex\": \"-1\",\n                \"aria-hidden\": true\n            }).addClass(\"aria-hidden\");\n        }\n\n        function a11y_disabledAccessibleTabElements() {\n            var accessibleTabElements = $(domSelectors.focusableElementsAccessible);\n            accessibleTabElements.attr({\n                \"aria-hidden\": \"true\",\n                \"tabindex\": \"-1\"\n            });\n        }\n\n        function a11y_iosFalseClickFix() {  //ios 9.0.4 bugfix for invalid clicks on input overlays\n            //with voiceover on, ios will allow clicks on :before and :after content text. this causes the first tabbable element to recieve focus\n            //redirect focus back to last item in this instance\n            var isPerformingRedirect = false;\n            var options = $.a11y.options;\n\n            $(\"body\").on(\"click\", \"*\", function(event) {\n                if (isPerformingRedirect) return;\n\n                onFocusCapture(event);\n\n                var $active = $.a11y.state.$activeElement;\n                if (!$active.is(domSelectors.globalTabIndexElements)) return;\n\n                if (options.isDebug) console.log(\"a11y_iosFalseClickFix\", $active[0]);\n\n                isPerformingRedirect = true;\n\n                defer(function() {\n                    $active.focus();\n                    isPerformingRedirect = false;\n                }, 500);\n\n            });\n        }\n\n        function a11y_iosFixes() {\n\n            if ($.a11y.state.isIOSFixesApplied) return;\n\n            $.a11y.state.isIOSFixesApplied = true;\n            a11y_iosFalseClickFix();\n\n        }\n\n        function a11y_debug() {\n\n            if ($.a11y.state.isDebugApplied) return;\n\n            $.a11y.state.isDebugApplied = true;\n\n            $(\"body\").on(\"focus blur click change\", \"*\", function(event) {\n                console.log(\"a11y_debug\", event.type, event.currentTarget);\n            });\n        }\n        //TURN ON ACCESSIBILITY FEATURES\n        $.a11y = function(isOn, options) {\n            if ($.a11y.options.isDebug) console.log(\"$.a11y called\", isOn, options )\n            return this;\n        };\n\n        $.a11y.options = {\n            focusOffsetTop: 0,\n            focusOffsetBottom: 0,\n            animateDuration: 250,\n            OS: \"\",\n            isTouchDevice: false,\n            isTabbableTextEnabled: false,\n            isUserInputControlEnabled: true,\n            isFocusControlEnabled: true,\n            isFocusLimited: false,\n            isRemoveNotAccessiblesEnabled: true,\n            isAriaLabelFixEnabled: true,\n            isFocusWrapEnabled: true,\n            isScrollDisableEnabled: true,\n            isScrollDisabledOnPopupEnabled: false,\n            isSelectedAlertsEnabled: false,\n            isAlertsEnabled: false,\n            isIOSFixesEnabled: true,\n            isDebug: false\n        };\n        $.a11y.state = {\n            $activeElement: null,\n            floorStack: [$(\"body\")],\n            focusStack: [],\n            tabIndexes: {},\n            elementUIDIndex: 0,\n            scrollDisabledElements: null,\n            scrollStartEvent: null\n        };\n\n        $.a11y.ready = function() {\n            var options = $.a11y.options;\n\n            if (iOS) options.OS = \"mac\";\n\n            a11y_injectControlElements();\n\n            if (options.isUserInputControlEnabled) {\n                a11y_setupUserInputControlListeners();\n            }\n\n            if (options.isFocusControlEnabled) {\n                a11y_setupFocusControlListeners();\n            }\n\n            if (options.isFocusWrapEnabled) {\n                a11y_reattachFocusGuard();\n            }\n\n            if (iOS && options.isIOSFixesEnabled) {\n                a11y_iosFixes();\n            }\n\n            if (options.isDebug) {\n                console.log(\"a11y_ready\");\n                a11y_debug();\n            }\n\n        };\n\n        //REAPPLY ON SIGNIFICANT VIEW CHANGES\n        $.a11y_update = function() {\n            var options = $.a11y.options;\n\n            if (iOS) options.OS = \"mac\";\n\n            if (options.isRemoveNotAccessiblesEnabled) {\n                a11y_removeNotAccessibles();\n            }\n\n            if (options.isAriaLabelFixEnabled) {\n                $('body').a11y_aria_label(true);\n            }\n\n            if (options.isFocusWrapEnabled) {\n                a11y_reattachFocusGuard();\n            }\n\n            if (!options.isTabbableTextEnabled) {\n                a11y_disabledAccessibleTabElements();\n            }\n\n            if (options.isDebug) console.log(\"a11y_update\");\n        };\n\n    //TOGGLE ACCESSIBILITY\n        //MAKES CHILDREN ACCESSIBLE OR NOT\n        $.a11y_on = function(isOn, selector) {\n            var options = $.a11y.options;\n\n            if (options.isDebug) console.log(\"$.a11y_on called\", isOn, selector );\n\n            selector = selector || 'body';\n            isOn = isOn === undefined ? true : isOn;\n            if (isOn === false) {\n                $(selector).attr(\"aria-hidden\", true);\n            } else {\n                $(selector).removeAttr(\"aria-hidden\");\n            }\n            return this;\n        };\n\n        $.fn.a11y_on = function(isOn) {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n\n            if (options.isDebug) console.log(\"$.fn.a11y_on called\", isOn, this );\n\n            isOn = isOn === undefined ? true : isOn;\n            if (isOn) {\n                $(domSelectors.focuser).focusNoScroll();\n                this.find(domSelectors.hideableElements).filter(domFilters.globalTabIndexElementFilter).attr(\"aria-hidden\", \"true\").attr(\"tabindex\", \"-1\").addClass(\"aria-hidden\");\n            } else {\n                this.find(domSelectors.hideableElements).filter(domFilters.globalTabIndexElementFilter).attr(\"aria-hidden\", \"false\").removeAttr(\"tabindex\").removeClass(\"aria-hidden\");\n            }\n            this.find(domSelectors.globalTabIndexElements).filter(domFilters.globalTabIndexElementFilter).a11y_cntrl(isOn);\n            return this;\n        };\n\n\n    //MAKE ACCESSIBLE CONTROLS\n\n        \n        //MAKES NAVIGATION CONTROLS ACCESSIBLE OR NOT WITH OPTIONAL DISABLE CLASS AND ATTRIBUTE\n        $.fn.a11y_cntrl = function(enabled, withDisabled) {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n\n            enabled = enabled === undefined ? true : enabled;\n\n            for (var i = 0; i < this.length; i++) {\n                var $item = $(this[i]);\n\n                if (enabled && $item.is(domSelectors.hideableElements)) {\n                    if (options.isTabbableTextEnabled || !$item.is(domSelectors.focusableElementsAccessible)) {\n                        $item.removeAttr(\"aria-hidden\").removeClass(\"aria-hidden\");\n                        $item.parents(domFilters.parentsFilter).removeAttr(\"aria-hidden\").removeClass(\"aria-hidden\");\n                    }\n                    if (withDisabled) {\n                        $item.removeAttr(\"disabled\").removeClass(\"disabled\");\n                    }\n                } else if (enabled) {\n                    if (options.isTabbableTextEnabled || !$item.is(domSelectors.focusableElementsAccessible)) {\n                        $item.attr({\n                            tabindex: \"0\",\n                        }).removeAttr(\"aria-hidden\").removeClass(\"aria-hidden\");\n                        $item.parents(domFilters.parentsFilter).removeAttr(\"aria-hidden\").removeClass(\"aria-hidden\");\n                    }                    \n                    if (withDisabled) {\n                        $item.removeAttr(\"disabled\").removeClass(\"disabled\");\n                    }\n                } else {\n                    if (options.isTabbableTextEnabled || !$item.is(domSelectors.focusableElementsAccessible)) {\n                        $item.attr({\n                            tabindex: \"-1\",\n                            \"aria-hidden\": \"true\"\n                        }).addClass(\"aria-hidden\");\n                    }\n                    if (withDisabled) {\n                        $item.attr(\"disabled\",\"disabled\").addClass(\"disabled\");\n                    }\n                }\n\n            }\n            return this;\n        };\n\n        //MAKES NAVIGATION CONTROLS ACCESSIBLE OR NOT WITH DISABLE CLASS AND ATTRIBUTE\n        $.fn.a11y_cntrl_enabled = function(enabled) {\n            if (this.length === 0) return this;\n            return this.a11y_cntrl(enabled, true);\n        };\n\n      \n    //MAKE ACCESSIBLE TEXT\n\n        var htmlCharRegex = /&.*;/g\n        $.a11y_normalize = function(text) {\n            var options = $.a11y.options;\n\n            if (!options.isTabbableTextEnabled) return text;\n            //USED SPECIFICALLY FOR CONVERTING TITLE TEXT TO ARIA-LABELS\n            var text = $(\"<div>\" + text + \"</div>\").text();\n            //REMOVE HTML CHARACTERS SUCH AS &apos;\n            text = text.replace(htmlCharRegex,\"\");\n            return text;\n        }\n\n        //CONVERTS HTML OR TEXT STRING TO ACCESSIBLE HTML STRING\n        $.a11y_text = function (text) {\n            var options = $.a11y.options;\n\n            if (!options.isTabbableTextEnabled) return text;\n\n            return makeHTMLOrTextAccessible(text)\n        };\n\n        //CONVERTS DOM NODE TEXT TO ACCESSIBLE DOM NODES\n        $.fn.a11y_text = function() {\n            var options = $.a11y.options;\n\n            if (!options.isTabbableTextEnabled) return this;\n\n             for (var i = 0; i < this.length; i++) {\n                this[i].innerHTML = makeHTMLOrTextAccessible(this[i].innerHTML);\n            }\n            return this;\n        };\n\n\n\n    //MAKE SELECTED\n\n        $.fn.a11y_selected = function(isOn, noFocus) {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n            if (!options.isSelectedAlertsEnabled) return this;\n\n            if (isOn === undefined) isOn = true;\n            if (isOn) {\n                var selected = $(this[0]);\n                switch ($.a11y.options.OS) {\n                case \"mac\":\n                    //ANNOUNCES SELECTION ON A MAC BY ADDING A SPAN AND SHIFTING FOCUS\n                    if (noFocus !== true) $(\"#a11y-selected\").focusNoScroll();\n                    _.delay(function() {\n                        selected.prepend($(\"<span class='a11y-selected aria-label'>selected </span>\"))\n                        if (noFocus !== true) $(selected).focusNoScroll();\n                    },250);\n                    break;\n                default:\n                    //ANOUNCES THE SELECTION ON TABLETS AND PCS\n                    if (noFocus !== true) $.a11y_alert(\"selected \" + selected.text());\n                    selected.attr( \"aria-label\", \"selected \" + selected.text()).addClass(\"a11y-selected\");\n                    break;\n                }\n            } else {\n                switch ($.a11y.options.OS) {\n                case \"mac\":\n                    for (var i = 0; i < this.length; i++) {\n                        $(this[i]).find(\".a11y-selected\").remove()\n                    }\n                    break;\n                default:\n                    for (var i = 0; i < this.length; i++) {\n                        if ($(this[i]).is(\".a11y-selected\")) $(this[i]).removeClass(\"a11y-selected\").removeAttr(\"aria-label\");\n                        $(this[i]).find(\".a11y-selected\").removeClass(\"a11y-selected\").removeAttr(\"aria-label\");\n                    }\n                }\n            }\n            return this;\n        };\n\n        $.a11y_alert = function(text) {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n            if (!options.isAlertsEnabled) return this;\n\n            var $alert = $('<div role=\"alert\">'+text+'</div>');\n\n            $($.a11y).trigger(\"reading\", text);\n            switch(options.OS) {\n            case \"mac\":\n                $(\"#a11y-selected\").append($alert);\n                break;\n            default:\n            $alert.css(\"visibility\",\"hidden\");\n                $(\"#a11y-selected\").append($alert);\n            $alert.css(\"visibility\",\"visible\");\n            }\n            \n            setTimeout(function() {\n                $alert.remove();\n            }, 20000);\n\n            return this;\n        };\n\n\n    //FOCUS RESTRICTION\n\n        //ALLOWS FOCUS ON SELECTED ELEMENTS ONLY\n        $.fn.a11y_only = function(container, storeLastTabIndex) {\n            if (this.length === 0) return this;\n\n            var state = $.a11y.state;\n\n            if (storeLastTabIndex) {\n                state.focusStack.push(state.$activeElement);\n            }\n            var $elements;\n            var $hideable;\n            if (container !== undefined) {\n                $elements = $(container).find(domSelectors.globalTabIndexElements).filter(domFilters.globalTabIndexElementFilter);\n                $hideable = $(container).find(domSelectors.hideableElements).filter(domFilters.globalTabIndexElementFilter);\n            } else {\n                $elements = $(domSelectors.globalTabIndexElements).filter(domFilters.globalTabIndexElementFilter);\n                $hideable = $(domSelectors.hideableElements).filter(domFilters.globalTabIndexElementFilter);\n            }\n\n            $elements.each(function(index, item) {\n                var $item = $(item);\n                \n                var elementUID;\n                if (item.a11y_uid == undefined) {\n                    item.a11y_uid = \"UID\" + ++state.elementUIDIndex;\n                }\n                elementUID = item.a11y_uid;\n\n                if (storeLastTabIndex) {\n                    if (state.tabIndexes[elementUID] === undefined) state.tabIndexes[elementUID] = [];\n                    state.tabIndexes[elementUID].push( $item.attr('tabindex') || 0 );\n                }\n\n                $item.attr({\n                    'tabindex': -1,\n                    'aria-hidden': true\n                }).addClass(\"aria-hidden\");\n            });\n\n            $hideable.attr(\"aria-hidden\", true).attr(\"tabindex\", \"-1\").addClass(\"aria-hidden\");\n\n            this.find(domSelectors.globalTabIndexElements).filter(domFilters.globalTabIndexElementFilter).attr({\n                'tabindex': 0\n            }).removeAttr('aria-hidden').removeClass(\"aria-hidden\").parents(domFilters.parentsFilter).removeAttr('aria-hidden').removeClass(\"aria-hidden\");\n            this.find(domSelectors.hideableElements).filter(domFilters.globalTabIndexElementFilter).removeAttr(\"tabindex\").removeAttr('aria-hidden').removeClass(\"aria-hidden\").parents(domFilters.parentsFilter).removeAttr('aria-hidden').removeClass(\"aria-hidden\"); \n\n            $.a11y_update();\n\n            return this;\n        };\n\n        //ALLOWS RESTORATIVE FOCUS ON SELECTED ELEMENTS ONLY\n        $.fn.a11y_popup = function(container) {\n            if (this.length === 0) return this;\n\n            var options = $.a11y.options;\n\n            $.a11y.state.floorStack.push(this);\n\n            this.a11y_only(container, true);\n\n            if (this.length > 0) $(this[0]).limitedScrollTo();\n\n            if (options.isScrollDisabledOnPopupEnabled) {\n                $('body').scrollDisable();\n                $(domSelectors.focusguard).css({\n                    \"position\":\"fixed\",\n                    \"bottom\": \"0px\"\n                });\n            }\n\n            return this;\n\n        };\n\n        //RESTORES FOCUS TO PREVIOUS STATE AFTER a11y_popup\n        $.a11y_popdown = function() {\n            var options = $.a11y.options;\n            var state = $.a11y.state;\n\n            $.a11y.state.floorStack.pop();\n\n            $(domSelectors.globalTabIndexElements).filter(domFilters.globalTabIndexElementFilter).each(function(index, item) {\n                var $item = $(item);\n                var previousTabIndex = 0;\n\n                var elementUID;\n                if (item.a11y_uid == undefined) {\n                    //assign element a unique id\n                    item.a11y_uid = \"UID\" + ++state.elementUIDIndex;\n                }\n                elementUID = item.a11y_uid;\n\n\n                if (state.tabIndexes[elementUID] !== undefined && state.tabIndexes[elementUID].length !== 0) {\n                    //get previous tabindex if saved\n                    previousTabIndex = parseInt(state.tabIndexes[elementUID].pop());\n                }\n                if (state.tabIndexes[elementUID] !== undefined && state.tabIndexes[elementUID].length > 0) {\n                    //delete element tabindex store if empty\n                    delete state.tabIndexes[elementUID];\n                }\n                \n                $item.attr({\n                    'tabindex': previousTabIndex\n                });\n\n                if (previousTabIndex === -1) {\n                    //hide element from screen reader\n                    $item.attr('aria-hidden', true).addClass(\"aria-hidden\");\n                } else {\n                    //show element to screen reader\n                    $item.removeAttr('aria-hidden').removeClass(\"aria-hidden\");\n                }\n            });\n\n            var $activeElement = state.$activeElement = state.focusStack.pop();\n\n            $.a11y_update();\n\n            if (options.isScrollDisabledOnPopupEnabled) {\n                $('body').scrollEnable();\n                $(domSelectors.focusguard).css({\n                    \"position\":\"\",\n                    \"bottom\": \"\"\n                });\n            }\n\n            defer(function() {\n\n                if ($activeElement) {\n                    state.$activeElement = $activeElement;\n                    //scroll to focused element\n                    state.$activeElement.focusOrNext().limitedScrollTo();\n                } else {\n                    $.a11y_focus();\n                }\n\n            }, this, 500);\n\n            return this;\n        };\n\n\n    //SET FOCUS\n\n\n        //FOCUSES ON FIRST TABBABLE ELEMENT\n        $.a11y_focus = function(dontDefer) {\n            //IF HAS ACCESSIBILITY, FOCUS ON FIRST VISIBLE TAB INDEX\n            if (dontDefer) {\n                var tags = $(domSelectors.focusableElements).filter(domFilters.focusableElementsFilter);\n                if (tags.length > 0) {\n                    $(tags[0]).focusOrNext();\n                }\n                return this;\n            }\n\n            defer(function(){\n                var tags = $(domSelectors.focusableElements).filter(domFilters.focusableElementsFilter);\n                if (tags.length > 0) {\n                    $(tags[0]).focusOrNext();\n                }\n            });\n            //SCROLL TO TOP IF NOT POPUPS ARE OPEN        \n            return this;\n        };\n\n        //FOCUSES ON FIRST TABBABLE ELEMENT IN SELECTION\n        $.fn.a11y_focus = function() {\n            if (this.length === 0) return this;\n            //IF HAS ACCESSIBILITY, FOCUS ON FIRST VISIBLE TAB INDEX\n            defer(function(){\n                var $this = $(this[0]);\n                if ($this.is(domSelectors.focusableElements)) {\n                    $this.focusOrNext();\n                } else {\n                    var tags = $this.find(domSelectors.focusableElements).filter(domFilters.focusableElementsFilter);\n                    if (tags.length === 0) {\n                        var $parents = $this.parents();\n                        for (var i = 0, l = $parents.length; i < l; i++) {\n                            var $parent = $($parents[i]);\n                            tags = $parent.find(domSelectors.focusableElements).filter(domFilters.focusableElementsFilter);\n                            if (tags.length > 0) {\n                                return $(tags[0]).focusOrNext();\n                            }\n                        }\n                    } else {\n                        $(tags[0]).focusOrNext();\n                    }\n                    \n                }\n            }, this);\n            return this;\n        };\n\n\n    //CONVERT ARIA LABELS\n        //TURNS aria-label ATTRIBUTES INTO SPAN TAGS\n        $.fn.a11y_aria_label = function(deep) {\n            var options = $.a11y.options;\n\n            if (!options.isAriaLabelFixEnabled) return this;\n\n            var ariaLabels = [];\n\n            for (var i = 0; i < this.length; i++) {\n                var $item = $(this[i]);\n\n                if ($item.not(domSelectors.ariaLabelElementsFilter).is(domSelectors.ariaLabelElements)) {\n                    ariaLabels.push(this[i]);\n                }\n\n                if (deep === true) {\n                    var children = $item.find(domSelectors.ariaLabelElements).filter(domFilters.ariaLabelElementsFilter);\n                    ariaLabels = ariaLabels.concat(children.toArray());\n                }\n\n            }\n\n            if (ariaLabels.length === 0) return this;\n\n            for (var i = 0; i < ariaLabels.length; i++) {\n                var $item = $(ariaLabels[i]);\n\n                var $itemChildren = $item.children();\n                if ($itemChildren.length === 0) continue;\n\n                var firstChild = $itemChildren[0];\n                var $firstChild = $(firstChild)\n\n                if ($firstChild.is(\".aria-label\")) continue;\n\n                var ariaLabel = $item.attr(\"aria-label\");\n\n                if (ariaLabel) {\n                    var injectElement = $(domInjectElements.arialabel);\n                    if (!options.isTabbableTextEnabled) {\n                        injectElement.attr({\n                            \"tabindex\": \"-1\"\n                        }).addClass(\"a11y-ignore\");\n                    }\n                    injectElement.html( ariaLabel );\n                    $item.prepend(injectElement);    \n                }\n\n                $item.removeAttr(\"role\").removeAttr(\"aria-label\").removeAttr(\"tabindex\").removeClass(\"aria-hidden\");\n            }\n\n            return this;\n        };\n\n\n\n\n})(jQuery, window);\n\n\ndefine(\"a11y\", [\"jquery\"], function(){});\n\n",
    "define('coreViews/accessibilityView',['require','backbone','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var AccessibilityView = Backbone.View.extend({\n\n        el: '#accessibility-toggle',\n\n        initialize: function() {\n            this.render();\n        },\n\n        events: {\n            'click' : 'toggleAccessibility'\n        },\n\n        render: function() {\n            var hasAccessibility = Adapt.config.has('_accessibility')\n                && Adapt.config.get('_accessibility')._isEnabled;\n\n            if (!hasAccessibility) {\n                return;\n            } else {\n                var isActive = Adapt.config.get('_accessibility')._isActive;\n                var offLabel = Adapt.course.get('_globals') && Adapt.course.get('_globals')._accessibility._accessibilityToggleTextOff;\n                var onLabel = Adapt.course.get('_globals') && Adapt.course.get('_globals')._accessibility._accessibilityToggleTextOn;\n\n                var toggleText = isActive ? offLabel : onLabel;\n\n                this.$el.html(toggleText).attr('aria-label', Adapt.course.get(\"title\") + \". \" + Adapt.course.get('_globals')._accessibility._ariaLabels.accessibilityToggleButton);\n            }\n        },\n\n        toggleAccessibility: function(event) {\n            event.preventDefault();\n\n            var hasAccessibility = Adapt.config.get('_accessibility')._isActive;\n\n            var toggleAccessibility = (hasAccessibility) ? false : true;\n\n            Adapt.config.get('_accessibility')._isActive = toggleAccessibility;\n\n            Adapt.trigger('accessibility:toggle');\n\n            this.render();\n            \n            Backbone.history.navigate(window.location.hash || \"#/\", {trigger: true});\n        }\n\n    });\n\n    return AccessibilityView;\n\n});\n\n",
    "define('coreJS/accessibility',['require','coreJS/adapt','a11y','coreViews/accessibilityView'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var a11y = require('a11y');\n    var AccessibilityView = require('coreViews/accessibilityView');\n\n    var Accessibility = _.extend({\n        $html: $('html'),\n        $accessibilityInstructions: $(\"#accessibility-instructions\"),\n        $accessibilityToggle: $(\"#accessibility-toggle\"),\n\n        _tabIndexElements: 'a, button, input, select, textarea, [tabindex]',\n        _isButtonRedirectionOn: true,\n        _hasUserTabbed: false,\n        _hasUsageInstructionRead: false,\n        _isLoaded: false,\n        _hasCourseLoaded: false,\n        _legacyFocusElements: undefined,\n\n        reset: function() {\n            _.extend(this, {\n                _isButtonRedirectionOn: true,\n                _hasUserTabbed: false,\n                _hasUsageInstructionRead: false\n            });\n        },\n\n        initialize: function() {\n            //RUN ONCE\n            if (this._isLoaded) return;\n\n            //TRIGGER SETUP ON DATA LOADED AND TOGGLE BUTTON\n            Adapt.once('app:dataLoaded', function() {\n                //check if accessibility mode should be restored\n                this._hasCourseLoaded = true;\n                Adapt.config.get(\"_accessibility\")._isActive = Adapt.offlineStorage.get(\"a11y\") || false;\n                this.setupAccessibility();\n                \n            }, Accessibility);\n\n            Adapt.on('accessibility:toggle', this.setupAccessibility, Accessibility);\n\n            //SETUP RENDERING HELPERS\n            Adapt.once('app:dataLoaded', this.setupHelpers, Accessibility);\n            Adapt.once('app:dataLoaded', this.touchDeviceCheck, Accessibility);\n\n            //SETUP NEW VIEW FOR TOGGLE BUTTON\n            Adapt.once('app:dataReady', this.setupToggleButton, this);\n\n            //SETUP NO SELECT PARAMETERS ON DEVICE CHANGE\n            Adapt.on(\"device:changed\", this.setupNoSelect);\n\n            //Configure the accessibility library\n            this.listenToOnce(Adapt, \"app:dataReady\", this.configureA11yLibrary)\n\n            //CAPTURE ROUTING/NEW DOCUMENT LOADING START AND END\n            this.listenTo(Adapt, 'router:location', this.onNavigationStart);\n            this.listenTo(Adapt, 'pageView:ready menuView:ready router:plugin', this.onNavigationEnd);\n        },\n\n        setupAccessibility: function() {\n            //CALLED ON BUTTON CLICK AND ON DATA LOAD\n            if (!this.isEnabled()) return;\n\n            if (this._hasCourseLoaded && !Modernizr.touch) {\n                //save accessibility state\n                Adapt.offlineStorage.set(\"a11y\", Adapt.config.get(\"_accessibility\")._isActive);\n            }\n\n            this.reset();\n\n            this.checkTabCapture();\n\n            this.configureA11yLibrary();\n\t\t\t\n            this.touchDeviceCheck();\n\t\t\t\n            // Check if accessibility is active\n            if (this.isActive()) {\n\n                this.setupDocument();\n                this.setupLegacy();\n                this.setupPopupListeners()\n                this.setupUsageInstructions();\n                this.setupLogging();\n\n            } else {\n\n                this.revertDocument();\n                this.revertLegacy();\n                this.revertPopupListeners();\n                this.revertUsageInstructions();\n                this.revertLogging();\n\n            }\n\n        },\n\n        setupHelpers: function() {\n\n            //MAKE $.a11y_text and $.a11y_normalize IN GLOBAL HANDLEBARS HELPERS a11y_text and a11y_normalize\n            var config = Adapt.config.has('_accessibility')\n                ? Adapt.config.get(\"_accessibility\")\n                : false;\n\n            Handlebars.registerHelper('a11y_text', function(text) {\n                //ALLOW ENABLE/DISABLE OF a11y_text HELPER\n                if (config && config._isTextProcessorEnabled === false) {\n                    return text;\n                } else {\n                    return $.a11y_text(text);\n                }\n            });\n\n            Handlebars.registerHelper('a11y_normalize', function(text) {\n                return $.a11y_normalize(text);\n            });\n\n        },\n\n        setupToggleButton: function() {\n            if (this.isEnabled()) {\n                new AccessibilityView();\n            } else {\n                this.$accessibilityToggle.addClass(\"a11y-ignore\").a11y_cntrl_enabled(false);\n            }\n        },\n\n        setupNoSelect: function() {\n            if (!Adapt.config.get('_accessibility') || !Adapt.config.get('_accessibility')._disableTextSelectOnClasses) return;\n\n            var classes = Adapt.config.get('_accessibility')._disableTextSelectOnClasses.split(\" \");\n\n            var isMatch = false;\n            for (var i = 0, item; item = classes[i++];) {\n                if ($('html').is(item)) {\n                    isMatch = true;\n                    break;\n                }\n            }\n\n            if (isMatch) {\n                $('html').addClass(\"no-select\");\n            } else  {\n                $('html').removeClass(\"no-select\");\n            }\n\n        },\n\n        configureA11yLibrary: function() {\n\n            var topOffset = $('.navigation').height()+10;\n            var bottomoffset = 0;\n            $.a11y.options.focusOffsetTop = topOffset;\n            $.a11y.options.focusOffsetBottom = bottomoffset;\n            $.a11y.options.OS = Adapt.device.OS.toLowerCase();\n            $.a11y.options.isTouchDevice = Modernizr.touch;\n\n            if (this.isActive()) {\n                _.extend($.a11y.options, {\n                    isTabbableTextEnabled: true,\n                    isUserInputControlEnabled: true,\n                    isFocusControlEnabled: true,\n                    isFocusLimited: true,\n                    isRemoveNotAccessiblesEnabled: true,\n                    isAriaLabelFixEnabled: true,\n                    isFocusWrapEnabled: true,\n                    isScrollDisableEnabled: true,\n                    isScrollDisabledOnPopupEnabled: false,\n                    isSelectedAlertsEnabled: true,\n                    isAlertsEnabled: true\n                });\n            } else {\n                _.extend($.a11y.options, {\n                    isTabbableTextEnabled: false,\n                    isUserInputControlEnabled: true,\n                    isFocusControlEnabled: true,\n                    isFocusLimited: false,\n                    isRemoveNotAccessiblesEnabled: true,\n                    isAriaLabelFixEnabled: true,\n                    isFocusWrapEnabled: true,\n                    isScrollDisableEnabled: true,\n                    isScrollDisabledOnPopupEnabled: false,\n                    isSelectedAlertsEnabled: false,\n                    isAlertsEnabled: false\n                });\n            }\n\n            this.setupNoSelect();\n\n            $.a11y.ready();\n\n            if (!this.isEnabled()) return;\n\n            //CAPTURE TAB PRESSES TO DIVERT\n            $('body').off('keyup', this.onKeyUp);\n            $('body').on('keyup', this.onKeyUp);\n        },\n\n        onNavigationStart: function() {\n            this._isLoaded = false;\n            this._hasUserTabbed = false;\n            //STOP DOCUMENT READING, MOVE FOCUS TO APPROPRIATE LOCATION\n            $(\"#a11y-focuser\").a11y_focus(true);\n            _.defer(function() {\n                $.a11y_on(false, '.page');\n                $.a11y_on(false, '.menu');\n            });\n        },\n\n        onNavigationEnd: function(view) {\n            //prevent sub-menu items provoking behaviour\n            if (view && view.model) {\n                if (view.model.get(\"_id\") != Adapt.location._currentId) return;\n            }\n\n            //always use detached aria labels for divs and spans\n            _.defer(function() {\n                $('body').a11y_aria_label(true);\n            });\n\n            this._isLoaded = true;\n\n            $.a11y_on(false, '.page');\n            $.a11y_on(false, '.menu');\n\n            this.configureA11yLibrary();\n            $.a11y_update();\n            this.setNavigationBar();\n\n            //MAKE FOCUS RIGHT\n            this._isButtonRedirectionOn = true;\n            _.delay(_.bind(function() {\n                this.focusInitial();\n            }, this), 500);\n\n        },\n\n        setNavigationBar: function() {\n            if (this.isActive()) {\n                $(\".navigation .aria-label\").attr(\"tabindex\", 0).removeAttr(\"aria-hidden\").removeClass(\"a11y-ignore\");\n            } else {\n                $(\".navigation .aria-label\").attr(\"tabindex\", -1).attr(\"aria-hidden\", \"true\");\n            }\n        },\n\n        touchDeviceCheck: function() {\n            //SCREEN READER DON@T USE TABBING\n            //FORCE ACCESSIBILITY ON TO RENDER NECESSARY STUFFS FOR TOUCH DEVICE SCREENREADERS\n            if (!this.isEnabled()) return;\n\n            if (Modernizr.touch) {\n                 //Remove button\n                this.$accessibilityToggle.remove();\n            }\n\n            if (!Modernizr.touch || this.isActive()) return;\n\n            //If a touch device and not enabled, remove accessibility button and turn on accessibility\n\n            this._isLoaded = true;\n\n            //Force accessibility on\n            Adapt.config.get('_accessibility')._isEnabled = true;\n            Adapt.config.get('_accessibility')._isActive = true;\n\n            Adapt.trigger('accessibility:toggle', true);\n\n        },\n\n        checkTabCapture: function() {\n            if (!this._isLoaded) return;\n\n            var isActive = this.isActive();\n\n            $.a11y(isActive);\n\n            //IF ACCESSIBILTY TURNED ON QUIT\n            if (isActive) return;\n\n            //OTHERWISE ENABLE TAB REDIRECTION TO TOGGLE BUTTON\n            this._isButtonRedirectionOn = true;\n        },\n\n        isActive: function() {\n            return Adapt.config.has('_accessibility')\n                && Adapt.config.get('_accessibility')._isEnabled\n                && Adapt.config.get('_accessibility')._isActive;\n        },\n\n        isEnabled: function() {\n            return Adapt.config.has('_accessibility')\n                && Adapt.config.get('_accessibility')._isEnabled\n        },\n\n        setupDocument: function() {\n            this.$html.addClass('accessibility');\n            $.a11y(true)\n            $.a11y_on(true, \"body > *\");\n        },\n\n        setupLegacy: function() {\n            //IE8 .focused CLASS AS :focus ISN'T AVAILABLE\n\n            if(!this.$html.hasClass('ie8') || !Adapt.config.get('_accessibility')._shouldSupportLegacyBrowsers) return;\n\n            // If legacy enabled run setupLegacyListeners()\n            this.listenTo(Adapt, 'pageView:ready menuView:ready', this.setupLegacyFocusClasser);\n            this.listenTo(Adapt, 'remove', this.removeLegacyFocusClasser);\n\n        },\n\n        setupLegacyFocusClasser: function() {\n            this.removeLegacyFocusClasser();\n\n            // On focus add class of focused, on blur remove class\n            this._legacyFocusElements = $(this._tabIndexElements);\n            this._legacyFocusElements\n                .on('focus', this.onElementFocused)\n                .on('blur', this.onElementBlurred);\n        },\n\n        setupPopupListeners: function() {\n            this.listenTo(Adapt, 'popup:opened popup:closed', this.onPop);\n        },\n\n\n        setupUsageInstructions: function() {\n            if (!Adapt.course.get(\"_globals\")._accessibility || !Adapt.course.get(\"_globals\")._accessibility._accessibilityInstructions) {\n                this.$accessibilityInstructions.remove();\n                return;\n            }\n\n            var instructionsList = Adapt.course.get(\"_globals\")._accessibility._accessibilityInstructions;\n\n            var usageInstructions;\n            if (instructionsList[Adapt.device.browser]) {\n                usageInstructions = instructionsList[Adapt.device.browser];\n            } else if (Modernizr.touch) {\n                usageInstructions = instructionsList.touch || \"\";\n            } else {\n                usageInstructions = instructionsList.notouch || \"\";\n            }\n\n           this.$accessibilityInstructions.html( usageInstructions );\n        },\n\n        setupLogging: function() {\n            if (!Adapt.config.get(\"_accessibility\") || !Adapt.config.get(\"_accessibility\")._logReading) return;\n\n            $(document).on(\"reading\", this.onRead);\n        },\n\n\n\n        revertDocument: function() {\n            this.$html.removeClass('accessibility');\n            $.a11y(false)\n            $.a11y_on(false, \"body > *\");\n            $.a11y_on(true, \"#accessibility-toggle\");\n        },\n\n        revertLegacy: function() {\n\n            if(!this.$html.hasClass('ie8') || !Adapt.config.get('_accessibility')._shouldSupportLegacyBrowsers) return;\n\n            this.stopListening(Adapt, 'pageView:ready menuView:ready', this.setupLegacyFocusClasser);\n            this.stopListening(Adapt, 'remove', this.removeLegacyFocusClasser);\n\n        },\n\n        removeLegacyFocusClasser: function() {\n            if (this._legacyFocusElements === undefined) return;\n\n            //Remove focus and blur events\n            this._legacyFocusElements\n                .off('focus', this.onElementFocused)\n                .off('blur', this.onElementBlurred);\n            this._legacyFocusElements = undefined;\n        },\n\n\n        revertPopupListeners: function() {\n            this.stopListening(Adapt, 'popup:opened popup:closed', this.onPop);\n        },\n\n        revertUsageInstructions: function() {\n            if (Adapt.course.has(\"_globals\") && (!Adapt.course.get(\"_globals\")._accessibility || !Adapt.course.get(\"_globals\")._accessibility._accessibilityInstructions)) return;\n\n            this.$accessibilityInstructions\n                .off(\"blur\", this.onFocusInstructions)\n        },\n\n        revertLogging: function() {\n            if (Adapt.course.has(\"_globals\") && (!Adapt.course.get(\"_globals\")._accessibility || !Adapt.course.get(\"_globals\")._accessibility._logReading)) return;\n\n            $($.a11y).off(\"reading\", this.onRead);\n        },\n\n\n        focusInitial: function() {\n            if (!this.isActive()) return;\n\n            this._isButtonRedirectionOn = false;\n\n            var debouncedInitial = _.debounce(_.bind(function() {\n                //ENABLED DOCUMENT READING\n\n                if (!this._hasUsageInstructionRead) {\n\n                    this._hasUsageInstructionRead = true;\n\n                    $.a11y_on(true, '.page');\n                    $.a11y_on(true, '.menu');\n\n                    if (this._hasUserTabbed) return;\n\t\n                    this.$accessibilityInstructions.one(\"blur\", this.onFocusInstructions)\n\t\n                    _.delay(function(){\n                        Accessibility.$accessibilityInstructions.focusNoScroll();\n                    }, 250);\n\n                } else {\n\n                    if (Adapt.location._currentId && $.a11y.options.OS!=\"mac\") {\n                        //required to stop JAWS from auto reading content in IE\n                        var currentModel = Adapt.findById(Adapt.location._currentId);\n                        var alertText = \" \";\n\n                        switch (currentModel.get(\"_type\")) {\n                            case \"page\":\n                            if (Adapt.course.get(\"_globals\") && Adapt.course.get(\"_globals\")._accessibility && Adapt.course.get(\"_globals\")._accessibility._ariaLabels && Adapt.course.get(\"_globals\")._accessibility._ariaLabels.pageLoaded) {\n                                    alertText = Adapt.course.get(\"_globals\")._accessibility._ariaLabels.pageLoaded;\n                                }\n                                break;\n\n                            case \"menu\":\n                            default:\n                            if (Adapt.course.get(\"_globals\") && Adapt.course.get(\"_globals\")._accessibility && Adapt.course.get(\"_globals\")._accessibility._ariaLabels && Adapt.course.get(\"_globals\")._accessibility._ariaLabels.menuLoaded) {\n                                    alertText = Adapt.course.get(\"_globals\")._accessibility._ariaLabels.menuLoaded;\n                                }\n                                break;\n                        }\n\n                        $.a11y_alert(alertText);\n                    }\n\n                     _.delay(_.bind(function() {\n                        var windowScrollTop = $(window).scrollTop();\n                        var documentScrollTop = $(document).scrollTop();\n\n                        $.a11y_on(true, '.page');\n                        $.a11y_on(true, '.menu');\n\n                        //prevent auto scrolling to top when scroll has been initiated\n                        if (windowScrollTop > 0 || documentScrollTop > 0 || this._hasUserTabbed) return;\n\n                        _.delay(function(){\n                        $.a11y_focus();\n                        }, 500);\n\n                    }, this), 500);\n\n                }\n\n            }, this), 100);\n            debouncedInitial();\n\n        },\n\n        onElementFocused: function(event) {\n             $(this).addClass('focused');\n        },\n\n        onElementBlurred: function(event) {\n            $(this).removeClass('focused');\n        },\n\n        onRead: function(event, text) {\n            //OUTPUT READ TEXT TO CONSOLE\n            console.log(\"READING: \" + text);\n        },\n\n        onPop: function() {\n            //MAKE SURE POPUP IS CONFIGURED CORRECTLY WITH ARIA LABELS, TABINDEXES ETC\n            if (this.isActive()) {\n                $.a11y_update();\n            }\n        },\n\n        onKeyUp: function(event) {\n\n            //IF NOT TAB KEY, RETURN\n            if (event.which !== 9) return;\n\n            //DO NOT REDIRECT IF USER HAS ALREADY INTERACTED\n            if ($.a11y.userInteracted) return;\n            Accessibility._hasUserTabbed = true;\n\n            //IF INITIAL TAB NOT CAPTURED AND ACCESSIBILITY NOT ON, RETURN\n            if (Accessibility.isActive() && !Accessibility._isButtonRedirectionOn) return;\n\n            //IF TAB PRESSED, AND TAB REDIRECTION ON, ALWAYS TAB TO ACCESSIBILITY BUTTON ONLY\n            Accessibility.$accessibilityToggle.focus();\n\n        },\n\n        onFocusInstructions: function(event) {\n            //HIDE INSTRUCTIONS FROM TAB WRAP AROUND AFTER LEAVING INSTRUCTIONS\n            if (Accessibility._isButtonRedirectionOn) return;\n            if (!Accessibility._isLoaded) return;\n            Accessibility.$accessibilityInstructions\n                .addClass(\"a11y-ignore-focus\")\n                .off(\"blur\", Accessibility.onFocusInstructions);\n        }\n\n    }, Backbone.Events);\n\n\n    Accessibility.initialize();\n\n    return Accessibility;\n\n});\n\n",
    "define('coreViews/navigationView',['require','backbone','handlebars','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Handlebars = require('handlebars');\n    var Adapt = require('coreJS/adapt');\n\n    var NavigationView = Backbone.View.extend({\n\n        className: \"navigation\",\n\n        initialize: function() {\n            this.listenTo(Adapt, 'router:menu router:page', this.hideNavigationButton);\n            this.template = \"navigation\";\n            this.preRender();\n        },\n\n        events: {\n            'click [data-event]':'triggerEvent'\n        },\n\n        preRender: function() {\n            Adapt.trigger('navigationView:preRender', this);\n            this.render();\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template]\n            this.$el.html(template({_globals: Adapt.course.get(\"_globals\")})).appendTo('#wrapper');\n            _.defer(_.bind(function() {\n                Adapt.trigger('navigationView:postRender', this);\n            }, this));\n            return this;\n        },\n\n        triggerEvent: function(event) {\n            event.preventDefault();\n            var currentEvent = $(event.currentTarget).attr('data-event');\n            Adapt.trigger('navigation:' + currentEvent);\n        },\n\n        hideNavigationButton: function(model) {\n            if (model.get('_type') === \"course\") {\n                $('.navigation-back-button').addClass('display-none');\n            } else {\n                this.showNavigationButton();\n            }\n        },\n\n        showNavigationButton: function() {\n            $('.navigation-back-button').removeClass('display-none');\n        }\n\n    });\n\n    return NavigationView;\n\n});\n\n",
    "define('coreJS/adaptCollection',['require','backbone','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var AdaptCollection = Backbone.Collection.extend({\n        initialize : function(models, options){\n            this.url = options.url;\n\n            this.once('reset', this.loadedData, this);\n            if (this.url) {\n                this.fetch({reset:true});\n            }\n        },\n\n        loadedData: function() {\n            Adapt.trigger('adaptCollection:dataLoaded');\n        }\n\n    });\n\n    return AdaptCollection;\n\n});\n\n",
    "define('coreModels/configModel',['require','backbone','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var ConfigModel = Backbone.Model.extend({\n\n        defaults: {\n            screenSize : {\n                small:520,\n                medium:760,\n                large:1024\n            },\n            _canLoadData:true,\n            _disableAnimation:false\n        },\n\n        initialize: function(attrs, options) {\n            this.url = options.url;\n            // Fetch data & if successful trigger event to enable plugins to stop course files loading\n            // Then check if course files can load\n            // 'configModel:loadCourseData' event starts the core content collections and models being fetched\n            this.fetch({\n                success: _.bind(function() {\n                    Adapt.trigger('configModel:dataLoaded');\n                    if (this.get('_canLoadData')) {\n                        Adapt.trigger('configModel:loadCourseData');\n                    }\n                    if(this.get('_defaultDirection')=='rtl'){//We're going to use rtl style\n                    \t$('html').addClass('dir-rtl');\n                    }\n                    // check if animations should be disabled\n                    var disableAnimationArray = this.get('_disableAnimationFor');\n                    if (disableAnimationArray && disableAnimationArray.length > 0) {\n                        for (var i=0; i < disableAnimationArray.length; i++) {\n                            if ($(\"html\").is(disableAnimationArray[i])) {\n                                this.set('_disableAnimation', true);\n                                console.log('Animation disabled.');\n                            }\n                        }\n                    }\n                }, this),\n                error: function() {\n                    console.log('Unable to load course/config.json');\n                }\n            });\n        },\n\n        loadData: function() {\n\n        }\n\n    });\n\n   return ConfigModel;\n\n});\n\n",
    "define('coreModels/adaptModel',['require','backbone','coreJS/adapt'],function (require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var AdaptModel = Backbone.Model.extend({\n\n        defaults: {\n            _canShowFeedback: true,\n            _canReset: false,\n            _isComplete: false,\n            _isInteractionComplete: false,\n            _isEnabled: true,\n            _isResetOnRevisit: false,\n            _isAvailable: true,\n            _isOptional: false,\n            _isReady: false,\n            _isVisible: true\n        },\n\n        initialize: function () {\n            // Wait until data is loaded before setting up model\n            Adapt.once('app:dataLoaded', this.setupModel, this);\n\n        },\n\n        setupModel: function() {\n            if (this.get('_type') === 'page') {\n                this._children = 'articles';\n            }\n            if (this._siblings === 'contentObjects' && this.get('_parentId') !== Adapt.course.get('_id')) {\n                this._parent = 'contentObjects';\n            }\n            if (this._children) {\n                //if parent is optional, apply to children\n                if (this.get('_isOptional')) this.setOptional(true);\n\n                this.setupChildListeners();\n            }\n            this.init();\n            _.defer(_.bind(function() {\n                if (this._children) {\n                    this.checkCompletionStatus();\n                    this.checkInteractionCompletionStatus();\n                }\n            }, this));\n        },\n\n        setupChildListeners: function() {\n\n            if (!this.getChildren()) return;\n\n            Adapt[this._children].on({\n                \"change:_isReady\": this.checkReadyStatus,\n                \"change:_isComplete\": this.checkCompletionStatus,\n                \"change:_isInteractionComplete\": this.checkInteractionCompletionStatus\n            }, this);\n\n        },\n\n        init: function() {},\n\n        reset: function(type, force) {\n            if (!this.get(\"_canReset\") && !force) return;\n\n            type = type || true;\n\n            switch (type) {\n            case \"hard\": case true:\n                this.set({\n                    _isEnabled: true,\n                    _isComplete: false,\n                    _isInteractionComplete: false,\n                });\n                break;\n            case \"soft\":\n                this.set({\n                    _isEnabled: true,\n                    _isInteractionComplete: false\n                });\n                break;\n            }\n        },\n\n        checkReadyStatus: function () {\n            // Filter children based upon whether they are available\n            var availableChildren = new Backbone.Collection(this.getChildren().where({_isAvailable: true}));\n            // Check if any return _isReady:false\n            // If not - set this model to _isReady: true\n            if (availableChildren.findWhere({_isReady: false})) return;\n            this.set({_isReady: true});\n        },\n\n        checkCompletionStatus: function () {\n            // Filter children based upon whether they are available\n            var availableChildren = new Backbone.Collection(this.getChildren().where({_isAvailable: true}));\n            // Check if any return _isComplete:false\n            // If not - set this model to _isComplete: true\n            if (availableChildren.findWhere({_isComplete: false, _isOptional: false})) {\n                //cascade reset to menu\n                this.set({_isComplete:false});\n                return;\n            }\n            this.set({_isComplete: true});\n        },\n\n        checkInteractionCompletionStatus: function () {\n            // Filter children based upon whether they are available\n            var availableChildren = new Backbone.Collection(this.getChildren().where({_isAvailable: true}));\n            // Check if any return _isInteractionComplete:false\n            // If not - set this model to _isInteractionComplete: true\n            if (availableChildren.findWhere({_isInteractionComplete: false, _isOptional: false})) {\n                //cascade reset to menu\n                this.set({_isInteractionComplete:false});\n                return;\n            }\n            this.set({_isInteractionComplete: true});\n        },\n\n        findAncestor: function (ancestors) {\n\n            var parent = this.getParent();\n\n            if (this._parent === ancestors) {\n                return parent;\n            }\n\n            var returnedAncestor = parent.getParent();\n\n            if (parent._parent !== ancestors) {\n                returnedAncestor = returnedAncestor.getParent();\n            }\n\n            // Returns a single model\n            return returnedAncestor;\n\n        },\n\n        findDescendants: function (descendants) {\n\n            // first check if descendant is child and return child\n            if (this._children === descendants) {\n                return this.getChildren();\n            }\n\n            var allDescendants = [];\n            var flattenedDescendants;\n            var children = this.getChildren();\n            var returnedDescedants;\n\n            function searchChildren(children) {\n                var models = children.models;\n                for (var i = 0, len = models.length; i < len; i++) {\n                    var model = models[i];\n                    var childrensModels = model.getChildren().models;\n                    allDescendants.push(childrensModels);\n                    flattenedDescendants = _.flatten(allDescendants);\n                }\n\n                returnedDescedants = new Backbone.Collection(flattenedDescendants);\n\n                if (children.models.length === 0 || children.models[0]._children === descendants) {\n                    return;\n                } else {\n                    allDescendants = [];\n                    searchChildren(returnedDescedants);\n                }\n            }\n\n            searchChildren(children);\n\n            // returns a collection of children\n            return returnedDescedants;\n        },\n\n        getChildren: function () {\n            if (this.get(\"_children\")) return this.get(\"_children\");\n\n            var childrenCollection;\n\n            if (!this._children) {\n                childrenCollection = new Backbone.Collection();\n            } else {\n                var children = Adapt[this._children].where({_parentId: this.get(\"_id\")});\n                childrenCollection = new Backbone.Collection(children);\n            }\n\n            if (this.get('_type') == 'block' && childrenCollection.length == 2\n                && childrenCollection.models[0].get('_layout') !== 'left') {\n                // Components may have a 'left' or 'right' _layout,\n                // so ensure they appear in the correct order\n                // Re-order component models to correct it\n                childrenCollection.comparator = '_layout';\n                childrenCollection.sort();\n            }\n\n            this.set(\"_children\", childrenCollection);\n\n            // returns a collection of children\n            return childrenCollection;\n        },\n\n        getParent: function () {\n            if (this.get(\"_parent\")) return this.get(\"_parent\");\n            if (this._parent === \"course\") {\n                return Adapt.course;\n            }\n            var parent = Adapt.findById(this.get(\"_parentId\"));\n            this.set(\"_parent\", parent);\n\n            // returns a parent model\n            return parent;\n        },\n\n        getParents: function(shouldIncludeChild) {\n            var parents = [];\n            var context = this;\n            \n            if (shouldIncludeChild) parents.push(context);\n            \n            while (context.has(\"_parentId\")) {\n                context = context.getParent();\n                parents.push(context);\n            }\n            \n            return parents.length ? new Backbone.Collection(parents) : null;\n        },\n\n        getSiblings: function (passSiblingsAndIncludeSelf) {\n            var siblings;\n            if (!passSiblingsAndIncludeSelf) {\n                // returns a collection of siblings excluding self\n                if (this._hasSiblingsAndSelf === false) {\n                    return this.get(\"_siblings\");\n                }\n                siblings = _.reject(Adapt[this._siblings].where({\n                    _parentId: this.get(\"_parentId\")\n                }), _.bind(function (model) {\n                    return model.get('_id') == this.get('_id');\n                }, this));\n\n                this._hasSiblingsAndSelf = false;\n\n            } else {\n                // returns a collection of siblings including self\n                if (this._hasSiblingsAndSelf) {\n                    return this.get(\"_siblings\");\n                }\n\n                siblings = Adapt[this._siblings].where({\n                    _parentId: this.get(\"_parentId\")\n                });\n                this._hasSiblingsAndSelf = true;\n            }\n\n            var siblingsCollection = new Backbone.Collection(siblings);\n            this.set(\"_siblings\", siblingsCollection);\n            return siblingsCollection;\n        },\n\n        setOnChildren: function (key, value, options) {\n\n            var args = arguments;\n\n            this.set.apply(this, args);\n\n            if (!this._children) return;\n\n            var children = this.getChildren();\n            var models = children.models;\n            for (var i = 0, len = models.length; i < len; i++) {\n                var child = models[i];\n                child.setOnChildren.apply(child, args);\n            }\n\n        },\n\n        setOptional: function(value) {\n            this.set({_isOptional: value});\n            if (this._children) this.setOnChildren('_isOptional', value);\n        }\n\n\n    });\n\n    return AdaptModel;\n\n});\n\n",
    "define('coreModels/courseModel',['require','coreModels/adaptModel','coreJS/adapt'],function(require) {\n\n    var AdaptModel = require('coreModels/adaptModel');\n    var Adapt = require('coreJS/adapt');\n\n    var CourseModel = AdaptModel.extend({\n\n        initialize: function(attrs, options) {\n            this.url = options.url;\n\n            this.on('sync', this.loadedData, this);\n            if (this.url) {\n                this.fetch();\n            }\n        },\n\n        loadedData: function() {\n            Adapt.trigger('courseModel:dataLoaded');\n            this.setupListeners();\n        },\n\n        setupListeners: function() {\n            Adapt[this._children].on({\n                \"change:_isReady\": this.checkReadyStatus,\n                \"change:_isComplete\": this.checkCompletionStatus,\n                \"change:_isInteractionComplete\": this.checkInteractionCompletionStatus\n            }, this);\n        },\n\n        _children: \"contentObjects\"\n\n    });\n\n    return CourseModel;\n\n});\n\n",
    "define('coreModels/contentObjectModel',['require','coreModels/adaptModel','coreJS/adapt'],function(require) {\n\n    var AdaptModel = require('coreModels/adaptModel');\n    var Adapt = require('coreJS/adapt');\n\n    var ContentObjectModel = AdaptModel.extend({\n    \t_parent:'course',\n    \t_siblings:'contentObjects',\n        _children: 'contentObjects'\n    });\n\n    return ContentObjectModel;\n});\n\n",
    "define('coreModels/articleModel',['require','coreModels/adaptModel','coreJS/adapt'],function(require) {\n\n\tvar AdaptModel = require('coreModels/adaptModel');\n\tvar Adapt = require('coreJS/adapt');\n\n    var ArticleModel = AdaptModel.extend({\n        _parent:'contentObjects',\n    \t_siblings:'articles',\n        _children: 'blocks'\n    });\n\n    return ArticleModel;\n\n});\n\n",
    "define('coreModels/blockModel',['require','coreModels/adaptModel'],function(require) {\n\n\tvar AdaptModel = require('coreModels/adaptModel');\n\n    var BlockModel = AdaptModel.extend({\n        _parent:'articles',\n    \t_siblings:'blocks',\n        _children: 'components'\n    });\n\n    return BlockModel;\n\n});\n\n",
    "define('coreModels/componentModel',['require','coreJS/adapt','coreModels/adaptModel'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n\tvar AdaptModel = require('coreModels/adaptModel');\n\n    var ComponentModel = AdaptModel.extend({\n    \tinit: function() {\n    \t\t// Setup _isQuestionType on question components\n    \t\tvar componentType = this.get('_component');\n            if (Adapt.componentStore[componentType]) {\n        \t\tif (Adapt.componentStore[componentType]._isQuestionType) {\n        \t\t\tthis.set('_isQuestionType', true);\n        \t\t}\n            }\n    \t},\n\n        reset: function(type, force) {\n            if (!this.get(\"_canReset\") && !force) return;\n\n            type = type || true;\n\n            AdaptModel.prototype.reset.call(this, type, force);\n\n            if (this.get(\"_isQuestionType\")) {\n                var attempts = this.get('_attempts');\n                this.set({\n                    _attemptsLeft: attempts,\n                    _isCorrect: undefined,\n                    _isSubmitted: false,\n                    _buttonState: 'submit'\n                });\n            }\n        },\n\n        _parent:'blocks',\n    \t_siblings:'components'\n    });\n\n    return ComponentModel;\n\n});\n\n",
    "define('coreJS/offlineStorage',[\n\t'coreJS/adapt'\n], function(Adapt) {\n\n\t//Basic API for setting and getting name+value pairs\n\t//Allows registration of a single handler.\n\n\tAdapt.offlineStorage = {\n\n\t\tinitialize: function(handler) {\n\t\t\tthis._handler = handler;\n\t\t},\n\n\t\tset: function(name, value) {\n\t\t\tif (!(this._handler && this._handler.set)) return;\n\t\t\treturn this._handler.set.apply(this._handler, arguments);\n\t\t},\n\n\t\tget: function(name) {\n\t\t\tif (!(this._handler && this._handler.get)) return;\n\t\t\treturn this._handler.get.apply(this._handler, arguments);\n\t\t}\n\n\t};\n\n\treturn Adapt.offlineStorage;\n\n});\n\n",
    "/*! VelocityJS.org (1.2.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */\n/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */\n!function(e){function t(e){var t=e.length,r=$.type(e);return\"function\"===r||$.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===r||0===t||\"number\"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var $=function(e,t){return new $.fn.init(e,t)};$.isWindow=function(e){return null!=e&&e==e.window},$.type=function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?a[o.call(e)]||\"object\":typeof e},$.isArray=Array.isArray||function(e){return\"array\"===$.type(e)},$.isPlainObject=function(e){var t;if(!e||\"object\"!==$.type(e)||e.nodeType||$.isWindow(e))return!1;try{if(e.constructor&&!n.call(e,\"constructor\")&&!n.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(r){return!1}for(t in e);return void 0===t||n.call(e,t)},$.each=function(e,r,a){var n,o=0,i=e.length,s=t(e);if(a){if(s)for(;i>o&&(n=r.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=r.apply(e[o],a),n===!1)break}else if(s)for(;i>o&&(n=r.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=r.call(e[o],o,e[o]),n===!1)break;return e},$.data=function(e,t,a){if(void 0===a){var n=e[$.expando],o=n&&r[n];if(void 0===t)return o;if(o&&t in o)return o[t]}else if(void 0!==t){var n=e[$.expando]||(e[$.expando]=++$.uuid);return r[n]=r[n]||{},r[n][t]=a,a}},$.removeData=function(e,t){var a=e[$.expando],n=a&&r[a];n&&$.each(t,function(e,t){delete n[t]})},$.extend=function(){var e,t,r,a,n,o,i=arguments[0]||{},s=1,l=arguments.length,u=!1;for(\"boolean\"==typeof i&&(u=i,i=arguments[s]||{},s++),\"object\"!=typeof i&&\"function\"!==$.type(i)&&(i={}),s===l&&(i=this,s--);l>s;s++)if(null!=(n=arguments[s]))for(a in n)e=i[a],r=n[a],i!==r&&(u&&r&&($.isPlainObject(r)||(t=$.isArray(r)))?(t?(t=!1,o=e&&$.isArray(e)?e:[]):o=e&&$.isPlainObject(e)?e:{},i[a]=$.extend(u,o,r)):void 0!==r&&(i[a]=r));return i},$.queue=function(e,r,a){function n(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,n=e.length;r>a;)e[n++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[n++]=t[a++];return e.length=n,e}(a,\"string\"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){r=(r||\"fx\")+\"queue\";var o=$.data(e,r);return a?(!o||$.isArray(a)?o=$.data(e,r,n(a)):o.push(a),o):o||[]}},$.dequeue=function(e,t){$.each(e.nodeType?[e]:e,function(e,r){t=t||\"fx\";var a=$.queue(r,t),n=a.shift();\"inprogress\"===n&&(n=a.shift()),n&&(\"fx\"===t&&a.unshift(\"inprogress\"),n.call(r,function(){$.dequeue(r,t)}))})},$.fn=$.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error(\"Not a DOM node.\")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&\"html\"===!e.nodeType.toLowerCase&&\"static\"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),r=this.offset(),a=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:$(e).offset();return r.top-=parseFloat(t.style.marginTop)||0,r.left-=parseFloat(t.style.marginLeft)||0,e.style&&(a.top+=parseFloat(e.style.borderTopWidth)||0,a.left+=parseFloat(e.style.borderLeftWidth)||0),{top:r.top-a.top,left:r.left-a.left}}};var r={};$.expando=\"velocity\"+(new Date).getTime(),$.uuid=0;for(var a={},n=a.hasOwnProperty,o=a.toString,i=\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),s=0;s<i.length;s++)a[\"[object \"+i[s]+\"]\"]=i[s].toLowerCase();$.fn.init.prototype=$.fn,e.Velocity={Utilities:$}}}(window),function(e){\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e():\"function\"==typeof define&&define.amd?define('velocity',e):e()}(function(){return function(e,t,r,a){function n(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var n=e[t];n&&a.push(n)}return a}function o(e){return g.isWrapped(e)?e=[].slice.call(e):g.isNode(e)&&(e=[e]),e}function i(e){var t=$.data(e,\"velocity\");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,n){function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((o(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*o(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var n=0;m>n;++n){var o=u(r,e,a);if(0===o)return r;var i=l(r,e,a)-t;r-=i/o}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,n){var o,i,s=0;do i=r+(n-r)/2,o=l(i,e,a)-t,o>0?n=i:r=i;while(Math.abs(o)>h&&++s<v);return i}function d(t){for(var r=0,n=1,o=b-1;n!=o&&w[n]<=t;++n)r+=x;--n;var i=(t-w[n])/(w[n+1]-w[n]),s=r+i*x,l=u(s,e,a);return l>=y?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=n)&&p()}var m=4,y=.001,h=1e-7,v=10,b=11,x=1/(b-1),S=\"Float32Array\"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if(\"number\"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===n?t:0===t?0:1===t?1:l(d(t),r,n)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:n}]};var T=\"generateBezier(\"+[e,r,a,n]+\")\";return C.toString=function(){return T},C}function u(e,t){var r=e;return g.isString(e)?v.Easings[e]||(r=!1):r=g.isArray(e)&&1===e.length?s.apply(null,e):g.isArray(e)&&2===e.length?b.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?l.apply(null,e):!1,r===!1&&(r=v.Easings[v.defaults.easing]?v.defaults.easing:h),r}function c(e){if(e){var t=(new Date).getTime(),r=v.State.calls.length;r>1e4&&(v.State.calls=n(v.State.calls));for(var o=0;r>o;o++)if(v.State.calls[o]){var s=v.State.calls[o],l=s[0],u=s[2],f=s[3],d=!!f,m=null;f||(f=v.State.calls[o][3]=t-16);for(var y=Math.min((t-f)/u.duration,1),h=0,b=l.length;b>h;h++){var S=l[h],w=S.element;if(i(w)){var V=!1;if(u.display!==a&&null!==u.display&&\"none\"!==u.display){if(\"flex\"===u.display){var C=[\"-webkit-box\",\"-moz-box\",\"-ms-flexbox\",\"-webkit-flex\"];$.each(C,function(e,t){x.setPropertyValue(w,\"display\",t)})}x.setPropertyValue(w,\"display\",u.display)}u.visibility!==a&&\"hidden\"!==u.visibility&&x.setPropertyValue(w,\"visibility\",u.visibility);for(var T in S)if(\"element\"!==T){var k=S[T],A,F=g.isString(k.easing)?v.Easings[k.easing]:k.easing;if(1===y)A=k.endValue;else{var E=k.endValue-k.startValue;if(A=k.startValue+E*F(y,u,E),!d&&A===k.currentValue)continue}if(k.currentValue=A,\"tween\"===T)m=A;else{if(x.Hooks.registered[T]){var j=x.Hooks.getRoot(T),H=i(w).rootPropertyValueCache[j];H&&(k.rootPropertyValue=H)}var N=x.setPropertyValue(w,T,k.currentValue+(0===parseFloat(A)?\"\":k.unitType),k.rootPropertyValue,k.scrollData);x.Hooks.registered[T]&&(i(w).rootPropertyValueCache[j]=x.Normalizations.registered[j]?x.Normalizations.registered[j](\"extract\",null,N[1]):N[1]),\"transform\"===N[0]&&(V=!0)}}u.mobileHA&&i(w).transformCache.translate3d===a&&(i(w).transformCache.translate3d=\"(0px, 0px, 0px)\",V=!0),V&&x.flushTransformCache(w)}}u.display!==a&&\"none\"!==u.display&&(v.State.calls[o][2].display=!1),u.visibility!==a&&\"hidden\"!==u.visibility&&(v.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],y,Math.max(0,f+u.duration-t),f,m),1===y&&p(o)}}v.State.isTicking&&P(c)}function p(e,t){if(!v.State.calls[e])return!1;for(var r=v.State.calls[e][0],n=v.State.calls[e][1],o=v.State.calls[e][2],s=v.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||o.loop||(\"none\"===o.display&&x.setPropertyValue(p,\"display\",o.display),\"hidden\"===o.visibility&&x.setPropertyValue(p,\"visibility\",o.visibility)),o.loop!==!0&&($.queue(p)[1]===a||!/\\.velocityQueueEntryFlag/i.test($.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var f=!1;$.each(x.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,n=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp(\"^\\\\(\"+r+\"[^.]\").test(n)&&(f=!0,delete i(p).transformCache[t])}),o.mobileHA&&(f=!0,delete i(p).transformCache.translate3d),f&&x.flushTransformCache(p),x.Values.removeClass(p,\"velocity-animating\")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(n,n)}catch(d){setTimeout(function(){throw d},1)}s&&o.loop!==!0&&s(n),i(p)&&o.loop===!0&&!t&&($.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&\"%\"===t.unitType&&(t.endValue=0,t.startValue=100)}),v(p,\"reverse\",{loop:!0,delay:o.delay})),o.queue!==!1&&$.dequeue(p,o.queue)}v.State.calls[e]=!1;for(var g=0,m=v.State.calls.length;m>g;g++)if(v.State.calls[g]!==!1){l=!0;break}l===!1&&(v.State.isTicking=!1,delete v.State.calls,v.State.calls=[])}var f=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement(\"div\");if(t.innerHTML=\"<!--[if IE \"+e+\"]><span></span><![endif]-->\",t.getElementsByTagName(\"span\").length)return t=null,e}return a}(),d=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r=(new Date).getTime(),a;return a=Math.max(0,16-(r-e)),e=r+a,setTimeout(function(){t(r+a)},a)}}(),g={isString:function(e){return\"string\"==typeof e},isArray:Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},isFunction:function(e){return\"[object Function]\"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return\"object\"==typeof e&&/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||\"object\"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},$,m=!1;if(e.fn&&e.fn.jquery?($=e,m=!0):$=t.Velocity.Utilities,8>=f&&!m)throw new Error(\"Velocity: IE8 and below require jQuery to be loaded before Velocity.\");if(7>=f)return void(jQuery.fn.velocity=jQuery.fn.animate);var y=400,h=\"swing\",v={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\\.3\\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement(\"div\"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:$,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:\"\",duration:y,easing:h,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){$.data(e,\"velocity\",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(v.State.scrollAnchor=t,v.State.scrollPropertyLeft=\"pageXOffset\",v.State.scrollPropertyTop=\"pageYOffset\"):(v.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,v.State.scrollPropertyLeft=\"scrollLeft\",v.State.scrollPropertyTop=\"scrollTop\");var b=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var n={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,a){var n={dx:r.v,dv:e(r)},o=t(r,.5*a,n),i=t(r,.5*a,o),s=t(r,a,i),l=1/6*(n.dx+2*(o.dx+i.dx)+s.dx),u=1/6*(n.dv+2*(o.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,n){var o={x:-1,v:0,tension:null,friction:null},i=[0],s=0,l=1e-4,u=.016,c,p,f;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,o.tension=e,o.friction=t,c=null!==n,c?(s=a(e,t),p=s/n*u):p=u;;)if(f=r(f||o,p),i.push(1+f.x),s+=16,!(Math.abs(f.x)>l&&Math.abs(f.v)>l))break;return c?function(e){return i[e*(i.length-1)|0]}:s}}();v.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},$.each([[\"ease\",[.25,.1,.25,1]],[\"ease-in\",[.42,0,1,1]],[\"ease-out\",[0,0,.58,1]],[\"ease-in-out\",[.42,0,.58,1]],[\"easeInSine\",[.47,0,.745,.715]],[\"easeOutSine\",[.39,.575,.565,1]],[\"easeInOutSine\",[.445,.05,.55,.95]],[\"easeInQuad\",[.55,.085,.68,.53]],[\"easeOutQuad\",[.25,.46,.45,.94]],[\"easeInOutQuad\",[.455,.03,.515,.955]],[\"easeInCubic\",[.55,.055,.675,.19]],[\"easeOutCubic\",[.215,.61,.355,1]],[\"easeInOutCubic\",[.645,.045,.355,1]],[\"easeInQuart\",[.895,.03,.685,.22]],[\"easeOutQuart\",[.165,.84,.44,1]],[\"easeInOutQuart\",[.77,0,.175,1]],[\"easeInQuint\",[.755,.05,.855,.06]],[\"easeOutQuint\",[.23,1,.32,1]],[\"easeInOutQuint\",[.86,0,.07,1]],[\"easeInExpo\",[.95,.05,.795,.035]],[\"easeOutExpo\",[.19,1,.22,1]],[\"easeInOutExpo\",[1,0,0,1]],[\"easeInCirc\",[.6,.04,.98,.335]],[\"easeOutCirc\",[.075,.82,.165,1]],[\"easeInOutCirc\",[.785,.135,.15,.86]]],function(e,t){v.Easings[t[0]]=l.apply(null,t[1])});var x=v.CSS={RegEx:{isHex:/^#([A-f\\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\\((.*)\\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\\(.+\\))|(([A-z0-9#-.]+?)(?=\\s|$))/gi},Lists:{colors:[\"fill\",\"stroke\",\"stopColor\",\"color\",\"backgroundColor\",\"borderColor\",\"borderTopColor\",\"borderRightColor\",\"borderBottomColor\",\"borderLeftColor\",\"outlineColor\"],transformsBase:[\"translateX\",\"translateY\",\"scale\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"rotateZ\"],transforms3D:[\"transformPerspective\",\"translateZ\",\"scaleZ\",\"rotateX\",\"rotateY\"]},Hooks:{templates:{textShadow:[\"Color X Y Blur\",\"black 0px 0px 0px\"],boxShadow:[\"Color X Y Blur Spread\",\"black 0px 0px 0px 0px\"],clip:[\"Top Right Bottom Left\",\"0px 0px 0px 0px\"],backgroundPosition:[\"X Y\",\"0% 0%\"],transformOrigin:[\"X Y Z\",\"50% 50% 0px\"],perspectiveOrigin:[\"X Y\",\"50% 50%\"]},registered:{},register:function(){for(var e=0;e<x.Lists.colors.length;e++){var t=\"color\"===x.Lists.colors[e]?\"0 0 0 1\":\"255 255 255 1\";x.Hooks.templates[x.Lists.colors[e]]=[\"Red Green Blue Alpha\",t]}var r,a,n;if(f)for(r in x.Hooks.templates){a=x.Hooks.templates[r],n=a[0].split(\" \");var o=a[1].match(x.RegEx.valueSplit);\"Color\"===n[0]&&(n.push(n.shift()),o.push(o.shift()),x.Hooks.templates[r]=[n.join(\" \"),o.join(\" \")])}for(r in x.Hooks.templates){a=x.Hooks.templates[r],n=a[0].split(\" \");for(var e in n){var i=r+n[e],s=e;x.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=x.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return x.RegEx.valueUnwrap.test(t)&&(t=t.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(t)&&(t=x.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=x.Hooks.registered[e];if(r){var a=r[0],n=r[1];return t=x.Hooks.cleanRootPropertyValue(a,t),t.toString().match(x.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,r){var a=x.Hooks.registered[e];if(a){var n=a[0],o=a[1],i,s;return r=x.Hooks.cleanRootPropertyValue(n,r),i=r.toString().match(x.RegEx.valueSplit),i[o]=t,s=i.join(\" \")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case\"name\":return\"clip\";case\"extract\":var a;return x.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(x.RegEx.valueUnwrap),a=a?a[1].replace(/,(\\s+)?/g,\" \"):r),a;case\"inject\":return\"rect(\"+r+\")\"}},blur:function(e,t,r){switch(e){case\"name\":return v.State.isFirefox?\"filter\":\"-webkit-filter\";case\"extract\":var a=parseFloat(r);if(!a&&0!==a){var n=r.toString().match(/blur\\(([0-9]+[A-z]+)\\)/i);a=n?n[1]:0}return a;case\"inject\":return parseFloat(r)?\"blur(\"+r+\")\":\"none\"}},opacity:function(e,t,r){if(8>=f)switch(e){case\"name\":return\"filter\";case\"extract\":var a=r.toString().match(/alpha\\(opacity=(.*)\\)/i);return r=a?a[1]/100:1;case\"inject\":return t.style.zoom=1,parseFloat(r)>=1?\"\":\"alpha(opacity=\"+parseInt(100*parseFloat(r),10)+\")\"}else switch(e){case\"name\":return\"opacity\";case\"extract\":return r;case\"inject\":return r}}},register:function(){9>=f||v.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var e=0;e<x.Lists.transformsBase.length;e++)!function(){var t=x.Lists.transformsBase[e];x.Normalizations.registered[t]=function(e,r,n){switch(e){case\"name\":return\"transform\";case\"extract\":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,\"\");case\"inject\":var o=!1;switch(t.substr(0,t.length-1)){case\"translate\":o=!/(%|px|em|rem|vw|vh|\\d)$/i.test(n);break;case\"scal\":case\"scale\":v.State.isAndroid&&i(r).transformCache[t]===a&&1>n&&(n=1),o=!/(\\d)$/i.test(n);break;case\"skew\":o=!/(deg|\\d)$/i.test(n);break;case\"rotate\":o=!/(deg|\\d)$/i.test(n)}return o||(i(r).transformCache[t]=\"(\"+n+\")\"),i(r).transformCache[t]}}}();for(var e=0;e<x.Lists.colors.length;e++)!function(){var t=x.Lists.colors[e];x.Normalizations.registered[t]=function(e,r,n){switch(e){case\"name\":return t;case\"extract\":var o;if(x.RegEx.wrappedValueAlreadyExtracted.test(n))o=n;else{var i,s={black:\"rgb(0, 0, 0)\",blue:\"rgb(0, 0, 255)\",gray:\"rgb(128, 128, 128)\",green:\"rgb(0, 128, 0)\",red:\"rgb(255, 0, 0)\",white:\"rgb(255, 255, 255)\"};/^[A-z]+$/i.test(n)?i=s[n]!==a?s[n]:s.black:x.RegEx.isHex.test(n)?i=\"rgb(\"+x.Values.hexToRgb(n).join(\" \")+\")\":/^rgba?\\(/i.test(n)||(i=s.black),o=(i||n).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\\s+)?/g,\" \")}return 8>=f||3!==o.split(\" \").length||(o+=\" 1\"),o;case\"inject\":return 8>=f?4===n.split(\" \").length&&(n=n.split(/\\s+/).slice(0,3).join(\" \")):3===n.split(\" \").length&&(n+=\" 1\"),(8>=f?\"rgb\":\"rgba\")+\"(\"+n.replace(/\\s+/g,\",\").replace(/\\.(\\d)+(?=,)/g,\"\")+\")\"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t=\"width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2\";return(f||v.State.isAndroid&&!v.State.isChrome)&&(t+=\"|transform\"),new RegExp(\"^(\"+t+\")$\",\"i\").test(e)},prefixCheck:function(e){if(v.State.prefixMatches[e])return[v.State.prefixMatches[e],!0];for(var t=[\"\",\"Webkit\",\"Moz\",\"ms\",\"O\"],r=0,a=t.length;a>r;r++){var n;if(n=0===r?e:t[r]+e.replace(/^\\w/,function(e){return e.toUpperCase()}),g.isString(v.State.prefixElement.style[n]))return v.State.prefixMatches[e]=n,[n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,r=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i,a;return e=e.replace(t,function(e,t,r,a){return t+t+r+r+a+a}),a=r.exec(e),a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\\(0, ?0, ?0, ?0\\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?\"deg\":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?\"\":\"px\"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?\"inline\":/^(li)$/i.test(t)?\"list-item\":/^(tr)$/i.test(t)?\"table-row\":/^(table)$/i.test(t)?\"table\":/^(tbody)$/i.test(t)?\"table-row-group\":\"block\"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?\" \":\"\")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp(\"(^|\\\\s)\"+t.split(\" \").join(\"|\")+\"(\\\\s|$)\",\"gi\"),\" \")}},getPropertyValue:function(e,r,n,o){function s(e,r){function n(){u&&x.setPropertyValue(e,\"display\",\"none\")}var l=0;if(8>=f)l=$.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===x.getPropertyValue(e,\"display\")&&(u=!0,x.setPropertyValue(e,\"display\",x.Values.getDisplayType(e))),!o){if(\"height\"===r&&\"border-box\"!==x.getPropertyValue(e,\"boxSizing\").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(x.getPropertyValue(e,\"borderTopWidth\"))||0)-(parseFloat(x.getPropertyValue(e,\"borderBottomWidth\"))||0)-(parseFloat(x.getPropertyValue(e,\"paddingTop\"))||0)-(parseFloat(x.getPropertyValue(e,\"paddingBottom\"))||0);return n(),c}if(\"width\"===r&&\"border-box\"!==x.getPropertyValue(e,\"boxSizing\").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(x.getPropertyValue(e,\"borderLeftWidth\"))||0)-(parseFloat(x.getPropertyValue(e,\"borderRightWidth\"))||0)-(parseFloat(x.getPropertyValue(e,\"paddingLeft\"))||0)-(parseFloat(x.getPropertyValue(e,\"paddingRight\"))||0);return n(),p}}var d;d=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),\"borderColor\"===r&&(r=\"borderTopColor\"),l=9===f&&\"filter\"===r?d.getPropertyValue(r):d[r],(\"\"===l||null===l)&&(l=e.style[r]),n()}if(\"auto\"===l&&/^(top|right|bottom|left)$/i.test(r)){var g=s(e,\"position\");(\"fixed\"===g||\"absolute\"===g&&/top|left/i.test(r))&&(l=$(e).position()[r]+\"px\")}return l}var l;if(x.Hooks.registered[r]){var u=r,c=x.Hooks.getRoot(u);n===a&&(n=x.getPropertyValue(e,x.Names.prefixCheck(c)[0])),x.Normalizations.registered[c]&&(n=x.Normalizations.registered[c](\"extract\",e,n)),l=x.Hooks.extractValue(u,n)}else if(x.Normalizations.registered[r]){var p,d;p=x.Normalizations.registered[r](\"name\",e),\"transform\"!==p&&(d=s(e,x.Names.prefixCheck(p)[0]),x.Values.isCSSNullValue(d)&&x.Hooks.templates[r]&&(d=x.Hooks.templates[r][1])),l=x.Normalizations.registered[r](\"extract\",e,d)}if(!/^[\\d-]/.test(l))if(i(e)&&i(e).isSVG&&x.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(g){l=0}else l=e.getAttribute(r);else l=s(e,x.Names.prefixCheck(r)[0]);return x.Values.isCSSNullValue(l)&&(l=0),v.debug>=2&&console.log(\"Get \"+r+\": \"+l),l},setPropertyValue:function(e,r,a,n,o){var s=r;if(\"scroll\"===r)o.container?o.container[\"scroll\"+o.direction]=a:\"Left\"===o.direction?t.scrollTo(a,o.alternateValue):t.scrollTo(o.alternateValue,a);else if(x.Normalizations.registered[r]&&\"transform\"===x.Normalizations.registered[r](\"name\",e))x.Normalizations.registered[r](\"inject\",e,a),s=\"transform\",a=i(e).transformCache[r];else{if(x.Hooks.registered[r]){var l=r,u=x.Hooks.getRoot(r);n=n||x.getPropertyValue(e,u),a=x.Hooks.injectValue(l,a,n),r=u}if(x.Normalizations.registered[r]&&(a=x.Normalizations.registered[r](\"inject\",e,a),r=x.Normalizations.registered[r](\"name\",e)),s=x.Names.prefixCheck(r)[0],8>=f)try{e.style[s]=a}catch(c){v.debug&&console.log(\"Browser does not support [\"+a+\"] for [\"+s+\"]\")}else i(e)&&i(e).isSVG&&x.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;v.debug>=2&&console.log(\"Set \"+r+\" (\"+s+\"): \"+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(x.getPropertyValue(e,t))}var r=\"\";if((f||v.State.isAndroid&&!v.State.isChrome)&&i(e).isSVG){var a={translate:[t(\"translateX\"),t(\"translateY\")],skewX:[t(\"skewX\")],skewY:[t(\"skewY\")],scale:1!==t(\"scale\")?[t(\"scale\"),t(\"scale\")]:[t(\"scaleX\"),t(\"scaleY\")],rotate:[t(\"rotateZ\"),0,0]};$.each(i(e).transformCache,function(e){/^translate/i.test(e)?e=\"translate\":/^scale/i.test(e)?e=\"scale\":/^rotate/i.test(e)&&(e=\"rotate\"),a[e]&&(r+=e+\"(\"+a[e].join(\" \")+\") \",delete a[e])})}else{var n,o;$.each(i(e).transformCache,function(t){return n=i(e).transformCache[t],\"transformPerspective\"===t?(o=n,!0):(9===f&&\"rotateZ\"===t&&(t=\"rotate\"),void(r+=t+n+\" \"))}),o&&(r=\"perspective\"+o+\" \"+r)}x.setPropertyValue(e,\"transform\",r)}};x.Hooks.register(),x.Normalizations.register(),v.hook=function(e,t,r){var n=a;return e=o(e),$.each(e,function(e,o){if(i(o)===a&&v.init(o),r===a)n===a&&(n=v.CSS.getPropertyValue(o,t));else{var s=v.CSS.setPropertyValue(o,t,r);\"transform\"===s[0]&&v.CSS.flushTransformCache(o),n=s}}),n};var S=function(){function e(){return l?T.promise||null:f}function n(){function e(e){function p(e,t){var r=a,i=a,s=a;return g.isArray(e)?(r=e[0],!g.isArray(e[1])&&/^[\\d-]/.test(e[1])||g.isFunction(e[1])||x.RegEx.isHex.test(e[1])?s=e[1]:(g.isString(e[1])&&!x.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(i=t?e[1]:u(e[1],o.duration),e[2]!==a&&(s=e[2]))):r=e,t||(i=i||o.easing),g.isFunction(r)&&(r=r.call(n,w,P)),g.isFunction(s)&&(s=s.call(n,w,P)),[r||0,i,s]}function f(e,t){var r,a;return a=(t||\"0\").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,\"\"}),r||(r=x.Values.getUnitType(e)),[a,r]}function d(){var e={myParent:n.parentNode||r.body,position:x.getPropertyValue(n,\"position\"),fontSize:x.getPropertyValue(n,\"fontSize\")},a=e.position===N.lastPosition&&e.myParent===N.lastParent,o=e.fontSize===N.lastFontSize;N.lastParent=e.myParent,N.lastPosition=e.position,N.lastFontSize=e.fontSize;var s=100,l={};if(o&&a)l.emToPx=N.lastEmToPx,l.percentToPxWidth=N.lastPercentToPxWidth,l.percentToPxHeight=N.lastPercentToPxHeight;else{var u=i(n).isSVG?r.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\"):r.createElement(\"div\");v.init(u),e.myParent.appendChild(u),$.each([\"overflow\",\"overflowX\",\"overflowY\"],function(e,t){v.CSS.setPropertyValue(u,t,\"hidden\")}),v.CSS.setPropertyValue(u,\"position\",e.position),v.CSS.setPropertyValue(u,\"fontSize\",e.fontSize),v.CSS.setPropertyValue(u,\"boxSizing\",\"content-box\"),$.each([\"minWidth\",\"maxWidth\",\"width\",\"minHeight\",\"maxHeight\",\"height\"],function(e,t){v.CSS.setPropertyValue(u,t,s+\"%\")}),v.CSS.setPropertyValue(u,\"paddingLeft\",s+\"em\"),l.percentToPxWidth=N.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(u,\"width\",null,!0))||1)/s,l.percentToPxHeight=N.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(u,\"height\",null,!0))||1)/s,l.emToPx=N.lastEmToPx=(parseFloat(x.getPropertyValue(u,\"paddingLeft\"))||1)/s,e.myParent.removeChild(u)}return null===N.remToPx&&(N.remToPx=parseFloat(x.getPropertyValue(r.body,\"fontSize\"))||16),null===N.vwToPx&&(N.vwToPx=parseFloat(t.innerWidth)/100,N.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=N.remToPx,l.vwToPx=N.vwToPx,l.vhToPx=N.vhToPx,v.debug>=1&&console.log(\"Unit ratios: \"+JSON.stringify(l),n),l}if(o.begin&&0===w)try{o.begin.call(m,m)}catch(y){setTimeout(function(){throw y},1)}if(\"scroll\"===k){var S=/^x$/i.test(o.axis)?\"Left\":\"Top\",V=parseFloat(o.offset)||0,C,A,F;o.container?g.isWrapped(o.container)||g.isNode(o.container)?(o.container=o.container[0]||o.container,C=o.container[\"scroll\"+S],F=C+$(n).position()[S.toLowerCase()]+V):o.container=null:(C=v.State.scrollAnchor[v.State[\"scrollProperty\"+S]],A=v.State.scrollAnchor[v.State[\"scrollProperty\"+(\"Left\"===S?\"Top\":\"Left\")]],F=$(n).offset()[S.toLowerCase()]+V),s={scroll:{rootPropertyValue:!1,startValue:C,currentValue:C,endValue:F,unitType:\"\",easing:o.easing,scrollData:{container:o.container,direction:S,alternateValue:A}},element:n},v.debug&&console.log(\"tweensContainer (scroll): \",s.scroll,n)}else if(\"reverse\"===k){if(!i(n).tweensContainer)return void $.dequeue(n,o.queue);\"none\"===i(n).opts.display&&(i(n).opts.display=\"auto\"),\"hidden\"===i(n).opts.visibility&&(i(n).opts.visibility=\"visible\"),i(n).opts.loop=!1,i(n).opts.begin=null,i(n).opts.complete=null,b.easing||delete o.easing,b.duration||delete o.duration,o=$.extend({},i(n).opts,o);var E=$.extend(!0,{},i(n).tweensContainer);for(var j in E)if(\"element\"!==j){var H=E[j].startValue;E[j].startValue=E[j].currentValue=E[j].endValue,E[j].endValue=H,g.isEmptyObject(b)||(E[j].easing=o.easing),v.debug&&console.log(\"reverse tweensContainer (\"+j+\"): \"+JSON.stringify(E[j]),n)}s=E}else if(\"start\"===k){var E;i(n).tweensContainer&&i(n).isAnimating===!0&&(E=i(n).tweensContainer),$.each(h,function(e,t){if(RegExp(\"^\"+x.Lists.colors.join(\"$|^\")+\"$\").test(e)){var r=p(t,!0),n=r[0],o=r[1],i=r[2];if(x.RegEx.isHex.test(n)){for(var s=[\"Red\",\"Green\",\"Blue\"],l=x.Values.hexToRgb(n),u=i?x.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==a&&f.push(u[c]),h[e+s[c]]=f}delete h[e]}}});for(var R in h){var O=p(h[R]),z=O[0],q=O[1],M=O[2];R=x.Names.camelCase(R);var I=x.Hooks.getRoot(R),B=!1;if(i(n).isSVG||\"tween\"===I||x.Names.prefixCheck(I)[1]!==!1||x.Normalizations.registered[I]!==a){(o.display!==a&&null!==o.display&&\"none\"!==o.display||o.visibility!==a&&\"hidden\"!==o.visibility)&&/opacity|filter/.test(R)&&!M&&0!==z&&(M=0),o._cacheValues&&E&&E[R]?(M===a&&(M=E[R].endValue+E[R].unitType),B=i(n).rootPropertyValueCache[I]):x.Hooks.registered[R]?M===a?(B=x.getPropertyValue(n,I),M=x.getPropertyValue(n,R,B)):B=x.Hooks.templates[I][1]:M===a&&(M=x.getPropertyValue(n,R));var W,G,D,X=!1;if(W=f(R,M),M=W[0],D=W[1],W=f(R,z),z=W[0].replace(/^([+-\\/*])=/,function(e,t){return X=t,\"\"}),G=W[1],M=parseFloat(M)||0,z=parseFloat(z)||0,\"%\"===G&&(/^(fontSize|lineHeight)$/.test(R)?(z/=100,G=\"em\"):/^scale/.test(R)?(z/=100,G=\"\"):/(Red|Green|Blue)$/i.test(R)&&(z=z/100*255,G=\"\")),/[\\/*]/.test(X))G=D;else if(D!==G&&0!==M)if(0===z)G=D;else{l=l||d();var Y=/margin|padding|left|right|width|text|word|letter/i.test(R)||/X$/.test(R)||\"x\"===R?\"x\":\"y\";switch(D){case\"%\":M*=\"x\"===Y?l.percentToPxWidth:l.percentToPxHeight;break;case\"px\":break;default:M*=l[D+\"ToPx\"]}switch(G){case\"%\":M*=1/(\"x\"===Y?l.percentToPxWidth:l.percentToPxHeight);break;case\"px\":break;default:M*=1/l[G+\"ToPx\"]}}switch(X){case\"+\":z=M+z;break;case\"-\":z=M-z;break;case\"*\":z=M*z;break;case\"/\":z=M/z}s[R]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:z,unitType:G,easing:q},v.debug&&console.log(\"tweensContainer (\"+R+\"): \"+JSON.stringify(s[R]),n)}else v.debug&&console.log(\"Skipping [\"+I+\"] due to a lack of browser support.\")}s.element=n}s.element&&(x.Values.addClass(n,\"velocity-animating\"),L.push(s),\"\"===o.queue&&(i(n).tweensContainer=s,i(n).opts=o),i(n).isAnimating=!0,w===P-1?(v.State.calls.push([L,m,o,null,T.resolver]),v.State.isTicking===!1&&(v.State.isTicking=!0,c())):w++)}var n=this,o=$.extend({},v.defaults,b),s={},l;switch(i(n)===a&&v.init(n),parseFloat(o.delay)&&o.queue!==!1&&$.queue(n,o.queue,function(e){v.velocityQueueEntryFlag=!0,i(n).delayTimer={setTimeout:setTimeout(e,parseFloat(o.delay)),next:e}}),o.duration.toString().toLowerCase()){case\"fast\":o.duration=200;break;case\"normal\":o.duration=y;break;case\"slow\":o.duration=600;break;default:o.duration=parseFloat(o.duration)||1}v.mock!==!1&&(v.mock===!0?o.duration=o.delay=1:(o.duration*=parseFloat(v.mock)||1,o.delay*=parseFloat(v.mock)||1)),o.easing=u(o.easing,o.duration),o.begin&&!g.isFunction(o.begin)&&(o.begin=null),o.progress&&!g.isFunction(o.progress)&&(o.progress=null),o.complete&&!g.isFunction(o.complete)&&(o.complete=null),o.display!==a&&null!==o.display&&(o.display=o.display.toString().toLowerCase(),\"auto\"===o.display&&(o.display=v.CSS.Values.getDisplayType(n))),o.visibility!==a&&null!==o.visibility&&(o.visibility=o.visibility.toString().toLowerCase()),o.mobileHA=o.mobileHA&&v.State.isMobile&&!v.State.isGingerbread,o.queue===!1?o.delay?setTimeout(e,o.delay):e():$.queue(n,o.queue,function(t,r){return r===!0?(T.promise&&T.resolver(m),!0):(v.velocityQueueEntryFlag=!0,void e(t))}),\"\"!==o.queue&&\"fx\"!==o.queue||\"inprogress\"===$.queue(n)[0]||$.dequeue(n)}var s=arguments[0]&&(arguments[0].p||$.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties)),l,f,d,m,h,b;if(g.isWrapped(this)?(l=!1,d=0,m=this,f=this):(l=!0,d=1,m=s?arguments[0].elements||arguments[0].e:arguments[0]),m=o(m)){s?(h=arguments[0].properties||arguments[0].p,b=arguments[0].options||arguments[0].o):(h=arguments[d],b=arguments[d+1]);var P=m.length,w=0;if(!/^(stop|finish)$/i.test(h)&&!$.isPlainObject(b)){var V=d+1;b={};for(var C=V;C<arguments.length;C++)g.isArray(arguments[C])||!/^(fast|normal|slow)$/i.test(arguments[C])&&!/^\\d/.test(arguments[C])?g.isString(arguments[C])||g.isArray(arguments[C])?b.easing=arguments[C]:g.isFunction(arguments[C])&&(b.complete=arguments[C]):b.duration=arguments[C]}var T={promise:null,resolver:null,rejecter:null};l&&v.Promise&&(T.promise=new v.Promise(function(e,t){T.resolver=e,T.rejecter=t}));var k;switch(h){case\"scroll\":k=\"scroll\";break;case\"reverse\":k=\"reverse\";break;case\"finish\":case\"stop\":$.each(m,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var A=[];return $.each(v.State.calls,function(e,t){t&&$.each(t[1],function(r,n){var o=b===a?\"\":b;return o===!0||t[2].queue===o||b===a&&t[2].queue===!1?void $.each(m,function(r,a){a===n&&((b===!0||g.isString(b))&&($.each($.queue(a,g.isString(b)?b:\"\"),function(e,t){g.isFunction(t)&&t(null,!0)}),$.queue(a,g.isString(b)?b:\"\",[])),\"stop\"===h?(i(a)&&i(a).tweensContainer&&o!==!1&&$.each(i(a).tweensContainer,function(e,t){t.endValue=t.currentValue\n}),A.push(e)):\"finish\"===h&&(t[2].duration=1))}):!0})}),\"stop\"===h&&($.each(A,function(e,t){p(t,!0)}),T.promise&&T.resolver(m)),e();default:if(!$.isPlainObject(h)||g.isEmptyObject(h)){if(g.isString(h)&&v.Redirects[h]){var F=$.extend({},b),E=F.duration,j=F.delay||0;return F.backwards===!0&&(m=$.extend(!0,[],m).reverse()),$.each(m,function(e,t){parseFloat(F.stagger)?F.delay=j+parseFloat(F.stagger)*e:g.isFunction(F.stagger)&&(F.delay=j+F.stagger.call(t,e,P)),F.drag&&(F.duration=parseFloat(E)||(/^(callout|transition)/.test(h)?1e3:y),F.duration=Math.max(F.duration*(F.backwards?1-e/P:(e+1)/P),.75*F.duration,200)),v.Redirects[h].call(t,t,F||{},e,P,m,T.promise?T:a)}),e()}var H=\"Velocity: First argument (\"+h+\") was not a property map, a known action, or a registered redirect. Aborting.\";return T.promise?T.rejecter(new Error(H)):console.log(H),e()}k=\"start\"}var N={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},L=[];$.each(m,function(e,t){g.isNode(t)&&n.call(t)});var F=$.extend({},v.defaults,b),R;if(F.loop=parseInt(F.loop),R=2*F.loop-1,F.loop)for(var O=0;R>O;O++){var z={delay:F.delay,progress:F.progress};O===R-1&&(z.display=F.display,z.visibility=F.visibility,z.complete=F.complete),S(m,\"reverse\",z)}return e()}};v=$.extend(S,v),v.animate=S;var P=t.requestAnimationFrame||d;return v.State.isMobile||r.hidden===a||r.addEventListener(\"visibilitychange\",function(){r.hidden?(P=function(e){return setTimeout(function(){e(!0)},16)},c()):P=t.requestAnimationFrame||d}),e.Velocity=v,e!==t&&(e.fn.velocity=S,e.fn.velocity.defaults=v.defaults),$.each([\"Down\",\"Up\"],function(e,t){v.Redirects[\"slide\"+t]=function(e,r,n,o,i,s){var l=$.extend({},r),u=l.begin,c=l.complete,p={height:\"\",marginTop:\"\",marginBottom:\"\",paddingTop:\"\",paddingBottom:\"\"},f={};l.display===a&&(l.display=\"Down\"===t?\"inline\"===v.CSS.Values.getDisplayType(e)?\"inline-block\":\"block\":\"none\"),l.begin=function(){u&&u.call(i,i);for(var r in p){f[r]=e.style[r];var a=v.CSS.getPropertyValue(e,r);p[r]=\"Down\"===t?[a,0]:[0,a]}f.overflow=e.style.overflow,e.style.overflow=\"hidden\"},l.complete=function(){for(var t in f)e.style[t]=f[t];c&&c.call(i,i),s&&s.resolver(i)},v(e,p,l)}}),$.each([\"In\",\"Out\"],function(e,t){v.Redirects[\"fade\"+t]=function(e,r,n,o,i,s){var l=$.extend({},r),u={opacity:\"In\"===t?1:0},c=l.complete;l.complete=n!==o-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display=\"In\"===t?\"auto\":\"none\"),v(this,u,l)}}),v}(window.jQuery||window.Zepto||window,window,document)});\n",
    "//https://github.com/cgkineo/jquery.imageready 2015-08-28\n\n;(function( $ ) {\n\n\tif ($.fn.imageready) return;\n\t\n\tvar stripCSSURL = /url\\(([^)]*)\\)/g;\n\tvar stripCSSQuotes = /[\\\"\\']/g;\n\n\t$.fn.imageready = function(callback, options) {\n\t\t//setup options\n\t\toptions = options || {};\n\t\tif (options.allowTimeout === undefined) {\n\t\t\toptions.allowTimeout = $.fn.imageready.allowTimeout;\n\t\t\toptions.timeoutDuration = $.fn.imageready.timeoutDuration;\n\t\t}\n\n\t\t//get all child images\n\t\tvar $images = this.find(\"img\").add( this.filter(\"img\") );\n\t\tif ($images.length === 0) return callback();\n\t\t$images.loaded = 0;\n\n\t\t//get all background images\n\t\tthis.each(function() {\n\t\t\tvar $backgroundImageElements = $(getElementsByCSSAttributeName.call(this, \"background-image\"));\n\t\t\t$backgroundImageElements.each(function() {\n\t\t\t\tvar $backgroundImage = $(new Image());\n\t\t\t\tvar backgroundImageValue = $(this).css(\"background-image\");\n\t\t\t\tvar matches = stripCSSURL.exec(backgroundImageValue);\n\t\t\t\tif (matches === null) return;\n\t\t\t\tvar url = matches[1];\n\t\t\t\turl = url.replace(stripCSSQuotes, \"\");\n\t\t\t\t$backgroundImage.attr(\"src\", url);\n\t\t\t\t$images.add($backgroundImage);\n\t\t\t\t$images = $images.add($backgroundImage);\n\t\t\t\t$images.loaded = 0;\n\t\t\t});\n\t\t});\n\n\t\t//attach load event listeners\n\t\t$images.each(function() {\n\t\t\tvar $this = $(this);\n\t\t\tif (!$this.attr(\"src\") || this.complete || this.readyState === 4 || $this.height() > 0 ) {\n\t\t\t\t$images.loaded++;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$this.one(\"load\", complete);\n\t\t\t\n\t\t\t// hack for onload event not firing for cached images in IE9 http://garage.socialisten.at/2013/06/how-to-fix-the-ie9-image-onload-bug/\n\t\t\tif(document.documentMode && document.documentMode === 9) {\n\t\t\t\t$this.attr(\"src\", $this.attr(\"src\"));\n\t\t\t}\n\t\t});\n\n\t\t//check if all images have been loaded already\n\t\tif ($images.length <= $images.loaded) {\n\t\t\treturn complete();\n\t\t}\n\n\t\t//setup timeout event\n\t\tvar timeoutHandle;\n\t\tif (options.allowTimeout) {\n\t\t\ttimeoutHandle = setTimeout(check, options.timeoutDuration)\n\t\t}\n\n\t\t//callback timeout event\n\t\tfunction check() {\n\t\t\tclearTimeout(timeoutHandle);\n\t\t\tvar notLoaded = [];\n\t\t\t$images.each(function() {\n\t\t\t\tvar $this = $(this);\n\t\t\t\tif (!$this.attr(\"src\") || this.complete || this.readyState === 4 || $this.height() > 0 ) {\n\t\t\t\t\tconsole.error(\"failed to hear load of image\", $this.attr(\"src\"));\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tnotLoaded.push(this);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn callback($(notLoaded));\n\t\t}\n\n\t\t//callback load event\n\t\tfunction complete(event) {\n\t\t\tclearTimeout(timeoutHandle);\n\t\t\tif (event && event.target) {\n\t\t\t\t$images.loaded++;\n\t\t\t}\n\t\t\tif ($images.length <= $images.loaded) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t\tif (options.allowTimeout) {\n\t\t\t\ttimeoutHandle = setTimeout(check, options.timeoutDuration);\n\t\t\t}\n\t\t}\n\n\t}\n\t$.fn.imageready.timeoutDuration = 10000;\n\t$.fn.imageready.allowTimeout = true;\n\n\n\tfunction getElementsByCSSAttributeName(name) {\n\t\tif (name === undefined) throw \"Must specify a css attribute name\";\n\n\t\tvar tags = this.getElementsByTagName('*'), el;\n\n\t\tvar rtn = [];\n\t\tfor (var i = 0, len = tags.length; i < len; i++) {\n\t\t    el = tags[i];\n\t\t    if (el.currentStyle) { //ie\n\n\t\t    \tvar scriptName = changeCSSAttributeNameFormat(name);\n\t\t        if( el.currentStyle[scriptName] !== 'none' ) {\n\t\t        \trtn.push(el);\n\t\t        }\n\n\t\t    } else if (window.getComputedStyle) { //other\n\t\t    \t\n\t\t        if( document.defaultView.getComputedStyle(el, null).getPropertyValue(name) !== 'none' ) {\n\t\t        \trtn.push(el);\n\t\t        }\n\n\t\t    }\n\t\t}\n\t\treturn rtn;\n\t}\n\n\tfunction changeCSSAttributeNameFormat(CSSName) {\n\t\tvar noDash = CSSName.replace(/-/g,\" \");\n\t\tvar titleCase = toTitleCase(noDash);\n\t\tvar noSpace = titleCase.replace(/ /g, \"\");\n\t\tvar lowerCaseStart = noSpace.substr(0,1).toLowerCase() + noSpace.substr(1);\n\t\treturn lowerCaseStart;\n\t}\n\n\tfunction toTitleCase(str){\n\t    return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n\t}\n\n\n}) ( jQuery );\n\ndefine(\"imageReady\", [\"jquery\"], function(){});\n\n",
    "// jquery.onscreen 2015-10-23 https://github.com/adaptlearning/jquery.onscreen\n\n(function() {\n\tvar expando = $.expando;\n\tvar expandoIndex = 0;\n\n\t//element + event handler storage\n\tvar onScreenObjs = {};\n\tvar inViewObjs = {};\n\tvar $window = $(window);\n\tvar wHeight = $window.height();\n\tvar wWidth = $window.width();\n\tvar wScrollTop = $window.scrollTop();\n\tvar wScrollLeft = $window.scrollLeft();\n\n\t//jQuery element + event handler attachment / removal\n\t$.event.special.onscreen = {\n\t\tadd: function(data) {\n\t\t\tcheckExpando(this);\n\t\t\tonScreenObjs[data.guid + \"-\" + this[expando]] = { \n\t\t\t\tdata: data, \n\t\t\t\t$element: $(this) \n\t\t\t};\n\t\t},\n\n\t\tremove: function(data) {\n\t\t\ttry { \n\t\t\t\tdelete onScreenObjs[data.guid + \"-\" + this[expando]]; \n\t\t\t} catch(e) {\n\n\t\t\t}\n\t\t}\n  \t};\n\t$.event.special.inview = {\n\t\tadd: function(data) {\n\t\t\tcheckExpando(this);\n\t\t\tinViewObjs[data.guid + \"-\" + this[expando]] = {\n\t\t\t\tdata: data, \n\t\t\t\t$element: $(this) \n\t\t\t};\n\t\t},\n\n\t\tremove: function(data) {\n\t\t\ttry { \n\t\t\t\tdelete inViewObjs[data.guid + \"-\" + this[expando]]; \n\t\t\t} catch(e) {\n\n\t\t\t}\n\t\t}\n  \t};\n\n\tfunction checkExpando(element) {\n\t\tif (!element[expando]) element[expando] = ++expandoIndex;\n  \t}\n\n  \tfunction getElementOnScreenMeasurements($element) {\n  \t\tif ($element.length === 0) return;\n  \t\t\n\t\tvar height = $element.outerHeight();\n\t\tvar width = $element.outerWidth();\n\t\t\n\t\t//topleft from topleft of window\n\t\tvar offset = $element.offset();\n\t\tvar top = offset[\"top\"] - wScrollTop;\n\t\tvar left = offset[\"left\"] - wScrollLeft;\n\n\t\t//bottomright from bottomright of window\n\t\tvar bottom = wHeight - (top + height);\n\t\tvar right = wWidth - (left + width);\n\t\t\n\t\t//percentages of above\n\t\tvar ratioHeight = (100 /  wHeight);\n\t\tvar ratioWidth = (100 / wWidth);\n\n\t\tvar right = (left + width);\n\n\t\tvar topP = Math.round(ratioHeight * top);\n\t\tvar leftP = Math.round(ratioWidth * left);\n\t\tvar bottomP = Math.round(ratioHeight * bottom);\n\t\tvar rightP = Math.round(ratioWidth * right);\n\n\t\t//inview\n\t\tvar inviewH = null;\n\t\tif (left+width > 0 && right < 0 && left < 0) {\n\t\t\tinviewH = width;\n\t\t} else if (left < 0) { //offscreen left\n\t\t\tinviewH = (width + left);\n\t\t} else if (left + width > wWidth) { //offscreen right\n\t\t\tinviewH = (wWidth - left);\n\t\t} else { //fully inscreen\n\t\t\tinviewH = width;\n\t\t}\n\n\t\tvar inviewV = null;\n\t\tif (top+height > 0 && bottom < 0 && top < 0) {\n\t\t\tinviewV = height;\n\t\t} else if (top < 0) { //offscreen top\n\t\t\tinviewV = (height + top);\n\t\t} else if (top + height > wHeight) { //offscreen bottom\n\t\t\tinviewV = (wHeight - top);\n\t\t} else { //fully inscreen\n\t\t\tinviewV = height;\n\t\t}\n\n\t\tvar area = height * width;\n\t\tvar inviewArea = inviewV * inviewH;\n\t\tvar inviewP = Math.round((100 / area) * inviewArea);\n\t\tvar inviewHeightP = Math.round((100 / height) * inviewV);\n\t\tvar inviewWidthP = Math.round((100 / width) * inviewH);\n\n\t\tvar uniq = \"\"+top+left+bottom+right+height+width+wHeight+wWidth;\n\n\t\tvar onscreen = true;\n\t\tif (rightP > 100 || leftP > 100 || bottomP > 100 || topP > 100) onscreen = false;\n\t\tif ( ($element[0].offsetWidth <= 0 && $element[0].offsetHeight <= 0) || $element.css(\"display\") == \"none\" || $element.css(\"visibility\") == \"hidden\") onscreen = false;\n\t\t\n\t\treturn { \n\t\t\ttop: top, \n\t\t\tleft: left, \n\t\t\tbottom: bottom, \n\t\t\tright: right, \n\t\t\tpercentFromTop: topP, \n\t\t\tpercentFromLeft: leftP, \n\t\t\tpercentFromBottom: bottomP, \n\t\t\tpercentFromRight: rightP, \n\t\t\tpercentInview: inviewP, \n\t\t\tpercentInviewHorizontal: inviewWidthP,\n\t\t\tpercentInviewVertical: inviewHeightP,\n\t\t\tonscreen: onscreen,\n\t\t\tuniqueMeasurementId: uniq \n\t\t};\n\t}\n\n\tfunction checkLoopExpired() {\n\t\tif ((new Date()).getTime() - loopData.lastEvent > 500) {\n\t\t\tstopLoop()\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tfunction onScreenLoop () {\n\t\tif (checkLoopExpired()) return;\n\n\t\tvar onScreenHandlers = getEventHandlers(\"onscreen\");\n\t\tvar inViewHandlers = getEventHandlers(\"inview\");\n\n\t\tif (onScreenHandlers.length === 0 && inViewHandlers.length === 0) {\n\t\t\t//nothing to onscreen\n\t\t\tstopLoop();\n\t\t\t$.fn.onscreen.intervalDuration = 100;\n\t\t\trepeatLoop();\n\t\t} else {\n\t\t\t//something to onscreen\n\t\t\tstopLoop();\n\t\t\t$.fn.onscreen.intervalDuration = 50;\n\t\t\trepeatLoop();\n\t\t}\n\n\t\tif  (onScreenHandlers.length > 0) {\n\t\t\tvar items = onScreenHandlers;\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\ttriggerOnScreen(item);\n\t\t\t}\n\t\t}\n\t\tif  (inViewHandlers.length > 0) {\n\t\t\tvar items = inViewHandlers;\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\ttriggerInview(item);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction getEventHandlers(eventName) {\n\t\tvar items = [];\n\t\t\n\t\tswitch (eventName) {\n\t\tcase \"inview\":\n\t\t\tfor (var k in inViewObjs) {\n\t\t\t\titems.push(inViewObjs[k]);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"onscreen\":\n\t\t\tfor (var k in onScreenObjs) {\n\t\t\t\titems.push(onScreenObjs[k]);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tfunction triggerOnScreen(item) {\n\t\tvar measure = getElementOnScreenMeasurements(item.$element);\n\t\t//check if measure has the same values as last\n\t\tif (item._onscreen !== undefined && item._onscreen === measure.uniqueMeasurementId) return;\n\t\titem._onscreen = measure.uniqueMeasurementId;\n\n\t\titem.$element.trigger('onscreen', measure );\n\t}\n\n\tfunction triggerInview(item) {\n\t\tvar measure = getElementOnScreenMeasurements(item.$element);\n\n\t\t//check if measure has the same values as last\n\t\tif (item._inview !== undefined && item._inview === measure.uniqueMeasurementId) return;\n\t\titem._inview = measure.uniqueMeasurementId;\n\n\t\tvar visiblePartY = (measure.percentFromTop > 0 && measure.percentFromTop < 100) && (measure.percentFromBottom > 0 && measure.percentFromBottom < 100) ? \"both\" : (measure.percentFromTop > 0 && measure.percentFromTop < 100) ? \"top\" : (measure.percentFromBottom > 0 && measure.percentFromBottom < 100) ? \"bottom\" : \"none\";\n\t\tvar visiblePartX = (measure.percentFromLeft > 0 && measure.percentFromLeft < 100) && (measure.percentFromRight > 0 && measure.percentFromRight < 100) ? \"both\" : (measure.percentFromLeft > 0 && measure.percentFromLeft < 100) ? \"left\" : (measure.percentFromRight > 0 && measure.percentFromRight < 100) ? \"right\" : \"none\";\n\n\t\tvar inviewState = [\n\t\t\tmeasure.onscreen, //inview true/false\n\t\t\tvisiblePartX, //left, right, both, none\n\t\t\tvisiblePartY //top, bottom, both, none\n\t\t];\n\n\t\tif (item._inviewPreviousState !== undefined ) {\n\t\t\t//check previous state and current state\n\t\t\tvar scrolledOver = (item._measurePreviousState.percentFromBottom < 0 && measure.percentFromBottom > 100 );\n\t\t\t\n\t\t\t//if inview state hasn't changed, don't retrigger event\n\t\t\tif (item._inviewPreviousState[0] === inviewState[0] &&\n\t\t\t\titem._inviewPreviousState[1] === inviewState[1] && \n\t\t\t\titem._inviewPreviousState[2] === inviewState[2] &&\n\t\t\t\t!scrolledOver) return;\n\n\t\t\tif (scrolledOver) {\n\t\t\t\t//make sure to trigger a scrolled over both top and bottom event\n\t\t\t\tinviewState[0] = true;\n\t\t\t\tinviewState[1] = \"both\";\n\t\t\t\tinviewState[2] = \"both\";\n\t\t\t}\n\t\t}\n\n\t\titem._inviewPreviousState = inviewState;\n\t\titem._measurePreviousState = measure;\n\n\t\titem.$element.trigger('inview', inviewState );\n\t}\n\n\n\t//jQuery element function\n\t$.fn.onscreen = function() {\n\t\treturn getElementOnScreenMeasurements(this);\n\t};\n\n\t//checking loop interval duration\n\t$.fn.onscreen.intervalDuration = 50;\n\n\tvar loopData = {\n\t\tlastEvent: 0,\n\t\tinterval: null\n\t};\n\n\t//checking loop start and end\n\tfunction startLoop() {\n\t\twindowScroll();\n\t\tloopData.lastEvent = (new Date()).getTime();\n\t\tif (loopData.interval !== null) {\n\t\t\tstopLoop();\n\t\t}\n\t\tloopData.interval = setTimeout(onScreenLoop, $.fn.onscreen.intervalDuration);\n\t}\n\n\tfunction repeatLoop() {\n\t\twindowScroll();\n\t\tif (loopData.interval !== null) {\n\t\t\tstopLoop();\n\t\t}\n\t\tloopData.interval = setTimeout(onScreenLoop, $.fn.onscreen.intervalDuration);\n\t}\n\n\tfunction stopLoop() {\n\t\tclearInterval(loopData.interval);\n\t\tloopData.interval = null;\n\t}\n\n\tfunction windowResize() {\n\t\twHeight = $window.height();\n\t\twWidth = $window.width();\n\t\tstartLoop();\n\t}\n\n\tfunction windowScroll() {\n\t\twScrollTop = $window.scrollTop();\n\t\twScrollLeft = $window.scrollLeft();\n\t}\n\n\t$(window).on(\"scroll\", startLoop);\n\t$(window).on(\"mousedown touchstart keydown\", startLoop);\n\t$(window).on(\"resize\", windowResize);\n\n\n})();\n\ndefine(\"inview\", [\"jquery\"], function(){});\n\n",
    "define('coreViews/componentView',['require','coreJS/adapt','coreViews/adaptView'],function(require) {\n\n    var Adapt = require(\"coreJS/adapt\");\n    var AdaptView = require('coreViews/adaptView');\n\n    var ComponentView = AdaptView.extend({\n\n        className: function() {\n            return \"component \"\n            + this.model.get('_component')\n            + \"-component \" + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility()\n            + \" component-\" + this.model.get('_layout')\n            + \" nth-child-\" + this.model.get(\"_nthChild\");\n        },\n\n        initialize: function(){\n\t\t\t//standard initialization + renderState function\n            AdaptView.prototype.initialize.apply(this, arguments);\n            this.renderState();\n        },\n\n        renderState: function() {\n            if (!Handlebars.partials['state']) return;\n\n\t\t\t// do not perform if component has .not-accessible class\n            if (this.$el.is(\".not-accessible\")) return;\n\t\t\t// do not perform if component has .no-state class\n            if (this.$el.is(\".no-state\")) return;\n\n\t\t\t//remove pre-exisiting states\n            var $previousState = this.$(\".accessibility-state\").remove();\n\n            //render and append state partial\n            var $rendered = $(Handlebars.partials['state']( this.model.toJSON() ));\n\n            //restore previous tab index if not on\n            var previousTabIndex = $previousState.find(\".aria-label\").attr(\"tabindex\");\n            if (previousTabIndex == \"-1\") {\n                $rendered.find(\".aria-label\").attr(\"tabindex\", previousTabIndex);\n            }\n\n            this.$el.append( $rendered );\n\n            this.listenToOnce(this.model, 'change:_isComplete', this.renderState);\n        },\n\n        postRender: function() {}\n\n    }, {\n        type:'component'\n    });\n\n    return ComponentView;\n\n});\n\n",
    "define('components/adapt-Tables/js/generic',['require','coreJS/adapt','coreViews/componentView'],function(require) {\n    var Adapt = require('coreJS/adapt');\n    var ComponentView = require('coreViews/componentView');\n    var Generic = ComponentView.extend({\n\n        preRender: function() {\n            var isLayoutFull = true;\n            var layout = this.model.get('_layout');\n            if(layout == \"right\" || layout == \"left\"){\n               isLayoutFull = false;\n            }\n            this.model.set('_isRendered',isLayoutFull);\n            this.model.set('_isLayoutFull',isLayoutFull);\n            this.checkHeader();\n            this.setCell();\n        },\n\n        checkHeader:function() {\n            var headerColumns = this.model.get('table').columns;\n            var self = this;\n            _.each(headerColumns,function(column,index) {\n                if(column.cellInfo != undefined) {\n                    self.setHeader(index);\n                }\n            });\n        },\n\n        setHeader: function(index) {\n            var headerColumns = this.model.get('table').columns;\n            for(var i=1;i<headerColumns[index].cellInfo.merge;i++) {\n                headerColumns[index+i]._isInvisible = true;\n                if(headerColumns[index].width != undefined){\n                    if(headerColumns[index+i].width != undefined) {\n                        headerColumns[index].width += headerColumns[index+i].width;\n                    }\n                }\n            }\n        },\n\n        setCell: function() {\n            var rows = this.model.get('table').rows;\n            if(rows[0].rowData[0].data == undefined){\n                _.each(rows,function(row) {\n                    var rowData = [];\n                        _.each(row.rowData,function(newData,index) {\n                            var data = {\n                                    data:newData,\n                                    rowspan : 1,\n                                    colspan : 1,\n                                    _isInvisible : false\n                                };\n                            rowData.push(data);\n                        });\n                    _.each(row.cellInfo,function(cell,index) {\n                        if(cell.mergeType == \"row\"){\n                                rowData[cell.cellNumber-1].colspan = cell.merge;\n                        }\n                        if(cell.mergeType == \"column\") {\n                            rowData[cell.cellNumber-1].rowspan = cell.merge;\n                        }\n                    });\n                    row.rowData = rowData;\n                });\n            }\n            _.each(rows,function(row,ind) {\n                _.each(row.rowData,function(info,index) {\n                    if(info.colspan != 1) {\n                        var i = 0;\n                        for(i = 1; ((i < info.colspan) && (index+i < row.rowData.length)); i++) {\n                            row.rowData[index+i]._isInvisible = true;\n                        }\n                        if(index+i >= row.rowData.length){\n                            rows[ind].rowData[index].colspan = i--;\n                        }\n                    }\n                    if(info.rowspan != 1) {\n                        var i = 0;\n                        for(i=1; ((i < info.rowspan) && (ind+i < rows.length)); i++) {\n                            rows[ind+i].rowData[index]._isInvisible = true;\n                        }\n                        if(ind+i >= rows.length){\n                            rows[ind].rowData[index].rowspan = i--;\n                        }\n                    }\n                });\n            });\n        },\n\n        postRender: function() {\n            if(!this.model.get('_isRendered')) {\n                this.model.set('_isRendered',true);\n                this.setTable();\n            }\n            if(this.$('table').hasClass('pre-half')) {\n                this.$('table').removeClass('pre-half').addClass('post-half');\n            }\n            this.setReadyStatus();\n            this.$('.component-inner').on('inview', _.bind(this.inview, this));\n        },\n\n         inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) { console.log(\"generic inview called\");\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n\n        setTable: function() {\n            var $currentComponent = this.$('.component-inner').closest('.component');\n            var currentComponentWidth = $currentComponent.width();\n            $currentComponent.addClass('component-temp');\n            var columns = this.model.get('table').columns;\n            var rows = this.model.get('table').rows;\n            var columnsWidth = [];\n            var totalColumnsWidth = 0;\n            _.each(columns,function(column,index) {\n                var isFixed,width;\n                width = this.$('#'+index).outerWidth();\n                if(column.width == undefined || column.width == \"\")\n                    isFixed = false;\n                else\n                    isFixed = true;\n                columnsWidth.push({\n                    width:width,\n                    isFixed:isFixed\n                });\n                totalColumnsWidth +=width;\n            });\n            while(totalColumnsWidth > currentComponentWidth) {\n                var poppedColumn = columnsWidth.pop();\n                totalColumnsWidth -= poppedColumn.width;\n            }\n            this.setCell();\n            this.render();\n            $currentComponent.width(currentComponentWidth);\n        }\n    },{\n        template:'generic'\n    });\n    Adapt.register(\"generic\", Generic);\n    return Generic;\n});\n\n",
    "define('components/adapt-Tables/js/cas',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var CAS = ComponentView.extend({\n\n        events: {},\n\n        preRender: function() {},\n\n        getAllCell: function() {\n            var collectAllCell = this.$('.header-text').find('td');\n            var collectAllCellItems = [];\n            _.each(collectAllCell, function(item, index) {\n                collectAllCellItems.push($(item)[0].id);\n            }, this);\n            return collectAllCellItems;\n        },\n\n        setIdToCell: function(setId, ind) {\n            var collectAllCell = this.$('.header-text').find('td');\n\n            _.each(collectAllCell, function(item, index) {\n                if (ind === index)\n                    $(item).attr('id', setId);\n            }, this);\n        },\n\n        createUniqueIds: function() {\n            var createUniqueIds = [];\n            var column = this.$('.table-header');\n            var row = this.$('.header-text');\n\n            for (var i = 1; i <= row.length; i++) {\n                for (var j = 1; j <= column.length; j++) {\n                    createUniqueIds.push(i + \"\" + j);\n                }\n            }\n            return createUniqueIds;\n        },\n\n        setUpMergeColumnCells: function() {\n            var collectAllMergeColumnData = this.model.get('_mergecolumns');\n            var collectAllCellItems = this.getAllCell();\n\n            var self = this;\n            _.each(collectAllMergeColumnData, function(item, index) {\n                var currentItemId = (item.row + \",\" + item.col).toString();\n                var firstPart = (item.row).toString();\n                var secondPart = (item.col).toString();\n                var getColspan = item.colspan;\n\n                _.each(collectAllCellItems, function(item, index) {\n\n                    if (item === firstPart + secondPart)\n                        self.mergeCellIntoRow(currentItemId, getColspan, secondPart);\n                }, this);\n            }, this);\n        },\n\n        setUpMergeRowCells: function() {\n            var collectAllMergeRowData = this.model.get('_mergeRows');\n\n            var collectAllCellItems = this.getAllCell();\n\n            var self = this;\n            _.each(collectAllMergeRowData, function(item, index) {\n                var currentItemId = (item.row + \",\" + item.col).toString();\n                var firstPart = (item.row).toString();\n                var secondPArt = (item.col).toString();\n                var getRowSpan = item.rowspan;\n\n                _.each(collectAllCellItems, function(item, index) {\n\n                    if (item === firstPart + secondPArt)\n                        self.mergeCellIntoColumn(currentItemId, getRowSpan, firstPart);\n                });\n            }, this)\n        },\n\n        postRender: function() {\n            this.setReadyStatus();\n            this.hideCells();\n            var getUniqueIds = this.createUniqueIds();\n\n            var self = this;\n\n            _.each(getUniqueIds, function(item, index) {\n                self.setIdToCell(item, index);\n            }, this);\n\n            if (this.model.get('_columns').length === 3)\n                this.$('.display-none-three').addClass('display-none');\n\n            if (this.model.get('_columns').length === 2) {\n                this.$('.display-none-two').addClass('display-none');\n                this.$('.display-none-three').addClass('display-none');\n            }\n            if (this.model.get('_columns').length === 1) {\n                this.$('.display-none-one').addClass('display-none');\n                this.$('.display-none-two').addClass('display-none');\n                this.$('.display-none-three').addClass('display-none');\n            }\n\n            this.setUpMergeColumnCells();\n            this.setUpMergeRowCells();\n\n            this.$('.component-inner').on('inview', _.bind(this.inview, this));\n        },\n\n        hideCells: function() {\n            console.log(this.model.get('_columns'))\n            this.$('.logic').addClass('display-none');\n            this.$('.inhibit').addClass('display-none');\n            this.$('.voice').addClass('display-none');\n\n            _.each(this.model.get('_columns'), function(item) {\n\n                if (item._header === \"LOGIC\")\n                    this.$('.logic').removeClass('display-none');\n                if (item._header === \"INHIBIT\")\n                    this.$('.inhibit').removeClass('display-none');\n                if (item._header === \"VOICE\")\n                    this.$('.voice').removeClass('display-none');\n            })\n            if (this.$('.voice').hasClass('display-none'))\n                this.$('.voice').remove();\n            if (this.$('.inhibit').hasClass('display-none'))\n                this.$('.inhibit').remove();\n            if (this.$('.logic').hasClass('display-none'))\n                this.$('.logic').remove();\n\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    console.log(\"inveiw called\");\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        mergeCellIntoColumn: function(currentItemIdToMerge, getRowSpan, firstPart) {\n            var secondPart = currentItemIdToMerge.split(',')[1];\n\n            for (var i = 1, j = firstPart; i < getRowSpan; i++) {\n                var hideCell = +j + i + secondPart;\n                this.$(\"#\" + hideCell).addClass('display-none');\n            }\n            this.$(\"#\" + firstPart + secondPart).attr('rowspan', getRowSpan);\n        },\n\n        mergeCellIntoRow: function(currentItemIdToMerge, getColspan, secondPart) {\n            var firstPart = currentItemIdToMerge.split(',')[0];\n            for (var i = 1, j = +secondPart; i < getColspan; i++) {\n                var hideCell = firstPart + (i + j);\n                this.$(\"#\" + hideCell).addClass('display-none');\n            }\n            this.$(\"#\" + firstPart + secondPart).attr('colspan', getColspan);\n        }\n    }, {\n        template: 'cas'\n    });\n\n    Adapt.register('cas', CAS);\n\n    return CAS;\n\n});\n\n",
    "define('components/adapt-Tables/js/casInteractivePopupView',['require','backbone','coreJS/adapt'],function(require) {\n    var Backbone = require('backbone'),\n        Adapt = require('coreJS/adapt'),\n        CASInteractiveTablePopupView = Backbone.View.extend({\n\n            className: \"casInteractive-popup display-none\",\n\n            template: \"casInteractivePopup\",\n\n            events: {\n                'click .popup-close': 'onClickPopCloseButton',\n                'touchstart .popup-close': 'onClickPopCloseButton',\n                'mousedown .popup-toolbar': 'onMouseDownToolbar',\n                'touchstart .popup-toolbar': 'onMouseDownToolbar'\n            },\n\n\t\t\t\n            initialize: function(options) {\n                this.listenTo(Adapt, 'remove', this.remove);\n                this.listenTo(Adapt, 'CASInteractiveTablePopup:showPopup', this.showPopup);\n                this.render();\n                this.blockHeight = 0;\n                this.blockWidth = 0;\n                this.isScrolling = false;\n                this.mouseOffset = {\n                    x: 0,\n                    y: 0\n                };\n                this.onTouchStartDocumentHandler = _.bind(this.onTouchStartDocument, this);\n                this.onScrollDocumentHandler = _.bind(this.onScrollDocument, this);\n\n                this.onMouseUpEventHandler = _.bind(this.onMouseUpPopup, this);\n                this.onMouseMoveEventHandler = _.bind(this.onMouseMovePopup, this);\n\n                this.onTouchEndEventHandler = _.bind(this.onTouchEndPopup, this);\n                this.onTouchCancelEventHandler = _.bind(this.onTouchEndPopup, this);\n\n            },\n\t\t\t\n\n            render: function() {\n                var data = this.model.toJSON();\n                var template = Handlebars.templates[this.template];\n                this.$el.html(template(data));\n                _.defer(_.bind(function() {\n                    this.postRender();\n                }, this));\n\n                return this;\n            },\n\n            postRender: function() {\n                $(document).on('touchstart', this.onTouchStartDocumentHandler)\n                $(window).on('touchmove', this.onScrollDocumentHandler);\n                this.listenTo(Adapt, 'device:resize', this.onScreenSizeChanged);\n                this.showPopupView();\n            },\n            remove: function() {\n                $(document).off('touchstart', this.onTouchStartDocumentHandler)\n                $(window).off('touchmove', this.onScrollDocumentHandler);\n                this.unbindEventsForDragging();\n                this.enableScroll();\n                Backbone.View.prototype.remove.call(this);\n            },\n            onScreenSizeChanged: function() {\n                var block = this.$el.closest('.block');\n                this.blockHeight = block.height();\n                this.blockWidth = block.width();\n            },\n            showPopupView: function() {\n                if (!this.$el.hasClass('display-none')) return;\n                var block = this.$el.closest('.block');\n                this.blockHeight = block.height();\n                this.blockWidth = block.width(); //$(window).width();\n                this.$el.removeClass('display-none');\n                this.popupHeight = this.$el.height();\n                this.popupWidth = this.$el.width();\n                this.alignPopupToCenter(block);\n            },\n            alignPopupToCenter: function(block) {\n                var //top = this.blockHeight / 2 - this.popupHeight / 2,\n                    left = this.blockWidth / 2 - this.popupWidth / 2;\n                this.$el.css({\n                    top: getTop() + 'px',\n                    left: left + 'px'\n                });\n                function getTop(){\n                    var blockTop=block.offset().top,\n                        coponentTop=block.find('.casInteractive-widget-inner').offset().top,\n                        firstRow=block.find('#row-1').height();\n                    return (coponentTop-blockTop)+firstRow;\n                }\n            },\n            hidePopupView: function() {\n                if (this.$el.hasClass('display-none')) return;\n\n                this.$el.closest('.block'); //.removeClass('overflow-hidden');\n                this.$el.addClass('display-none');\n                this.remove();\n            },\n\n            showPopup: function(popupModel) {\n                this.hidePopupView();\n            },\n\n            bindEventsForDragging: function() {\n                this.bindEvents();\n            },\n            unbindEventsForDragging: function() {\n                this.unbindEvents();\n            },\n            bindEvents: function() {\n                var $closestBlock = this.$el.closest('.block');\n                if (Adapt.device.touch) {\n                    $(document).on('touchend', this.onTouchEndEventHandler);\n                    $closestBlock.on('touchcancel', this.onTouchCancelEventHandler);\n                    $closestBlock.on('touchmove', this.onMouseMoveEventHandler);\n                } else {\n                    $(window).on('mouseup', this.onMouseUpEventHandler);\n                    $closestBlock.on('mousemove', this.onMouseMoveEventHandler);\n                }\n            },\n            unbindEvents: function() {\n                var $closestBlock = this.$el.closest('.block');\n                if (Adapt.device.touch) {\n                    $(document).off('touchend', this.onTouchEndEventHandler);\n                    $closestBlock.off('touchcancel', this.onTouchCancelEventHandler);\n                    $closestBlock.off('touchmove', this.onMouseMoveEventHandler);\n                } else {\n                    $(window).off('mouseup', this.onMouseUpEventHandler);\n                    $closestBlock.off('mousemove', this.onMouseMoveEventHandler);\n                }\n            },\n            disableScroll: function() {\n                if (window.addEventListener) // older FF\n                    window.addEventListener('DOMMouseScroll', this.preventDefault, false);\n                window.onwheel = this.preventDefault; // modern standard\n                window.onmousewheel = document.onmousewheel = this.preventDefault; // older browsers, IE\n                window.ontouchmove = this.preventDefault;\n            },\n\n            enableScroll: function() {\n                if (window.removeEventListener)\n                    window.removeEventListener('DOMMouseScroll', this.preventDefault, false);\n                window.onmousewheel = document.onmousewheel = null;\n                window.onwheel = null;\n                window.ontouchmove = null;\n            },\n\n            stopPropagation: function(event) {\n                event = event || window.event;\n                if (event.stopPropagation) event.stopPropagation();\n                event.cancelBubble = true;\n            },\n\n            preventDefault: function(event) {\n                event = event || window.event;\n                if (event.preventDefault) event.preventDefault();\n                event.returnValue = false;\n            },\n\n            onClickPopCloseButton: function(event) {\n                this.preventDefault(event);\n                Adapt.trigger('CASInteractiveTablePopup:closePopup');\n                this.hidePopupView();\n            },\n\n            onTouchStartDocument: function(event) {\n                this.isScrolling = false;\n            },\n\n            onScrollDocument: function(event) {\n                this.isScrolling = true;\n            },\n            onMouseDownToolbar: function(event) {\n                this.stopPropagation(event);\n                this.preventDefault(event);\n                event = Adapt.device.touch ? event.originalEvent.touches[0] : event;\n                this.mouseOffset.x = event.clientX - this.$el[0].offsetLeft;\n                this.mouseOffset.y = event.clientY - this.$el[0].offsetTop;\n                this.bindEvents();\n                this.disableScroll();\n            },\n\n            onMouseUpPopup: function(event) {\n                this.unbindEvents();\n                this.enableScroll();\n            },\n\n            onMouseMovePopup: function(event) {\n                this.stopPropagation(event);\n                this.preventDefault(event);\n                event = Adapt.device.touch ? event.originalEvent.touches[0] : event;\n                var left = event.clientX - this.mouseOffset.x;\n                var top = event.clientY - this.mouseOffset.y;\n                if (top < 0) top = 0;\n                if (top > this.blockHeight - this.popupHeight) top = this.blockHeight - this.popupHeight;\n                if (left < 0) left = 0;\n                if (left > this.blockWidth - this.popupWidth) left = this.blockWidth - this.popupWidth;\n                if (this.blockWidth < this.popupWidth) {\n                    left = this.blockWidth / 2 - this.popupWidth / 2;\n                }\n                this.$el.css({\n                    'left': left + 'px',\n                    'top': top + 'px'\n                });\n            },\n\n            onTouchStartToolbar: function(event) {\n                this.stopPropagation(event);\n                this.preventDefault(event);\n                this.mouseOffset.x = event.originalEvent.touches[0].clientX - this.$el[0].offsetLeft;\n                this.mouseOffset.y = event.originalEvent.touches[0].clientY - this.$el[0].offsetTop;\n\n                this.bindTouchEvents();\n                this.disableScroll();\n            },\n\n            onTouchEndPopup: function(event) {\n                this.unbindEvents();\n                this.enableScroll();\n            }\n\n        });\n\n    return CASInteractiveTablePopupView;\n\n});\n",
    "define('components/adapt-Tables/js/casInteractive',['require','coreViews/componentView','coreJS/adapt','components/adapt-Tables/js/casInteractivePopupView'],function(require) {\n\n    var ComponentView = require('coreViews/componentView'),\n        Adapt = require('coreJS/adapt'),\n        CASInteractiveTablePopupView = require('components/adapt-Tables/js/casInteractivePopupView'),\n        CASInteractiveTableView = ComponentView.extend({\n\n            events: {\n                'click .interactive-icon': 'togglePopupView'\n            },\n\n            preRender: function() {\n                this.registerHelper();\n                this.setPopupModel();\n            },\n\n            postRender: function() {\n                this.setReadyStatus();\n                this.setIdToEachRow();\n                this.listenTo(Adapt, 'CASInteractiveTablePopup:closePopup', this.onPopupClose);\n                this.model.set('isInteractionComplate',false);\n                if (!(this.$('.interactive-icon').length)) {\n                    this.$('.component-inner').on('inview', _.bind(this.onInview, this));\n                }\n            },\n            onInview: function(event, visible, visiblePartX, visiblePartY) {\n                if (visible) {\n                    if (visiblePartY === 'top') {\n                        this._isVisibleTop = true;\n                    } else if (visiblePartY === 'bottom') {\n                        this._isVisibleBottom = true;\n                    } else {\n                        this._isVisibleTop = true;\n                        this._isVisibleBottom = true;\n                    }\n\n                    if (this._isVisibleTop && this._isVisibleBottom) {\n                        this.$('.component-inner').off('inview');\n                        this.setCompletionStatus();\n                    }\n                }\n            },\n            onPopupClose: function() {\n                if(!this.model.get('isInteractionComplate'))\n                this.checkCompletionStatus();\n\n            },\n            setIdToEachRow: function() {\n                var tableRows = this.$('table tr');\n                _.each(tableRows, function(row, index) {\n                    this.$(row).attr('id', 'row-' + (index + 1));\n                }, this);\n            },\n            setPopupModel: function() {\n                var table = this.model.get('table'),\n                    tablePopupModel = [];\n                tablePopupModel.push(_.rest(table._headings));\n                _.each(table._records, function(row, index) {\n                    if (row.messageType)\n                        tablePopupModel.push(row.messageType);\n                    tablePopupModel = tablePopupModel.concat(row.rows);\n                }, this);\n                this.model.set('tablePopupModel', tablePopupModel);\n            },\n            getMessageType: function(id) {\n                this.model.get('tablePopupModel');\n                for (var i = id; i >= 0; i--) {\n                    if (typeof this.model.get('tablePopupModel')[i] === \"string\")\n                        return this.model.get('tablePopupModel')[i];\n                }\n                return; //throw new Error(\"invalid message type\") ;\n            },\n            getPopupModel: function(id) {\n                var model = null;\n                id = parseInt(id.split('-')[1]) - 1;\n                model = {\n                    'table': {\n                        messageType: this.getMessageType(id),\n                        message: this.model.get('tablePopupModel')[id].cellData.message,\n                        row: _.pairs(_.omit(this.model.get('tablePopupModel')[id].cellData, 'message'))\n                    }\n                }\n                return new Backbone.Model(model);\n            },\n            togglePopupView: function(event) {\n                if (this.$popupView) {\n                    this.$popupView.remove();\n                }\n                //Adapt.trigger('CASInteractiveTablePopup:showPopup', this.model);\n                this.$popupView = new CASInteractiveTablePopupView({\n                    model: this.getPopupModel($(event.currentTarget).closest('tr')[0].id)\n                }).$el;\n                this.$el.closest('.block').append(this.$popupView);\n                if (this.$(event.currentTarget).attr('data-interactionComplete')==\"false\")\n                    this.$(event.currentTarget).attr('data-interactionComplete', true);\n            },\n            checkCompletionStatus: function() {\n               var interactionItem = this.$('.interactive-icon'),\n                    intractionCompleteItem = 0,\n                    totalItem=interactionItem.length;\n                for (i = 0; i < totalItem; i++) {\n                    if (this.$(interactionItem[i]).attr('data-interactionComplete')==\"true\") {\n                        intractionCompleteItem++;\n                    }\n                }\n                if (totalItem === intractionCompleteItem) {\n                    this.setCompletionStatus();\n                    this.model.set('isInteractionComplate',true);\n                }\n            },\n            registerHelper: function() {\n                Handlebars.registerHelper('toUpperCase', function(text) {\n                    return text.toUpperCase(text);\n                });\n            }\n        });\n\n    Adapt.register('casInteractive', CASInteractiveTableView);\n\n    return CASInteractiveTableView;\n\n});\n",
    "define('components/adapt-Tables/js/adapt-Tables',['require','coreViews/componentView','coreViews/componentView','coreJS/adapt','components/adapt-Tables/js/generic','components/adapt-Tables/js/cas','components/adapt-Tables/js/casInteractive'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var tableObject = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n    require('components/adapt-Tables/js/generic');\n    require('components/adapt-Tables/js/cas');\n    require('components/adapt-Tables/js/casInteractive');\n\n    var Tables = ComponentView.extend({\n\n        preRender: function() {\n\n            var tableType = this.model.get('_tableType');\n\n            switch(tableType){\n                case \"generic\" :\n                    if (!Adapt.componentStore.generic) throw \"Generic not included in build\";\n                    var Generic = Adapt.componentStore.generic;\n                    var tempModel = this.model;\n                    tempModel.set('_component','generic');\n                    tableObject = new Generic({\n                        model:tempModel\n                    });\n                    break;\n                case \"cas\" :\n                    if (!Adapt.componentStore.cas) throw \"CAS not included in build\";\n                    var CAS = Adapt.componentStore.cas;\n                    var tempModel = this.model;\n                    tempModel.set('_component','cas');\n                    tableObject = new CAS({\n                        model:tempModel\n                    });\n                    break;\n                case \"casInteractive\" :\n                    if (!Adapt.componentStore.casInteractive) throw \"CasInteractive not included in build\";\n                    var CasInteractive = Adapt.componentStore.casInteractive;\n                    var tempModel = this.model;\n                    tempModel.set('_component','casInteractive');\n                    tableObject = new CasInteractive({\n                        model:tempModel\n                    });\n                    break;\n                default :\n                    alert(\"Please enter valid table type\");\n            }\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n            $container.append(tableObject.$el);\n            Adapt.trigger('device:resize');\n        },\n        postRender:function(){\n           _.defer(_.bind(function () {\n                this.remove();\n            }, this));\n        }\n\n    });\n\n    Adapt.register('tables', Tables);\n\n    return Tables;\n\n});\n\n",
    "/*!\n* MediaElement.js\n* HTML5 <video> and <audio> shim and player\n* http://mediaelementjs.com/\n*\n* Creates a JavaScript object that mimics HTML5 MediaElement API\n* for browsers that don't understand HTML5 or can't play the provided codec\n* Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3\n*\n* Copyright 2010-2013, John Dyer (http://j.hn)\n* License: MIT\n*\n*/var mejs=mejs||{};mejs.version=\"2.13.2\";mejs.meIndex=0;\nmejs.plugins={silverlight:[{version:[3,0],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/wmv\",\"audio/wma\",\"audio/m4a\",\"audio/mp3\",\"audio/wav\",\"audio/mpeg\"]}],flash:[{version:[9,0,124],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/flv\",\"video/rtmp\",\"video/x-flv\",\"audio/flv\",\"audio/x-flv\",\"audio/mp3\",\"audio/m4a\",\"audio/mpeg\",\"video/youtube\",\"video/x-youtube\"]}],youtube:[{version:null,types:[\"video/youtube\",\"video/x-youtube\",\"audio/youtube\",\"audio/x-youtube\"]}],vimeo:[{version:null,types:[\"video/vimeo\",\n\"video/x-vimeo\"]}]};\nmejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.toString().split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split('\"').join(\"&quot;\")},absolutizeUrl:function(a){var b=document.createElement(\"div\");b.innerHTML='<a href=\"'+this.escapeHTML(a)+'\">x</a>';return b.firstChild.href},getScriptPath:function(a){for(var b=0,c,d=\"\",e=\"\",g,f,h=document.getElementsByTagName(\"script\"),l=h.length,j=a.length;b<l;b++){g=h[b].src;c=g.lastIndexOf(\"/\");if(c>-1){f=g.substring(c+\n1);g=g.substring(0,c+1)}else{f=g;g=\"\"}for(c=0;c<j;c++){e=a[c];e=f.indexOf(e);if(e>-1){d=g;break}}if(d!==\"\")break}return d},secondsToTimeCode:function(a,b,c,d){if(typeof c==\"undefined\")c=false;else if(typeof d==\"undefined\")d=25;var e=Math.floor(a/3600)%24,g=Math.floor(a/60)%60,f=Math.floor(a%60);a=Math.floor((a%1*d).toFixed(3));return(b||e>0?(e<10?\"0\"+e:e)+\":\":\"\")+(g<10?\"0\"+g:g)+\":\"+(f<10?\"0\"+f:f)+(c?\":\"+(a<10?\"0\"+a:a):\"\")},timeCodeToSeconds:function(a,b,c,d){if(typeof c==\"undefined\")c=false;else if(typeof d==\n\"undefined\")d=25;a=a.split(\":\");b=parseInt(a[0],10);var e=parseInt(a[1],10),g=parseInt(a[2],10),f=0,h=0;if(c)f=parseInt(a[3])/d;return h=b*3600+e*60+g+f},convertSMPTEtoSeconds:function(a){if(typeof a!=\"string\")return false;a=a.replace(\",\",\".\");var b=0,c=a.indexOf(\".\")!=-1?a.split(\".\")[1].length:0,d=1;a=a.split(\":\").reverse();for(var e=0;e<a.length;e++){d=1;if(e>0)d=Math.pow(60,e);b+=Number(a[e])*d}return Number(b.toFixed(c))},removeSwf:function(a){var b=document.getElementById(a);if(b&&/object|embed/i.test(b.nodeName))if(mejs.MediaFeatures.isIE){b.style.display=\n\"none\";(function(){b.readyState==4?mejs.Utility.removeObjectInIE(a):setTimeout(arguments.callee,10)})()}else b.parentNode.removeChild(b)},removeObjectInIE:function(a){if(a=document.getElementById(a)){for(var b in a)if(typeof a[b]==\"function\")a[b]=null;a.parentNode.removeChild(a)}}};\nmejs.PluginDetector={hasPluginVersion:function(a,b){var c=this.plugins[a];b[1]=b[1]||0;b[2]=b[2]||0;return c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?true:false},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(a,b,c,d,e){this.plugins[a]=this.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var e=[0,0,0],g;if(typeof this.nav.plugins!=\"undefined\"&&typeof this.nav.plugins[a]==\"object\"){if((c=this.nav.plugins[a].description)&&\n!(typeof this.nav.mimeTypes!=\"undefined\"&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){e=c.replace(a,\"\").replace(/^\\s+/,\"\").replace(/\\sr/gi,\".\").split(\".\");for(a=0;a<e.length;a++)e[a]=parseInt(e[a].match(/\\d+/),10)}}else if(typeof window.ActiveXObject!=\"undefined\")try{if(g=new ActiveXObject(c))e=d(g)}catch(f){}return e}};\nmejs.PluginDetector.addPlugin(\"flash\",\"Shockwave Flash\",\"application/x-shockwave-flash\",\"ShockwaveFlash.ShockwaveFlash\",function(a){var b=[];if(a=a.GetVariable(\"$version\")){a=a.split(\" \")[1].split(\",\");b=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]}return b});\nmejs.PluginDetector.addPlugin(\"silverlight\",\"Silverlight Plug-In\",\"application/x-silverlight-2\",\"AgControl.AgControl\",function(a){var b=[0,0,0,0],c=function(d,e,g,f){for(;d.isVersionSupported(e[0]+\".\"+e[1]+\".\"+e[2]+\".\"+e[3]);)e[g]+=f;e[g]-=f};c(a,b,0,1);c(a,b,1,1);c(a,b,2,1E4);c(a,b,2,1E3);c(a,b,2,100);c(a,b,2,10);c(a,b,2,1);c(a,b,3,1);return b});\nmejs.MediaFeatures={init:function(){var a=this,b=document,c=mejs.PluginDetector.nav,d=mejs.PluginDetector.ua.toLowerCase(),e,g=[\"source\",\"track\",\"audio\",\"video\"];a.isiPad=d.match(/ipad/i)!==null;a.isiPhone=d.match(/iphone/i)!==null;a.isiOS=a.isiPhone||a.isiPad;a.isAndroid=d.match(/android/i)!==null;a.isBustedAndroid=d.match(/android 2\\.[12]/)!==null;a.isBustedNativeHTTPS=location.protocol===\"https:\"&&(d.match(/android [12]\\./)!==null||d.match(/macintosh.* version.* safari/)!==null);a.isIE=c.appName.toLowerCase().indexOf(\"microsoft\")!=\n-1||c.appName.toLowerCase().match(/trident/gi)!==null;a.isChrome=d.match(/chrome/gi)!==null;a.isFirefox=d.match(/firefox/gi)!==null;a.isWebkit=d.match(/webkit/gi)!==null;a.isGecko=d.match(/gecko/gi)!==null&&!a.isWebkit&&!a.isIE;a.isOpera=d.match(/opera/gi)!==null;a.hasTouch=\"ontouchstart\"in window;a.svg=!!document.createElementNS&&!!document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect;for(c=0;c<g.length;c++)e=document.createElement(g[c]);a.supportsMediaTag=typeof e.canPlayType!==\n\"undefined\"||a.isBustedAndroid;try{e.canPlayType(\"video/mp4\")}catch(f){a.supportsMediaTag=false}a.hasSemiNativeFullScreen=typeof e.webkitEnterFullscreen!==\"undefined\";a.hasNativeFullscreen=typeof e.requestFullscreen!==\"undefined\";a.hasWebkitNativeFullScreen=typeof e.webkitRequestFullScreen!==\"undefined\";a.hasMozNativeFullScreen=typeof e.mozRequestFullScreen!==\"undefined\";a.hasMsNativeFullScreen=typeof e.msRequestFullscreen!==\"undefined\";a.hasTrueNativeFullScreen=a.hasWebkitNativeFullScreen||a.hasMozNativeFullScreen||\na.hasMsNativeFullScreen;a.nativeFullScreenEnabled=a.hasTrueNativeFullScreen;if(a.hasMozNativeFullScreen)a.nativeFullScreenEnabled=document.mozFullScreenEnabled;else if(a.hasMsNativeFullScreen)a.nativeFullScreenEnabled=document.msFullscreenEnabled;if(a.isChrome)a.hasSemiNativeFullScreen=false;if(a.hasTrueNativeFullScreen){a.fullScreenEventName=\"\";if(a.hasWebkitNativeFullScreen)a.fullScreenEventName=\"webkitfullscreenchange\";else if(a.hasMozNativeFullScreen)a.fullScreenEventName=\"mozfullscreenchange\";\nelse if(a.hasMsNativeFullScreen)a.fullScreenEventName=\"MSFullscreenChange\";a.isFullScreen=function(){if(e.mozRequestFullScreen)return b.mozFullScreen;else if(e.webkitRequestFullScreen)return b.webkitIsFullScreen;else if(e.hasMsNativeFullScreen)return b.msFullscreenElement!==null};a.requestFullScreen=function(h){if(a.hasWebkitNativeFullScreen)h.webkitRequestFullScreen();else if(a.hasMozNativeFullScreen)h.mozRequestFullScreen();else a.hasMsNativeFullScreen&&h.msRequestFullscreen()};a.cancelFullScreen=\nfunction(){if(a.hasWebkitNativeFullScreen)document.webkitCancelFullScreen();else if(a.hasMozNativeFullScreen)document.mozCancelFullScreen();else a.hasMsNativeFullScreen&&document.msExitFullscreen()}}if(a.hasSemiNativeFullScreen&&d.match(/mac os x 10_5/i)){a.hasNativeFullScreen=false;a.hasSemiNativeFullScreen=false}}};mejs.MediaFeatures.init();\nmejs.HtmlMediaElement={pluginType:\"native\",isFullScreen:false,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){for(var b=this.getElementsByTagName(\"source\");b.length>0;)this.removeChild(b[0]);if(typeof a==\"string\")this.src=a;else{var c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.src=c.src;break}}}},setVideoSize:function(a,b){this.width=a;this.height=b}};\nmejs.PluginMediaElement=function(a,b,c){this.id=a;this.pluginType=b;this.src=c;this.events={};this.attributes={}};\nmejs.PluginMediaElement.prototype={pluginElement:null,pluginType:\"\",isFullScreen:false,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,error:null,tagName:\"\",muted:false,volume:1,currentTime:0,play:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.playVideo():this.pluginApi.playMedia();this.paused=false}},load:function(){if(this.pluginApi!=null){this.pluginType!=\"youtube\"&&this.pluginApi.loadMedia();this.paused=\nfalse}},pause:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia();this.paused=true}},stop:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.stopVideo():this.pluginApi.stopMedia();this.paused=true}},canPlayType:function(a){var b,c,d,e=mejs.plugins[this.pluginType];for(b=0;b<e.length;b++){d=e[b];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,d.version))for(c=0;c<d.types.length;c++)if(a==d.types[c])return\"probably\"}return\"\"},\npositionFullscreenButton:function(a,b,c){this.pluginApi!=null&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(a),Math.floor(b),c)},hideFullscreenButton:function(){this.pluginApi!=null&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(a){if(typeof a==\"string\"){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a));this.src=mejs.Utility.absolutizeUrl(a)}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src));\nthis.src=mejs.Utility.absolutizeUrl(a);break}}}},setCurrentTime:function(a){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.seekTo(a):this.pluginApi.setCurrentTime(a);this.currentTime=a}},setVolume:function(a){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.setVolume(a*100):this.pluginApi.setVolume(a);this.volume=a}},setMuted:function(a){if(this.pluginApi!=null){if(this.pluginType==\"youtube\"){a?this.pluginApi.mute():this.pluginApi.unMute();this.muted=a;this.dispatchEvent(\"volumechange\")}else this.pluginApi.setMuted(a);\nthis.muted=a}},setVideoSize:function(a,b){if(this.pluginElement.style){this.pluginElement.style.width=a+\"px\";this.pluginElement.style.height=b+\"px\"}this.pluginApi!=null&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(a,b)},setFullscreen:function(a){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(a)},enterFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(true)},exitFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&\nthis.setFullscreen(false)},addEventListener:function(a,b){this.events[a]=this.events[a]||[];this.events[a].push(b)},removeEventListener:function(a,b){if(!a){this.events={};return true}var c=this.events[a];if(!c)return true;if(!b){this.events[a]=[];return true}for(i=0;i<c.length;i++)if(c[i]===b){this.events[a].splice(i,1);return true}return false},dispatchEvent:function(a){var b,c,d=this.events[a];if(d){c=Array.prototype.slice.call(arguments,1);for(b=0;b<d.length;b++)d[b].apply(null,c)}},hasAttribute:function(a){return a in\nthis.attributes},removeAttribute:function(a){delete this.attributes[a]},getAttribute:function(a){if(this.hasAttribute(a))return this.attributes[a];return\"\"},setAttribute:function(a,b){this.attributes[a]=b},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id);mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}};\nmejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(a,b,c){this.pluginMediaElements[a]=b;this.htmlMediaElements[a]=c},unregisterPluginElement:function(a){delete this.pluginMediaElements[a];delete this.htmlMediaElements[a]},initPlugin:function(a){var b=this.pluginMediaElements[a],c=this.htmlMediaElements[a];if(b){switch(b.pluginType){case \"flash\":b.pluginElement=b.pluginApi=document.getElementById(a);break;case \"silverlight\":b.pluginElement=document.getElementById(b.id);\nb.pluginApi=b.pluginElement.Content.MediaElementJS}b.pluginApi!=null&&b.success&&b.success(b,c)}},fireEvent:function(a,b,c){var d,e;if(a=this.pluginMediaElements[a]){b={type:b,target:a};for(d in c){a[d]=c[d];b[d]=c[d]}e=c.bufferedTime||0;b.target.buffered=b.buffered={start:function(){return 0},end:function(){return e},length:1};a.dispatchEvent(b.type,b)}}};\nmejs.MediaElementDefaults={mode:\"auto\",plugins:[\"flash\",\"silverlight\",\"youtube\",\"vimeo\"],enablePluginDebug:false,httpsBasicAuthSite:false,type:\"\",pluginPath:mejs.Utility.getScriptPath([\"mediaelement.js\",\"mediaelement.min.js\",\"mediaelement-and-player.js\",\"mediaelement-and-player.min.js\"]),flashName:\"flashmediaelement.swf\",flashStreamer:\"\",enablePluginSmoothing:false,enablePseudoStreaming:false,pseudoStreamingStartQueryParam:\"start\",silverlightName:\"silverlightmediaelement.xap\",defaultVideoWidth:480,\ndefaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:0.8,success:function(){},error:function(){}};mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)};\nmejs.HtmlMediaElementShim={create:function(a,b){var c=mejs.MediaElementDefaults,d=typeof a==\"string\"?document.getElementById(a):a,e=d.tagName.toLowerCase(),g=e===\"audio\"||e===\"video\",f=g?d.getAttribute(\"src\"):d.getAttribute(\"href\");e=d.getAttribute(\"poster\");var h=d.getAttribute(\"autoplay\"),l=d.getAttribute(\"preload\"),j=d.getAttribute(\"controls\"),k;for(k in b)c[k]=b[k];f=typeof f==\"undefined\"||f===null||f==\"\"?null:f;e=typeof e==\"undefined\"||e===null?\"\":e;l=typeof l==\"undefined\"||l===null||l===\"false\"?\n\"none\":l;h=!(typeof h==\"undefined\"||h===null||h===\"false\");j=!(typeof j==\"undefined\"||j===null||j===\"false\");k=this.determinePlayback(d,c,mejs.MediaFeatures.supportsMediaTag,g,f);k.url=k.url!==null?mejs.Utility.absolutizeUrl(k.url):\"\";if(k.method==\"native\"){if(mejs.MediaFeatures.isBustedAndroid){d.src=k.url;d.addEventListener(\"click\",function(){d.play()},false)}return this.updateNative(k,c,h,l)}else if(k.method!==\"\")return this.createPlugin(k,c,e,h,l,j);else{this.createErrorMessage(k,c,e);return this}},\ndeterminePlayback:function(a,b,c,d,e){var g=[],f,h,l,j={method:\"\",url:\"\",htmlMediaElement:a,isVideo:a.tagName.toLowerCase()!=\"audio\"},k;if(typeof b.type!=\"undefined\"&&b.type!==\"\")if(typeof b.type==\"string\")g.push({type:b.type,url:e});else for(f=0;f<b.type.length;f++)g.push({type:b.type[f],url:e});else if(e!==null){l=this.formatType(e,a.getAttribute(\"type\"));g.push({type:l,url:e})}else for(f=0;f<a.childNodes.length;f++){h=a.childNodes[f];if(h.nodeType==1&&h.tagName.toLowerCase()==\"source\"){e=h.getAttribute(\"src\");\nl=this.formatType(e,h.getAttribute(\"type\"));h=h.getAttribute(\"media\");if(!h||!window.matchMedia||window.matchMedia&&window.matchMedia(h).matches)g.push({type:l,url:e})}}if(!d&&g.length>0&&g[0].url!==null&&this.getTypeFromFile(g[0].url).indexOf(\"audio\")>-1)j.isVideo=false;if(mejs.MediaFeatures.isBustedAndroid)a.canPlayType=function(m){return m.match(/video\\/(mp4|m4v)/gi)!==null?\"maybe\":\"\"};if(c&&(b.mode===\"auto\"||b.mode===\"auto_plugin\"||b.mode===\"native\")&&!(mejs.MediaFeatures.isBustedNativeHTTPS&&\nb.httpsBasicAuthSite===true)){if(!d){f=document.createElement(j.isVideo?\"video\":\"audio\");a.parentNode.insertBefore(f,a);a.style.display=\"none\";j.htmlMediaElement=a=f}for(f=0;f<g.length;f++)if(a.canPlayType(g[f].type).replace(/no/,\"\")!==\"\"||a.canPlayType(g[f].type.replace(/mp3/,\"mpeg\")).replace(/no/,\"\")!==\"\"){j.method=\"native\";j.url=g[f].url;break}if(j.method===\"native\"){if(j.url!==null)a.src=j.url;if(b.mode!==\"auto_plugin\")return j}}if(b.mode===\"auto\"||b.mode===\"auto_plugin\"||b.mode===\"shim\")for(f=\n0;f<g.length;f++){l=g[f].type;for(a=0;a<b.plugins.length;a++){e=b.plugins[a];h=mejs.plugins[e];for(c=0;c<h.length;c++){k=h[c];if(k.version==null||mejs.PluginDetector.hasPluginVersion(e,k.version))for(d=0;d<k.types.length;d++)if(l==k.types[d]){j.method=e;j.url=g[f].url;return j}}}}if(b.mode===\"auto_plugin\"&&j.method===\"native\")return j;if(j.method===\"\"&&g.length>0)j.url=g[0].url;return j},formatType:function(a,b){return a&&!b?this.getTypeFromFile(a):b&&~b.indexOf(\";\")?b.substr(0,b.indexOf(\";\")):b},\ngetTypeFromFile:function(a){a=a.split(\"?\")[0];a=a.substring(a.lastIndexOf(\".\")+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(a)?\"video\":\"audio\")+\"/\"+this.getTypeFromExtension(a)},getTypeFromExtension:function(a){switch(a){case \"mp4\":case \"m4v\":return\"mp4\";case \"webm\":case \"webma\":case \"webmv\":return\"webm\";case \"ogg\":case \"oga\":case \"ogv\":return\"ogg\";default:return a}},createErrorMessage:function(a,b,c){var d=a.htmlMediaElement,e=document.createElement(\"div\");e.className=\n\"me-cannotplay\";try{e.style.width=d.width+\"px\";e.style.height=d.height+\"px\"}catch(g){}e.innerHTML=b.customError?b.customError:c!==\"\"?'<a href=\"'+a.url+'\"><img src=\"'+c+'\" width=\"100%\" height=\"100%\" /></a>':'<a href=\"'+a.url+'\"><span>'+mejs.i18n.t(\"Download File\")+\"</span></a>\";d.parentNode.insertBefore(e,d);d.style.display=\"none\";b.error(d)},createPlugin:function(a,b,c,d,e,g){c=a.htmlMediaElement;var f=1,h=1,l=\"me_\"+a.method+\"_\"+mejs.meIndex++,j=new mejs.PluginMediaElement(l,a.method,a.url),k=document.createElement(\"div\"),\nm;j.tagName=c.tagName;for(m=0;m<c.attributes.length;m++){var n=c.attributes[m];n.specified==true&&j.setAttribute(n.name,n.value)}for(m=c.parentNode;m!==null&&m.tagName.toLowerCase()!=\"body\";){if(m.parentNode.tagName.toLowerCase()==\"p\"){m.parentNode.parentNode.insertBefore(m,m.parentNode);break}m=m.parentNode}if(a.isVideo){f=b.pluginWidth>0?b.pluginWidth:b.videoWidth>0?b.videoWidth:c.getAttribute(\"width\")!==null?c.getAttribute(\"width\"):b.defaultVideoWidth;h=b.pluginHeight>0?b.pluginHeight:b.videoHeight>\n0?b.videoHeight:c.getAttribute(\"height\")!==null?c.getAttribute(\"height\"):b.defaultVideoHeight;f=mejs.Utility.encodeUrl(f);h=mejs.Utility.encodeUrl(h)}else if(b.enablePluginDebug){f=320;h=240}j.success=b.success;mejs.MediaPluginBridge.registerPluginElement(l,j,c);k.className=\"me-plugin\";k.id=l+\"_container\";a.isVideo?c.parentNode.insertBefore(k,c):document.body.insertBefore(k,document.body.childNodes[0]);d=[\"id=\"+l,\"isvideo=\"+(a.isVideo?\"true\":\"false\"),\"autoplay=\"+(d?\"true\":\"false\"),\"preload=\"+e,\"width=\"+\nf,\"startvolume=\"+b.startVolume,\"timerrate=\"+b.timerRate,\"flashstreamer=\"+b.flashStreamer,\"height=\"+h,\"pseudostreamstart=\"+b.pseudoStreamingStartQueryParam];if(a.url!==null)a.method==\"flash\"?d.push(\"file=\"+mejs.Utility.encodeUrl(a.url)):d.push(\"file=\"+a.url);b.enablePluginDebug&&d.push(\"debug=true\");b.enablePluginSmoothing&&d.push(\"smoothing=true\");b.enablePseudoStreaming&&d.push(\"pseudostreaming=true\");g&&d.push(\"controls=true\");if(b.pluginVars)d=d.concat(b.pluginVars);switch(a.method){case \"silverlight\":k.innerHTML=\n'<object data=\"data:application/x-silverlight-2,\" type=\"application/x-silverlight-2\" id=\"'+l+'\" name=\"'+l+'\" width=\"'+f+'\" height=\"'+h+'\" class=\"mejs-shim\"><param name=\"initParams\" value=\"'+d.join(\",\")+'\" /><param name=\"windowless\" value=\"true\" /><param name=\"background\" value=\"black\" /><param name=\"minRuntimeVersion\" value=\"3.0.0.0\" /><param name=\"autoUpgrade\" value=\"true\" /><param name=\"source\" value=\"'+b.pluginPath+b.silverlightName+'\" /></object>';break;case \"flash\":if(mejs.MediaFeatures.isIE){a=\ndocument.createElement(\"div\");k.appendChild(a);a.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"'+l+'\" width=\"'+f+'\" height=\"'+h+'\" class=\"mejs-shim\"><param name=\"movie\" value=\"'+b.pluginPath+b.flashName+\"?x=\"+new Date+'\" /><param name=\"flashvars\" value=\"'+d.join(\"&amp;\")+'\" /><param name=\"quality\" value=\"high\" /><param name=\"bgcolor\" value=\"#000000\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /><param name=\"scale\" value=\"default\" /></object>'}else k.innerHTML=\n'<embed id=\"'+l+'\" name=\"'+l+'\" play=\"true\" loop=\"false\" quality=\"high\" bgcolor=\"#000000\" wmode=\"transparent\" allowScriptAccess=\"always\" allowFullScreen=\"true\" type=\"application/x-shockwave-flash\" pluginspage=\"//www.macromedia.com/go/getflashplayer\" src=\"'+b.pluginPath+b.flashName+'\" flashvars=\"'+d.join(\"&\")+'\" width=\"'+f+'\" height=\"'+h+'\" scale=\"default\"class=\"mejs-shim\"></embed>';break;case \"youtube\":b=a.url.substr(a.url.lastIndexOf(\"=\")+1);youtubeSettings={container:k,containerId:k.id,pluginMediaElement:j,\npluginId:l,videoId:b,height:h,width:f};mejs.PluginDetector.hasPluginVersion(\"flash\",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case \"vimeo\":j.vimeoid=a.url.substr(a.url.lastIndexOf(\"/\")+1);k.innerHTML='<iframe src=\"http://player.vimeo.com/video/'+j.vimeoid+'?portrait=0&byline=0&title=0\" width=\"'+f+'\" height=\"'+h+'\" frameborder=\"0\" class=\"mejs-shim\"></iframe>'}c.style.display=\"none\";c.removeAttribute(\"autoplay\");return j},updateNative:function(a,\nb){var c=a.htmlMediaElement,d;for(d in mejs.HtmlMediaElement)c[d]=mejs.HtmlMediaElement[d];b.success(c,c);return c}};\nmejs.YouTubeApi={isIframeStarted:false,isIframeLoaded:false,loadIframeApi:function(){if(!this.isIframeStarted){var a=document.createElement(\"script\");a.src=\"//www.youtube.com/player_api\";var b=document.getElementsByTagName(\"script\")[0];b.parentNode.insertBefore(a,b);this.isIframeStarted=true}},iframeQueue:[],enqueueIframe:function(a){if(this.isLoaded)this.createIframe(a);else{this.loadIframeApi();this.iframeQueue.push(a)}},createIframe:function(a){var b=a.pluginMediaElement,c=new YT.Player(a.containerId,\n{height:a.height,width:a.width,videoId:a.videoId,playerVars:{controls:0},events:{onReady:function(){a.pluginMediaElement.pluginApi=c;mejs.MediaPluginBridge.initPlugin(a.pluginId);setInterval(function(){mejs.YouTubeApi.createEvent(c,b,\"timeupdate\")},250)},onStateChange:function(d){mejs.YouTubeApi.handleStateChange(d.data,c,b)}}})},createEvent:function(a,b,c){c={type:c,target:b};if(a&&a.getDuration){b.currentTime=c.currentTime=a.getCurrentTime();b.duration=c.duration=a.getDuration();c.paused=b.paused;\nc.ended=b.ended;c.muted=a.isMuted();c.volume=a.getVolume()/100;c.bytesTotal=a.getVideoBytesTotal();c.bufferedBytes=a.getVideoBytesLoaded();var d=c.bufferedBytes/c.bytesTotal*c.duration;c.target.buffered=c.buffered={start:function(){return 0},end:function(){return d},length:1}}b.dispatchEvent(c.type,c)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=true;this.iframeQueue.length>0;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(a){this.flashPlayers[a.pluginId]=\na;var b,c=\"//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=\"+a.pluginId+\"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0\";if(mejs.MediaFeatures.isIE){b=document.createElement(\"div\");a.container.appendChild(b);b.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"'+a.pluginId+'\" width=\"'+a.width+'\" height=\"'+a.height+'\" class=\"mejs-shim\"><param name=\"movie\" value=\"'+\nc+'\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /></object>'}else a.container.innerHTML='<object type=\"application/x-shockwave-flash\" id=\"'+a.pluginId+'\" data=\"'+c+'\" width=\"'+a.width+'\" height=\"'+a.height+'\" style=\"visibility: visible; \" class=\"mejs-shim\"><param name=\"allowScriptAccess\" value=\"always\"><param name=\"wmode\" value=\"transparent\"></object>'},flashReady:function(a){var b=this.flashPlayers[a],c=\ndocument.getElementById(a),d=b.pluginMediaElement;d.pluginApi=d.pluginElement=c;mejs.MediaPluginBridge.initPlugin(a);c.cueVideoById(b.videoId);a=b.containerId+\"_callback\";window[a]=function(e){mejs.YouTubeApi.handleStateChange(e,c,d)};c.addEventListener(\"onStateChange\",a);setInterval(function(){mejs.YouTubeApi.createEvent(c,d,\"timeupdate\")},250)},handleStateChange:function(a,b,c){switch(a){case -1:c.paused=true;c.ended=true;mejs.YouTubeApi.createEvent(b,c,\"loadedmetadata\");break;case 0:c.paused=false;\nc.ended=true;mejs.YouTubeApi.createEvent(b,c,\"ended\");break;case 1:c.paused=false;c.ended=false;mejs.YouTubeApi.createEvent(b,c,\"play\");mejs.YouTubeApi.createEvent(b,c,\"playing\");break;case 2:c.paused=true;c.ended=false;mejs.YouTubeApi.createEvent(b,c,\"pause\");break;case 3:mejs.YouTubeApi.createEvent(b,c,\"progress\")}}};function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(a){mejs.YouTubeApi.flashReady(a)}window.mejs=mejs;window.MediaElement=mejs.MediaElement;\n(function(a,b){var c={locale:{language:\"\",strings:{}},methods:{}};c.getLanguage=function(){return(c.locale.language||window.navigator.userLanguage||window.navigator.language).substr(0,2).toLowerCase()};if(typeof mejsL10n!=\"undefined\")c.locale.language=mejsL10n.language;c.methods.checkPlain=function(d){var e,g,f={\"&\":\"&amp;\",'\"':\"&quot;\",\"<\":\"&lt;\",\">\":\"&gt;\"};d=String(d);for(e in f)if(f.hasOwnProperty(e)){g=RegExp(e,\"g\");d=d.replace(g,f[e])}return d};c.methods.t=function(d,e){if(c.locale.strings&&\nc.locale.strings[e.context]&&c.locale.strings[e.context][d])d=c.locale.strings[e.context][d];return c.methods.checkPlain(d)};c.t=function(d,e){if(typeof d===\"string\"&&d.length>0){var g=c.getLanguage();e=e||{context:g};return c.methods.t(d,e)}else throw{name:\"InvalidArgumentException\",message:\"First argument is either not a string or empty.\"};};b.i18n=c})(document,mejs);(function(a){if(typeof mejsL10n!=\"undefined\")a[mejsL10n.language]=mejsL10n.strings})(mejs.i18n.locale.strings);\n(function(a){if(typeof a.de===\"undefined\")a.de={Fullscreen:\"Vollbild\",\"Go Fullscreen\":\"Vollbild an\",\"Turn off Fullscreen\":\"Vollbild aus\",Close:\"Schlie\\u00dfen\"}})(mejs.i18n.locale.strings);(function(a){if(typeof a.zh===\"undefined\")a.zh={Fullscreen:\"\\u5168\\u87a2\\u5e55\",\"Go Fullscreen\":\"\\u5168\\u5c4f\\u6a21\\u5f0f\",\"Turn off Fullscreen\":\"\\u9000\\u51fa\\u5168\\u5c4f\\u6a21\\u5f0f\",Close:\"\\u95dc\\u9589\"}})(mejs.i18n.locale.strings);\n\n/*!\n * MediaElementPlayer\n * http://mediaelementjs.com/\n *\n * Creates a controller bar for HTML5 <video> add <audio> tags\n * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)\n *\n * Copyright 2010-2013, John Dyer (http://j.hn/)\n * License: MIT\n *\n */if(typeof jQuery!=\"undefined\")mejs.$=jQuery;else if(typeof ender!=\"undefined\")mejs.$=ender;\n(function(f){mejs.MepDefaults={poster:\"\",showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(a){return a.duration*0.05},defaultSeekForwardInterval:function(a){return a.duration*0.05},audioWidth:-1,audioHeight:-1,startVolume:0.8,loop:false,autoRewind:true,enableAutosize:true,alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,\nhideVideoControlsOnLoad:false,clickToPlayPause:true,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:[\"playpause\",\"current\",\"progress\",\"duration\",\"tracks\",\"volume\",\"fullscreen\"],isVideo:true,enableKeyboard:true,pauseOtherPlayers:true,keyActions:[{keys:[32,179],action:function(a,b){b.paused||b.ended?a.play():a.pause()}},{keys:[38],action:function(a,b){b.setVolume(Math.min(b.volume+0.1,1))}},{keys:[40],action:function(a,b){b.setVolume(Math.max(b.volume-\n0.1,0))}},{keys:[37,227],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){if(a.isVideo){a.showControls();a.startControlsTimer()}var c=Math.max(b.currentTime-a.options.defaultSeekBackwardInterval(b),0);b.setCurrentTime(c)}}},{keys:[39,228],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){if(a.isVideo){a.showControls();a.startControlsTimer()}var c=Math.min(b.currentTime+a.options.defaultSeekForwardInterval(b),b.duration);b.setCurrentTime(c)}}},{keys:[70],action:function(a){if(typeof a.enterFullScreen!=\n\"undefined\")a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(a,b){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(a,b);this.$media=this.$node=f(a);this.node=this.media=this.$media[0];if(typeof this.node.player!=\"undefined\")return this.node.player;else this.node.player=this;if(typeof b==\"undefined\")b=this.$node.data(\"mejsoptions\");this.options=f.extend({},mejs.MepDefaults,b);this.id=\"mep_\"+mejs.mepIndex++;\nmejs.players[this.id]=this;this.init();return this};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,init:function(){var a=this,b=mejs.MediaFeatures,c=f.extend(true,{},a.options,{success:function(d,g){a.meReady(d,g)},error:function(d){a.handleError(d)}}),e=a.media.tagName.toLowerCase();a.isDynamic=e!==\"audio\"&&e!==\"video\";a.isVideo=a.isDynamic?a.options.isVideo:e!==\"audio\"&&a.options.isVideo;if(b.isiPad&&a.options.iPadUseNativeControls||b.isiPhone&&a.options.iPhoneUseNativeControls){a.$media.attr(\"controls\",\n\"controls\");b.isiPad&&a.media.getAttribute(\"autoplay\")!==null&&a.play()}else if(!(b.isAndroid&&a.options.AndroidUseNativeControls)){a.$media.removeAttr(\"controls\");a.container=f('<div id=\"'+a.id+'\" class=\"mejs-container '+(mejs.MediaFeatures.svg?\"svg\":\"no-svg\")+'\"><div class=\"mejs-inner\"><div class=\"mejs-mediaelement\"></div><div class=\"mejs-layers\"></div><div class=\"mejs-controls\"></div><div class=\"mejs-clear\"></div></div></div>').addClass(a.$media[0].className).insertBefore(a.$media);a.container.addClass((b.isAndroid?\n\"mejs-android \":\"\")+(b.isiOS?\"mejs-ios \":\"\")+(b.isiPad?\"mejs-ipad \":\"\")+(b.isiPhone?\"mejs-iphone \":\"\")+(a.isVideo?\"mejs-video \":\"mejs-audio \"));if(b.isiOS){b=a.$media.clone();a.container.find(\".mejs-mediaelement\").append(b);a.$media.remove();a.$node=a.$media=b;a.node=a.media=b[0]}else a.container.find(\".mejs-mediaelement\").append(a.$media);a.controls=a.container.find(\".mejs-controls\");a.layers=a.container.find(\".mejs-layers\");b=a.isVideo?\"video\":\"audio\";e=b.substring(0,1).toUpperCase()+b.substring(1);\na.width=a.options[b+\"Width\"]>0||a.options[b+\"Width\"].toString().indexOf(\"%\")>-1?a.options[b+\"Width\"]:a.media.style.width!==\"\"&&a.media.style.width!==null?a.media.style.width:a.media.getAttribute(\"width\")!==null?a.$media.attr(\"width\"):a.options[\"default\"+e+\"Width\"];a.height=a.options[b+\"Height\"]>0||a.options[b+\"Height\"].toString().indexOf(\"%\")>-1?a.options[b+\"Height\"]:a.media.style.height!==\"\"&&a.media.style.height!==null?a.media.style.height:a.$media[0].getAttribute(\"height\")!==null?a.$media.attr(\"height\"):\na.options[\"default\"+e+\"Height\"];a.setPlayerSize(a.width,a.height);c.pluginWidth=a.width;c.pluginHeight=a.height}mejs.MediaElement(a.$media[0],c);typeof a.container!=\"undefined\"&&a.controlsAreVisible&&a.container.trigger(\"controlsshown\")},showControls:function(a){var b=this;a=typeof a==\"undefined\"||a;if(!b.controlsAreVisible){if(a){b.controls.css(\"visibility\",\"visible\").stop(true,true).fadeIn(200,function(){b.controlsAreVisible=true;b.container.trigger(\"controlsshown\")});b.container.find(\".mejs-control\").css(\"visibility\",\n\"visible\").stop(true,true).fadeIn(200,function(){b.controlsAreVisible=true})}else{b.controls.css(\"visibility\",\"visible\").css(\"display\",\"block\");b.container.find(\".mejs-control\").css(\"visibility\",\"visible\").css(\"display\",\"block\");b.controlsAreVisible=true;b.container.trigger(\"controlsshown\")}b.setControlsSize()}},hideControls:function(a){var b=this;a=typeof a==\"undefined\"||a;if(!(!b.controlsAreVisible||b.options.alwaysShowControls))if(a){b.controls.stop(true,true).fadeOut(200,function(){f(this).css(\"visibility\",\n\"hidden\").css(\"display\",\"block\");b.controlsAreVisible=false;b.container.trigger(\"controlshidden\")});b.container.find(\".mejs-control\").stop(true,true).fadeOut(200,function(){f(this).css(\"visibility\",\"hidden\").css(\"display\",\"block\")})}else{b.controls.css(\"visibility\",\"hidden\").css(\"display\",\"block\");b.container.find(\".mejs-control\").css(\"visibility\",\"hidden\").css(\"display\",\"block\");b.controlsAreVisible=false;b.container.trigger(\"controlshidden\")}},controlsTimer:null,startControlsTimer:function(a){var b=\nthis;a=typeof a!=\"undefined\"?a:1500;b.killControlsTimer(\"start\");b.controlsTimer=setTimeout(function(){b.hideControls();b.killControlsTimer(\"hide\")},a)},killControlsTimer:function(){if(this.controlsTimer!==null){clearTimeout(this.controlsTimer);delete this.controlsTimer;this.controlsTimer=null}},controlsEnabled:true,disableControls:function(){this.killControlsTimer();this.hideControls(false);this.controlsEnabled=false},enableControls:function(){this.showControls(false);this.controlsEnabled=true},\nmeReady:function(a,b){var c=this,e=mejs.MediaFeatures,d=b.getAttribute(\"autoplay\");d=!(typeof d==\"undefined\"||d===null||d===\"false\");var g;if(!c.created){c.created=true;c.media=a;c.domNode=b;if(!(e.isAndroid&&c.options.AndroidUseNativeControls)&&!(e.isiPad&&c.options.iPadUseNativeControls)&&!(e.isiPhone&&c.options.iPhoneUseNativeControls)){c.buildposter(c,c.controls,c.layers,c.media);c.buildkeyboard(c,c.controls,c.layers,c.media);c.buildoverlays(c,c.controls,c.layers,c.media);c.findTracks();for(g in c.options.features){e=\nc.options.features[g];if(c[\"build\"+e])try{c[\"build\"+e](c,c.controls,c.layers,c.media)}catch(k){}}c.container.trigger(\"controlsready\");c.setPlayerSize(c.width,c.height);c.setControlsSize();if(c.isVideo){if(mejs.MediaFeatures.hasTouch)c.$media.bind(\"touchstart\",function(){if(c.controlsAreVisible)c.hideControls(false);else c.controlsEnabled&&c.showControls(false)});else{mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){if(c.options.clickToPlayPause)c.media.paused?c.play():c.pause()};\nc.media.addEventListener(\"click\",c.clickToPlayPauseCallback,false);c.container.bind(\"mouseenter mouseover\",function(){if(c.controlsEnabled)if(!c.options.alwaysShowControls){c.killControlsTimer(\"enter\");c.showControls();c.startControlsTimer(2500)}}).bind(\"mousemove\",function(){if(c.controlsEnabled){c.controlsAreVisible||c.showControls();c.options.alwaysShowControls||c.startControlsTimer(2500)}}).bind(\"mouseleave\",function(){c.controlsEnabled&&!c.media.paused&&!c.options.alwaysShowControls&&c.startControlsTimer(1E3)})}c.options.hideVideoControlsOnLoad&&\nc.hideControls(false);d&&!c.options.alwaysShowControls&&c.hideControls();c.options.enableAutosize&&c.media.addEventListener(\"loadedmetadata\",function(j){if(c.options.videoHeight<=0&&c.domNode.getAttribute(\"height\")===null&&!isNaN(j.target.videoHeight)){c.setPlayerSize(j.target.videoWidth,j.target.videoHeight);c.setControlsSize();c.media.setVideoSize(j.target.videoWidth,j.target.videoHeight)}},false)}a.addEventListener(\"play\",function(){for(var j in mejs.players){var m=mejs.players[j];m.id!=c.id&&\nc.options.pauseOtherPlayers&&!m.paused&&!m.ended&&m.pause();m.hasFocus=false}c.hasFocus=true},false);c.media.addEventListener(\"ended\",function(){if(c.options.autoRewind)try{c.media.setCurrentTime(0)}catch(j){}c.media.pause();c.setProgressRail&&c.setProgressRail();c.setCurrentRail&&c.setCurrentRail();if(c.options.loop)c.play();else!c.options.alwaysShowControls&&c.controlsEnabled&&c.showControls()},false);c.media.addEventListener(\"loadedmetadata\",function(){c.updateDuration&&c.updateDuration();c.updateCurrent&&\nc.updateCurrent();if(!c.isFullScreen){c.setPlayerSize(c.width,c.height);c.setControlsSize()}},false);setTimeout(function(){c.setPlayerSize(c.width,c.height);c.setControlsSize()},50);c.globalBind(\"resize\",function(){c.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||c.setPlayerSize(c.width,c.height);c.setControlsSize()});c.media.pluginType==\"youtube\"&&c.container.find(\".mejs-overlay-play\").hide()}d&&a.pluginType==\"native\"&&c.play();if(c.options.success)typeof c.options.success==\n\"string\"?window[c.options.success](c.media,c.domNode,c):c.options.success(c.media,c.domNode,c)}},handleError:function(a){this.controls.hide();this.options.error&&this.options.error(a)},setPlayerSize:function(a,b){if(typeof a!=\"undefined\")this.width=a;if(typeof b!=\"undefined\")this.height=b;if(this.height.toString().indexOf(\"%\")>0||this.$node.css(\"max-width\")===\"100%\"||parseInt(this.$node.css(\"max-width\").replace(/px/,\"\"),10)/this.$node.offsetParent().width()===1||this.$node[0].currentStyle&&this.$node[0].currentStyle.maxWidth===\n\"100%\"){var c=this.isVideo?this.media.videoWidth&&this.media.videoWidth>0?this.media.videoWidth:this.options.defaultVideoWidth:this.options.defaultAudioWidth,e=this.isVideo?this.media.videoHeight&&this.media.videoHeight>0?this.media.videoHeight:this.options.defaultVideoHeight:this.options.defaultAudioHeight,d=this.container.parent().closest(\":visible\").width();c=this.isVideo||!this.options.autosizeProgress?parseInt(d*e/c,10):e;if(this.container.parent()[0].tagName.toLowerCase()===\"body\"){d=f(window).width();\nc=f(window).height()}if(c!=0&&d!=0){this.container.width(d).height(c);this.$media.add(this.container.find(\".mejs-shim\")).width(\"100%\").height(\"100%\");this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(d,c);this.layers.children(\".mejs-layer\").width(\"100%\").height(\"100%\")}}else{this.container.width(this.width).height(this.height);this.layers.children(\".mejs-layer\").width(this.width).height(this.height)}d=this.layers.find(\".mejs-overlay-play\");c=d.find(\".mejs-overlay-button\");d.height(this.container.height()-\nthis.controls.height());c.css(\"margin-top\",\"-\"+(c.height()/2-this.controls.height()/2).toString()+\"px\")},setControlsSize:function(){var a=0,b=0,c=this.controls.find(\".mejs-time-rail\"),e=this.controls.find(\".mejs-time-total\");this.controls.find(\".mejs-time-current\");this.controls.find(\".mejs-time-loaded\");var d=c.siblings();if(this.options&&!this.options.autosizeProgress)b=parseInt(c.css(\"width\"));if(b===0||!b){d.each(function(){var g=f(this);if(g.css(\"position\")!=\"absolute\"&&g.is(\":visible\"))a+=f(this).outerWidth(true)});\nb=this.controls.width()-a-(c.outerWidth(true)-c.width())}c.width(b);e.width(b-(e.outerWidth(true)-e.width()));this.setProgressRail&&this.setProgressRail();this.setCurrentRail&&this.setCurrentRail()},buildposter:function(a,b,c,e){var d=f('<div class=\"mejs-poster mejs-layer\"></div>').appendTo(c);b=a.$media.attr(\"poster\");if(a.options.poster!==\"\")b=a.options.poster;b!==\"\"&&b!=null?this.setPoster(b):d.hide();e.addEventListener(\"play\",function(){d.hide()},false);a.options.showPosterWhenEnded&&a.options.autoRewind&&\ne.addEventListener(\"ended\",function(){d.show()},false)},setPoster:function(a){var b=this.container.find(\".mejs-poster\"),c=b.find(\"img\");if(c.length==0)c=f('<img width=\"100%\" height=\"100%\" />').appendTo(b);c.attr(\"src\",a);b.css({\"background-image\":\"url(\"+a+\")\"})},buildoverlays:function(a,b,c,e){var d=this;if(a.isVideo){var g=f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-loading\"><span></span></div></div>').hide().appendTo(c),k=f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-error\"></div></div>').hide().appendTo(c),\nj=f('<div class=\"mejs-overlay mejs-layer mejs-overlay-play\"><div class=\"mejs-overlay-button\"></div></div>').appendTo(c).bind(\"click touchstart\",function(){d.options.clickToPlayPause&&e.paused&&d.play()});e.addEventListener(\"play\",function(){j.hide();g.hide();b.find(\".mejs-time-buffering\").hide();k.hide()},false);e.addEventListener(\"playing\",function(){j.hide();g.hide();b.find(\".mejs-time-buffering\").hide();k.hide()},false);e.addEventListener(\"seeking\",function(){g.show();b.find(\".mejs-time-buffering\").show()},\nfalse);e.addEventListener(\"seeked\",function(){g.hide();b.find(\".mejs-time-buffering\").hide()},false);e.addEventListener(\"pause\",function(){mejs.MediaFeatures.isiPhone||j.show()},false);e.addEventListener(\"waiting\",function(){g.show();b.find(\".mejs-time-buffering\").show()},false);e.addEventListener(\"loadeddata\",function(){g.show();b.find(\".mejs-time-buffering\").show()},false);e.addEventListener(\"canplay\",function(){g.hide();b.find(\".mejs-time-buffering\").hide()},false);e.addEventListener(\"error\",function(){g.hide();\nb.find(\".mejs-time-buffering\").hide();k.show();k.find(\"mejs-overlay-error\").html(\"Error loading this resource\")},false)}},buildkeyboard:function(a,b,c,e){this.globalBind(\"keydown\",function(d){if(a.hasFocus&&a.options.enableKeyboard)for(var g=0,k=a.options.keyActions.length;g<k;g++)for(var j=a.options.keyActions[g],m=0,q=j.keys.length;m<q;m++)if(d.keyCode==j.keys[m]){d.preventDefault();j.action(a,e,d.keyCode);return false}return true});this.globalBind(\"click\",function(d){if(f(d.target).closest(\".mejs-container\").length==\n0)a.hasFocus=false})},findTracks:function(){var a=this,b=a.$media.find(\"track\");a.tracks=[];b.each(function(c,e){e=f(e);a.tracks.push({srclang:e.attr(\"srclang\")?e.attr(\"srclang\").toLowerCase():\"\",src:e.attr(\"src\"),kind:e.attr(\"kind\"),label:e.attr(\"label\")||\"\",entries:[],isLoaded:false})})},changeSkin:function(a){this.container[0].className=\"mejs-container \"+a;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.load();this.media.play()},pause:function(){try{this.media.pause()}catch(a){}},\nload:function(){this.isLoaded||this.media.load();this.isLoaded=true},setMuted:function(a){this.media.setMuted(a)},setCurrentTime:function(a){this.media.setCurrentTime(a)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(a){this.media.setVolume(a)},getVolume:function(){return this.media.volume},setSrc:function(a){this.media.setSrc(a)},remove:function(){var a,b;for(a in this.options.features){b=this.options.features[a];if(this[\"clean\"+b])try{this[\"clean\"+b](this)}catch(c){}}if(this.isDynamic)this.$node.insertBefore(this.container);\nelse{this.$media.prop(\"controls\",true);this.$node.clone().show().insertBefore(this.container);this.$node.remove()}this.media.pluginType!==\"native\"&&this.media.remove();delete mejs.players[this.id];this.container.remove();this.globalUnbind();delete this.node.player}};(function(){function a(c,e){var d={d:[],w:[]};f.each((c||\"\").split(\" \"),function(g,k){var j=k+\".\"+e;if(j.indexOf(\".\")===0){d.d.push(j);d.w.push(j)}else d[b.test(k)?\"w\":\"d\"].push(j)});d.d=d.d.join(\" \");d.w=d.w.join(\" \");return d}var b=\n/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\\b/;mejs.MediaElementPlayer.prototype.globalBind=function(c,e,d){c=a(c,this.id);c.d&&f(document).bind(c.d,e,d);c.w&&f(window).bind(c.w,e,d)};mejs.MediaElementPlayer.prototype.globalUnbind=function(c,e){c=a(c,this.id);c.d&&f(document).unbind(c.d,e);c.w&&f(window).unbind(c.w,e)}})();if(typeof jQuery!=\"undefined\")jQuery.fn.mediaelementplayer=function(a){a===false?this.each(function(){var b=jQuery(this).data(\"mediaelementplayer\");\nb&&b.remove();jQuery(this).removeData(\"mediaelementplayer\")}):this.each(function(){jQuery(this).data(\"mediaelementplayer\",new mejs.MediaElementPlayer(this,a))});return this};f(document).ready(function(){f(\".mejs-player\").mediaelementplayer()});window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{playpauseText:mejs.i18n.t(\"Play/Pause\")});f.extend(MediaElementPlayer.prototype,{buildplaypause:function(a,b,c,e){var d=f('<div class=\"mejs-button mejs-playpause-button mejs-play\" ><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.playpauseText+'\" aria-label=\"'+this.options.playpauseText+'\"></button></div>').appendTo(b).click(function(g){g.preventDefault();e.paused?e.play():e.pause();return false});e.addEventListener(\"play\",function(){d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")},\nfalse);e.addEventListener(\"playing\",function(){d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")},false);e.addEventListener(\"pause\",function(){d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")},false);e.addEventListener(\"paused\",function(){d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")},false)}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{stopText:\"Stop\"});f.extend(MediaElementPlayer.prototype,{buildstop:function(a,b,c,e){f('<div class=\"mejs-button mejs-stop-button mejs-stop\"><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.stopText+'\" aria-label=\"'+this.options.stopText+'\"></button></div>').appendTo(b).click(function(){e.paused||e.pause();if(e.currentTime>0){e.setCurrentTime(0);e.pause();b.find(\".mejs-time-current\").width(\"0px\");b.find(\".mejs-time-handle\").css(\"left\",\n\"0px\");b.find(\".mejs-time-float-current\").html(mejs.Utility.secondsToTimeCode(0));b.find(\".mejs-currenttime\").html(mejs.Utility.secondsToTimeCode(0));c.find(\".mejs-poster\").show()}})}})})(mejs.$);\n(function(f){f.extend(MediaElementPlayer.prototype,{buildprogress:function(a,b,c,e){f('<div class=\"mejs-time-rail\"><span class=\"mejs-time-total\"><span class=\"mejs-time-buffering\"></span><span class=\"mejs-time-loaded\"></span><span class=\"mejs-time-current\"></span><span class=\"mejs-time-handle\"></span><span class=\"mejs-time-float\"><span class=\"mejs-time-float-current\">00:00</span><span class=\"mejs-time-float-corner\"></span></span></span></div>').appendTo(b);b.find(\".mejs-time-buffering\").hide();var d=\nthis,g=b.find(\".mejs-time-total\");c=b.find(\".mejs-time-loaded\");var k=b.find(\".mejs-time-current\"),j=b.find(\".mejs-time-handle\"),m=b.find(\".mejs-time-float\"),q=b.find(\".mejs-time-float-current\"),p=function(h){h=h.pageX;var l=g.offset(),r=g.outerWidth(true),n=0,o=n=0;if(e.duration){if(h<l.left)h=l.left;else if(h>r+l.left)h=r+l.left;o=h-l.left;n=o/r;n=n<=0.02?0:n*e.duration;t&&n!==e.currentTime&&e.setCurrentTime(n);if(!mejs.MediaFeatures.hasTouch){m.css(\"left\",o);q.html(mejs.Utility.secondsToTimeCode(n));\nm.show()}}},t=false;g.bind(\"mousedown\",function(h){if(h.which===1){t=true;p(h);d.globalBind(\"mousemove.dur\",function(l){p(l)});d.globalBind(\"mouseup.dur\",function(){t=false;m.hide();d.globalUnbind(\".dur\")});return false}}).bind(\"mouseenter\",function(){d.globalBind(\"mousemove.dur\",function(h){p(h)});mejs.MediaFeatures.hasTouch||m.show()}).bind(\"mouseleave\",function(){if(!t){d.globalUnbind(\".dur\");m.hide()}});e.addEventListener(\"progress\",function(h){a.setProgressRail(h);a.setCurrentRail(h)},false);\ne.addEventListener(\"timeupdate\",function(h){a.setProgressRail(h);a.setCurrentRail(h)},false);d.loaded=c;d.total=g;d.current=k;d.handle=j},setProgressRail:function(a){var b=a!=undefined?a.target:this.media,c=null;if(b&&b.buffered&&b.buffered.length>0&&b.buffered.end&&b.duration)c=b.buffered.end(0)/b.duration;else if(b&&b.bytesTotal!=undefined&&b.bytesTotal>0&&b.bufferedBytes!=undefined)c=b.bufferedBytes/b.bytesTotal;else if(a&&a.lengthComputable&&a.total!=0)c=a.loaded/a.total;if(c!==null){c=Math.min(1,\nMath.max(0,c));this.loaded&&this.total&&this.loaded.width(this.total.width()*c)}},setCurrentRail:function(){if(this.media.currentTime!=undefined&&this.media.duration)if(this.total&&this.handle){var a=Math.round(this.total.width()*this.media.currentTime/this.media.duration),b=a-Math.round(this.handle.outerWidth(true)/2);this.current.width(a);this.handle.css(\"left\",b)}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:\"<span> | </span>\"});f.extend(MediaElementPlayer.prototype,{buildcurrent:function(a,b,c,e){f('<div class=\"mejs-time\"><span class=\"mejs-currenttime\">'+(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\")+\"</span></div>\").appendTo(b);this.currenttime=this.controls.find(\".mejs-currenttime\");e.addEventListener(\"timeupdate\",function(){a.updateCurrent()},false)},buildduration:function(a,b,\nc,e){if(b.children().last().find(\".mejs-currenttime\").length>0)f(this.options.timeAndDurationSeparator+'<span class=\"mejs-duration\">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\"))+\"</span>\").appendTo(b.find(\".mejs-time\"));else{b.find(\".mejs-currenttime\").parent().addClass(\"mejs-currenttime-container\");\nf('<div class=\"mejs-time mejs-duration-container\"><span class=\"mejs-duration\">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\"))+\"</span></div>\").appendTo(b)}this.durationD=this.controls.find(\".mejs-duration\");e.addEventListener(\"timeupdate\",function(){a.updateDuration()},\nfalse)},updateCurrent:function(){if(this.currenttime)this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.container.toggleClass(\"mejs-long-video\",this.media.duration>3600);if(this.durationD&&(this.options.duration>0||this.media.duration))this.durationD.html(mejs.Utility.secondsToTimeCode(this.options.duration>0?this.options.duration:\nthis.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{muteText:mejs.i18n.t(\"Mute Toggle\"),hideVolumeOnTouchDevices:true,audioVolume:\"horizontal\",videoVolume:\"vertical\"});f.extend(MediaElementPlayer.prototype,{buildvolume:function(a,b,c,e){if(!(mejs.MediaFeatures.hasTouch&&this.options.hideVolumeOnTouchDevices)){var d=this,g=d.isVideo?d.options.videoVolume:d.options.audioVolume,k=g==\"horizontal\"?f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.muteText+\n'\" aria-label=\"'+d.options.muteText+'\"></button></div><div class=\"mejs-horizontal-volume-slider\"><div class=\"mejs-horizontal-volume-total\"></div><div class=\"mejs-horizontal-volume-current\"></div><div class=\"mejs-horizontal-volume-handle\"></div></div>').appendTo(b):f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.muteText+'\" aria-label=\"'+d.options.muteText+'\"></button><div class=\"mejs-volume-slider\"><div class=\"mejs-volume-total\"></div><div class=\"mejs-volume-current\"></div><div class=\"mejs-volume-handle\"></div></div></div>').appendTo(b),\nj=d.container.find(\".mejs-volume-slider, .mejs-horizontal-volume-slider\"),m=d.container.find(\".mejs-volume-total, .mejs-horizontal-volume-total\"),q=d.container.find(\".mejs-volume-current, .mejs-horizontal-volume-current\"),p=d.container.find(\".mejs-volume-handle, .mejs-horizontal-volume-handle\"),t=function(n,o){if(!j.is(\":visible\")&&typeof o==\"undefined\"){j.show();t(n,true);j.hide()}else{n=Math.max(0,n);n=Math.min(n,1);n==0?k.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\"):k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\");\nif(g==\"vertical\"){var s=m.height(),u=m.position(),v=s-s*n;p.css(\"top\",Math.round(u.top+v-p.height()/2));q.height(s-v);q.css(\"top\",u.top+v)}else{s=m.width();u=m.position();s=s*n;p.css(\"left\",Math.round(u.left+s-p.width()/2));q.width(Math.round(s))}}},h=function(n){var o=null,s=m.offset();if(g==\"vertical\"){o=m.height();parseInt(m.css(\"top\").replace(/px/,\"\"),10);o=(o-(n.pageY-s.top))/o;if(s.top==0||s.left==0)return}else{o=m.width();o=(n.pageX-s.left)/o}o=Math.max(0,o);o=Math.min(o,1);t(o);o==0?e.setMuted(true):\ne.setMuted(false);e.setVolume(o)},l=false,r=false;k.hover(function(){j.show();r=true},function(){r=false;!l&&g==\"vertical\"&&j.hide()});j.bind(\"mouseover\",function(){r=true}).bind(\"mousedown\",function(n){h(n);d.globalBind(\"mousemove.vol\",function(o){h(o)});d.globalBind(\"mouseup.vol\",function(){l=false;d.globalUnbind(\".vol\");!r&&g==\"vertical\"&&j.hide()});l=true;return false});k.find(\"button\").click(function(){e.setMuted(!e.muted)});e.addEventListener(\"volumechange\",function(){if(!l)if(e.muted){t(0);\nk.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\")}else{t(e.volume);k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\")}},false);if(d.container.is(\":visible\")){t(a.options.startVolume);a.options.startVolume===0&&e.setMuted(true);e.pluginType===\"native\"&&e.setVolume(a.options.startVolume)}}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{usePluginFullScreen:true,newWindowCallback:function(){return\"\"},fullscreenText:mejs.i18n.t(\"Fullscreen\")});f.extend(MediaElementPlayer.prototype,{isFullScreen:false,isNativeFullScreen:false,isInIframe:false,buildfullscreen:function(a,b,c,e){if(a.isVideo){a.isInIframe=window.location!=window.parent.location;if(mejs.MediaFeatures.hasTrueNativeFullScreen){c=function(){if(a.isFullScreen)if(mejs.MediaFeatures.isFullScreen()){a.isNativeFullScreen=true;a.setControlsSize()}else{a.isNativeFullScreen=\nfalse;a.exitFullScreen()}};mejs.MediaFeatures.hasMozNativeFullScreen?a.globalBind(mejs.MediaFeatures.fullScreenEventName,c):a.container.bind(mejs.MediaFeatures.fullScreenEventName,c)}var d=this,g=f('<div class=\"mejs-button mejs-fullscreen-button\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.fullscreenText+'\" aria-label=\"'+d.options.fullscreenText+'\"></button></div>').appendTo(b);if(d.media.pluginType===\"native\"||!d.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)g.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&\nmejs.MediaFeatures.isFullScreen()||a.isFullScreen?a.exitFullScreen():a.enterFullScreen()});else{var k=null;if(function(){var h=document.createElement(\"x\"),l=document.documentElement,r=window.getComputedStyle;if(!(\"pointerEvents\"in h.style))return false;h.style.pointerEvents=\"auto\";h.style.pointerEvents=\"x\";l.appendChild(h);r=r&&r(h,\"\").pointerEvents===\"auto\";l.removeChild(h);return!!r}()&&!mejs.MediaFeatures.isOpera){var j=false,m=function(){if(j){for(var h in q)q[h].hide();g.css(\"pointer-events\",\n\"\");d.controls.css(\"pointer-events\",\"\");d.media.removeEventListener(\"click\",d.clickToPlayPauseCallback);j=false}},q={};b=[\"top\",\"left\",\"right\",\"bottom\"];var p,t=function(){var h=g.offset().left-d.container.offset().left,l=g.offset().top-d.container.offset().top,r=g.outerWidth(true),n=g.outerHeight(true),o=d.container.width(),s=d.container.height();for(p in q)q[p].css({position:\"absolute\",top:0,left:0});q.top.width(o).height(l);q.left.width(h).height(n).css({top:l});q.right.width(o-h-r).height(n).css({top:l,\nleft:h+r});q.bottom.width(o).height(s-n-l).css({top:l+n})};d.globalBind(\"resize\",function(){t()});p=0;for(c=b.length;p<c;p++)q[b[p]]=f('<div class=\"mejs-fullscreen-hover\" />').appendTo(d.container).mouseover(m).hide();g.on(\"mouseover\",function(){if(!d.isFullScreen){var h=g.offset(),l=a.container.offset();e.positionFullscreenButton(h.left-l.left,h.top-l.top,false);g.css(\"pointer-events\",\"none\");d.controls.css(\"pointer-events\",\"none\");d.media.addEventListener(\"click\",d.clickToPlayPauseCallback);for(p in q)q[p].show();\nt();j=true}});e.addEventListener(\"fullscreenchange\",function(){d.isFullScreen=!d.isFullScreen;d.isFullScreen?d.media.removeEventListener(\"click\",d.clickToPlayPauseCallback):d.media.addEventListener(\"click\",d.clickToPlayPauseCallback);m()});d.globalBind(\"mousemove\",function(h){if(j){var l=g.offset();if(h.pageY<l.top||h.pageY>l.top+g.outerHeight(true)||h.pageX<l.left||h.pageX>l.left+g.outerWidth(true)){g.css(\"pointer-events\",\"\");d.controls.css(\"pointer-events\",\"\");j=false}}})}else g.on(\"mouseover\",\nfunction(){if(k!==null){clearTimeout(k);delete k}var h=g.offset(),l=a.container.offset();e.positionFullscreenButton(h.left-l.left,h.top-l.top,true)}).on(\"mouseout\",function(){if(k!==null){clearTimeout(k);delete k}k=setTimeout(function(){e.hideFullscreenButton()},1500)})}a.fullscreenBtn=g;d.globalBind(\"keydown\",function(h){if((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||d.isFullScreen)&&h.keyCode==27)a.exitFullScreen()})}},cleanfullscreen:function(a){a.exitFullScreen()},\ncontainerSizeTimeout:null,enterFullScreen:function(){var a=this;if(!(a.media.pluginType!==\"native\"&&(mejs.MediaFeatures.isFirefox||a.options.usePluginFullScreen))){f(document.documentElement).addClass(\"mejs-fullscreen\");normalHeight=a.container.height();normalWidth=a.container.width();if(a.media.pluginType===\"native\")if(mejs.MediaFeatures.hasTrueNativeFullScreen){mejs.MediaFeatures.requestFullScreen(a.container[0]);a.isInIframe&&setTimeout(function c(){if(a.isNativeFullScreen)f(window).width()!==\nscreen.width?a.exitFullScreen():setTimeout(c,500)},500)}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){a.media.webkitEnterFullscreen();return}if(a.isInIframe){var b=a.options.newWindowCallback(this);if(b!==\"\")if(mejs.MediaFeatures.hasTrueNativeFullScreen)setTimeout(function(){if(!a.isNativeFullScreen){a.pause();window.open(b,a.id,\"top=0,left=0,width=\"+screen.availWidth+\",height=\"+screen.availHeight+\",resizable=yes,scrollbars=no,status=no,toolbar=no\")}},250);else{a.pause();window.open(b,a.id,\n\"top=0,left=0,width=\"+screen.availWidth+\",height=\"+screen.availHeight+\",resizable=yes,scrollbars=no,status=no,toolbar=no\");return}}a.container.addClass(\"mejs-container-fullscreen\").width(\"100%\").height(\"100%\");a.containerSizeTimeout=setTimeout(function(){a.container.css({width:\"100%\",height:\"100%\"});a.setControlsSize()},500);if(a.media.pluginType===\"native\")a.$media.width(\"100%\").height(\"100%\");else{a.container.find(\".mejs-shim\").width(\"100%\").height(\"100%\");a.media.setVideoSize(f(window).width(),\nf(window).height())}a.layers.children(\"div\").width(\"100%\").height(\"100%\");a.fullscreenBtn&&a.fullscreenBtn.removeClass(\"mejs-fullscreen\").addClass(\"mejs-unfullscreen\");a.setControlsSize();a.isFullScreen=true}},exitFullScreen:function(){clearTimeout(this.containerSizeTimeout);if(this.media.pluginType!==\"native\"&&mejs.MediaFeatures.isFirefox)this.media.setFullscreen(false);else{if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen))mejs.MediaFeatures.cancelFullScreen();\nf(document.documentElement).removeClass(\"mejs-fullscreen\");this.container.removeClass(\"mejs-container-fullscreen\").width(normalWidth).height(normalHeight);if(this.media.pluginType===\"native\")this.$media.width(normalWidth).height(normalHeight);else{this.container.find(\".mejs-shim\").width(normalWidth).height(normalHeight);this.media.setVideoSize(normalWidth,normalHeight)}this.layers.children(\"div\").width(normalWidth).height(normalHeight);this.fullscreenBtn.removeClass(\"mejs-unfullscreen\").addClass(\"mejs-fullscreen\");\nthis.setControlsSize();this.isFullScreen=false}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{startLanguage:\"\",tracksText:mejs.i18n.t(\"Captions/Subtitles\"),hideCaptionsButtonWhenEmpty:true,toggleCaptionsButtonWhenOnlyOne:false,slidesSelector:\"\"});f.extend(MediaElementPlayer.prototype,{hasChapters:false,buildtracks:function(a,b,c,e){if(a.tracks.length!=0){var d;if(this.domNode.textTracks)for(d=this.domNode.textTracks.length-1;d>=0;d--)this.domNode.textTracks[d].mode=\"hidden\";a.chapters=f('<div class=\"mejs-chapters mejs-layer\"></div>').prependTo(c).hide();a.captions=\nf('<div class=\"mejs-captions-layer mejs-layer\"><div class=\"mejs-captions-position mejs-captions-position-hover\"><span class=\"mejs-captions-text\"></span></div></div>').prependTo(c).hide();a.captionsText=a.captions.find(\".mejs-captions-text\");a.captionsButton=f('<div class=\"mejs-button mejs-captions-button\"><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.tracksText+'\" aria-label=\"'+this.options.tracksText+'\"></button><div class=\"mejs-captions-selector\"><ul><li><input type=\"radio\" name=\"'+\na.id+'_captions\" id=\"'+a.id+'_captions_none\" value=\"none\" checked=\"checked\" /><label for=\"'+a.id+'_captions_none\">'+mejs.i18n.t(\"None\")+\"</label></li></ul></div></div>\").appendTo(b);for(d=b=0;d<a.tracks.length;d++)a.tracks[d].kind==\"subtitles\"&&b++;this.options.toggleCaptionsButtonWhenOnlyOne&&b==1?a.captionsButton.on(\"click\",function(){a.setTrack(a.selectedTrack==null?a.tracks[0].srclang:\"none\")}):a.captionsButton.hover(function(){f(this).find(\".mejs-captions-selector\").css(\"visibility\",\"visible\")},\nfunction(){f(this).find(\".mejs-captions-selector\").css(\"visibility\",\"hidden\")}).on(\"click\",\"input[type=radio]\",function(){lang=this.value;a.setTrack(lang)});a.options.alwaysShowControls?a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\"):a.container.bind(\"controlsshown\",function(){a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\")}).bind(\"controlshidden\",function(){e.paused||a.container.find(\".mejs-captions-position\").removeClass(\"mejs-captions-position-hover\")});\na.trackToLoad=-1;a.selectedTrack=null;a.isLoadingTrack=false;for(d=0;d<a.tracks.length;d++)a.tracks[d].kind==\"subtitles\"&&a.addTrackButton(a.tracks[d].srclang,a.tracks[d].label);a.loadNextTrack();e.addEventListener(\"timeupdate\",function(){a.displayCaptions()},false);if(a.options.slidesSelector!=\"\"){a.slidesContainer=f(a.options.slidesSelector);e.addEventListener(\"timeupdate\",function(){a.displaySlides()},false)}e.addEventListener(\"loadedmetadata\",function(){a.displayChapters()},false);a.container.hover(function(){if(a.hasChapters){a.chapters.css(\"visibility\",\n\"visible\");a.chapters.fadeIn(200).height(a.chapters.find(\".mejs-chapter\").outerHeight())}},function(){a.hasChapters&&!e.paused&&a.chapters.fadeOut(200,function(){f(this).css(\"visibility\",\"hidden\");f(this).css(\"display\",\"block\")})});a.node.getAttribute(\"autoplay\")!==null&&a.chapters.css(\"visibility\",\"hidden\")}},setTrack:function(a){var b;if(a==\"none\"){this.selectedTrack=null;this.captionsButton.removeClass(\"mejs-captions-enabled\")}else for(b=0;b<this.tracks.length;b++)if(this.tracks[b].srclang==a){this.selectedTrack==\nnull&&this.captionsButton.addClass(\"mejs-captions-enabled\");this.selectedTrack=this.tracks[b];this.captions.attr(\"lang\",this.selectedTrack.srclang);this.displayCaptions();break}},loadNextTrack:function(){this.trackToLoad++;if(this.trackToLoad<this.tracks.length){this.isLoadingTrack=true;this.loadTrack(this.trackToLoad)}else{this.isLoadingTrack=false;this.checkForTracks()}},loadTrack:function(a){var b=this,c=b.tracks[a];f.ajax({url:c.src,dataType:\"text\",success:function(e){c.entries=typeof e==\"string\"&&\n/<tt\\s+xml/ig.exec(e)?mejs.TrackFormatParser.dfxp.parse(e):mejs.TrackFormatParser.webvvt.parse(e);c.isLoaded=true;b.enableTrackButton(c.srclang,c.label);b.loadNextTrack();c.kind==\"chapters\"&&b.media.addEventListener(\"play\",function(){b.media.duration>0&&b.displayChapters(c)},false);c.kind==\"slides\"&&b.setupSlides(c)},error:function(){b.loadNextTrack()}})},enableTrackButton:function(a,b){if(b===\"\")b=mejs.language.codes[a]||a;this.captionsButton.find(\"input[value=\"+a+\"]\").prop(\"disabled\",false).siblings(\"label\").html(b);\nthis.options.startLanguage==a&&f(\"#\"+this.id+\"_captions_\"+a).click();this.adjustLanguageBox()},addTrackButton:function(a,b){if(b===\"\")b=mejs.language.codes[a]||a;this.captionsButton.find(\"ul\").append(f('<li><input type=\"radio\" name=\"'+this.id+'_captions\" id=\"'+this.id+\"_captions_\"+a+'\" value=\"'+a+'\" disabled=\"disabled\" /><label for=\"'+this.id+\"_captions_\"+a+'\">'+b+\" (loading)</label></li>\"));this.adjustLanguageBox();this.container.find(\".mejs-captions-translations option[value=\"+a+\"]\").remove()},\nadjustLanguageBox:function(){this.captionsButton.find(\".mejs-captions-selector\").height(this.captionsButton.find(\".mejs-captions-selector ul\").outerHeight(true)+this.captionsButton.find(\".mejs-captions-translations\").outerHeight(true))},checkForTracks:function(){var a=false;if(this.options.hideCaptionsButtonWhenEmpty){for(i=0;i<this.tracks.length;i++)if(this.tracks[i].kind==\"subtitles\"){a=true;break}if(!a){this.captionsButton.hide();this.setControlsSize()}}},displayCaptions:function(){if(typeof this.tracks!=\n\"undefined\"){var a,b=this.selectedTrack;if(b!=null&&b.isLoaded)for(a=0;a<b.entries.times.length;a++)if(this.media.currentTime>=b.entries.times[a].start&&this.media.currentTime<=b.entries.times[a].stop){this.captionsText.html(b.entries.text[a]);this.captions.show().height(0);return}this.captions.hide()}},setupSlides:function(a){this.slides=a;this.slides.entries.imgs=[this.slides.entries.text.length];this.showSlide(0)},showSlide:function(a){if(!(typeof this.tracks==\"undefined\"||typeof this.slidesContainer==\n\"undefined\")){var b=this,c=b.slides.entries.text[a],e=b.slides.entries.imgs[a];if(typeof e==\"undefined\"||typeof e.fadeIn==\"undefined\")b.slides.entries.imgs[a]=e=f('<img src=\"'+c+'\">').on(\"load\",function(){e.appendTo(b.slidesContainer).hide().fadeIn().siblings(\":visible\").fadeOut()});else!e.is(\":visible\")&&!e.is(\":animated\")&&e.fadeIn().siblings(\":visible\").fadeOut()}},displaySlides:function(){if(typeof this.slides!=\"undefined\"){var a=this.slides,b;for(b=0;b<a.entries.times.length;b++)if(this.media.currentTime>=\na.entries.times[b].start&&this.media.currentTime<=a.entries.times[b].stop){this.showSlide(b);break}}},displayChapters:function(){var a;for(a=0;a<this.tracks.length;a++)if(this.tracks[a].kind==\"chapters\"&&this.tracks[a].isLoaded){this.drawChapters(this.tracks[a]);this.hasChapters=true;break}},drawChapters:function(a){var b=this,c,e,d=e=0;b.chapters.empty();for(c=0;c<a.entries.times.length;c++){e=a.entries.times[c].stop-a.entries.times[c].start;e=Math.floor(e/b.media.duration*100);if(e+d>100||c==a.entries.times.length-\n1&&e+d<100)e=100-d;b.chapters.append(f('<div class=\"mejs-chapter\" rel=\"'+a.entries.times[c].start+'\" style=\"left: '+d.toString()+\"%;width: \"+e.toString()+'%;\"><div class=\"mejs-chapter-block'+(c==a.entries.times.length-1?\" mejs-chapter-block-last\":\"\")+'\"><span class=\"ch-title\">'+a.entries.text[c]+'</span><span class=\"ch-time\">'+mejs.Utility.secondsToTimeCode(a.entries.times[c].start)+\"&ndash;\"+mejs.Utility.secondsToTimeCode(a.entries.times[c].stop)+\"</span></div></div>\"));d+=e}b.chapters.find(\"div.mejs-chapter\").click(function(){b.media.setCurrentTime(parseFloat(f(this).attr(\"rel\")));\nb.media.paused&&b.media.play()});b.chapters.show()}});mejs.language={codes:{af:\"Afrikaans\",sq:\"Albanian\",ar:\"Arabic\",be:\"Belarusian\",bg:\"Bulgarian\",ca:\"Catalan\",zh:\"Chinese\",\"zh-cn\":\"Chinese Simplified\",\"zh-tw\":\"Chinese Traditional\",hr:\"Croatian\",cs:\"Czech\",da:\"Danish\",nl:\"Dutch\",en:\"English\",et:\"Estonian\",tl:\"Filipino\",fi:\"Finnish\",fr:\"French\",gl:\"Galician\",de:\"German\",el:\"Greek\",ht:\"Haitian Creole\",iw:\"Hebrew\",hi:\"Hindi\",hu:\"Hungarian\",is:\"Icelandic\",id:\"Indonesian\",ga:\"Irish\",it:\"Italian\",ja:\"Japanese\",\nko:\"Korean\",lv:\"Latvian\",lt:\"Lithuanian\",mk:\"Macedonian\",ms:\"Malay\",mt:\"Maltese\",no:\"Norwegian\",fa:\"Persian\",pl:\"Polish\",pt:\"Portuguese\",ro:\"Romanian\",ru:\"Russian\",sr:\"Serbian\",sk:\"Slovak\",sl:\"Slovenian\",es:\"Spanish\",sw:\"Swahili\",sv:\"Swedish\",tl:\"Tagalog\",th:\"Thai\",tr:\"Turkish\",uk:\"Ukrainian\",vi:\"Vietnamese\",cy:\"Welsh\",yi:\"Yiddish\"}};mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,\nparse:function(a){var b=0;a=mejs.TrackFormatParser.split2(a,/\\r?\\n/);for(var c={text:[],times:[]},e,d;b<a.length;b++)if(this.pattern_identifier.exec(a[b])){b++;if((e=this.pattern_timecode.exec(a[b]))&&b<a.length){b++;d=a[b];for(b++;a[b]!==\"\"&&b<a.length;){d=d+\"\\n\"+a[b];b++}d=f.trim(d).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\"<a href='$1' target='_blank'>$1</a>\");c.text.push(d);c.times.push({start:mejs.Utility.convertSMPTEtoSeconds(e[1])==0?0.2:mejs.Utility.convertSMPTEtoSeconds(e[1]),\nstop:mejs.Utility.convertSMPTEtoSeconds(e[3]),settings:e[5]})}}return c}},dfxp:{parse:function(a){a=f(a).filter(\"tt\");var b=0;b=a.children(\"div\").eq(0);var c=b.find(\"p\");b=a.find(\"#\"+b.attr(\"style\"));var e,d;a={text:[],times:[]};if(b.length){d=b.removeAttr(\"id\").get(0).attributes;if(d.length){e={};for(b=0;b<d.length;b++)e[d[b].name.split(\":\")[1]]=d[b].value}}for(b=0;b<c.length;b++){var g;d={start:null,stop:null,style:null};if(c.eq(b).attr(\"begin\"))d.start=mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"begin\"));\nif(!d.start&&c.eq(b-1).attr(\"end\"))d.start=mejs.Utility.convertSMPTEtoSeconds(c.eq(b-1).attr(\"end\"));if(c.eq(b).attr(\"end\"))d.stop=mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"end\"));if(!d.stop&&c.eq(b+1).attr(\"begin\"))d.stop=mejs.Utility.convertSMPTEtoSeconds(c.eq(b+1).attr(\"begin\"));if(e){g=\"\";for(var k in e)g+=k+\":\"+e[k]+\";\"}if(g)d.style=g;if(d.start==0)d.start=0.2;a.times.push(d);d=f.trim(c.eq(b).html()).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\n\"<a href='$1' target='_blank'>$1</a>\");a.text.push(d);if(a.times.start==0)a.times.start=2}return a}},split2:function(a,b){return a.split(b)}};if(\"x\\n\\ny\".split(/\\n/gi).length!=3)mejs.TrackFormatParser.split2=function(a,b){var c=[],e=\"\",d;for(d=0;d<a.length;d++){e+=a.substring(d,d+1);if(b.test(e)){c.push(e.replace(b,\"\"));e=\"\"}}c.push(e);return c}})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(a){if(typeof a.enterFullScreen==\"undefined\")return null;return a.isFullScreen?mejs.i18n.t(\"Turn off Fullscreen\"):mejs.i18n.t(\"Go Fullscreen\")},click:function(a){a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}},{render:function(a){return a.media.muted?mejs.i18n.t(\"Unmute\"):mejs.i18n.t(\"Mute\")},click:function(a){a.media.muted?a.setMuted(false):a.setMuted(true)}},{isSeparator:true},{render:function(){return mejs.i18n.t(\"Download Video\")},\nclick:function(a){window.location.href=a.media.currentSrc}}]});f.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(a){a.contextMenu=f('<div class=\"mejs-contextmenu\"></div>').appendTo(f(\"body\")).hide();a.container.bind(\"contextmenu\",function(b){if(a.isContextMenuEnabled){b.preventDefault();a.renderContextMenu(b.clientX-1,b.clientY-1);return false}});a.container.bind(\"click\",function(){a.contextMenu.hide()});a.contextMenu.bind(\"mouseleave\",function(){a.startContextMenuTimer()})},cleancontextmenu:function(a){a.contextMenu.remove()},\nisContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true},disableContextMenu:function(){this.isContextMenuEnabled=false},contextMenuTimeout:null,startContextMenuTimer:function(){var a=this;a.killContextMenuTimer();a.contextMenuTimer=setTimeout(function(){a.hideContextMenu();a.killContextMenuTimer()},750)},killContextMenuTimer:function(){var a=this.contextMenuTimer;if(a!=null){clearTimeout(a);delete a}},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(a,\nb){for(var c=this,e=\"\",d=c.options.contextMenuItems,g=0,k=d.length;g<k;g++)if(d[g].isSeparator)e+='<div class=\"mejs-contextmenu-separator\"></div>';else{var j=d[g].render(c);if(j!=null)e+='<div class=\"mejs-contextmenu-item\" data-itemindex=\"'+g+'\" id=\"element-'+Math.random()*1E6+'\">'+j+\"</div>\"}c.contextMenu.empty().append(f(e)).css({top:b,left:a}).show();c.contextMenu.find(\".mejs-contextmenu-item\").each(function(){var m=f(this),q=parseInt(m.data(\"itemindex\"),10),p=c.options.contextMenuItems[q];typeof p.show!=\n\"undefined\"&&p.show(m,c);m.click(function(){typeof p.click!=\"undefined\"&&p.click(c);c.contextMenu.hide()})});setTimeout(function(){c.killControlsTimer(\"rev3\")},100)}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t(\"Close\")});f.extend(MediaElementPlayer.prototype,{buildpostroll:function(a,b,c){var e=this.container.find('link[rel=\"postroll\"]').attr(\"href\");if(typeof e!==\"undefined\"){a.postroll=f('<div class=\"mejs-postroll-layer mejs-layer\"><a class=\"mejs-postroll-close\" onclick=\"$(this).parent().hide();return false;\">'+this.options.postrollCloseText+'</a><div class=\"mejs-postroll-layer-content\"></div></div>').prependTo(c).hide();this.media.addEventListener(\"ended\",\nfunction(){f.ajax({dataType:\"html\",url:e,success:function(d){c.find(\".mejs-postroll-layer-content\").html(d)}});a.postroll.show()},false)}}})})(mejs.$);\n\n\ndefine(\"components/adapt-accordionWithAudio/js/mediaelement-and-player.min\", function(){});\n\n",
    "/*\n * adapt-accordionWithAudio\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-accordionWithAudio/blob/master/LICENSE\n * \n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-accordionWithAudio/js/adapt-accordionWithAudio',['require','coreViews/componentView','coreJS/adapt','components/adapt-accordionWithAudio/js/mediaelement-and-player.min'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n    var mep = require('components/adapt-accordionWithAudio/js/mediaelement-and-player.min');\n\n    var AccordionWithAudio = ComponentView.extend({\n\n        events: {\n            'click .accordionWithAudio-item-title': 'toggleItem',\n            'click .accordionWithAudio-audio': 'onClickAudioButton'\n        },\n\n        preRender: function() {\n            // Checks to see if the accordionWithAudio should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.$('.component-inner').on('inview', _.bind(this.inview, this));\n            this.setReadyStatus();\n\n            if($('html').hasClass('ie8')) {\n                _.each(this.$('audio'), function(item, index) {\n                    var audioObject = new MediaElementPlayer($(item));\n                    this.model.get(\"_items\")[index].audioObject = audioObject;\n                }, this)\n            }\n            this.$('.mejs-container').addClass('display-none');\n            this.$('audio').on('ended', _.bind(this.onAudioEnded, this));\n            this.$('.accordionWithAudio-audio').hide();\n        },\n\n        // Used to check if the accordionWithAudio should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n\n            _.each(this.model.get('_items'), function(item) {\n                item._isVisited = false;\n            });\n        },\n\n        toggleItem: function(event) {\n            event.preventDefault();\n            var $currentSelected = $(event.currentTarget);\n\n            this.$('.accordionWithAudio-audio').hide();\n            this.$('.accordionWithAudio-item-body').stop(true, true).slideUp(200);\n            if (!$currentSelected.hasClass('selected')) {\n                this.$('.accordionWithAudio-item-title').removeClass('selected');\n                var body = $currentSelected.addClass('selected visited').siblings('.accordionWithAudio-item-body').slideToggle(200, function() {\n                    $(body).a11y_focus();\n                });\n                this.$('.accordionWithAudio-item-title-icon').removeClass('icon-minus').addClass('icon-plus');\n                $('.accordionWithAudio-item-title-icon', event.currentTarget).removeClass('icon-plus').addClass('icon-minus');\n\n                if ($currentSelected.hasClass('accordionWithAudio-item')) {\n                    this.setVisited($currentSelected.index());\n                } else {\n                    this.setVisited($currentSelected.closest('.accordionWithAudio-item').index());\n                }\n\n                var currentIndex =$currentSelected.closest('.accordionWithAudio-item').index();\n                if($('html').hasClass('ie8')) {\n                    this.playAudioAtIndex(currentIndex);\n                } else {\n                    this.playAudioForElement(this.$('.accordionWithAudio-item-audio audio').eq(currentIndex)[0]);\n                }\n\n                this.$('.accordionWithAudio-sound').removeClass('icon-sound icon-sound-mute')\n                this.$('.accordionWithAudio-audio').eq(currentIndex).show();\n                this.$('.accordionWithAudio-sound').eq(currentIndex).addClass('icon-sound');\n\n            } else {\n                if($('html').hasClass('ie8')) {\n                    this.stopAudio();\n                } else {\n                    this.stopCurrentAudio();\n                }\n                $currentSelected.removeClass('selected');\n                $('.accordionWithAudio-item-title-icon', event.currentTarget).removeClass('icon-minus').addClass('icon-plus');\n\n                this.$('.accordionWithAudio-audio').eq($currentSelected.closest('.accordionWithAudio-item').index()).hide();\n                this.$('.accordionWithAudio-sound').removeClass('icon-sound icon-sound-mute');\n                this.$('.accordionWithAudio-item-title').removeClass('selected');\n\n            }\n            // set aria-expanded value\n            if ($currentSelected.hasClass('selected')) {\n                $('.accordionWithAudio-item-title').attr('aria-expanded', false);\n                $currentSelected.attr('aria-expanded', true);\n            } else {\n                $currentSelected.attr('aria-expanded', false);\n            }\n        },\n\n        setVisited: function(index) {\n            var item = this.model.get('_items')[index];\n            item._isVisited = true;\n            this.checkCompletionStatus();\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item._isVisited;\n            });\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (!visible) {\n                var curIndex = this.$('.accordionWithAudio-item-title.selected').closest('.accordionWithAudio-item').index();\n                this.$('.accordionWithAudio-sound').eq(curIndex).removeClass('icon-sound').addClass('icon-sound-mute');\n                if($('html').hasClass('ie8')) {\n                    this.stopAudio();\n                } else {\n                    this.stopCurrentAudio();\n                }\n            }\n        },\n\n\n        onAudioEnded: function(event) {\n            var curIndex = this.$('.accordionWithAudio-item-title.selected').closest('.accordionWithAudio-item').index();\n            this.$('.accordionWithAudio-sound').eq(curIndex).removeClass('icon-sound').addClass('icon-sound-mute');\n            if($('html').hasClass('ie8')) {\n                this.stopAudio();\n            } else {\n                this.model.get(\"_currentAudioElement\").currentTime = 0.0;\n                this.model.set(\"_currentAudioElement\", '');\n            }\n\n        },\n\n        playAudioAtIndex: function (audioObjectIndex) {\n            var item = (audioObjectIndex >= 0) ? this.model.get(\"_items\")[audioObjectIndex] : null;\n            var audioObject = item ? item.audioObject : null;\n\n            if(audioObject) {\n                audioObject.play();\n                this.model.set(\"_currentAudioObjectIndex\", audioObjectIndex);\n            }\n        },\n\n        stopAudio: function () {\n            var index = this.model.get(\"_currentAudioObjectIndex\");\n            var item = (index >= 0) ? this.model.get(\"_items\")[index] : null;\n            var audioObject = item ? item.audioObject : null;\n            if(audioObject) {\n                audioObject.setCurrentTime(0);\n                audioObject.pause();\n                this.model.set(\"_currentAudioObjectIndex\", -1);\n            }\n        },\n\n        playAudioForElement: function(audioElement) {\n            if (audioElement) {\n                this.stopCurrentAudio();\n                this.model.set(\"_currentAudioElement\", audioElement);\n                if(audioElement.play) audioElement.play();\n            }\n        },\n\n        stopCurrentAudio: function() {\n            var audioElement = this.model.get(\"_currentAudioElement\");\n            if (audioElement) {\n                if (!audioElement.paused && audioElement.pause) {\n                    audioElement.pause();\n                }\n                if (audioElement.currentTime != 0) {\n                    audioElement.currentTime = 0.0;\n                }\n                if($('html').hasClass('ie8')) {\n                    if (audioElement.getCurrentTime() != 0) {\n                        audioElement.setCurrentTime(0);\n                    }\n                }\n                this.model.set(\"_currentAudioElement\", '');\n            }\n        },\n\n        onClickAudioButton:function(event){\n            if(event && event.preventDefault) event.preventDefault();\n            var audioElement = this.model.get(\"_currentAudioElement\");\n            var curIndex = $(event.currentTarget).closest('.accordionWithAudio-item').index();\n            if(audioElement==''){\n                //var curIndex = $(event.currentTarget).closest('.accordionWithAudio-item').index();\n                if($('html').hasClass('ie8')) {\n                    this.playAudioAtIndex(curIndex);\n                } else {\n                    var audioElement = this.$('.accordionWithAudio-item-audio audio').eq(curIndex)[0];\n                    this.playAudioForElement(audioElement);\n                }\n                //this.$('.accordionWithAudio-sound').removeClass('icon-sound-mute');\n                this.$('.accordionWithAudio-sound').eq(curIndex).addClass('icon-sound');\n                this.$('.accordionWithAudio-sound').eq(curIndex).removeClass('icon-sound-mute');\n            }else {\n                if($('html').hasClass('ie8')) {\n                    this.stopAudio();\n                } else {\n                    this.stopCurrentAudio();\n                }\n                //this.$('.accordionWithAudio-sound').addClass('icon-sound-mute');\n                this.$('.accordionWithAudio-sound').eq(curIndex).addClass('icon-sound-mute');\n\n            }\n        },\n\n        checkCompletionStatus: function() {\n            if (!this.model.get('_isComplete')) {\n                if (this.getVisitedItems().length == this.model.get('_items').length) {\n                    this.setCompletionStatus();\n                }\n            }\n        }\n\n    });\n\n    Adapt.register('accordionWithAudio', AccordionWithAudio);\n\n    return AccordionWithAudio;\n\n});\n\n",
    "define('components/adapt-contrib-accordion/js/adapt-contrib-accordion', ['require', 'coreViews/componentView', 'coreJS/adapt'], function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var Accordion = ComponentView.extend({\n\n        events: {\n            'click .accordion-item-title': 'toggleItem'\n        },\n\n        preRender: function() {\n            // Checks to see if the accordion should be reset on revisit\n            this.checkIfResetOnRevisit();\n            // Checks to see if the accordion should be is part of VerticalBlockSlider\n            if (this.model.get(\"_isPartOfVerticalBlockSlider\")) {\n                this.disableDidYouKnowExtension();\n                //this.setCompletionStatus();\n                this.sortItems();\n                this.model.set(\"dummyItem\", this.model.get('_items')[0]);\n                this.checkIdSetOrNot();\n                this.setItemPositions();\n            }\n        },\n\n        postRender: function() {\n            this.setReadyStatus();\n            if (this.model.get(\"_isPartOfVerticalBlockSlider\")){\n                this.checkRightAndLeftTotalItems();\n                this.$('.component-widget').on('inview', _.bind(this.onInview, this));\n            }\n        },\n        checkIdSetOrNot: function() {\n            var ids = _.map(_.pluck(this.model.get('_items'), 'id'), function(num) {\n                num = Number(num);\n                if (!num) throw \"Not Valid Id\";\n                return num;\n            });\n            if (_.contains(ids, undefined) || _.contains(ids, \"\")) {\n                throw \"Please Set Id For Items If you set _isPartOfVerticalBlockSlider=true\";\n            }\n            if ((new Set(ids)).size !== ids.length) {\n                throw \"Duplicate Ids\";\n            }\n            var totalEven = 0,\n                totalOdd = 0;\n            for (var i = 0, length = ids.length; i < length; i++) {\n                if (ids[i] % 2 == 0) {\n                    totalEven++;\n                } else {\n                    totalOdd++;\n                }\n            }\n            this.totalRightItem = totalEven;\n            this.totalLeftItem = totalOdd;\n        },\n        checkRightAndLeftTotalItems: function() {\n            if (!this.totalRightItem) {\n                this.$('.leftItems').css('width', '100%');\n                this.$('.rightItems').addClass('display-none');\n            }\n            if (!this.totalLeftItem) {\n                this.$('.rightItems').css('width', '100%');\n                this.$('.leftItems').addClass('display-none');\n            }\n        },\n        setItemPositions: function() {\n            this.setDammyItem();\n            var items = this.model.get('_items'),\n                leftItems = [],\n                rightItems = [];\n            for (var i = 0, length = items.length; i < length; i++) {\n                if (items[i].id % 2 == 0) {\n                    rightItems.push(items[i]);\n                } else {\n                    leftItems.push(items[i]);\n                }\n            }\n            this.insertDummyData(rightItems, leftItems);\n\n        },\n        insertDummyData: function(rightItems, leftItems) {\n            var bigArray, smallArray, isBigArrayRight = false;\n            if (rightItems.length == leftItems.length) {\n                bigArray = rightItems;\n                smallArray = leftItems;\n                isBigArrayRight = true;\n            }\n            if (rightItems.length > leftItems.length) {\n                bigArray = rightItems;\n                isBigArrayRight = true;\n            }\n            if (leftItems.length > rightItems.length) bigArray = leftItems;\n            if (rightItems.length < leftItems.length) smallArray = leftItems;\n            if (leftItems.length > rightItems.length) smallArray = rightItems;\n            if (bigArray || smallArray)\n                var obj = {\n                    \"small\": smallArray,\n                    \"big\": bigArray\n                }\n            for (var i = 0, length = smallArray.length; i < length; i++) {\n                if (bigArray[i].isDummy && smallArray[i].isDummy) {\n                    obj.big[i] = _.extend(obj.big[i], _.omit(this.model.set(\"dummyItem\"), 'id'));\n                    obj.small[i] = _.extend(obj.small[i], _.omit(this.model.set(\"dummyItem\"), 'id'));\n                    obj.big[i]._isVisited = true;\n                    obj.small[i]._isVisited = true;\n                    continue;\n                }\n                if (bigArray[i].isDummy == undefined && smallArray[i].isDummy == undefined) {\n                    continue;\n                }\n                if (bigArray[i].isDummy == undefined && smallArray[i].isDummy) {\n                    obj.small[i] = _.extend(obj.small[i], _.omit(obj.big[i], 'id'));\n                    obj.small[i]._isVisited = true;\n                    continue;\n                }\n                if (bigArray[i].isDummy && smallArray[i].isDummy == undefined) {\n                    obj.big[i] = _.extend(obj.big[i], _.omit(obj.small[i], 'id'));\n                    obj.big[i]._isVisited = true;\n                    continue;\n                }\n\n            }\n            if (isBigArrayRight) {\n                this.model.set('_rightItems', bigArray);\n                this.model.set('_leftItems', smallArray);\n            } else {\n                this.model.set('_rightItems', smallArray);\n                this.model.set('_leftItems', bigArray);\n            }\n        },\n        setDammyItem: function(leftItems, rightItems) {\n            var items = _.clone(this.model.get('_items')),\n                dummyItems = [];\n            var maxId = items[items.length - 1].id;\n            var range = _.range(1, maxId + 1, 1);\n            for (var i = 0, length = range.length; i < length; i++) {\n                if (_.contains(_.pluck(items, 'id'), range[i])) continue;\n                dummyItems.push({\n                    \"id\": range[i],\n                    \"isDummy\": true\n                });\n            }\n            this.model.set('_items', _.union(this.model.get('_items'), dummyItems));\n            this.sortItems();\n        },\n        //sort item by id\n        sortItems: function() {\n            this.model.set('_items', _.sortBy(this.model.get('_items'), 'id'));\n        },\n        disableDidYouKnowExtension: function() {\n            if (this.model.get('_didYouKnow')) {\n                if (this.model.get('_didYouKnow')._isEnabled) {\n                    this.model.set('_didYouKnow')._isEnabled = false;\n                }\n            }\n        },\n        // Used to check if the accordion should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n\n            _.each(this.model.get('_items'), function(item) {\n                item._isVisited = false;\n            });\n        },\n\n        toggleItem: function(event) {\n            event.preventDefault();\n            if (!this.model.get(\"_isPartOfVerticalBlockSlider\")) {\n                this.$('.accordion-item-body').stop(true, true).slideUp(200);\n                if (!$(event.currentTarget).hasClass('selected')) {\n                    this.$('.accordion-item-title').removeClass('selected');\n                    $(event.currentTarget).addClass('selected visited').siblings('.accordion-item-body').slideToggle(200);\n                    this.$('.accordion-item-title-icon').removeClass('icon-minus').addClass('icon-plus');\n                    $('.accordion-item-title-icon', event.currentTarget).removeClass('icon-plus').addClass('icon-minus');\n                    if ($(event.currentTarget).hasClass('accordion-item')) {\n                        this.setVisited($(event.currentTarget).index());\n                    } else {\n                        this.setVisited($(event.currentTarget).parent('.accordion-item').index());\n                    }\n                } else {\n                    this.$('.accordion-item-title').removeClass('selected');\n                    $(event.currentTarget).removeClass('selected');\n                    $('.accordion-item-title-icon', event.currentTarget).removeClass('icon-minus').addClass('icon-plus');\n                }\n            } else {\n                /*   this.toggleDummyItem(event.currentTarget);\n                   if ($(event.currentTarget).hasClass('selected')) {\n                       $(event.currentTarget).removeClass('selected');\n                       var body = this.$(event.currentTarget).siblings('.accordion-item-body').slideUp(200, function() {\n                           $(body).a11y_focus();\n                       });\n                       $(event.currentTarget).find('.accordion-item-title-icon').removeClass('icon-minus').addClass('icon-plus');\n                       if ($(event.currentTarget).hasClass('accordion-item')) {\n                           this.setVisited(parseInt(event.currentTarget.id.split(\"-\")[1]) - 1);\n                       } else {\n                           this.setVisited(parseInt(event.currentTarget.parentElement.id.split(\"-\")[1]) - 1);\n                       }\n                   } else {\n                       var body = this.$(event.currentTarget).siblings('.accordion-item-body').slideDown(200, function() {\n                           $(body).a11y_focus();\n                       });\n                       $(event.currentTarget).addClass('selected');\n                       $(event.currentTarget).find('.accordion-item-title-icon').removeClass('icon-plus').addClass('icon-minus');\n                   }*/\n            }\n            // set aria-expanded value\n            if ($(event.currentTarget).hasClass('selected')) {\n                $('.accordion-item-title').attr('aria-expanded', false);\n                $(event.currentTarget).attr('aria-expanded', true);\n            } else {\n                $(event.currentTarget).attr('aria-expanded', false);\n            }\n        },\n        toggleDummyItem: function(target) {\n            var clickItemId = parseInt(target.parentNode.id.split(\"-\")[1]),\n                item;\n            if (clickItemId % 2 == 0) { //even\n                item = _.where(this.model.get('_leftItems'), {\n                    id: clickItemId - 1\n                });\n            } else { //odd\n                item = _.where(this.model.get('_rightItems'), {\n                    id: clickItemId + 1\n                });\n            }\n            if (item[0] && item[0].isDummy) {\n                var body = this.$('#item-' + item[0].id).find('.accordion-item-body').slideToggle(200, function() {\n                    $(body).a11y_focus();\n                });\n            }\n\n        },\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.component-widget').off('inview');\n                    this.setCompletionStatus();\n                }\n\n            }\n        },\n        setVisited: function(index) {\n            var item = this.model.get('_items')[index];\n            item._isVisited = true;\n            this.checkCompletionStatus();\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item._isVisited;\n            });\n        },\n\n        checkCompletionStatus: function() {\n            if (!this.model.get('_isComplete')) {\n                if (this.getVisitedItems().length == this.model.get('_items').length) {\n                    this.setCompletionStatus();\n                }\n            }\n        }\n\n    });\n\n    Adapt.register('accordion', Accordion);\n\n    return Accordion;\n\n});\n",
    "define('components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var AssessmentResults = ComponentView.extend({\n\n        events: {\n            'inview': 'onInview',\n            'click .results-retry-button button': 'onRetry'\n        },\n\n        preRender: function () {\n            if (this.model.setLocking) this.model.setLocking(\"_isVisible\", false);\n\n            this.setupEventListeners();\n            this.setupModelResetEvent();\n            this.checkIfComplete();\n            this.checkIfVisible();\n        },\n\n        checkIfVisible: function() {\n\n            var isVisibleBeforeCompletion = this.model.get(\"_isVisibleBeforeCompletion\") || false;\n            var isVisible = false;\n\n            var wasVisible = this.model.get(\"_isVisible\");\n\n            if (!isVisibleBeforeCompletion) {\n\n                var assessmentModel = Adapt.assessment.get(this.model.get(\"_assessmentId\"));\n                if (!assessmentModel || assessmentModel.length === 0) return;\n\n                var state = assessmentModel.getState();\n                var isComplete = state.isComplete;\n                var isAttemptInProgress = state.attemptInProgress;\n                var attemptsSpent = state.attemptsSpent;\n                var hasHadAttempt = (!isAttemptInProgress && attemptsSpent > 0);\n                \n                isVisible = (isVisibleBeforeCompletion && !isComplete) || hasHadAttempt;\n\n            }\n\n            if (!wasVisible && isVisible) isVisible = false;\n\n            this.model.set('_isVisible', isVisible, {pluginName: \"assessmentResults\"});\n        },\n\n        checkIfComplete: function() {\n            var assessmentModel = Adapt.assessment.get(this.model.get(\"_assessmentId\"));\n            if (!assessmentModel || assessmentModel.length === 0) return;\n\n            var state = assessmentModel.getState();\n            var isComplete = state.isComplete;\n            if (isComplete) {\n                this.onAssessmentsComplete(state);\n            } else {\n                this.model.reset('hard', true);\n            }\n        },\n\n        setupModelResetEvent: function() {\n            if (this.model.onAssessmentsReset) return;\n            this.model.onAssessmentsReset = function(state) {\n                if (this.get(\"_assessmentId\") === undefined || \n                    this.get(\"_assessmentId\") != state.id) return;\n\n                this.reset('hard', true);\n            };\n            this.model.listenTo(Adapt, 'assessments:reset', this.model.onAssessmentsReset);\n        },\n\n        postRender: function() {\n            this.setReadyStatus();\n        },\n\n        setupEventListeners: function() {\n            this.listenTo(Adapt, 'assessments:complete', this.onAssessmentsComplete);\n            this.listenToOnce(Adapt, 'remove', this.onRemove);\n        },\n\n        removeEventListeners: function() {;\n            this.stopListening(Adapt, 'assessments:complete', this.onAssessmentsComplete);\n            this.stopListening(Adapt, 'remove', this.onRemove);\n        },\n\n        onAssessmentsComplete: function(state) {\n            if (this.model.get(\"_assessmentId\") === undefined || \n                this.model.get(\"_assessmentId\") != state.id) return;\n\n            this.model.set(\"_state\", state);\n            this.setFeedback();\n\n            //show feedback component\n            this.render();\n            if(!this.model.get('_isVisible')) this.model.set('_isVisible', true, {pluginName: \"assessmentResults\"});\n            \n        },\n\n        onAssessmentComplete: function(state) {\n            this.model.set(\"_state\", state);\n            this.setFeedback();\n\n             //show feedback component\n            if(!this.model.get('_isVisible')) this.model.set('_isVisible', true, {pluginName: \"assessmentResults\"});\n            this.render();\n        },\n\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n                \n                if (this._isVisibleTop || this._isVisibleBottom) {\n                    this.setCompletionStatus();\n                    this.$el.off(\"inview\");\n                }\n            }\n        },\n\n        onRetry: function() {\n            var state = this.model.get(\"_state\");\n            var assessmentModel = Adapt.assessment.get(state.id);\n\n            assessmentModel.reset();\n        },\n\n        setFeedback: function() {\n\n            var completionBody = this.model.get(\"_completionBody\");\n            var feedbackBand = this.getFeedbackBand();\n\n            var state = this.model.get(\"_state\");\n            state.feedbackBand = feedbackBand;\n            state.feedback = feedbackBand.feedback;\n\n            this.checkRetryEnabled();\n\n            completionBody = this.stringReplace(completionBody, state);\n\n            this.model.set(\"body\", completionBody);\n\n        },\n\n        getFeedbackBand: function() {\n            var state = this.model.get(\"_state\");\n\n            var bands = _.sortBy(this.model.get(\"_bands\"), '_score');\n            \n            for (var i = (bands.length - 1); i >= 0; i--) {\n                if (state.scoreAsPercent >= bands[i]._score) {\n                    return bands[i];\n                }\n            }\n\n            return \"\";\n        },\n\n        checkRetryEnabled: function() {\n            var state = this.model.get(\"_state\");\n\n            var assessmentModel = Adapt.assessment.get(state.id);\n            if (!assessmentModel.canResetInPage()) return false;\n\n            var isRetryEnabled = state.feedbackBand._allowRetry !== false;\n            var isAttemptsLeft = (state.attemptsLeft > 0 || state.attemptsLeft === \"infinite\");\n\n            var showRetry = isRetryEnabled && isAttemptsLeft;\n            this.model.set(\"_isRetryEnabled\", showRetry);\n\n            if (showRetry) {\n                var retryFeedback =  this.model.get(\"_retry\").feedback;\n                retryFeedback = this.stringReplace(retryFeedback, state);\n                this.model.set(\"retryFeedback\", retryFeedback);\n            } else {\n                this.model.set(\"retryFeedback\", \"\");\n            }\n        },\n\n        stringReplace: function(string, context) {\n            //use handlebars style escaping for string replacement\n            //only supports unescaped {{{ attributeName }}} and html escaped {{ attributeName }}\n            //will string replace recursively until no changes have occured\n\n            var changed = true;\n            while (changed) {\n                changed = false;\n                for (var k in context) {\n                    var contextValue = context[k];\n\n                    switch (typeof contextValue) {\n                    case \"object\":\n                        continue;\n                    case \"number\":\n                        contextValue = Math.floor(contextValue);\n                        break;\n                    }\n\n                    var regExNoEscaping = new RegExp(\"((\\\\{\\\\{\\\\{){1}[\\\\ ]*\"+k+\"[\\\\ ]*(\\\\}\\\\}\\\\}){1})\",\"g\");\n                    var regExEscaped = new RegExp(\"((\\\\{\\\\{){1}[\\\\ ]*\"+k+\"[\\\\ ]*(\\\\}\\\\}){1})\",\"g\");\n\n                    var preString = string;\n\n                    string = string.replace(regExNoEscaping, contextValue);\n                    var escapedText = $(\"<p>\").text(contextValue).html();\n                    string = string.replace(regExEscaped, escapedText);\n\n                    if (string != preString) changed = true;\n\n                }\n            }\n\n            return string;\n        },\n\n        onRemove: function() {\n            if (this.model.unsetLocking) this.model.unsetLocking(\"_isVisible\");\n\n            this.removeEventListeners();\n        }\n        \n    });\n    \n    Adapt.register(\"assessmentResults\", AssessmentResults);\n    \n});\n\n",
    "define('components/adapt-contrib-blank/js/adapt-contrib-blank',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var Blank = ComponentView.extend({\n\n\n        preRender: function() {\n            this.$el.addClass(\"no-state\");\n            // Checks to see if the blank should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.setReadyStatus();\n            this.$('.component-inner').on('inview', _.bind(this.inview, this));\n        },\n\n        // Used to check if the blank should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.component-inner').off('inview');\n                    this.setCompletionStatus();\n                }\n\n            }\n        }\n\n    });\n\n    Adapt.register('blank', Blank);\n\n    return Blank;\n\n});\n\n",
    "define('coreViews/buttonsView',['coreJS/adapt'],function() {\n\n    var Adapt = require('coreJS/adapt');\n\n    var ButtonsView = Backbone.View.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_buttonState', this.onButtonStateChanged);\n            this.listenTo(this.model, 'change:feedbackMessage', this.onFeedbackMessageChanged);\n            this.listenTo(this.model, 'change:_attemptsLeft', this.onAttemptsChanged);\n            this.render();\n        },\n\n        events: {\n            'click .buttons-action': 'onActionClicked',\n            'click .buttons-feedback': 'onFeedbackClicked'\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates['buttons'];\n            _.defer(_.bind(function() {\n                this.postRender();\n                Adapt.trigger('buttonsView:postRender', this);\n            }, this));\n            this.$el.html(template(data));\n        },\n\n        postRender: function() {\n            this.updateAttemptsCount();\n            this.checkResetSubmittedState();\n            this.onButtonStateChanged(null, this.model.get('_buttonState'));\n            this.onFeedbackMessageChanged(null, this.model.get('feedbackMessage'));\n        },\n\n        checkResetSubmittedState: function() {\n            var isSubmitted = this.model.get('_isSubmitted');\n\n            if (!isSubmitted) {\n\n                var $icon = this.$('.buttons-marking-icon');\n                $icon.removeClass('icon-cross');\n                $icon.removeClass('icon-tick');\n                $icon.addClass('display-none');\n                this.$el.removeClass(\"submitted\");\n                this.model.set('feedbackMessage', undefined);\n                this.$('.buttons-feedback').a11y_cntrl_enabled(false);\n\n            } else {\n\n                this.$el.addClass(\"submitted\");\n\n            }\n        },\n\n        onActionClicked: function() {\n            var buttonState = this.model.get('_buttonState');\n            this.trigger('buttons:' + buttonState);\n            this.checkResetSubmittedState();\n        },\n\n        onFeedbackClicked: function() {\n            this.trigger('buttons:showFeedback');\n        },\n\n        onFeedbackMessageChanged: function(model, changedAttribute) {\n            if (changedAttribute && this.model.get('_canShowFeedback')) {\n\t\t\t\t//enable feedback button\n                this.$('.buttons-feedback').a11y_cntrl_enabled(true);\n            } else {\n\t\t\t\t//disable feedback button\n                this.$('.buttons-feedback').a11y_cntrl_enabled(false)\n            }\n        },\n\n        onButtonStateChanged: function(model, changedAttribute) {\n\t\t\t//use correct instead of complete to signify button state\n            if (changedAttribute === 'correct') {\n\t\t\t\t//disable submit button on correct (i.e. no model answer)\n                this.$('.buttons-action').a11y_cntrl_enabled(false);\n\n                if (!this.model.get(\"_canShowFeedback\")) {\n                    if (!this.$el.is(\".no-state\")) {\n                        //if no feedback, complete correct and has state, force focus to component state\n                        _.defer(_.bind(function() {\n                            $(\".\" + this.model.get(\"_id\") + \" .accessibility-state [tabindex]\").focusNoScroll();\n                        }, this));\n                    }\n                }\n\n            } else {\n                // Backwords compatibility with v1.x\n                var ariaLabel = this.model.get('_buttons')[\"_\" + changedAttribute].ariaLabel;\n                var buttonText = this.model.get('_buttons')[\"_\" + changedAttribute].buttonText;\n\n                switch (changedAttribute) {\n                    case \"showCorrectAnswer\": case \"hideCorrectAnswer\":\n    \t\t\t\t    //make model answer button inaccessible but enabled for visual users\n    \t\t\t\t    //\tdue to inability to represent selected incorrect/correct answers to a screen reader, may need revisiting\n                        this.$('.buttons-action').a11y_cntrl(false).html(buttonText).attr('aria-label', ariaLabel);\n                        break;\n                    default:\n    \t\t\t\t    //enabled button, make accessible and update aria labels and text.\n                        this.$('.buttons-action').a11y_cntrl_enabled(true).html(buttonText).attr('aria-label', ariaLabel);\n                }\n            }\n\n            this.updateAttemptsCount();\n        },\n\n        updateAttemptsCount: function(model, changedAttribute) {\n            var isInteractionComplete = this.model.get('_isInteractionComplete');\n            var attemptsLeft = (this.model.get('_attemptsLeft')) ? this.model.get('_attemptsLeft') : this.model.get('_attempts')\n            var isCorrect = this.model.get('_isCorrect');\n            var shouldDisplayAttempts = this.model.get('_shouldDisplayAttempts');\n            var attemptsString;\n\n            this.checkResetSubmittedState();\n\n            if (!isInteractionComplete && attemptsLeft != 0) {\n                attemptsString = attemptsLeft + \" \";\n                if (attemptsLeft > 1) {\n                    attemptsString += this.model.get('_buttons').remainingAttemptsText;\n                } else if (attemptsLeft === 1){\n                    attemptsString += this.model.get('_buttons').remainingAttemptText;\n                }\n\n            } else {\n                this.$('.buttons-display-inner').addClass('visibility-hidden');\n                var $icon = this.$('.buttons-marking-icon').removeClass('display-none');\n                if (isCorrect) {\n                    $icon.addClass('icon-tick');\n                } else {\n                    $icon.addClass('icon-cross');\n                }\n            }\n\n            if (shouldDisplayAttempts) {\n                this.$('.buttons-display-inner').html(attemptsString);\n            }\n\n        }\n\n    });\n\n    return ButtonsView;\n\n});\n\n",
    "define('coreViews/questionView',['require','handlebars','coreViews/componentView','coreJS/adapt','coreViews/buttonsView'],function(require) {\n\n    var Handlebars = require('handlebars');\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n    var ButtonsView = require('coreViews/buttonsView');\n\n    var QuestionView = ComponentView.extend({\n\n        className: function() {\n            return \"component \"\n            + \"question-component \"\n            + this.model.get('_component')\n            + \"-component \" + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility()\n            + \" component-\" + this.model.get('_layout')\n            + \" nth-child-\" + this.model.get(\"_nthChild\");\n        },\n\n        //////\n        // Setup question types\n        ////\n\n        preRender: function() {\n            // Setup listener for _isEnabled\n            this.listenTo(this.model, 'change:_isEnabled', this.onEnabledChanged);\n            // Checks to see if the question should be reset on revisit\n            this.checkIfResetOnRevisit();\n            // This method helps setup default settings on the model\n            this.setupDefaultSettings();\n            // Blank method for setting up questions before rendering\n            this.setupQuestion();\n\n        },\n\n        // Used in the question view to disabled the question when _isEnabled has been set to false\n        onEnabledChanged: function(model, changedAttribute) {\n\n            // If isEnabled == false add disabled class\n            // else remove disabled class\n            if (!changedAttribute) {\n                this.$('.component-widget').addClass('disabled');\n                this.disableQuestion();\n            } else {\n                this.$('.component-widget').removeClass('disabled');\n                this.enableQuestion();\n            }\n\n        },\n\n        // Used by the question to disable the question during submit and complete stages\n        disableQuestion: function() {},\n\n        // Used by the question to enable the question during interactions\n        enableQuestion: function() {},\n\n        // Used to check if the question should reset on revisit\n        checkIfResetOnRevisit: function() {\n\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            // Call blank method for question to handle\n            if (isResetOnRevisit) {\n\n                this.model.reset(isResetOnRevisit, true);\n\n                 // Defer is added to allow the component to render\n                _.defer(_.bind(function() {\n                   this.resetQuestionOnRevisit(isResetOnRevisit);\n                }, this));\n\n            } else {\n\n                // If complete - display users answer\n                // or reset the question if not complete\n                var isInteractionComplete = this.model.get('_isInteractionComplete');\n\n                if (isInteractionComplete) {\n                    this.model.set('_buttonState', 'hideCorrectAnswer');\n                    // Defer is added to allow the component to render\n                    _.defer(_.bind(function() {\n                        this.onHideCorrectAnswerClicked();\n                    }, this));\n\n                } else {\n                    this.model.set('_buttonState', 'submit');\n                    // Defer is added to allow the component to render\n                    _.defer(_.bind(function() {\n                        this.onResetClicked();\n                    }, this));\n                }\n\n            }\n\n        },\n\n        // Used by the question to reset the question when revisiting the component\n        resetQuestionOnRevisit: function(type) {},\n\n        // Calls default methods to setup on questions\n        setupDefaultSettings: function() {\n            if(this.model.get(\"_canShowModelAnswer\") === undefined) {\n                this.model.set(\"_canShowModelAnswer\", true);\n            }\n\n            this.setupButtonSettings();\n            this.setupWeightSettings();\n        },\n\n        // Used to setup either global or local button text\n        setupButtonSettings: function() {\n            var globalButtons = Adapt.course.get(\"_buttons\");\n\n            // Checks if local _buttons exists and if not use global\n            if (!this.model.has(\"_buttons\")) {\n                this.model.set(\"_buttons\", globalButtons);\n            } else {\n                // check all the components buttons\n                // if they are empty use the global default\n                var componentButtons = this.model.get(\"_buttons\");\n\n                if (typeof componentButtons.submit == 'undefined') {\n                    for (var key in componentButtons) {\n                        if (typeof componentButtons[key] == 'object') {\n                          // ARIA labels\n                          if (!componentButtons[key].buttonText && globalButtons[key].buttonText) {\n                            componentButtons[key].buttonText = globalButtons[key].buttonText;\n                          }\n\n                          if (!componentButtons[key].ariaLabel && globalButtons[key].ariaLabel) {\n                            componentButtons[key].ariaLabel = globalButtons[key].ariaLabel;\n                          }\n                        }\n\n                        if (!componentButtons[key] && globalButtons[key]) {\n                            componentButtons[key] = globalButtons[key];\n                        }\n                    }\n                } else {\n                    // Backwards compatibility with v1.x\n                    var buttons = [];\n\n                    for (var key in componentButtons) {\n                        var index = '_' + key;\n\n                        if (!componentButtons[key]) {\n                            buttons[index] = globalButtons[index];\n                        } else {\n                            buttons[index] = {\n                                buttonText: componentButtons[key],\n                                ariaLabel: componentButtons[key]\n                            };\n                        }\n                    }\n\n                    // HACK - Append other missing values\n                    buttons['_showFeedback'] = {\n                        buttonText: 'Show feedback',\n                        ariaLabel: 'Show feedback'\n                    };\n\n                    this.model.set('_buttons', buttons);\n                }\n            }\n        },\n\n        // Used to setup either global or local question weight/score\n        setupWeightSettings: function() {\n            // Checks if questionWeight exists and if not use global\n            if (!this.model.has(\"_questionWeight\")) {\n                this.model.set(\"_questionWeight\", Adapt.config.get(\"_questionWeight\"));\n            }\n        },\n\n        // Left blank for question setup - should be used instead of preRender\n        setupQuestion: function() {},\n\n        // Calls default methods to setup after the question is rendered\n        postRender: function() {\n            this.addButtonsView();\n            this.onQuestionRendered();\n        },\n\n        // Used to setup buttonsView and sets up the internal events for the question\n        addButtonsView: function() {\n            this.buttonsView = new ButtonsView({model: this.model, el: this.$('.buttons')});\n            this.listenTo(this.buttonsView, 'buttons:submit', this.onSubmitClicked);\n            this.listenTo(this.buttonsView, 'buttons:reset', this.onResetClicked);\n            this.listenTo(this.buttonsView, 'buttons:showCorrectAnswer', this.onShowCorrectAnswerClicked);\n            this.listenTo(this.buttonsView, 'buttons:hideCorrectAnswer', this.onHideCorrectAnswerClicked);\n            this.listenTo(this.buttonsView, 'buttons:showFeedback', this.showFeedback);\n        },\n\n        // Blank method used just like postRender is for presentational components\n        onQuestionRendered: function() {},\n\n        //////\n        // Submit process\n        ////\n\n        // Triggered when the submit button is clicked\n        onSubmitClicked: function() {\n\n            // canSubmit is setup in questions and should return a boolean\n            // If the question stops the user form submitting - show instruction error\n            // and give a blank method, onCannotSubmit to the question\n            if(!this.canSubmit()) {\n                this.showInstructionError();\n                this.onCannotSubmit();\n                return;\n            }\n\n            // Used to update the amount of attempts the question has\n            this.updateAttempts();\n\n            // Used to set attributes on the model after being submitted\n            // Also adds a class of submitted\n            this.setQuestionAsSubmitted();\n\n            // Used to remove instruction error that is set when\n            // the user has interacted in the wrong way\n            this.removeInstructionError();\n\n            // Used to store the users answer for later\n            // This is a blank method given to the question\n            this.storeUserAnswer();\n\n            // Used to set question as correct:true/false\n            // Calls isCorrect which is blank for the question\n            // to fill out and return a boolean\n            this.markQuestion();\n\n            // Used by the question to set the score on the model\n            this.setScore();\n\n            // Used by the question to display markings on the component\n            this.showMarking();\n\n            // Used to check if the question is complete\n            // Triggers setCompletionStatus and adds class to widget\n            this.checkQuestionCompletion();\n\n            this.recordInteraction();\n\n            // Used to setup the feedback by checking against\n            // question isCorrect or isPartlyCorrect\n            this.setupFeedback();\n\n            // Used to update buttonsView based upon question state\n            // Update buttons happens before showFeedback to preserve tabindexes and after setupFeedback to allow buttons to use feedback attribute\n            this.updateButtons();\n            // Used to trigger an event so plugins can display feedback\n            this.showFeedback();\n\n        },\n\n        // Use to check if the user is allowed to submit the question\n        // Maybe the user has to select an item?\n        canSubmit: function() {},\n\n        // Adds a validation error class when the canSubmit returns false\n        showInstructionError: function() {\n            this.$(\".component-instruction-inner\").addClass(\"validation-error\");\n            this.$el.a11y_focus();\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {},\n\n        // Used to update the amount of attempts the user has left\n        updateAttempts: function() {\n            if (!this.model.get('_attemptsLeft')) {\n                this.model.set(\"_attemptsLeft\", this.model.get('_attempts'));\n            }\n            this.model.set(\"_attemptsLeft\", this.model.get('_attemptsLeft') - 1);\n        },\n\n        // Used to set _isEnabled and _isSubmitted on the model\n        // Also adds a 'submitted' class to the widget\n        setQuestionAsSubmitted: function() {\n            this.model.set({\n                _isEnabled: false,\n                _isSubmitted: true\n            });\n            this.$(\".component-widget\").addClass(\"submitted\");\n        },\n\n        // Removes validation error class when the user canSubmit\n        removeInstructionError: function() {\n            this.$(\".component-instruction-inner\").removeClass(\"validation-error\");\n        },\n\n        // This is important for returning or showing the users answer\n        // This should preserve the state of the users answers\n        storeUserAnswer: function() {},\n\n        // Sets _isCorrect:true/false based upon isCorrect method below\n        markQuestion: function() {\n\n            if (this.isCorrect()) {\n                this.model.set('_isCorrect', true);\n            } else {\n                this.model.set('_isCorrect', false);\n            }\n\n        },\n\n        // Should return a boolean based upon whether to question is correct or not\n        isCorrect: function() {},\n\n        // Used to set the score based upon the _questionWeight\n        setScore: function() {},\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {},\n\n        // Checks if the question should be set to complete\n        // Calls setCompletionStatus and adds complete classes\n        checkQuestionCompletion: function() {\n\n            var isComplete = false;\n\n            if (this.model.get('_isCorrect') || this.model.get('_attemptsLeft') === 0) {\n                isComplete = true;\n            }\n\n            if (isComplete) {\n                this.setCompletionStatus();\n                this.$('.component-widget').addClass('complete show-user-answer');\n            }\n\n        },\n\n        recordInteraction:function() {\n            if (this.model.get('_recordInteraction') === true || !this.model.has('_recordInteraction')) {\n                Adapt.trigger('questionView:recordInteraction', this);\n            }\n        },\n\n        // Updates buttons based upon question state by setting\n        // _buttonState on the model which buttonsView listens to\n        updateButtons: function() {\n\n            var isInteractionComplete = this.model.get('_isInteractionComplete');\n            var isCorrect = this.model.get('_isCorrect');\n            var isEnabled = this.model.get('_isEnabled');\n            var buttonState = this.model.get('_buttonState');\n            var canShowModelAnswer = this.model.get('_canShowModelAnswer');\n\n            if (isInteractionComplete) {\n\n                if (isCorrect || !canShowModelAnswer) {\n                    // Use correct instead of complete to signify button state\n                    this.model.set('_buttonState', 'correct');\n\n                } else {\n\n                    switch (buttonState) {\n                      case \"submit\":\n                      case \"hideCorrectAnswer\":\n                          this.model.set('_buttonState', 'showCorrectAnswer');\n                          break;\n                      default:\n                          this.model.set('_buttonState', 'hideCorrectAnswer');\n                    }\n\n                }\n\n            } else {\n\n                if (isEnabled) {\n                    this.model.set('_buttonState', 'submit');\n                } else {\n                    this.model.set('_buttonState', 'reset');\n                }\n            }\n\n        },\n\n        // Used to setup the correct, incorrect and partly correct feedback\n        setupFeedback: function() {\n\n            if (this.model.get('_isCorrect')) {\n                this.setupCorrectFeedback();\n            } else if (this.isPartlyCorrect()) {\n                this.setupPartlyCorrectFeedback();\n            } else {\n                this.setupIncorrectFeedback();\n            }\n\n        },\n\n        // Used by the question to determine if the question is incorrect or partly correct\n        // Should return a boolean\n        isPartlyCorrect: function() {},\n\n        setupCorrectFeedback: function() {\n\n            this.model.set({\n                feedbackTitle: this.model.get('title'),\n                feedbackMessage: this.model.get(\"_feedback\") ? this.model.get(\"_feedback\").correct : \"\"\n            });\n\n        },\n\n        setupPartlyCorrectFeedback: function() {\n\n            if (this.model.get(\"_feedback\") && this.model.get('_feedback')._partlyCorrect) {\n                if (this.model.get('_attemptsLeft') === 0 || !this.model.get('_feedback')._partlyCorrect.notFinal) {\n                    if (this.model.get('_feedback')._partlyCorrect.final) {\n                        this.model.set({\n                            feedbackTitle: this.model.get('title'),\n                            feedbackMessage: this.model.get(\"_feedback\") ? this.model.get('_feedback')._partlyCorrect.final : \"\"\n                        });\n                    } else {\n                        this.setupIncorrectFeedback();\n                    }\n                } else {\n                    this.model.set({\n                        feedbackTitle: this.model.get('title'),\n                        feedbackMessage: this.model.get(\"_feedback\") ? this.model.get('_feedback')._partlyCorrect.notFinal : \"\"\n                    });\n                }\n            } else {\n                this.setupIncorrectFeedback();\n            }\n\n        },\n\n        setupIncorrectFeedback: function() {\n\n            if (this.model.get('_attemptsLeft') === 0 || this.model.get('_feedback') && !this.model.get('_feedback')._incorrect.notFinal) {\n                this.model.set({\n                    feedbackTitle: this.model.get('title'),\n                    feedbackMessage: this.model.get(\"_feedback\") ? this.model.get('_feedback')._incorrect.final : \"\"\n                });\n            } else {\n                this.model.set({\n                    feedbackTitle: this.model.get('title'),\n                    feedbackMessage: this.model.get(\"_feedback\") ? this.model.get('_feedback')._incorrect.notFinal : \"\"\n                });\n            }\n\n        },\n\n        // Used to show feedback based upon whether _canShowFeedback is true\n        showFeedback: function() {\n\n            if (this.model.get('_canShowFeedback')) {\n                Adapt.trigger('questionView:showFeedback', this);\n            } else {\n                Adapt.trigger('questionView:disabledFeedback', this);\n            }\n\n        },\n\n        onResetClicked: function() {\n            this.setQuestionAsReset();\n            this.updateButtons();\n            this.resetUserAnswer();\n            this.resetQuestion();\n            if (this.model.get(\"_isReady\")) {\n                //if the model is already rendered, focus on the first tabbable element\n                //onResetClicked is called as part of the checkIfResetOnRevisit function and as a button click\n                _.defer(_.bind(function(){\n                    this.$el.a11y_focus();\n                }, this));\n            }\n        },\n\n        setQuestionAsReset: function() {\n            this.model.set({\n                _isEnabled: true,\n                _isSubmitted: false\n            });\n            this.$(\".component-widget\").removeClass(\"submitted\");\n            \n            try {\n                //try to get the current page location\n                var currentModel = Adapt.findById(Adapt.location._currentId);\n                if (currentModel.get(\"_isReady\")) {\n                    //if the page is ready, focus on the first tabbable item\n                    //otherwise will try to set focus as page loads and components are rendered\n                    this.$el.a11y_focus();\n                }\n            } catch(e) {}\n            \n        },\n\n        // Used by the question view to reset the stored user answer\n        resetUserAnswer: function() {},\n\n        // Used by the question view to reset the look and feel of the component.\n        // This could also include resetting item data\n        // This is triggered when the reset button is clicked so it shouldn't\n        // be a full reset\n        resetQuestion: function() {},\n\n        onShowCorrectAnswerClicked: function() {\n            this.setQuestionAsShowCorrect();\n            this.updateButtons();\n            this.showCorrectAnswer();\n        },\n\n        setQuestionAsShowCorrect: function() {\n            this.$(\".component-widget\")\n                .addClass(\"submitted show-correct-answer\")\n                .removeClass(\"show-user-answer\");\n        },\n\n        // Used by the question to display the correct answer to the user\n        showCorrectAnswer: function() {},\n\n        onHideCorrectAnswerClicked: function() {\n            this.setQuestionAsHideCorrect();\n            this.updateButtons();\n            this.hideCorrectAnswer();\n        },\n\n        setQuestionAsHideCorrect: function() {\n            this.$(\".component-widget\")\n                .addClass(\"submitted show-user-answer\")\n                .removeClass(\"show-correct-answer\");\n        },\n\n        // Used by the question to display the users answer and\n        // hide the correct answer\n        // Should use the values stored in storeUserAnswer\n        hideCorrectAnswer: function() {},\n\n        // Time elapsed between the time the interaction was made available to the learner for response and the time of the first response\n        getLatency:function() {\n            return null;\n        },\n\n        // a string detailing how the user answered the question\n        getResponse:function() {},\n\n        // a string describing the type of interaction: \"choice\" and \"matching\" supported (see scorm wrapper)\n        getResponseType:function() {}\n\n    }, {\n        _isQuestionType: true\n    });\n\n    return QuestionView;\n\n});\n\n",
    "define('components/adapt-contrib-mcq/js/adapt-contrib-mcq',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var Mcq = QuestionView.extend({\n\n        events: {\n            'focus .mcq-item input':'onItemFocus',\n            'blur .mcq-item input':'onItemBlur',\n            'change .mcq-item input':'onItemSelected',\n            'keyup .mcq-item input':'onKeyPress'\n        },\n\n        resetQuestionOnRevisit: function() {\n            this.setAllItemsEnabled(true);\n            this.resetQuestion();\n        },\n\n        setupQuestion: function() {\n            // if only one answer is selectable, we should display radio buttons not checkboxes\n            this.model.set(\"_isRadio\", (this.model.get(\"_selectable\") == 1) );\n            \n            this.model.set('_selectedItems', []);\n\n            this.setupQuestionItemIndexes();\n\n            this.setupRandomisation();\n            \n            this.restoreUserAnswers();\n        },\n\n        setupQuestionItemIndexes: function() {\n            var items = this.model.get(\"_items\");\n            for (var i = 0, l = items.length; i < l; i++) {\n                if (items[i]._index === undefined) items[i]._index = i;\n            }\n        },\n\n        setupRandomisation: function() {\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                this.model.set(\"_items\", _.shuffle(this.model.get(\"_items\")));\n            }\n        },\n\n        restoreUserAnswers: function() {\n            if (!this.model.get(\"_isSubmitted\")) return;\n\n            var selectedItems = [];\n            var items = this.model.get(\"_items\");\n            var userAnswer = this.model.get(\"_userAnswer\");\n            _.each(items, function(item, index) {\n                item._isSelected = userAnswer[item._index];\n                if (item._isSelected) {\n                    selectedItems.push(item)\n                }\n            });\n\n            this.model.set(\"_selectedItems\", selectedItems);\n\n            this.setQuestionAsSubmitted();\n            this.markQuestion();\n            this.setScore();\n            this.showMarking();\n            this.setupFeedback();\n        },\n\n        disableQuestion: function() {\n            this.setAllItemsEnabled(false);\n        },\n\n        enableQuestion: function() {\n            this.setAllItemsEnabled(true);\n        },\n\n        setAllItemsEnabled: function(isEnabled) {\n            _.each(this.model.get('_items'), function(item, index){\n                var $itemLabel = this.$('label').eq(index);\n                var $itemInput = this.$('input').eq(index);\n\n                if (isEnabled) {\n                    $itemLabel.removeClass('disabled');\n                    $itemInput.prop('disabled', false);\n                } else {\n                    $itemLabel.addClass('disabled');\n                    $itemInput.prop('disabled', true);\n                }\n            }, this);\n        },\n\n        onQuestionRendered: function() {\n            this.setReadyStatus();\n        },\n\n        onKeyPress: function(event) {\n            if (event.which === 13) { //<ENTER> keypress\n                this.onItemSelected(event);\n            }\n        },\n\n        onItemFocus: function(event) {\n            if(this.model.get('_isEnabled') && !this.model.get('_isSubmitted')){\n                $(\"label[for='\"+$(event.currentTarget).attr('id')+\"']\").addClass('highlighted');\n            }\n        },\n        \n        onItemBlur: function(event) {\n            $(\"label[for='\"+$(event.currentTarget).attr('id')+\"']\").removeClass('highlighted');\n        },\n\n        onItemSelected: function(event) {\n            if(this.model.get('_isEnabled') && !this.model.get('_isSubmitted')){\n                var selectedItemObject = this.model.get('_items')[$(event.currentTarget).parent('.component-item').index()];\n                this.toggleItemSelected(selectedItemObject, event);\n            }\n        },\n\n        toggleItemSelected:function(item, clickEvent) {\n            var selectedItems = this.model.get('_selectedItems');\n            var itemIndex = _.indexOf(this.model.get('_items'), item),\n                $itemLabel = this.$('label').eq(itemIndex),\n                $itemInput = this.$('input').eq(itemIndex),\n                selected = !$itemLabel.hasClass('selected');\n            \n                if(selected) {\n                    if(this.model.get('_selectable') === 1){\n                        this.$('label').removeClass('selected');\n                        this.$('input').prop('checked', false);\n                        this.deselectAllItems();\n                        selectedItems[0] = item;\n                    } else if(selectedItems.length < this.model.get('_selectable')) {\n                     selectedItems.push(item);\n                 } else {\n                    clickEvent.preventDefault();\n                    return;\n                }\n                $itemLabel.addClass('selected');\n                $itemLabel.a11y_selected(true);\n            } else {\n                selectedItems.splice(_.indexOf(selectedItems, item), 1);\n                $itemLabel.removeClass('selected');\n                $itemLabel.a11y_selected(false);\n            }\n            $itemInput.prop('checked', selected);\n            item._isSelected = selected;\n            this.model.set('_selectedItems', selectedItems);\n        },\n\n        // check if the user is allowed to submit the question\n        canSubmit: function() {\n            var count = 0;\n\n            _.each(this.model.get('_items'), function(item) {\n                if (item._isSelected) {\n                    count++;\n                }\n            }, this);\n\n            return (count > 0) ? true : false;\n\n        },\n\n        // Blank method to add functionality for when the user cannot submit\n        // Could be used for a popup or explanation dialog/hint\n        onCannotSubmit: function() {},\n\n        // This is important for returning or showing the users answer\n        // This should preserve the state of the users answers\n        storeUserAnswer: function() {\n            var userAnswer = [];\n\n            var items = this.model.get('_items').slice(0);\n            items.sort(function(a, b) {\n                return a._index - b._index;\n            });\n\n            _.each(items, function(item, index) {\n                userAnswer.push(item._isSelected);\n            }, this);\n            this.model.set('_userAnswer', userAnswer);\n        },\n\n        isCorrect: function() {\n\n            var numberOfRequiredAnswers = 0;\n            var numberOfCorrectAnswers = 0;\n            var numberOfIncorrectAnswers = 0;\n\n            _.each(this.model.get('_items'), function(item, index) {\n\n                var itemSelected = (item._isSelected || false);\n\n                if (item._shouldBeSelected) {\n                    numberOfRequiredAnswers ++;\n\n                    if (itemSelected) {\n                        numberOfCorrectAnswers ++;\n                        \n                        item._isCorrect = true;\n\n                        this.model.set('_isAtLeastOneCorrectSelection', true);\n                    }\n\n                } else if (!item._shouldBeSelected && itemSelected) {\n                    numberOfIncorrectAnswers ++;\n                }\n\n            }, this);\n\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n            this.model.set('_numberOfRequiredAnswers', numberOfRequiredAnswers);\n\n            // Check if correct answers matches correct items and there are no incorrect selections\n            var answeredCorrectly = (numberOfCorrectAnswers === numberOfRequiredAnswers) && (numberOfIncorrectAnswers === 0);\n            return answeredCorrectly;\n        },\n\n        // Sets the score based upon the questionWeight\n        // Can be overwritten if the question needs to set the score in a different way\n        setScore: function() {\n            var questionWeight = this.model.get(\"_questionWeight\");\n            var answeredCorrectly = this.model.get('_isCorrect');\n            var score = answeredCorrectly ? questionWeight : 0;\n            this.model.set('_score', score);\n        },\n\n        setupFeedback: function() {\n\n            if (this.model.get('_isCorrect')) {\n                this.setupCorrectFeedback();\n            } else if (this.isPartlyCorrect()) {\n                this.setupPartlyCorrectFeedback();\n            } else {\n                // apply individual item feedback\n                if((this.model.get('_selectable') === 1) && this.model.get('_selectedItems')[0].feedback) {\n                    this.setupIndividualFeedback(this.model.get('_selectedItems')[0]);\n                    return;\n                } else {\n                    this.setupIncorrectFeedback();\n                }\n            }\n        },\n\n        setupIndividualFeedback: function(selectedItem) {\n             this.model.set({\n                 feedbackTitle: this.model.get('title'),\n                 feedbackMessage: selectedItem.feedback\n             });\n        },\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {\n            _.each(this.model.get('_items'), function(item, i) {\n                var $item = this.$('.component-item').eq(i);\n                $item.removeClass('correct incorrect').addClass(item._isCorrect ? 'correct' : 'incorrect');\n            }, this);\n        },\n\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        resetUserAnswer: function() {\n            this.model.set({_userAnswer: []});\n        },\n\n        // Used by the question view to reset the look and feel of the component.\n        resetQuestion: function() {\n\n            this.deselectAllItems();\n            this.resetItems();\n        },\n\n        deselectAllItems: function() {\n            this.$el.a11y_selected(false);\n            _.each(this.model.get('_items'), function(item) {\n                item._isSelected = false;\n            }, this);\n        },\n\n        resetItems: function() {\n            this.$('.component-item label').removeClass('selected');\n            this.$('.component-item').removeClass('correct incorrect');\n            this.$('input').prop('checked', false);\n            this.model.set({\n                _selectedItems: [],\n                _isAtLeastOneCorrectSelection: false\n            });\n        },\n\n        showCorrectAnswer: function() {\n            _.each(this.model.get('_items'), function(item, index) {\n                this.setOptionSelected(index, item._shouldBeSelected);\n            }, this);\n        },\n\n        setOptionSelected:function(index, selected) {\n            var $itemLabel = this.$('label').eq(index);\n            var $itemInput = this.$('input').eq(index);\n            if (selected) {\n                $itemLabel.addClass('selected');\n                $itemInput.prop('checked', true);\n            } else {\n                $itemLabel.removeClass('selected');\n                $itemInput.prop('checked', false);\n            }\n        },\n\n        hideCorrectAnswer: function() {\n            _.each(this.model.get('_items'), function(item, index) {\n                this.setOptionSelected(index, this.model.get('_userAnswer')[item._index]);\n            }, this);\n        },\n\n        /**\n        * used by adapt-contrib-spoor to get the user's answers in the format required by the cmi.interactions.n.student_response data field\n        * returns the user's answers as a string in the format \"1,5,2\"\n        */\n        getResponse:function() {\n            var selected = _.where(this.model.get('_items'), {'_isSelected':true});\n            var selectedIndexes = _.pluck(selected, '_index');\n            // indexes are 0-based, we need them to be 1-based for cmi.interactions\n            for (var i = 0, count = selectedIndexes.length; i < count; i++) {\n                selectedIndexes[i]++;\n            }\n            return selectedIndexes.join(',');\n        },\n\n        /**\n        * used by adapt-contrib-spoor to get the type of this question in the format required by the cmi.interactions.n.type data field\n        */\n        getResponseType:function() {\n            return \"choice\";\n        }\n\n    });\n\n    Adapt.register(\"mcq\", Mcq);\n\n    return Mcq;\n});\n\n",
    "define('components/adapt-contrib-gmcq/js/adapt-contrib-gmcq',['require','components/adapt-contrib-mcq/js/adapt-contrib-mcq','coreJS/adapt'],function(require) {\n    var Mcq = require('components/adapt-contrib-mcq/js/adapt-contrib-mcq');\n    var Adapt = require('coreJS/adapt');\n\n    var Gmcq = Mcq.extend({\n\n        events: function() {\n\n            var events = {\n                'focus .gmcq-item input': 'onItemFocus',\n                'blur .gmcq-item input': 'onItemBlur',\n                'change .gmcq-item input': 'onItemSelected',\n                'keyup .gmcq-item input':'onKeyPress'\n            };\n\n            if ($('html').hasClass('ie8')) {\n\n                var ie8Events = {\n                    'click label img': 'forceChangeEvent'\n                };\n\n                events = _.extend(events, ie8Events);\n            }\n\n            return events;\n\n        },\n\n        onItemSelected: function(event) {\n\n            var selectedItemObject = this.model.get('_items')[$(event.currentTarget).parent('.gmcq-item').index()];\n\n            if (this.model.get('_isEnabled') && !this.model.get('_isSubmitted')) {\n                this.toggleItemSelected(selectedItemObject, event);\n            }\n\n        },\n\n        setupQuestion: function() {\n            // if only one answer is selectable, we should display radio buttons not checkboxes\n            this.model.set(\"_isRadio\", (this.model.get(\"_selectable\") == 1) );\n\n            this.model.set('_selectedItems', []);\n\n            this.setupQuestionItemIndexes();\n\n            this.setupRandomisation();\n\n            this.restoreUserAnswers();\n\n            this.listenTo(Adapt, 'device:changed', this.resizeImage);\n\n        },\n\n        onQuestionRendered: function() {\n\n            this.resizeImage(Adapt.device.screenSize);\n\n            this.$('label').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n\n        },\n\n        resizeImage: function(width) {\n\n            var imageWidth = width === 'medium' ? 'small' : width;\n\n            this.$('label').each(function(index) {\n                var src = $(this).find('img').attr('data-' + imageWidth);\n                $(this).find('img').attr('src', src);\n            });\n\n        },\n\n        // hack for IE8\n        forceChangeEvent: function(event) {\n\n            $(\"#\" + $(event.currentTarget).closest(\"label\").attr(\"for\")).change();\n\n        }\n\n    }, {\n        template: 'gmcq'\n    });\n\n    Adapt.register(\"gmcq\", Gmcq);\n\n    return Gmcq;\n\n});\n\n",
    "define('components/adapt-contrib-graphic/js/adapt-contrib-graphic',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var Graphic = ComponentView.extend({\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.resizeImage);\n\n            // Checks to see if the graphic should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.resizeImage(Adapt.device.screenSize);\n            this.$('.component-widget').on('inview', _.bind(this.inview, this));\n        },\n\n        // Used to check if the graphic should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.component-widget').off('inview');\n                    this.setCompletionStatus();\n                }\n\n            }\n        },\n\n        resizeImage: function(width) {\n            var imageWidth = width === 'medium' ? 'small' : width;\n            this.$('.graphic-widget img').attr('src', this.model.get('_graphic')[imageWidth]);\n\n            this.$('.graphic-widget').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n        }\n    });\n\n    Adapt.register('graphic', Graphic);\n\n    return Graphic;\n\n});\n\n",
    "define('components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var HotGraphic = ComponentView.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_isVisible', this.toggleVisibility);\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.preRender();\n            if (this.model.get('_canCycleThroughPagination') === undefined) {\n                this.model.set('_canCycleThroughPagination', false);\n            }\n            if (Adapt.device.screenSize == 'large') {\n                this.render();\n            } else {\n                this.reRender();\n            }\n        },\n\n        events: function() {\n            return {\n                'click .hotgraphic-graphic-pin': 'openHotGraphic',\n                'click .hotgraphic-popup-done': 'closeHotGraphic',\n                'click .hotgraphic-popup-nav .back': 'previousHotGraphic',\n                'click .hotgraphic-popup-nav .next': 'nextHotGraphic'\n            }\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n\n            // Checks to see if the hotgraphic should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.renderState();\n            this.$('.hotgraphic-widget').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n\n            this.setupEventListeners();\n        },\n\n        // Used to check if the hotgraphic should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n\n                _.each(this.model.get('_items'), function(item) {\n                    item._isVisited = false;\n                });\n            }\n        },\n\n        reRender: function() {\n            if (Adapt.device.screenSize != 'large') {\n                this.replaceWithNarrative();\n            }\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.component-inner').off('inview');\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        replaceWithNarrative: function() {\n            if (!Adapt.componentStore.narrative) throw \"Narrative not included in build\";\n            var Narrative = Adapt.componentStore.narrative;\n\n            var model = this.prepareNarrativeModel();\n            var newNarrative = new Narrative({ model: model });\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n\n            newNarrative.reRender();\n            newNarrative.setupNarrative();\n            $container.append(newNarrative.$el);\n            Adapt.trigger('device:resize');\n            _.defer(_.bind(function () {\n                this.remove();\n            }, this));\n        },\n\n        prepareNarrativeModel: function() {\n            var model = this.model;\n            model.set('_component', 'narrative');\n            model.set('_wasHotgraphic', true);\n            model.set('originalBody', model.get('body'));\n            model.set('originalInstruction', model.get('instruction'));\n            if (model.get('mobileBody')) {\n                model.set('body', model.get('mobileBody'));\n            }\n            if (model.get('mobileInstruction')) {\n                model.set('instruction', model.get('mobileInstruction'));\n            }\n\n            return model;\n        },\n\n        applyNavigationClasses: function (index) {\n            var $nav = this.$('.hotgraphic-popup-nav'),\n                itemCount = this.$('.hotgraphic-item').length;\n\n            $nav.removeClass('first').removeClass('last');\n            this.$('.hotgraphic-popup-done').a11y_cntrl_enabled(true);\n            if(index <= 0 && !this.model.get('_canCycleThroughPagination')) {\n                this.$('.hotgraphic-popup-nav').addClass('first');\n                this.$('.hotgraphic-popup-controls.back').a11y_cntrl_enabled(false);\n                this.$('.hotgraphic-popup-controls.next').a11y_cntrl_enabled(true);\n            } else if (index >= itemCount-1 && !this.model.get('_canCycleThroughPagination')) {\n                this.$('.hotgraphic-popup-nav').addClass('last');\n                this.$('.hotgraphic-popup-controls.back').a11y_cntrl_enabled(true);\n                this.$('.hotgraphic-popup-controls.next').a11y_cntrl_enabled(false);\n            } else {\n                this.$('.hotgraphic-popup-controls.back').a11y_cntrl_enabled(true);\n                this.$('.hotgraphic-popup-controls.next').a11y_cntrl_enabled(true);\n            }\n            var classes = this.model.get(\"_items\")[index]._classes \n                ? this.model.get(\"_items\")[index]._classes\n                : '';  // _classes has not been defined\n      \n            this.$('.hotgraphic-popup').attr('class', 'hotgraphic-popup ' + 'item-' + index + ' ' + classes);\n\n        },\n\n        openHotGraphic: function (event) {\n            event.preventDefault();\n            this.$('.hotgraphic-popup-inner').a11y_on(false);\n            var currentHotSpot = $(event.currentTarget).data('id');\n            this.$('.hotgraphic-item').hide().removeClass('active');\n            this.$('.'+currentHotSpot).show().addClass('active');\n            var currentIndex = this.$('.hotgraphic-item.active').index();\n            this.setVisited(currentIndex);\n            this.$('.hotgraphic-popup-count .current').html(currentIndex+1);\n            this.$('.hotgraphic-popup-count .total').html(this.$('.hotgraphic-item').length);\n            this.$('.hotgraphic-popup').attr('class', 'hotgraphic-popup ' + 'item-' + currentIndex);\n            this.$('.hotgraphic-popup').show();\n            this.$('.hotgraphic-popup-inner .active').a11y_on(true);\n              \n            Adapt.trigger('popup:opened',  this.$('.hotgraphic-popup-inner'));\n\n            this.$('.hotgraphic-popup-inner .active').a11y_focus();\n            this.applyNavigationClasses(currentIndex);\n        },\n\n        closeHotGraphic: function(event) {\n            event.preventDefault();\n            var currentIndex = this.$('.hotgraphic-item.active').index();\n            this.$('.hotgraphic-popup').hide();\n            Adapt.trigger('popup:closed',  this.$('.hotgraphic-popup-inner'));\n        },\n\n        previousHotGraphic: function (event) {\n            event.preventDefault();\n            var currentIndex = this.$('.hotgraphic-item.active').index();\n\n            if (currentIndex === 0 && !this.model.get('_canCycleThroughPagination')) {\n                return;\n            } else if (currentIndex === 0 && this.model.get('_canCycleThroughPagination')) {\n                currentIndex = this.model.get('_items').length;\n            }\n\n            this.$('.hotgraphic-item.active').hide().removeClass('active');\n            this.$('.hotgraphic-item').eq(currentIndex-1).show().addClass('active');\n            this.setVisited(currentIndex-1);\n            this.$('.hotgraphic-popup-count .current').html(currentIndex);\n            this.$('.hotgraphic-popup-inner').a11y_on(false);\n\n            this.applyNavigationClasses(currentIndex-1);\n            this.$('.hotgraphic-popup-inner .active').a11y_on(true);\n            this.$('.hotgraphic-popup-inner .active').a11y_focus();\n        },\n\n        nextHotGraphic: function (event) {\n            event.preventDefault();\n            var currentIndex = this.$('.hotgraphic-item.active').index();\n            if (currentIndex === (this.model.get('_items').length-1) && !this.model.get('_canCycleThroughPagination')) {\n                return;\n            } else if (currentIndex === (this.model.get('_items').length-1) && this.model.get('_canCycleThroughPagination')) {\n                currentIndex = -1;\n            }\n            this.$('.hotgraphic-item.active').hide().removeClass('active');\n            this.$('.hotgraphic-item').eq(currentIndex+1).show().addClass('active');\n            this.setVisited(currentIndex+1);\n            this.$('.hotgraphic-popup-count .current').html(currentIndex+2);\n            this.$('.hotgraphic-popup-inner').a11y_on(false);\n\n            this.applyNavigationClasses(currentIndex+1);\n            this.$('.hotgraphic-popup-inner .active').a11y_on(true);\n            this.$('.hotgraphic-popup-inner .active').a11y_focus();\n        },\n\n        setVisited: function(index) {\n            var item = this.model.get('_items')[index];\n            item._isVisited = true;\n\n            var $pin = this.$('.hotgraphic-graphic-pin').eq(index);\n            $pin.addClass('visited');\n            // append the word 'visited.' to the pin's aria-label\n            var visitedLabel = this.model.get('_globals')._accessibility._ariaLabels.visited + \".\";\n            $pin.attr('aria-label', function(index, val) {return val + \" \" + visitedLabel});\n\n            $.a11y_alert(\"visited\");\n\n            this.checkCompletionStatus();\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item._isVisited;\n            });\n        },\n\n        checkCompletionStatus: function() {\n            if (!this.model.get('_isComplete')) {\n                if (this.getVisitedItems().length == this.model.get('_items').length) {\n                    this.trigger('allItems');\n                }\n            }\n        },\n\n        onCompletion: function() {\n            this.setCompletionStatus();\n            if (this.completionEvent && this.completionEvent != 'inview') {\n                this.off(this.completionEvent, this);\n            }\n        },\n\n        setupEventListeners: function() {\n            this.completionEvent = (!this.model.get('_setCompletionOn')) ? 'allItems' : this.model.get('_setCompletionOn');\n            if (this.completionEvent !== 'inview') {\n                this.on(this.completionEvent, _.bind(this.onCompletion, this));\n            } else {\n                this.$('.component-widget').on('inview', _.bind(this.inview, this));\n            }\n        }\n\n    });\n\n    Adapt.register('hotgraphic', HotGraphic);\n\n    return HotGraphic;\n\n});\n\n",
    "define('components/adapt-contrib-matching/js/adapt-contrib-matching',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var Matching = QuestionView.extend({\n\n        // Used by questionView to disable the question during submit and complete stages\n        disableQuestion: function() {\n            this.$('.matching-select').prop('disabled', true);\n        },\n\n        // Used by questionView to enable the question during interactions\n        enableQuestion: function() {\n            this.$('.matching-select').prop('disabled', false);\n        },\n\n        // Used by questionView to reset the question when revisiting the component\n        resetQuestionOnRevisit: function() {\n            this.resetQuestion();\n        },\n\n        setupQuestion: function() {\n            this.setupItemIndexes();\n            \n            this.restoreUserAnswers();\n\n            this.setupRandomisation();\n        },\n\n        setupItemIndexes: function() {\n\n            _.each(this.model.get(\"_items\"), function(item, index) {\n                if (item._index == undefined) {\n                    item._index = index;\n                    item._selected = false;\n                }\n                _.each(item._options, function(option, index) {\n                    if (option._index == undefined) {\n                        option._index = index;\n                        option._isSelected = false;\n                    }\n                });\n            });\n\n        },\n\n        restoreUserAnswers: function() {\n            if (!this.model.get(\"_isSubmitted\")) return;\n\n            var userAnswer = this.model.get(\"_userAnswer\");\n\n            _.each(this.model.get(\"_items\"), function(item, index) {\n                _.each(item._options, function(option, index) {\n                    if (option._index == userAnswer[item._index]) {\n                        option._isSelected = true;\n                        item._selected = option;\n                    }\n                });\n            });\n\n            this.setQuestionAsSubmitted();\n            this.markQuestion();\n            this.setScore();\n            this.showMarking();\n            this.setupFeedback();\n        },\n\n        setupRandomisation: function() {\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                _.each(this.model.get('_items'), function(item) {\n                    item._options = _.shuffle(item._options);\n                });\n            }\n        },\n\n        onQuestionRendered: function() {\n            this.setReadyStatus();\n        },\n\n        canSubmit: function() {\n\n            var canSubmit = true;\n\n            $('.matching-select option:selected', this.el).each(_.bind(function(index, element) {\n\n                var $element = $(element);\n\n                if ($element.index() == 0) {\n                    canSubmit = false;\n                    $element.parent('.matching-select').addClass('error');\n                }\n            }, this));\n\n            return canSubmit;\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {\n            //TODO have this highlight all the drop-downs the user has yet to select.\n            //Currently it just highlights the first one, even if that one has been selected\n        },\n\n        storeUserAnswer: function() {\n\n            var userAnswer = new Array(this.model.get('_items').length);\n            var tempUserAnswer = new Array(this.model.get('_items').length);\n\n            _.each(this.model.get('_items'), function(item, index) {\n\n                var $selectedOption = this.$('.matching-select option:selected').eq(index);\n                var optionIndex = $selectedOption.index() - 1;\n\n                item._options[optionIndex]._isSelected = true;\n                item._selected = item._options[optionIndex];\n\n                tempUserAnswer[item._index] = optionIndex;\n                userAnswer[item._index] = item._options[optionIndex]._index;\n            }, this);\n\n            this.model.set('_userAnswer', userAnswer);\n            this.model.set('_tempUserAnswer', tempUserAnswer);\n        },\n\n        isCorrect: function() {\n\n            var numberOfCorrectAnswers = 0;\n\n            _.each(this.model.get('_items'), function(item, index) {\n\n                if (item._selected && item._selected._isCorrect) {\n                    numberOfCorrectAnswers++;\n                    item._isCorrect = true;\n                    this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n                    this.model.set('_isAtLeastOneCorrectSelection', true);\n                } else {\n                    item._isCorrect = false;\n                }\n\n            }, this);\n\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n\n            if (numberOfCorrectAnswers === this.model.get('_items').length) {\n                return true;\n            } else {\n                return false;\n            }\n\n        },\n\n        setScore: function() {\n            var questionWeight = this.model.get(\"_questionWeight\");\n\n            if (this.model.get('_isCorrect')) {\n                this.model.set('_score', questionWeight);\n                return;\n            }\n\n            var numberOfCorrectAnswers = this.model.get('_numberOfCorrectAnswers');\n            var itemLength = this.model.get('_items').length;\n\n            var score = questionWeight * numberOfCorrectAnswers / itemLength;\n\n            this.model.set('_score', score);\n        },\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {\n\n            _.each(this.model.get('_items'), function(item, i) {\n\n                var $item = this.$('.matching-item').eq(i);\n                $item.removeClass('correct incorrect').addClass(item._isCorrect ? 'correct' : 'incorrect');\n            }, this);\n        },\n\n        // Used by the question to determine if the question is incorrect or partly correct\n        // Should return a boolean\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        resetUserAnswer: function() {\n            this.model.set({_userAnswer: []});\n        },\n\n        // Used by the question view to reset the look and feel of the component.\n        resetQuestion: function() {\n\n            this.$('.matching-select option').prop('selected', false);\n            \n            this.$(\".matching-item\").removeClass(\"correct\").removeClass(\"incorrect\");\n            \n            this.model.set('_isAtLeastOneCorrectSelection', false);\n            \n            _.each(this.$('.matching-select'), function(item) {\n                this.selectOption($(item), 0);\n            }, this);\n            \n            _.each(this.model.get(\"_items\"), function(item, index) {\n                _.each(item._options, function(option, index) {\n                    option._isSelected = false;\n                });\n            });\n        },\n\n        showCorrectAnswer: function() {\n\n            _.each(this.model.get('_items'), function(item, index) {\n\n                var correctOptionIndex;\n\n                _.each(item._options, function(option, optionIndex) {\n                    if (option._isCorrect) {\n                        correctOptionIndex = optionIndex + 1;\n                    }\n                }, this);\n\n                var $parent = this.$('.matching-select').eq(index);\n\n                this.selectOption($parent, correctOptionIndex);\n            }, this);\n        },\n\n        hideCorrectAnswer: function() {\n\n            for (var i = 0, count = this.model.get('_items').length; i < count; i++) {\n                var $parent = this.$('.matching-select').eq(i);\n\n                var index = this.model.has('_tempUserAnswer')\n                  ? this.model.get('_tempUserAnswer')[i] + 1\n                  : this.model.get('_userAnswer')[i] + 1;\n\n                $('option', $parent).eq(index).prop('selected', true);\n\n                this.selectOption($parent, index);\n            }\n        },\n\n        selectOption: function($parent, optionIndex) {\n            $(\"option\", $parent).eq(optionIndex).prop('selected', true);\n        },\n\n        /**\n        * Used by adapt-contrib-spoor to get the user's answers in the format required by the cmi.interactions.n.student_response data field\n        * Returns the user's answers as a string in the format \"1.1#2.3#3.2\" assuming user selected option 1 in drop-down 1, option 3 in drop-down 2\n        * and option 2 in drop-down 3. The '#' character will be changed to either ',' or '[,]' by adapt-contrib-spoor, depending on which SCORM version is being used.\n        */\n        getResponse: function() {\n\n            var userAnswer = this.model.get('_userAnswer');\n            var responses = [];\n\n            for(var i = 0, count = userAnswer.length; i < count; i++) {\n                responses.push((i + 1) + \".\" + (userAnswer[i] + 1));// convert from 0-based to 1-based counting\n            }\n            \n            return responses.join('#');\n        },\n\n        /**\n        * Used by adapt-contrib-spoor to get the type of this question in the format required by the cmi.interactions.n.type data field\n        */\n        getResponseType: function() {\n            return \"matching\";\n        }\n\n    });\n\n    Adapt.register(\"matching\", Matching);\n\n    return Matching;\n\n});\n\n",
    "/*!\n *\n * MediaElement.js\n * HTML5 <video> and <audio> shim and player\n * http://mediaelementjs.com/\n *\n * Creates a JavaScript object that mimics HTML5 MediaElement API\n * for browsers that don't understand HTML5 or can't play the provided codec\n * Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3\n *\n * Copyright 2010-2014, John Dyer (http://j.hn)\n * License: MIT\n *\n */\n// Namespace\nvar mejs = mejs || {};\n\n// version number\nmejs.version = '2.21.2'; \n\n\n// player number (for missing, same id attr)\nmejs.meIndex = 0;\n\n// media types accepted by plugins\nmejs.plugins = {\n\tsilverlight: [\n\t\t{version: [3,0], types: ['video/mp4','video/m4v','video/mov','video/wmv','audio/wma','audio/m4a','audio/mp3','audio/wav','audio/mpeg']}\n\t],\n\tflash: [\n\t\t{version: [9,0,124], types: ['video/mp4','video/m4v','video/mov','video/flv','video/rtmp','video/x-flv','audio/flv','audio/x-flv','audio/mp3','audio/m4a','audio/mpeg', 'video/dailymotion', 'video/x-dailymotion', 'application/x-mpegURL']}\n\t\t// 'video/youtube', 'video/x-youtube', \n\t\t// ,{version: [12,0], types: ['video/webm']} // for future reference (hopefully!)\n\t],\n\tyoutube: [\n\t\t{version: null, types: ['video/youtube', 'video/x-youtube', 'audio/youtube', 'audio/x-youtube']}\n\t],\n\tvimeo: [\n\t\t{version: null, types: ['video/vimeo', 'video/x-vimeo']}\n\t]\n};\n\n/*\nUtility methods\n*/\nmejs.Utility = {\n\tencodeUrl: function(url) {\n\t\treturn encodeURIComponent(url); //.replace(/\\?/gi,'%3F').replace(/=/gi,'%3D').replace(/&/gi,'%26');\n\t},\n\tescapeHTML: function(s) {\n\t\treturn s.toString().split('&').join('&amp;').split('<').join('&lt;').split('\"').join('&quot;');\n\t},\n\tabsolutizeUrl: function(url) {\n\t\tvar el = document.createElement('div');\n\t\tel.innerHTML = '<a href=\"' + this.escapeHTML(url) + '\">x</a>';\n\t\treturn el.firstChild.href;\n\t},\n\tgetScriptPath: function(scriptNames) {\n\t\tvar\n\t\t\ti = 0,\n\t\t\tj,\n\t\t\tcodePath = '',\n\t\t\ttestname = '',\n\t\t\tslashPos,\n\t\t\tfilenamePos,\n\t\t\tscriptUrl,\n\t\t\tscriptPath,\t\t\t\n\t\t\tscriptFilename,\n\t\t\tscripts = document.getElementsByTagName('script'),\n\t\t\til = scripts.length,\n\t\t\tjl = scriptNames.length;\n\t\t\t\n\t\t// go through all <script> tags\n\t\tfor (; i < il; i++) {\n\t\t\tscriptUrl = scripts[i].src;\n\t\t\tslashPos = scriptUrl.lastIndexOf('/');\n\t\t\tif (slashPos > -1) {\n\t\t\t\tscriptFilename = scriptUrl.substring(slashPos + 1);\n\t\t\t\tscriptPath = scriptUrl.substring(0, slashPos + 1);\n\t\t\t} else {\n\t\t\t\tscriptFilename = scriptUrl;\n\t\t\t\tscriptPath = '';\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t// see if any <script> tags have a file name that matches the \n\t\t\tfor (j = 0; j < jl; j++) {\n\t\t\t\ttestname = scriptNames[j];\n\t\t\t\tfilenamePos = scriptFilename.indexOf(testname);\n\t\t\t\tif (filenamePos > -1) {\n\t\t\t\t\tcodePath = scriptPath;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// if we found a path, then break and return it\n\t\t\tif (codePath !== '') {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// send the best path back\n\t\treturn codePath;\n\t},\n\t/*\n\t * Calculate the time format to use. We have a default format set in the\n\t * options but it can be imcomplete. We ajust it according to the media\n\t * duration.\n\t *\n\t * We support format like 'hh:mm:ss:ff'.\n\t */\n\tcalculateTimeFormat: function(time, options, fps) {\n\t\tif (time < 0) {\n\t\t\ttime = 0;\n\t\t}\n\n\t\tif(typeof fps == 'undefined') {\n\t\t    fps = 25;\n\t\t}\n\n\t\tvar format = options.timeFormat,\n\t\t\tfirstChar = format[0],\n\t\t\tfirstTwoPlaces = (format[1] == format[0]),\n\t\t\tseparatorIndex = firstTwoPlaces? 2: 1,\n\t\t\tseparator = ':',\n\t\t\thours = Math.floor(time / 3600) % 24,\n\t\t\tminutes = Math.floor(time / 60) % 60,\n\t\t\tseconds = Math.floor(time % 60),\n\t\t\tframes = Math.floor(((time % 1)*fps).toFixed(3)),\n\t\t\tlis = [\n\t\t\t\t[frames, 'f'],\n\t\t\t\t[seconds, 's'],\n\t\t\t\t[minutes, 'm'],\n\t\t\t\t[hours, 'h']\n\t\t\t];\n\n\t\t// Try to get the separator from the format\n\t\tif (format.length < separatorIndex) {\n\t\t\tseparator = format[separatorIndex];\n\t\t}\n\n\t\tvar required = false;\n\n\t\tfor (var i=0, len=lis.length; i < len; i++) {\n\t\t\tif (format.indexOf(lis[i][1]) !== -1) {\n\t\t\t\trequired=true;\n\t\t\t}\n\t\t\telse if (required) {\n\t\t\t\tvar hasNextValue = false;\n\t\t\t\tfor (var j=i; j < len; j++) {\n\t\t\t\t\tif (lis[j][0] > 0) {\n\t\t\t\t\t\thasNextValue = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (! hasNextValue) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (!firstTwoPlaces) {\n\t\t\t\t\tformat = firstChar + format;\n\t\t\t\t}\n\t\t\t\tformat = lis[i][1] + separator + format;\n\t\t\t\tif (firstTwoPlaces) {\n\t\t\t\t\tformat = lis[i][1] + format;\n\t\t\t\t}\n\t\t\t\tfirstChar = lis[i][1];\n\t\t\t}\n\t\t}\n\t\toptions.currentTimeFormat = format;\n\t},\n\t/*\n\t * Prefix the given number by zero if it is lower than 10.\n\t */\n\ttwoDigitsString: function(n) {\n\t\tif (n < 10) {\n\t\t\treturn '0' + n;\n\t\t}\n\t\treturn String(n);\n\t},\n\tsecondsToTimeCode: function(time, options) {\n\t\tif (time < 0) {\n\t\t\ttime = 0;\n\t\t}\n\n\t\t// Maintain backward compatibility with method signature before v2.18.\n\t\tif (typeof options !== 'object') {\n\t\t\tvar format = 'm:ss';\n\t\t\tformat = arguments[1] ? 'hh:mm:ss' : format; // forceHours\n\t\t\tformat = arguments[2] ? format + ':ff' : format; // showFrameCount\n\n\t\t\toptions = {\n\t\t\t\tcurrentTimeFormat: format,\n\t\t\t\tframesPerSecond: arguments[3] || 25\n\t\t\t};\n\t\t}\n\n\t\tvar fps = options.framesPerSecond;\n\t\tif(typeof fps === 'undefined') {\n\t\t\tfps = 25;\n\t\t}\n\n\t\tvar format = options.currentTimeFormat,\n\t\t\thours = Math.floor(time / 3600) % 24,\n\t\t\tminutes = Math.floor(time / 60) % 60,\n\t\t\tseconds = Math.floor(time % 60),\n\t\t\tframes = Math.floor(((time % 1)*fps).toFixed(3));\n\t\t\tlis = [\n\t\t\t\t[frames, 'f'],\n\t\t\t\t[seconds, 's'],\n\t\t\t\t[minutes, 'm'],\n\t\t\t\t[hours, 'h']\n\t\t\t];\n\n\t\tvar res = format;\n\t\tfor (i=0,len=lis.length; i < len; i++) {\n\t\t\tres = res.replace(lis[i][1]+lis[i][1], this.twoDigitsString(lis[i][0]));\n\t\t\tres = res.replace(lis[i][1], lis[i][0]);\n\t\t}\n\t\treturn res;\n\t},\n\t\n\ttimeCodeToSeconds: function(hh_mm_ss_ff, forceHours, showFrameCount, fps){\n\t\tif (typeof showFrameCount == 'undefined') {\n\t\t    showFrameCount=false;\n\t\t} else if(typeof fps == 'undefined') {\n\t\t    fps = 25;\n\t\t}\n\t\n\t\tvar tc_array = hh_mm_ss_ff.split(\":\"),\n\t\t\ttc_hh = parseInt(tc_array[0], 10),\n\t\t\ttc_mm = parseInt(tc_array[1], 10),\n\t\t\ttc_ss = parseInt(tc_array[2], 10),\n\t\t\ttc_ff = 0,\n\t\t\ttc_in_seconds = 0;\n\t\t\n\t\tif (showFrameCount) {\n\t\t    tc_ff = parseInt(tc_array[3])/fps;\n\t\t}\n\t\t\n\t\ttc_in_seconds = ( tc_hh * 3600 ) + ( tc_mm * 60 ) + tc_ss + tc_ff;\n\t\t\n\t\treturn tc_in_seconds;\n\t},\n\t\n\n\tconvertSMPTEtoSeconds: function (SMPTE) {\n\t\tif (typeof SMPTE != 'string') \n\t\t\treturn false;\n\n\t\tSMPTE = SMPTE.replace(',', '.');\n\t\t\n\t\tvar secs = 0,\n\t\t\tdecimalLen = (SMPTE.indexOf('.') != -1) ? SMPTE.split('.')[1].length : 0,\n\t\t\tmultiplier = 1;\n\t\t\n\t\tSMPTE = SMPTE.split(':').reverse();\n\t\t\n\t\tfor (var i = 0; i < SMPTE.length; i++) {\n\t\t\tmultiplier = 1;\n\t\t\tif (i > 0) {\n\t\t\t\tmultiplier = Math.pow(60, i); \n\t\t\t}\n\t\t\tsecs += Number(SMPTE[i]) * multiplier;\n\t\t}\n\t\treturn Number(secs.toFixed(decimalLen));\n\t},\t\n\t\n\t/* borrowed from SWFObject: http://code.google.com/p/swfobject/source/browse/trunk/swfobject/src/swfobject.js#474 */\n\tremoveSwf: function(id) {\n\t\tvar obj = document.getElementById(id);\n\t\tif (obj && /object|embed/i.test(obj.nodeName)) {\n\t\t\tif (mejs.MediaFeatures.isIE) {\n\t\t\t\tobj.style.display = \"none\";\n\t\t\t\t(function(){\n\t\t\t\t\tif (obj.readyState == 4) {\n\t\t\t\t\t\tmejs.Utility.removeObjectInIE(id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(arguments.callee, 10);\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t} else {\n\t\t\t\tobj.parentNode.removeChild(obj);\n\t\t\t}\n\t\t}\n\t},\n\tremoveObjectInIE: function(id) {\n\t\tvar obj = document.getElementById(id);\n\t\tif (obj) {\n\t\t\tfor (var i in obj) {\n\t\t\t\tif (typeof obj[i] == \"function\") {\n\t\t\t\t\tobj[i] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.parentNode.removeChild(obj);\n\t\t}\t\t\n\t},\n    determineScheme: function(url) {\n        if (url && url.indexOf(\"://\") != -1) {\n            return url.substr(0, url.indexOf(\"://\")+3);\n        }\n        return \"//\"; // let user agent figure this out\n    }\n};\n\n\n// Core detector, plugins are added below\nmejs.PluginDetector = {\n\n\t// main public function to test a plug version number PluginDetector.hasPluginVersion('flash',[9,0,125]);\n\thasPluginVersion: function(plugin, v) {\n\t\tvar pv = this.plugins[plugin];\n\t\tv[1] = v[1] || 0;\n\t\tv[2] = v[2] || 0;\n\t\treturn (pv[0] > v[0] || (pv[0] == v[0] && pv[1] > v[1]) || (pv[0] == v[0] && pv[1] == v[1] && pv[2] >= v[2])) ? true : false;\n\t},\n\n\t// cached values\n\tnav: window.navigator,\n\tua: window.navigator.userAgent.toLowerCase(),\n\n\t// stored version numbers\n\tplugins: [],\n\n\t// runs detectPlugin() and stores the version number\n\taddPlugin: function(p, pluginName, mimeType, activeX, axDetect) {\n\t\tthis.plugins[p] = this.detectPlugin(pluginName, mimeType, activeX, axDetect);\n\t},\n\n\t// get the version number from the mimetype (all but IE) or ActiveX (IE)\n\tdetectPlugin: function(pluginName, mimeType, activeX, axDetect) {\n\n\t\tvar version = [0,0,0],\n\t\t\tdescription,\n\t\t\ti,\n\t\t\tax;\n\n\t\t// Firefox, Webkit, Opera\n\t\tif (typeof(this.nav.plugins) != 'undefined' && typeof this.nav.plugins[pluginName] == 'object') {\n\t\t\tdescription = this.nav.plugins[pluginName].description;\n\t\t\tif (description && !(typeof this.nav.mimeTypes != 'undefined' && this.nav.mimeTypes[mimeType] && !this.nav.mimeTypes[mimeType].enabledPlugin)) {\n\t\t\t\tversion = description.replace(pluginName, '').replace(/^\\s+/,'').replace(/\\sr/gi,'.').split('.');\n\t\t\t\tfor (i=0; i<version.length; i++) {\n\t\t\t\t\tversion[i] = parseInt(version[i].match(/\\d+/), 10);\n\t\t\t\t}\n\t\t\t}\n\t\t// Internet Explorer / ActiveX\n\t\t} else if (typeof(window.ActiveXObject) != 'undefined') {\n\t\t\ttry {\n\t\t\t\tax = new ActiveXObject(activeX);\n\t\t\t\tif (ax) {\n\t\t\t\t\tversion = axDetect(ax);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) { }\n\t\t}\n\t\treturn version;\n\t}\n};\n\n// Add Flash detection\nmejs.PluginDetector.addPlugin('flash','Shockwave Flash','application/x-shockwave-flash','ShockwaveFlash.ShockwaveFlash', function(ax) {\n\t// adapted from SWFObject\n\tvar version = [],\n\t\td = ax.GetVariable(\"$version\");\n\tif (d) {\n\t\td = d.split(\" \")[1].split(\",\");\n\t\tversion = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];\n\t}\n\treturn version;\n});\n\n// Add Silverlight detection\nmejs.PluginDetector.addPlugin('silverlight','Silverlight Plug-In','application/x-silverlight-2','AgControl.AgControl', function (ax) {\n\t// Silverlight cannot report its version number to IE\n\t// but it does have a isVersionSupported function, so we have to loop through it to get a version number.\n\t// adapted from http://www.silverlightversion.com/\n\tvar v = [0,0,0,0],\n\t\tloopMatch = function(ax, v, i, n) {\n\t\t\twhile(ax.isVersionSupported(v[0]+ \".\"+ v[1] + \".\" + v[2] + \".\" + v[3])){\n\t\t\t\tv[i]+=n;\n\t\t\t}\n\t\t\tv[i] -= n;\n\t\t};\n\tloopMatch(ax, v, 0, 1);\n\tloopMatch(ax, v, 1, 1);\n\tloopMatch(ax, v, 2, 10000); // the third place in the version number is usually 5 digits (4.0.xxxxx)\n\tloopMatch(ax, v, 2, 1000);\n\tloopMatch(ax, v, 2, 100);\n\tloopMatch(ax, v, 2, 10);\n\tloopMatch(ax, v, 2, 1);\n\tloopMatch(ax, v, 3, 1);\n\n\treturn v;\n});\n// add adobe acrobat\n/*\nPluginDetector.addPlugin('acrobat','Adobe Acrobat','application/pdf','AcroPDF.PDF', function (ax) {\n\tvar version = [],\n\t\td = ax.GetVersions().split(',')[0].split('=')[1].split('.');\n\n\tif (d) {\n\t\tversion = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];\n\t}\n\treturn version;\n});\n*/\n// necessary detection (fixes for <IE9)\nmejs.MediaFeatures = {\n\tinit: function() {\n\t\tvar\n\t\t\tt = this,\n\t\t\td = document,\n\t\t\tnav = mejs.PluginDetector.nav,\n\t\t\tua = mejs.PluginDetector.ua.toLowerCase(),\n\t\t\ti,\n\t\t\tv,\n\t\t\thtml5Elements = ['source','track','audio','video'];\n\n\t\t// detect browsers (only the ones that have some kind of quirk we need to work around)\n\t\tt.isiPad = (ua.match(/ipad/i) !== null);\n\t\tt.isiPhone = (ua.match(/iphone/i) !== null);\n\t\tt.isiOS = t.isiPhone || t.isiPad;\n\t\tt.isAndroid = (ua.match(/android/i) !== null);\n\t\tt.isBustedAndroid = (ua.match(/android 2\\.[12]/) !== null);\n\t\tt.isBustedNativeHTTPS = (location.protocol === 'https:' && (ua.match(/android [12]\\./) !== null || ua.match(/macintosh.* version.* safari/) !== null));\n\t\tt.isIE = (nav.appName.toLowerCase().indexOf(\"microsoft\") != -1 || nav.appName.toLowerCase().match(/trident/gi) !== null);\n\t\tt.isChrome = (ua.match(/chrome/gi) !== null);\n\t\tt.isChromium = (ua.match(/chromium/gi) !== null);\n\t\tt.isFirefox = (ua.match(/firefox/gi) !== null);\n\t\tt.isWebkit = (ua.match(/webkit/gi) !== null);\n\t\tt.isGecko = (ua.match(/gecko/gi) !== null) && !t.isWebkit && !t.isIE;\n\t\tt.isOpera = (ua.match(/opera/gi) !== null);\n\t\tt.hasTouch = ('ontouchstart' in window); //  && window.ontouchstart != null); // this breaks iOS 7\n\n\t\t// Borrowed from `Modernizr.svgasimg`, sources:\n\t\t// - https://github.com/Modernizr/Modernizr/issues/687\n\t\t// - https://github.com/Modernizr/Modernizr/pull/1209/files\n\t\tt.svgAsImg = !!document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1');\n\n\t\t// create HTML5 media elements for IE before 9, get a <video> element for fullscreen detection\n\t\tfor (i=0; i<html5Elements.length; i++) {\n\t\t\tv = document.createElement(html5Elements[i]);\n\t\t}\n\n\t\tt.supportsMediaTag = (typeof v.canPlayType !== 'undefined' || t.isBustedAndroid);\n\n\t\t// Fix for IE9 on Windows 7N / Windows 7KN (Media Player not installer)\n\t\ttry{\n\t\t\tv.canPlayType(\"video/mp4\");\n\t\t}catch(e){\n\t\t\tt.supportsMediaTag = false;\n\t\t}\n\n\t\tt.supportsPointerEvents = (function() {\n\t\t\t// TAKEN FROM MODERNIZR\n\t\t\tvar element = document.createElement('x'),\n\t\t\t\tdocumentElement = document.documentElement,\n\t\t\t\tgetComputedStyle = window.getComputedStyle,\n\t\t\t\tsupports;\n\t\t\tif(!('pointerEvents' in element.style)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telement.style.pointerEvents = 'auto';\n\t\t\telement.style.pointerEvents = 'x';\n\t\t\tdocumentElement.appendChild(element);\n\t\t\tsupports = getComputedStyle &&\n\t\t\t\tgetComputedStyle(element, '').pointerEvents === 'auto';\n\t\t\tdocumentElement.removeChild(element);\n\t\t\treturn !!supports;\n\t\t})();\n\n\n\t\t // Older versions of Firefox can't move plugins around without it resetting,\n\t\tt.hasFirefoxPluginMovingProblem = false;\n\n\t\t// detect native JavaScript fullscreen (Safari/Firefox only, Chrome still fails)\n\n\t\t// iOS\n\t\tt.hasiOSFullScreen = (typeof v.webkitEnterFullscreen !== 'undefined');\n\n\t\t// W3C\n\t\tt.hasNativeFullscreen = (typeof v.requestFullscreen !== 'undefined');\n\n\t\t// webkit/firefox/IE11+\n\t\tt.hasWebkitNativeFullScreen = (typeof v.webkitRequestFullScreen !== 'undefined');\n\t\tt.hasMozNativeFullScreen = (typeof v.mozRequestFullScreen !== 'undefined');\n\t\tt.hasMsNativeFullScreen = (typeof v.msRequestFullscreen !== 'undefined');\n\n\t\tt.hasTrueNativeFullScreen = (t.hasWebkitNativeFullScreen || t.hasMozNativeFullScreen || t.hasMsNativeFullScreen);\n\t\tt.nativeFullScreenEnabled = t.hasTrueNativeFullScreen;\n\n\t\t// Enabled?\n\t\tif (t.hasMozNativeFullScreen) {\n\t\t\tt.nativeFullScreenEnabled = document.mozFullScreenEnabled;\n\t\t} else if (t.hasMsNativeFullScreen) {\n\t\t\tt.nativeFullScreenEnabled = document.msFullscreenEnabled;\n\t\t}\n\n\t\tif (t.isChrome) {\n\t\t\tt.hasiOSFullScreen = false;\n\t\t}\n\n\t\tif (t.hasTrueNativeFullScreen) {\n\n\t\t\tt.fullScreenEventName = '';\n\t\t\tif (t.hasWebkitNativeFullScreen) {\n\t\t\t\tt.fullScreenEventName = 'webkitfullscreenchange';\n\n\t\t\t} else if (t.hasMozNativeFullScreen) {\n\t\t\t\tt.fullScreenEventName = 'mozfullscreenchange';\n\n\t\t\t} else if (t.hasMsNativeFullScreen) {\n\t\t\t\tt.fullScreenEventName = 'MSFullscreenChange';\n\t\t\t}\n\n\t\t\tt.isFullScreen = function() {\n\t\t\t\tif (t.hasMozNativeFullScreen) {\n\t\t\t\t\treturn d.mozFullScreen;\n\n\t\t\t\t} else if (t.hasWebkitNativeFullScreen) {\n\t\t\t\t\treturn d.webkitIsFullScreen;\n\n\t\t\t\t} else if (t.hasMsNativeFullScreen) {\n\t\t\t\t\treturn d.msFullscreenElement !== null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tt.requestFullScreen = function(el) {\n\n\t\t\t\tif (t.hasWebkitNativeFullScreen) {\n\t\t\t\t\tel.webkitRequestFullScreen();\n\n\t\t\t\t} else if (t.hasMozNativeFullScreen) {\n\t\t\t\t\tel.mozRequestFullScreen();\n\n\t\t\t\t} else if (t.hasMsNativeFullScreen) {\n\t\t\t\t\tel.msRequestFullscreen();\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tt.cancelFullScreen = function() {\n\t\t\t\tif (t.hasWebkitNativeFullScreen) {\n\t\t\t\t\tdocument.webkitCancelFullScreen();\n\n\t\t\t\t} else if (t.hasMozNativeFullScreen) {\n\t\t\t\t\tdocument.mozCancelFullScreen();\n\n\t\t\t\t} else if (t.hasMsNativeFullScreen) {\n\t\t\t\t\tdocument.msExitFullscreen();\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\n\t\t// OS X 10.5 can't do this even if it says it can :(\n\t\tif (t.hasiOSFullScreen && ua.match(/mac os x 10_5/i)) {\n\t\t\tt.hasNativeFullScreen = false;\n\t\t\tt.hasiOSFullScreen = false;\n\t\t}\n\n\t}\n};\nmejs.MediaFeatures.init();\n\n/*\nextension methods to <video> or <audio> object to bring it into parity with PluginMediaElement (see below)\n*/\nmejs.HtmlMediaElement = {\n\tpluginType: 'native',\n\tisFullScreen: false,\n\n\tsetCurrentTime: function (time) {\n\t\tthis.currentTime = time;\n\t},\n\n\tsetMuted: function (muted) {\n\t\tthis.muted = muted;\n\t},\n\n\tsetVolume: function (volume) {\n\t\tthis.volume = volume;\n\t},\n\n\t// for parity with the plugin versions\n\tstop: function () {\n\t\tthis.pause();\n\t},\n\n\t// This can be a url string\n\t// or an array [{src:'file.mp4',type:'video/mp4'},{src:'file.webm',type:'video/webm'}]\n\tsetSrc: function (url) {\n\t\t\n\t\t// Fix for IE9 which can't set .src when there are <source> elements. Awesome, right?\n\t\tvar \n\t\t\texistingSources = this.getElementsByTagName('source');\n\t\twhile (existingSources.length > 0){\n\t\t\tthis.removeChild(existingSources[0]);\n\t\t}\n\t\n\t\tif (typeof url == 'string') {\n\t\t\tthis.src = url;\n\t\t} else {\n\t\t\tvar i, media;\n\n\t\t\tfor (i=0; i<url.length; i++) {\n\t\t\t\tmedia = url[i];\n\t\t\t\tif (this.canPlayType(media.type)) {\n\t\t\t\t\tthis.src = media.src;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsetVideoSize: function (width, height) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n};\n\n/*\nMimics the <video/audio> element by calling Flash's External Interface or Silverlights [ScriptableMember]\n*/\nmejs.PluginMediaElement = function (pluginid, pluginType, mediaUrl) {\n\tthis.id = pluginid;\n\tthis.pluginType = pluginType;\n\tthis.src = mediaUrl;\n\tthis.events = {};\n\tthis.attributes = {};\n};\n\n// JavaScript values and ExternalInterface methods that match HTML5 video properties methods\n// http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/fl/video/FLVPlayback.html\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html\nmejs.PluginMediaElement.prototype = {\n\n\t// special\n\tpluginElement: null,\n\tpluginType: '',\n\tisFullScreen: false,\n\n\t// not implemented :(\n\tplaybackRate: -1,\n\tdefaultPlaybackRate: -1,\n\tseekable: [],\n\tplayed: [],\n\n\t// HTML5 read-only properties\n\tpaused: true,\n\tended: false,\n\tseeking: false,\n\tduration: 0,\n\terror: null,\n\ttagName: '',\n\n\t// HTML5 get/set properties, but only set (updated by event handlers)\n\tmuted: false,\n\tvolume: 1,\n\tcurrentTime: 0,\n\n\t// HTML5 methods\n\tplay: function () {\n\t\tif (this.pluginApi != null) {\n\t\t\tif (this.pluginType == 'youtube' || this.pluginType == 'vimeo') {\n\t\t\t\tthis.pluginApi.playVideo();\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.playMedia();\n\t\t\t}\n\t\t\tthis.paused = false;\n\t\t}\n\t},\n\tload: function () {\n\t\tif (this.pluginApi != null) {\n\t\t\tif (this.pluginType == 'youtube' || this.pluginType == 'vimeo') {\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.loadMedia();\n\t\t\t}\n\t\t\t\n\t\t\tthis.paused = false;\n\t\t}\n\t},\n\tpause: function () {\n\t\tif (this.pluginApi != null) {\n\t\t\t// PATCH -- Prevent looping video on Vimeo and YouTube\n\t\t\t// See: https://github.com/johndyer/mediaelement/issues/1795\n\t\t\tif (this.pluginType == 'youtube' || this.pluginType == 'vimeo') {\n\t\t\t\t\tthis.pluginApi.pauseVideo();\n\t\t\t} else {\n\t\t\t\t\tthis.pluginApi.pauseMedia();\n\t\t\t}\t\n\t\t\t\n\t\t\tthis.paused = true;\n\t\t}\n\t},\n\tstop: function () {\n\t\tif (this.pluginApi != null) {\n\t\t\tif (this.pluginType == 'youtube' || this.pluginType == 'vimeo') {\n\t\t\t\tthis.pluginApi.stopVideo();\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.stopMedia();\n\t\t\t}\t\n\t\t\tthis.paused = true;\n\t\t}\n\t},\n\tcanPlayType: function(type) {\n\t\tvar i,\n\t\t\tj,\n\t\t\tpluginInfo,\n\t\t\tpluginVersions = mejs.plugins[this.pluginType];\n\n\t\tfor (i=0; i<pluginVersions.length; i++) {\n\t\t\tpluginInfo = pluginVersions[i];\n\n\t\t\t// test if user has the correct plugin version\n\t\t\tif (mejs.PluginDetector.hasPluginVersion(this.pluginType, pluginInfo.version)) {\n\n\t\t\t\t// test for plugin playback types\n\t\t\t\tfor (j=0; j<pluginInfo.types.length; j++) {\n\t\t\t\t\t// find plugin that can play the type\n\t\t\t\t\tif (type == pluginInfo.types[j]) {\n\t\t\t\t\t\treturn 'probably';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t},\n\t\n\tpositionFullscreenButton: function(x,y,visibleAndAbove) {\n\t\tif (this.pluginApi != null && this.pluginApi.positionFullscreenButton) {\n\t\t\tthis.pluginApi.positionFullscreenButton(Math.floor(x),Math.floor(y),visibleAndAbove);\n\t\t}\n\t},\n\t\n\thideFullscreenButton: function() {\n\t\tif (this.pluginApi != null && this.pluginApi.hideFullscreenButton) {\n\t\t\tthis.pluginApi.hideFullscreenButton();\n\t\t}\t\t\n\t},\t\n\t\n\n\t// custom methods since not all JavaScript implementations support get/set\n\n\t// This can be a url string\n\t// or an array [{src:'file.mp4',type:'video/mp4'},{src:'file.webm',type:'video/webm'}]\n\tsetSrc: function (url) {\n\t\tif (typeof url == 'string') {\n\t\t\tthis.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url));\n\t\t\tthis.src = mejs.Utility.absolutizeUrl(url);\n\t\t} else {\n\t\t\tvar i, media;\n\n\t\t\tfor (i=0; i<url.length; i++) {\n\t\t\t\tmedia = url[i];\n\t\t\t\tif (this.canPlayType(media.type)) {\n\t\t\t\t\tthis.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src));\n\t\t\t\t\tthis.src = mejs.Utility.absolutizeUrl(media.src);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t},\n\tsetCurrentTime: function (time) {\n\t\tif (this.pluginApi != null) {\n\t\t\tif (this.pluginType == 'youtube' || this.pluginType == 'vimeo') {\n\t\t\t\tthis.pluginApi.seekTo(time);\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.setCurrentTime(time);\n\t\t\t}\t\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tthis.currentTime = time;\n\t\t}\n\t},\n\tsetVolume: function (volume) {\n\t\tif (this.pluginApi != null) {\n\t\t\t// same on YouTube and MEjs\n\t\t\tif (this.pluginType == 'youtube') {\n\t\t\t\tthis.pluginApi.setVolume(volume * 100);\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.setVolume(volume);\n\t\t\t}\n\t\t\tthis.volume = volume;\n\t\t}\n\t},\n\tsetMuted: function (muted) {\n\t\tif (this.pluginApi != null) {\n\t\t\tif (this.pluginType == 'youtube') {\n\t\t\t\tif (muted) {\n\t\t\t\t\tthis.pluginApi.mute();\n\t\t\t\t} else {\n\t\t\t\t\tthis.pluginApi.unMute();\n\t\t\t\t}\n\t\t\t\tthis.muted = muted;\n\t\t\t\tthis.dispatchEvent({type:'volumechange'});\n\t\t\t} else {\n\t\t\t\tthis.pluginApi.setMuted(muted);\n\t\t\t}\n\t\t\tthis.muted = muted;\n\t\t}\n\t},\n\n\t// additional non-HTML5 methods\n\tsetVideoSize: function (width, height) {\n\t\t\n\t\t//if (this.pluginType == 'flash' || this.pluginType == 'silverlight') {\n\t\t\tif (this.pluginElement && this.pluginElement.style) {\n\t\t\t\tthis.pluginElement.style.width = width + 'px';\n\t\t\t\tthis.pluginElement.style.height = height + 'px';\n\t\t\t}\n\t\t\tif (this.pluginApi != null && this.pluginApi.setVideoSize) {\n\t\t\t\tthis.pluginApi.setVideoSize(width, height);\n\t\t\t}\n\t\t//}\n\t},\n\n\tsetFullscreen: function (fullscreen) {\n\t\tif (this.pluginApi != null && this.pluginApi.setFullscreen) {\n\t\t\tthis.pluginApi.setFullscreen(fullscreen);\n\t\t}\n\t},\n\t\n\tenterFullScreen: function() {\n\t\tif (this.pluginApi != null && this.pluginApi.setFullscreen) {\n\t\t\tthis.setFullscreen(true);\n\t\t}\t\t\n\t\t\n\t},\n\t\n\texitFullScreen: function() {\n\t\tif (this.pluginApi != null && this.pluginApi.setFullscreen) {\n\t\t\tthis.setFullscreen(false);\n\t\t}\n\t},\t\n\n\t// start: fake events\n\taddEventListener: function (eventName, callback, bubble) {\n\t\tthis.events[eventName] = this.events[eventName] || [];\n\t\tthis.events[eventName].push(callback);\n\t},\n\tremoveEventListener: function (eventName, callback) {\n\t\tif (!eventName) { this.events = {}; return true; }\n\t\tvar callbacks = this.events[eventName];\n\t\tif (!callbacks) return true;\n\t\tif (!callback) { this.events[eventName] = []; return true; }\n\t\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t\tif (callbacks[i] === callback) {\n\t\t\t\tthis.events[eventName].splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\t\n\tdispatchEvent: function (event) {\n\t\tvar i,\n\t\t\targs,\n\t\t\tcallbacks = this.events[event.type];\n\n\t\tif (callbacks) {\n\t\t\tfor (i = 0; i < callbacks.length; i++) {\n\t\t\t\tcallbacks[i].apply(this, [event]);\n\t\t\t}\n\t\t}\n\t},\n\t// end: fake events\n\t\n\t// fake DOM attribute methods\n\thasAttribute: function(name){\n\t\treturn (name in this.attributes);  \n\t},\n\tremoveAttribute: function(name){\n\t\tdelete this.attributes[name];\n\t},\n\tgetAttribute: function(name){\n\t\tif (this.hasAttribute(name)) {\n\t\t\treturn this.attributes[name];\n\t\t}\n\t\treturn '';\n\t},\n\tsetAttribute: function(name, value){\n\t\tthis.attributes[name] = value;\n\t},\n\n\tremove: function() {\n\t\tmejs.Utility.removeSwf(this.pluginElement.id);\n\n\t\t//non-existant function call\n\t\t//mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id);\n\t}\n};\n\n/*\nDefault options\n*/\nmejs.MediaElementDefaults = {\n\t// allows testing on HTML5, flash, silverlight\n\t// auto: attempts to detect what the browser can do\n\t// auto_plugin: prefer plugins and then attempt native HTML5\n\t// native: forces HTML5 playback\n\t// shim: disallows HTML5, will attempt either Flash or Silverlight\n\t// none: forces fallback view\n\tmode: 'auto',\n\t// remove or reorder to change plugin priority and availability\n\tplugins: ['flash','silverlight','youtube','vimeo'],\n\t// shows debug errors on screen\n\tenablePluginDebug: false,\n\t// use plugin for browsers that have trouble with Basic Authentication on HTTPS sites\n\thttpsBasicAuthSite: false,\n\t// overrides the type specified, useful for dynamic instantiation\n\ttype: '',\n\t// path to Flash and Silverlight plugins\n\tpluginPath: mejs.Utility.getScriptPath(['mediaelement.js','mediaelement.min.js','mediaelement-and-player.js','mediaelement-and-player.min.js']),\n\t// name of flash file\n\tflashName: 'flashmediaelement.swf',\n\t// streamer for RTMP streaming\n\tflashStreamer: '',\n\t// set to 'always' for CDN version\n\tflashScriptAccess: 'sameDomain',\t\n\t// turns on the smoothing filter in Flash\n\tenablePluginSmoothing: false,\n\t// enabled pseudo-streaming (seek) on .mp4 files\n\tenablePseudoStreaming: false,\n\t// start query parameter sent to server for pseudo-streaming\n\tpseudoStreamingStartQueryParam: 'start',\n\t// name of silverlight file\n\tsilverlightName: 'silverlightmediaelement.xap',\n\t// default if the <video width> is not specified\n\tdefaultVideoWidth: 480,\n\t// default if the <video height> is not specified\n\tdefaultVideoHeight: 270,\n\t// overrides <video width>\n\tpluginWidth: -1,\n\t// overrides <video height>\n\tpluginHeight: -1,\n\t// additional plugin variables in 'key=value' form\n\tpluginVars: [],\t\n\t// rate in milliseconds for Flash and Silverlight to fire the timeupdate event\n\t// larger number is less accurate, but less strain on plugin->JavaScript bridge\n\ttimerRate: 250,\n\t// initial volume for player\n\tstartVolume: 0.8,\n\tsuccess: function () { },\n\terror: function () { }\n};\n\n/*\nDetermines if a browser supports the <video> or <audio> element\nand returns either the native element or a Flash/Silverlight version that\nmimics HTML5 MediaElement\n*/\nmejs.MediaElement = function (el, o) {\n\treturn mejs.HtmlMediaElementShim.create(el,o);\n};\n\nmejs.HtmlMediaElementShim = {\n\n\tcreate: function(el, o) {\n\t\tvar\n\t\t\toptions = {},\n\t\t\thtmlMediaElement = (typeof(el) == 'string') ? document.getElementById(el) : el,\n\t\t\ttagName = htmlMediaElement.tagName.toLowerCase(),\n\t\t\tisMediaTag = (tagName === 'audio' || tagName === 'video'),\n\t\t\tsrc = (isMediaTag) ? htmlMediaElement.getAttribute('src') : htmlMediaElement.getAttribute('href'),\n\t\t\tposter = htmlMediaElement.getAttribute('poster'),\n\t\t\tautoplay =  htmlMediaElement.getAttribute('autoplay'),\n\t\t\tpreload =  htmlMediaElement.getAttribute('preload'),\n\t\t\tcontrols =  htmlMediaElement.getAttribute('controls'),\n\t\t\tplayback,\n\t\t\tprop;\n\n\t\t// extend options\n\t\tfor (prop in mejs.MediaElementDefaults) {\n\t\t\toptions[prop] = mejs.MediaElementDefaults[prop];\n\t\t}\n\t\tfor (prop in o) {\n\t\t\toptions[prop] = o[prop];\n\t\t}\t\t\n\t\t\n\n\t\t// clean up attributes\n\t\tsrc = \t\t(typeof src == 'undefined' \t|| src === null || src == '') ? null : src;\t\t\n\t\tposter =\t(typeof poster == 'undefined' \t|| poster === null) ? '' : poster;\n\t\tpreload = \t(typeof preload == 'undefined' \t|| preload === null || preload === 'false') ? 'none' : preload;\n\t\tautoplay = \t!(typeof autoplay == 'undefined' || autoplay === null || autoplay === 'false');\n\t\tcontrols = \t!(typeof controls == 'undefined' || controls === null || controls === 'false');\n\n\t\t// test for HTML5 and plugin capabilities\n\t\tplayback = this.determinePlayback(htmlMediaElement, options, mejs.MediaFeatures.supportsMediaTag, isMediaTag, src);\n\t\tplayback.url = (playback.url !== null) ? mejs.Utility.absolutizeUrl(playback.url) : '';\n        playback.scheme = mejs.Utility.determineScheme(playback.url);\n\n\t\tif (playback.method == 'native') {\n\t\t\t// second fix for android\n\t\t\tif (mejs.MediaFeatures.isBustedAndroid) {\n\t\t\t\thtmlMediaElement.src = playback.url;\n\t\t\t\thtmlMediaElement.addEventListener('click', function() {\n\t\t\t\t\thtmlMediaElement.play();\n\t\t\t\t}, false);\n\t\t\t}\n\t\t\n\t\t\t// add methods to native HTMLMediaElement\n\t\t\treturn this.updateNative(playback, options, autoplay, preload);\n\t\t} else if (playback.method !== '') {\n\t\t\t// create plugin to mimic HTMLMediaElement\n\t\t\t\n\t\t\treturn this.createPlugin( playback,  options, poster, autoplay, preload, controls);\n\t\t} else {\n\t\t\t// boo, no HTML5, no Flash, no Silverlight.\n\t\t\tthis.createErrorMessage( playback, options, poster );\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\t},\n\t\n\tdeterminePlayback: function(htmlMediaElement, options, supportsMediaTag, isMediaTag, src) {\n\t\tvar\n\t\t\tmediaFiles = [],\n\t\t\ti,\n\t\t\tj,\n\t\t\tk,\n\t\t\tl,\n\t\t\tn,\n\t\t\ttype,\n\t\t\tresult = { method: '', url: '', htmlMediaElement: htmlMediaElement, isVideo: (htmlMediaElement.tagName.toLowerCase() != 'audio'), scheme: ''},\n\t\t\tpluginName,\n\t\t\tpluginVersions,\n\t\t\tpluginInfo,\n\t\t\tdummy,\n\t\t\tmedia;\n\t\t\t\n\t\t// STEP 1: Get URL and type from <video src> or <source src>\n\n\t\t// supplied type overrides <video type> and <source type>\n\t\tif (typeof options.type != 'undefined' && options.type !== '') {\n\t\t\t\n\t\t\t// accept either string or array of types\n\t\t\tif (typeof options.type == 'string') {\n\t\t\t\tmediaFiles.push({type:options.type, url:src});\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tfor (i=0; i<options.type.length; i++) {\n\t\t\t\t\tmediaFiles.push({type:options.type[i], url:src});\n\t\t\t\t}\n\t\t\t}\n\n\t\t// test for src attribute first\n\t\t} else if (src !== null) {\n\t\t\ttype = this.formatType(src, htmlMediaElement.getAttribute('type'));\n\t\t\tmediaFiles.push({type:type, url:src});\n\n\t\t// then test for <source> elements\n\t\t} else {\n\t\t\t// test <source> types to see if they are usable\n\t\t\tfor (i = 0; i < htmlMediaElement.childNodes.length; i++) {\n\t\t\t\tn = htmlMediaElement.childNodes[i];\n\t\t\t\tif (n.nodeType == 1 && n.tagName.toLowerCase() == 'source') {\n\t\t\t\t\tsrc = n.getAttribute('src');\n\t\t\t\t\ttype = this.formatType(src, n.getAttribute('type'));\n\t\t\t\t\tmedia = n.getAttribute('media');\n\n\t\t\t\t\tif (!media || !window.matchMedia || (window.matchMedia && window.matchMedia(media).matches)) {\n\t\t\t\t\t\tmediaFiles.push({type:type, url:src});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// in the case of dynamicly created players\n\t\t// check for audio types\n\t\tif (!isMediaTag && mediaFiles.length > 0 && mediaFiles[0].url !== null && this.getTypeFromFile(mediaFiles[0].url).indexOf('audio') > -1) {\n\t\t\tresult.isVideo = false;\n\t\t}\n\t\t\n\n\t\t// STEP 2: Test for playback method\n\t\t\n\t\t// special case for Android which sadly doesn't implement the canPlayType function (always returns '')\n\t\tif (mejs.MediaFeatures.isBustedAndroid) {\n\t\t\thtmlMediaElement.canPlayType = function(type) {\n\t\t\t\treturn (type.match(/video\\/(mp4|m4v)/gi) !== null) ? 'maybe' : '';\n\t\t\t};\n\t\t}\t\t\n\t\t\n\t\t// special case for Chromium to specify natively supported video codecs (i.e. WebM and Theora) \n\t\tif (mejs.MediaFeatures.isChromium) { \n\t\t\thtmlMediaElement.canPlayType = function(type) { \n\t\t\t\treturn (type.match(/video\\/(webm|ogv|ogg)/gi) !== null) ? 'maybe' : ''; \n\t\t\t}; \n\t\t}\n\n\t\t// test for native playback first\n\t\tif (supportsMediaTag && (options.mode === 'auto' || options.mode === 'auto_plugin' || options.mode === 'native')  && !(mejs.MediaFeatures.isBustedNativeHTTPS && options.httpsBasicAuthSite === true)) {\n\t\t\t\t\t\t\n\t\t\tif (!isMediaTag) {\n\n\t\t\t\t// create a real HTML5 Media Element \n\t\t\t\tdummy = document.createElement( result.isVideo ? 'video' : 'audio');\t\t\t\n\t\t\t\thtmlMediaElement.parentNode.insertBefore(dummy, htmlMediaElement);\n\t\t\t\thtmlMediaElement.style.display = 'none';\n\t\t\t\t\n\t\t\t\t// use this one from now on\n\t\t\t\tresult.htmlMediaElement = htmlMediaElement = dummy;\n\t\t\t}\n\t\t\t\t\n\t\t\tfor (i=0; i<mediaFiles.length; i++) {\n\t\t\t\t// normal check\n\t\t\t\tif (mediaFiles[i].type == \"video/m3u8\" || htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/, '') !== ''\n\t\t\t\t\t// special case for Mac/Safari 5.0.3 which answers '' to canPlayType('audio/mp3') but 'maybe' to canPlayType('audio/mpeg')\n\t\t\t\t\t|| htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,'mpeg')).replace(/no/, '') !== ''\n\t\t\t\t\t// special case for m4a supported by detecting mp4 support\n\t\t\t\t\t|| htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/m4a/,'mp4')).replace(/no/, '') !== '') {\n\t\t\t\t\tresult.method = 'native';\n\t\t\t\t\tresult.url = mediaFiles[i].url;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\t\n\t\t\tif (result.method === 'native') {\n\t\t\t\tif (result.url !== null) {\n\t\t\t\t\thtmlMediaElement.src = result.url;\n\t\t\t\t}\n\t\t\t\n\t\t\t\t// if `auto_plugin` mode, then cache the native result but try plugins.\n\t\t\t\tif (options.mode !== 'auto_plugin') {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if native playback didn't work, then test plugins\n\t\tif (options.mode === 'auto' || options.mode === 'auto_plugin' || options.mode === 'shim') {\n\t\t\tfor (i=0; i<mediaFiles.length; i++) {\n\t\t\t\ttype = mediaFiles[i].type;\n\n\t\t\t\t// test all plugins in order of preference [silverlight, flash]\n\t\t\t\tfor (j=0; j<options.plugins.length; j++) {\n\n\t\t\t\t\tpluginName = options.plugins[j];\n\t\t\t\n\t\t\t\t\t// test version of plugin (for future features)\n\t\t\t\t\tpluginVersions = mejs.plugins[pluginName];\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tfor (k=0; k<pluginVersions.length; k++) {\n\t\t\t\t\t\tpluginInfo = pluginVersions[k];\n\t\t\t\t\t\n\t\t\t\t\t\t// test if user has the correct plugin version\n\t\t\t\t\t\t\n\t\t\t\t\t\t// for youtube/vimeo\n\t\t\t\t\t\tif (pluginInfo.version == null || \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmejs.PluginDetector.hasPluginVersion(pluginName, pluginInfo.version)) {\n\n\t\t\t\t\t\t\t// test for plugin playback types\n\t\t\t\t\t\t\tfor (l=0; l<pluginInfo.types.length; l++) {\n\t\t\t\t\t\t\t\t// find plugin that can play the type\n\t\t\t\t\t\t\t\tif (type.toLowerCase() == pluginInfo.types[l].toLowerCase()) {\n\t\t\t\t\t\t\t\t\tresult.method = pluginName;\n\t\t\t\t\t\t\t\t\tresult.url = mediaFiles[i].url;\n\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// at this point, being in 'auto_plugin' mode implies that we tried plugins but failed.\n\t\t// if we have native support then return that.\n\t\tif (options.mode === 'auto_plugin' && result.method === 'native') {\n\t\t\treturn result;\n\t\t}\n\n\t\t// what if there's nothing to play? just grab the first available\n\t\tif (result.method === '' && mediaFiles.length > 0) {\n\t\t\tresult.url = mediaFiles[0].url;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tformatType: function(url, type) {\n\t\t// if no type is supplied, fake it with the extension\n\t\tif (url && !type) {\t\t\n\t\t\treturn this.getTypeFromFile(url);\n\t\t} else {\n\t\t\t// only return the mime part of the type in case the attribute contains the codec\n\t\t\t// see http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#the-source-element\n\t\t\t// `video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"` becomes `video/mp4`\n\t\t\t\n\t\t\tif (type && ~type.indexOf(';')) {\n\t\t\t\treturn type.substr(0, type.indexOf(';')); \n\t\t\t} else {\n\t\t\t\treturn type;\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetTypeFromFile: function(url) {\n\t\turl = url.split('?')[0];\n\t\tvar\n\t\t\text = url.substring(url.lastIndexOf('.') + 1).toLowerCase(),\n\t\t\tav = /(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(ext) ? 'video/' : 'audio/';\n\t\treturn this.getTypeFromExtension(ext, av);\n\t},\n\t\n\tgetTypeFromExtension: function(ext, av) {\n\t\tav = av || '';\n\t\t\n\t\tswitch (ext) {\n\t\t\tcase 'mp4':\n\t\t\tcase 'm4v':\n\t\t\tcase 'm4a':\n\t\t\tcase 'f4v':\n\t\t\tcase 'f4a':\n\t\t\t\treturn av + 'mp4';\n\t\t\tcase 'flv':\n\t\t\t\treturn av + 'x-flv';\n\t\t\tcase 'webm':\n\t\t\tcase 'webma':\n\t\t\tcase 'webmv':\t\n\t\t\t\treturn av + 'webm';\n\t\t\tcase 'ogg':\n\t\t\tcase 'oga':\n\t\t\tcase 'ogv':\t\n\t\t\t\treturn av + 'ogg';\n\t\t\tcase 'm3u8':\n\t\t\t\treturn 'application/x-mpegurl';\n\t\t\tcase 'ts':\n\t\t\t\treturn av + 'mp2t';\n\t\t\tdefault:\n\t\t\t\treturn av + ext;\n\t\t}\n\t},\n\n\tcreateErrorMessage: function(playback, options, poster) {\n\t\tvar \n\t\t\thtmlMediaElement = playback.htmlMediaElement,\n\t\t\terrorContainer = document.createElement('div'),\n\t\t\terrorContent = options.customError;\n\t\t\t\n\t\terrorContainer.className = 'me-cannotplay';\n\n\t\ttry {\n\t\t\terrorContainer.style.width = htmlMediaElement.width + 'px';\n\t\t\terrorContainer.style.height = htmlMediaElement.height + 'px';\n\t\t} catch (e) {}\n\n\t\tif (!errorContent) {\n\t\t\terrorContent = '<a href=\"' + playback.url + '\">';\n\n\t\t\tif (poster !== '') {\n\t\t\t\terrorContent += '<img src=\"' + poster + '\" width=\"100%\" height=\"100%\" alt=\"\" />';\n\t\t\t}\n\n\t\t\terrorContent += '<span>' + mejs.i18n.t('Download File') + '</span></a>';\n\t\t}\n\n\t\terrorContainer.innerHTML = errorContent;\n\n\t\thtmlMediaElement.parentNode.insertBefore(errorContainer, htmlMediaElement);\n\t\thtmlMediaElement.style.display = 'none';\n\n\t\toptions.error(htmlMediaElement);\n\t},\n\n\tcreatePlugin:function(playback, options, poster, autoplay, preload, controls) {\n\t\tvar \n\t\t\thtmlMediaElement = playback.htmlMediaElement,\n\t\t\twidth = 1,\n\t\t\theight = 1,\n\t\t\tpluginid = 'me_' + playback.method + '_' + (mejs.meIndex++),\n\t\t\tpluginMediaElement = new mejs.PluginMediaElement(pluginid, playback.method, playback.url),\n\t\t\tcontainer = document.createElement('div'),\n\t\t\tspecialIEContainer,\n\t\t\tnode,\n\t\t\tinitVars;\n\n\t\t// copy tagName from html media element\n\t\tpluginMediaElement.tagName = htmlMediaElement.tagName\n\n\t\t// copy attributes from html media element to plugin media element\n\t\tfor (var i = 0; i < htmlMediaElement.attributes.length; i++) {\n\t\t\tvar attribute = htmlMediaElement.attributes[i];\n\t\t\tif (attribute.specified) {\n\t\t\t\tpluginMediaElement.setAttribute(attribute.name, attribute.value);\n\t\t\t}\n\t\t}\n\n\t\t// check for placement inside a <p> tag (sometimes WYSIWYG editors do this)\n\t\tnode = htmlMediaElement.parentNode;\n\n\t\twhile (node !== null && node.tagName != null && node.tagName.toLowerCase() !== 'body' && \n\t\t\t\tnode.parentNode != null && node.parentNode.tagName != null && node.parentNode.constructor != null && node.parentNode.constructor.name === \"ShadowRoot\") {\n\t\t\tif (node.parentNode.tagName.toLowerCase() === 'p') {\n\t\t\t\tnode.parentNode.parentNode.insertBefore(node, node.parentNode);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\n\t\tif (playback.isVideo) {\n\t\t\twidth = (options.pluginWidth > 0) ? options.pluginWidth : (options.videoWidth > 0) ? options.videoWidth : (htmlMediaElement.getAttribute('width') !== null) ? htmlMediaElement.getAttribute('width') : options.defaultVideoWidth;\n\t\t\theight = (options.pluginHeight > 0) ? options.pluginHeight : (options.videoHeight > 0) ? options.videoHeight : (htmlMediaElement.getAttribute('height') !== null) ? htmlMediaElement.getAttribute('height') : options.defaultVideoHeight;\n\t\t\n\t\t\t// in case of '%' make sure it's encoded\n\t\t\twidth = mejs.Utility.encodeUrl(width);\n\t\t\theight = mejs.Utility.encodeUrl(height);\n\t\t\n\t\t} else {\n\t\t\tif (options.enablePluginDebug) {\n\t\t\t\twidth = 320;\n\t\t\t\theight = 240;\n\t\t\t}\n\t\t}\n\n\t\t// register plugin\n\t\tpluginMediaElement.success = options.success;\n\t\t\n\t\t// add container (must be added to DOM before inserting HTML for IE)\n\t\tcontainer.className = 'me-plugin';\n\t\tcontainer.id = pluginid + '_container';\n\t\t\n\t\tif (playback.isVideo) {\n\t\t\t\thtmlMediaElement.parentNode.insertBefore(container, htmlMediaElement);\n\t\t} else {\n\t\t\t\tdocument.body.insertBefore(container, document.body.childNodes[0]);\n\t\t}\n\t\t\n\t\tif (playback.method === 'flash' || playback.method === 'silverlight') {\n\n\t\t\t// flash/silverlight vars\n\t\t\tinitVars = [\n\t\t\t\t'id=' + pluginid,\n\t\t\t\t'isvideo=' + ((playback.isVideo) ? \"true\" : \"false\"),\n\t\t\t\t'autoplay=' + ((autoplay) ? \"true\" : \"false\"),\n\t\t\t\t'preload=' + preload,\n\t\t\t\t'width=' + width,\n\t\t\t\t'startvolume=' + options.startVolume,\n\t\t\t\t'timerrate=' + options.timerRate,\n\t\t\t\t'flashstreamer=' + options.flashStreamer,\n\t\t\t\t'height=' + height,\n\t\t\t\t'pseudostreamstart=' + options.pseudoStreamingStartQueryParam];\n\t\n\t\t\tif (playback.url !== null) {\n\t\t\t\tif (playback.method == 'flash') {\n\t\t\t\t\tinitVars.push('file=' + mejs.Utility.encodeUrl(playback.url));\n\t\t\t\t} else {\n\t\t\t\t\tinitVars.push('file=' + playback.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.enablePluginDebug) {\n\t\t\t\tinitVars.push('debug=true');\n\t\t\t}\n\t\t\tif (options.enablePluginSmoothing) {\n\t\t\t\tinitVars.push('smoothing=true');\n\t\t\t}\n\t\t\tif (options.enablePseudoStreaming) {\n\t\t\t\tinitVars.push('pseudostreaming=true');\n\t\t\t}\n\t\t\tif (controls) {\n\t\t\t\tinitVars.push('controls=true'); // shows controls in the plugin if desired\n\t\t\t}\n\t\t\tif (options.pluginVars) {\n\t\t\t\tinitVars = initVars.concat(options.pluginVars);\n\t\t\t}\t\t\n\t\t\t\n\t\t\t// call from plugin\n\t\t\twindow[pluginid + '_init'] = function() {\n\t\t\t\tswitch (pluginMediaElement.pluginType) {\n\t\t\t\t\tcase 'flash':\n\t\t\t\t\t\tpluginMediaElement.pluginElement = pluginMediaElement.pluginApi = document.getElementById(pluginid);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'silverlight':\n\t\t\t\t\t\tpluginMediaElement.pluginElement = document.getElementById(pluginMediaElement.id);\n\t\t\t\t\t\tpluginMediaElement.pluginApi = pluginMediaElement.pluginElement.Content.MediaElementJS;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\tif (pluginMediaElement.pluginApi != null && pluginMediaElement.success) {\n\t\t\t\t\tpluginMediaElement.success(pluginMediaElement, htmlMediaElement);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// event call from plugin\n\t\t\twindow[pluginid + '_event'] = function(eventName, values) {\n\t\t\n\t\t\t\tvar\n\t\t\t\t\te,\n\t\t\t\t\ti,\n\t\t\t\t\tbufferedTime;\n\t\t        \n\t\t\t\t// fake event object to mimic real HTML media event.\n\t\t\t\te = {\n\t\t\t\t\ttype: eventName,\n\t\t\t\t\ttarget: pluginMediaElement\n\t\t\t\t};\n\t\t\n\t\t\t\t// attach all values to element and event object\n\t\t\t\tfor (i in values) {\n\t\t\t\t\tpluginMediaElement[i] = values[i];\n\t\t\t\t\te[i] = values[i];\n\t\t\t\t}\n\t\t\n\t\t\t\t// fake the newer W3C buffered TimeRange (loaded and total have been removed)\n\t\t\t\tbufferedTime = values.bufferedTime || 0;\n\t\t\n\t\t\t\te.target.buffered = e.buffered = {\n\t\t\t\t\tstart: function(index) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},\n\t\t\t\t\tend: function (index) {\n\t\t\t\t\t\treturn bufferedTime;\n\t\t\t\t\t},\n\t\t\t\t\tlength: 1\n\t\t\t\t};\n\t\t\n\t\t\t\tpluginMediaElement.dispatchEvent(e);\n\t\t\t}\t\t\t\n\t\t\t\n\t\t\t\n\t\t}\n\n\t\tswitch (playback.method) {\n\t\t\tcase 'silverlight':\n\t\t\t\tcontainer.innerHTML =\n'<object data=\"data:application/x-silverlight-2,\" type=\"application/x-silverlight-2\" id=\"' + pluginid + '\" name=\"' + pluginid + '\" width=\"' + width + '\" height=\"' + height + '\" class=\"mejs-shim\">' +\n'<param name=\"initParams\" value=\"' + initVars.join(',') + '\" />' +\n'<param name=\"windowless\" value=\"true\" />' +\n'<param name=\"background\" value=\"black\" />' +\n'<param name=\"minRuntimeVersion\" value=\"3.0.0.0\" />' +\n'<param name=\"autoUpgrade\" value=\"true\" />' +\n'<param name=\"source\" value=\"' + options.pluginPath + options.silverlightName + '\" />' +\n'</object>';\n\t\t\t\t\tbreak;\n\n\t\t\tcase 'flash':\n\n\t\t\t\tif (mejs.MediaFeatures.isIE) {\n\t\t\t\t\tspecialIEContainer = document.createElement('div');\n\t\t\t\t\tcontainer.appendChild(specialIEContainer);\n\t\t\t\t\tspecialIEContainer.outerHTML =\n'<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" ' +\n'id=\"' + pluginid + '\" width=\"' + width + '\" height=\"' + height + '\" class=\"mejs-shim\">' +\n'<param name=\"movie\" value=\"' + options.pluginPath + options.flashName + '?' + (new Date().getTime()) + '\" />' +\n'<param name=\"flashvars\" value=\"' + initVars.join('&amp;') + '\" />' +\n'<param name=\"quality\" value=\"high\" />' +\n'<param name=\"bgcolor\" value=\"#000000\" />' +\n'<param name=\"wmode\" value=\"transparent\" />' +\n'<param name=\"allowScriptAccess\" value=\"' + options.flashScriptAccess + '\" />' +\n'<param name=\"allowFullScreen\" value=\"true\" />' +\n'<param name=\"scale\" value=\"default\" />' + \n'</object>';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontainer.innerHTML =\n'<embed id=\"' + pluginid + '\" name=\"' + pluginid + '\" ' +\n'play=\"true\" ' +\n'loop=\"false\" ' +\n'quality=\"high\" ' +\n'bgcolor=\"#000000\" ' +\n'wmode=\"transparent\" ' +\n'allowScriptAccess=\"' + options.flashScriptAccess + '\" ' +\n'allowFullScreen=\"true\" ' +\n'type=\"application/x-shockwave-flash\" pluginspage=\"//www.macromedia.com/go/getflashplayer\" ' +\n'src=\"' + options.pluginPath + options.flashName + '\" ' +\n'flashvars=\"' + initVars.join('&') + '\" ' +\n'width=\"' + width + '\" ' +\n'height=\"' + height + '\" ' +\n'scale=\"default\"' + \n'class=\"mejs-shim\"></embed>';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 'youtube':\n\t\t\t\n\t\t\t\t\n\t\t\t\tvar videoId;\n\t\t\t\t// youtu.be url from share button\n\t\t\t\tif (playback.url.lastIndexOf(\"youtu.be\") != -1) {\n\t\t\t\t\tvideoId = playback.url.substr(playback.url.lastIndexOf('/')+1);\n\t\t\t\t\tif (videoId.indexOf('?') != -1) {\n\t\t\t\t\t\tvideoId = videoId.substr(0, videoId.indexOf('?'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvideoId = playback.url.substr(playback.url.lastIndexOf('=')+1);\n\t\t\t\t}\n\t\t\t\tyoutubeSettings = {\n\t\t\t\t\t\tcontainer: container,\n\t\t\t\t\t\tcontainerId: container.id,\n\t\t\t\t\t\tpluginMediaElement: pluginMediaElement,\n\t\t\t\t\t\tpluginId: pluginid,\n\t\t\t\t\t\tvideoId: videoId,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\twidth: width,\n                        scheme: playback.scheme\n\t\t\t\t\t};\t\t\t\t\n\t\t\t\t\n\t\t\t\t// favor iframe version of YouTube\n\t\t\t\tif (window.postMessage) {\n\t\t\t\t\tmejs.YouTubeApi.enqueueIframe(youtubeSettings);\t\t\n\t\t\t\t} else if (mejs.PluginDetector.hasPluginVersion('flash', [10,0,0]) ) {\n\t\t\t\t\tmejs.YouTubeApi.createFlash(youtubeSettings, options);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\n\t\t\t// DEMO Code. Does NOT work.\n\t\t\tcase 'vimeo':\n\t\t\t\tvar player_id = pluginid + \"_player\";\n\t\t\t\tpluginMediaElement.vimeoid = playback.url.substr(playback.url.lastIndexOf('/')+1);\n\t\t\t\t\n\t\t\t\tcontainer.innerHTML ='<iframe src=\"' + playback.scheme + 'player.vimeo.com/video/' + pluginMediaElement.vimeoid + '?api=1&portrait=0&byline=0&title=0&player_id=' + player_id + '\" width=\"' + width +'\" height=\"' + height +'\" frameborder=\"0\" class=\"mejs-shim\" id=\"' + player_id + '\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';\n\t\t\t\tif (typeof($f) == 'function') { // froogaloop available\n\t\t\t\t\tvar player = $f(container.childNodes[0]),\n\t\t\t\t\t\tplayerState = -1;\n\t\t\t\t\t\n\t\t\t\t\tplayer.addEvent('ready', function() {\n\t\t\n\t\t\t\t\t\tplayer.playVideo = function() {\n\t\t\t\t\t\t\tplayer.api( 'play' );\n\t\t\t\t\t\t} \n\t\t\t\t\t\tplayer.stopVideo = function() {\n\t\t\t\t\t\t\tplayer.api( 'unload' );\n\t\t\t\t\t\t} \n\t\t\t\t\t\tplayer.pauseVideo = function() {\n\t\t\t\t\t\t\tplayer.api( 'pause' );\n\t\t\t\t\t\t} \n\t\t\t\t\t\tplayer.seekTo = function( seconds ) {\n\t\t\t\t\t\t\tplayer.api( 'seekTo', seconds );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.setVolume = function( volume ) {\n\t\t\t\t\t\t\tplayer.api( 'setVolume', volume );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.setMuted = function( muted ) {\n\t\t\t\t\t\t\tif( muted ) {\n\t\t\t\t\t\t\t\tplayer.lastVolume = player.api( 'getVolume' );\n\t\t\t\t\t\t\t\tplayer.api( 'setVolume', 0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tplayer.api( 'setVolume', player.lastVolume );\n\t\t\t\t\t\t\t\tdelete player.lastVolume;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// parity with YT player\n\t\t\t\t\t\tplayer.getPlayerState = function() {\n\t\t\t\t\t\t\treturn playerState;\n\t\t\t\t\t\t}\t\t\t\n\n\t\t\t\t\t\tfunction createEvent(player, pluginMediaElement, eventName, e) {\n\t\t\t\t\t\t\tvar event = {\n\t\t\t\t\t\t\t\ttype: eventName,\n\t\t\t\t\t\t\t\ttarget: pluginMediaElement\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (eventName == 'timeupdate') {\n\t\t\t\t\t\t\t\tpluginMediaElement.currentTime = event.currentTime = e.seconds;\n\t\t\t\t\t\t\t\tpluginMediaElement.duration = event.duration = e.duration;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpluginMediaElement.dispatchEvent(event);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tplayer.addEvent('play', function() {\n\t\t\t\t\t\t\tplayerState = 1;\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'play');\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'playing');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tplayer.addEvent('pause', function() {\n\t\t\t\t\t\t\tplayerState = 2;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'pause');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tplayer.addEvent('finish', function() {\n\t\t\t\t\t\t\tplayerState = 0;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'ended');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tplayer.addEvent('playProgress', function(e) {\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'timeupdate', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tplayer.addEvent('seek', function(e) {\n\t\t\t\t\t\t\tplayerState = 3;\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'seeked', e);\n\t\t\t\t\t\t});\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tplayer.addEvent('loadProgress', function(e) {\n\t\t\t\t\t\t\tplayerState = 3;\n\t\t\t\t\t\t\tcreateEvent(player, pluginMediaElement, 'progress', e);\n\t\t\t\t\t\t});\t\t\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\tpluginMediaElement.pluginElement = container;\n\t\t\t\t\t\tpluginMediaElement.pluginApi = player;\n\n\t\t\t\t\t\tpluginMediaElement.success(pluginMediaElement, pluginMediaElement.pluginElement);\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.warn(\"You need to include froogaloop for vimeo to work\");\n\t\t\t\t}\n\t\t\t\tbreak;\t\t\t\n\t\t}\n\t\t// hide original element\n\t\thtmlMediaElement.style.display = 'none';\n\t\t// prevent browser from autoplaying when using a plugin\n\t\thtmlMediaElement.removeAttribute('autoplay');\n\t\t\n\t\treturn pluginMediaElement;\n\t},\n\n\tupdateNative: function(playback, options, autoplay, preload) {\n\t\t\n\t\tvar htmlMediaElement = playback.htmlMediaElement,\n\t\t\tm;\n\t\t\n\t\t\n\t\t// add methods to video object to bring it into parity with Flash Object\n\t\tfor (m in mejs.HtmlMediaElement) {\n\t\t\thtmlMediaElement[m] = mejs.HtmlMediaElement[m];\n\t\t}\n\n\t\t/*\n\t\tChrome now supports preload=\"none\"\n\t\tif (mejs.MediaFeatures.isChrome) {\n\t\t\n\t\t\t// special case to enforce preload attribute (Chrome doesn't respect this)\n\t\t\tif (preload === 'none' && !autoplay) {\n\t\t\t\n\t\t\t\t// forces the browser to stop loading (note: fails in IE9)\n\t\t\t\thtmlMediaElement.src = '';\n\t\t\t\thtmlMediaElement.load();\n\t\t\t\thtmlMediaElement.canceledPreload = true;\n\n\t\t\t\thtmlMediaElement.addEventListener('play',function() {\n\t\t\t\t\tif (htmlMediaElement.canceledPreload) {\n\t\t\t\t\t\thtmlMediaElement.src = playback.url;\n\t\t\t\t\t\thtmlMediaElement.load();\n\t\t\t\t\t\thtmlMediaElement.play();\n\t\t\t\t\t\thtmlMediaElement.canceledPreload = false;\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t// for some reason Chrome forgets how to autoplay sometimes.\n\t\t\t} else if (autoplay) {\n\t\t\t\thtmlMediaElement.load();\n\t\t\t\thtmlMediaElement.play();\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t\t// fire success code\n\t\toptions.success(htmlMediaElement, htmlMediaElement);\n\t\t\n\t\treturn htmlMediaElement;\n\t}\n};\n\n/*\n - test on IE (object vs. embed)\n - determine when to use iframe (Firefox, Safari, Mobile) vs. Flash (Chrome, IE)\n - fullscreen?\n*/\n\n// YouTube Flash and Iframe API\nmejs.YouTubeApi = {\n\tisIframeStarted: false,\n\tisIframeLoaded: false,\n\tloadIframeApi: function(yt) {\n\t\tif (!this.isIframeStarted) {\n\t\t\tvar tag = document.createElement('script');\n\t\t\ttag.src = yt.scheme + \"www.youtube.com/player_api\";\n\t\t\tvar firstScriptTag = document.getElementsByTagName('script')[0];\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\t\t\tthis.isIframeStarted = true;\n\t\t}\n\t},\n\tiframeQueue: [],\n\tenqueueIframe: function(yt) {\n\t\t\n\t\tif (this.isLoaded) {\n\t\t\tthis.createIframe(yt);\n\t\t} else {\n\t\t\tthis.loadIframeApi(yt);\n\t\t\tthis.iframeQueue.push(yt);\n\t\t}\n\t},\n\tcreateIframe: function(settings) {\n\t\t\n\t\tvar\n\t\tpluginMediaElement = settings.pluginMediaElement,\t\n\t\tplayer = new YT.Player(settings.containerId, {\n\t\t\theight: settings.height,\n\t\t\twidth: settings.width,\n\t\t\tvideoId: settings.videoId,\n\t\t\tplayerVars: {controls:0,wmode:'transparent'},\n\t\t\tevents: {\n\t\t\t\t'onReady': function() {\n\t\t\t\t\t\n\t\t\t\t\t// wrapper to match\n\t\t\t\t\tplayer.setVideoSize = function(width, height) {\n\t\t\t\t\t\tplayer.setSize(width, height);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// hook up iframe object to MEjs\n\t\t\t\t\tsettings.pluginMediaElement.pluginApi = player;\n\t\t\t\t\tsettings.pluginMediaElement.pluginElement = document.getElementById(settings.containerId);\n\t\t\t\t\t\n\t\t\t\t\t// init mejs\n\t\t\t\t\tpluginMediaElement.success(pluginMediaElement, pluginMediaElement.pluginElement);\n\t\t\t\t\t\n\t\t\t\t\t// create timer\n\t\t\t\t\tsetInterval(function() {\n\t\t\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'timeupdate');\n\t\t\t\t\t}, 250);\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\t'onStateChange': function(e) {\n\t\t\t\t\t\n\t\t\t\t\tmejs.YouTubeApi.handleStateChange(e.data, player, pluginMediaElement);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\n\tcreateEvent: function (player, pluginMediaElement, eventName) {\n\t\tvar event = {\n\t\t\ttype: eventName,\n\t\t\ttarget: pluginMediaElement\n\t\t};\n\n\t\tif (player && player.getDuration) {\n\t\t\t\n\t\t\t// time \n\t\t\tpluginMediaElement.currentTime = event.currentTime = player.getCurrentTime();\n\t\t\tpluginMediaElement.duration = event.duration = player.getDuration();\n\t\t\t\n\t\t\t// state\n\t\t\tevent.paused = pluginMediaElement.paused;\n\t\t\tevent.ended = pluginMediaElement.ended;\t\t\t\n\t\t\t\n\t\t\t// sound\n\t\t\tevent.muted = player.isMuted();\n\t\t\tevent.volume = player.getVolume() / 100;\n\t\t\t\n\t\t\t// progress\n\t\t\tevent.bytesTotal = player.getVideoBytesTotal();\n\t\t\tevent.bufferedBytes = player.getVideoBytesLoaded();\n\t\t\t\n\t\t\t// fake the W3C buffered TimeRange\n\t\t\tvar bufferedTime = event.bufferedBytes / event.bytesTotal * event.duration;\n\t\t\t\n\t\t\tevent.target.buffered = event.buffered = {\n\t\t\t\tstart: function(index) {\n\t\t\t\t\treturn 0;\n\t\t\t\t},\n\t\t\t\tend: function (index) {\n\t\t\t\t\treturn bufferedTime;\n\t\t\t\t},\n\t\t\t\tlength: 1\n\t\t\t};\n\n\t\t}\n\t\t\n\t\t// send event up the chain\n\t\tpluginMediaElement.dispatchEvent(event);\n\t},\t\n\t\n\tiFrameReady: function() {\n\t\t\n\t\tthis.isLoaded = true;\n\t\tthis.isIframeLoaded = true;\n\t\t\n\t\twhile (this.iframeQueue.length > 0) {\n\t\t\tvar settings = this.iframeQueue.pop();\n\t\t\tthis.createIframe(settings);\n\t\t}\t\n\t},\n\t\n\t// FLASH!\n\tflashPlayers: {},\n\tcreateFlash: function(settings) {\n\t\t\n\t\tthis.flashPlayers[settings.pluginId] = settings;\n\t\t\n\t\t/*\n\t\tsettings.container.innerHTML =\n\t\t\t'<object type=\"application/x-shockwave-flash\" id=\"' + settings.pluginId + '\" data=\"' + settings.scheme + 'www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=' + settings.pluginId  + '&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0\" ' +\n\t\t\t\t'width=\"' + settings.width + '\" height=\"' + settings.height + '\" style=\"visibility: visible; \" class=\"mejs-shim\">' +\n\t\t\t\t'<param name=\"allowScriptAccess\" value=\"sameDomain\">' +\n\t\t\t\t'<param name=\"wmode\" value=\"transparent\">' +\n\t\t\t'</object>';\n\t\t*/\n\n\t\tvar specialIEContainer,\n\t\t\tyoutubeUrl = settings.scheme + 'www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=' + settings.pluginId  + '&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0';\n\t\t\t\n\t\tif (mejs.MediaFeatures.isIE) {\n\t\t\t\n\t\t\tspecialIEContainer = document.createElement('div');\n\t\t\tsettings.container.appendChild(specialIEContainer);\n\t\t\tspecialIEContainer.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"' + settings.scheme + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" ' +\n'id=\"' + settings.pluginId + '\" width=\"' + settings.width + '\" height=\"' + settings.height + '\" class=\"mejs-shim\">' +\n\t'<param name=\"movie\" value=\"' + youtubeUrl + '\" />' +\n\t'<param name=\"wmode\" value=\"transparent\" />' +\n\t'<param name=\"allowScriptAccess\" value=\"' + options.flashScriptAccess + '\" />' +\n\t'<param name=\"allowFullScreen\" value=\"true\" />' +\n'</object>';\n\t\t} else {\n\t\tsettings.container.innerHTML =\n\t\t\t'<object type=\"application/x-shockwave-flash\" id=\"' + settings.pluginId + '\" data=\"' + youtubeUrl + '\" ' +\n\t\t\t\t'width=\"' + settings.width + '\" height=\"' + settings.height + '\" style=\"visibility: visible; \" class=\"mejs-shim\">' +\n\t\t\t\t'<param name=\"allowScriptAccess\" value=\"' + options.flashScriptAccess + '\">' +\n\t\t\t\t'<param name=\"wmode\" value=\"transparent\">' +\n\t\t\t'</object>';\n\t\t}\t\t\n\t\t\n\t},\n\t\n\tflashReady: function(id) {\n\t\tvar\n\t\t\tsettings = this.flashPlayers[id],\n\t\t\tplayer = document.getElementById(id),\n\t\t\tpluginMediaElement = settings.pluginMediaElement;\n\t\t\n\t\t// hook up and return to MediaELementPlayer.success\t\n\t\tpluginMediaElement.pluginApi = \n\t\tpluginMediaElement.pluginElement = player;\n\t\t\n\t\tsettings.success(pluginMediaElement, pluginMediaElement.pluginElement);\n\t\t\n\t\t// load the youtube video\n\t\tplayer.cueVideoById(settings.videoId);\n\t\t\n\t\tvar callbackName = settings.containerId + '_callback';\n\t\t\n\t\twindow[callbackName] = function(e) {\n\t\t\tmejs.YouTubeApi.handleStateChange(e, player, pluginMediaElement);\n\t\t}\n\t\t\n\t\tplayer.addEventListener('onStateChange', callbackName);\n\t\t\n\t\tsetInterval(function() {\n\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'timeupdate');\n\t\t}, 250);\n\t\t\n\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'canplay');\n\t},\n\t\n\thandleStateChange: function(youTubeState, player, pluginMediaElement) {\n\t\tswitch (youTubeState) {\n\t\t\tcase -1: // not started\n\t\t\t\tpluginMediaElement.paused = true;\n\t\t\t\tpluginMediaElement.ended = true;\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'loadedmetadata');\n\t\t\t\t//createYouTubeEvent(player, pluginMediaElement, 'loadeddata');\n\t\t\t\tbreak;\n\t\t\tcase 0:\n\t\t\t\tpluginMediaElement.paused = false;\n\t\t\t\tpluginMediaElement.ended = true;\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'ended');\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tpluginMediaElement.paused = false;\n\t\t\t\tpluginMediaElement.ended = false;\t\t\t\t\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'play');\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'playing');\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tpluginMediaElement.paused = true;\n\t\t\t\tpluginMediaElement.ended = false;\t\t\t\t\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'pause');\n\t\t\t\tbreak;\n\t\t\tcase 3: // buffering\n\t\t\t\tmejs.YouTubeApi.createEvent(player, pluginMediaElement, 'progress');\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t// cued?\n\t\t\t\tbreak;\t\t\t\t\t\t\n\t\t\t\n\t\t}\t\t\t\n\t\t\n\t}\n}\n// IFRAME\nwindow.onYouTubePlayerAPIReady = function() {\n\tmejs.YouTubeApi.iFrameReady();\n};\n// FLASH\nwindow.onYouTubePlayerReady = function(id) {\n\tmejs.YouTubeApi.flashReady(id);\n};\n\nwindow.mejs = mejs;\nwindow.MediaElement = mejs.MediaElement;\n\n/*\n * Adds Internationalization and localization to mediaelement.\n *\n * This file does not contain translations, you have to add them manually.\n * The schema is always the same: me-i18n-locale-[IETF-language-tag].js\n *\n * Examples are provided both for german and chinese translation.\n *\n *\n * What is the concept beyond i18n?\n *   http://en.wikipedia.org/wiki/Internationalization_and_localization\n *\n * What langcode should i use?\n *   http://en.wikipedia.org/wiki/IETF_language_tag\n *   https://tools.ietf.org/html/rfc5646\n *\n *\n * License?\n *\n *   The i18n file uses methods from the Drupal project (drupal.js):\n *     - i18n.methods.t() (modified)\n *     - i18n.methods.checkPlain() (full copy)\n *\n *   The Drupal project is (like mediaelementjs) licensed under GPLv2.\n *    - http://drupal.org/licensing/faq/#q1\n *    - https://github.com/johndyer/mediaelement\n *    - http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\n *\n *\n * @author\n *   Tim Latz (latz.tim@gmail.com)\n *\n *\n * @params\n *  - context - document, iframe ..\n *  - exports - CommonJS, window ..\n *\n */\n;(function(context, exports, undefined) {\n    \"use strict\";\n\n    var i18n = {\n        \"locale\": {\n            // Ensure previous values aren't overwritten.\n            \"language\" : (exports.i18n && exports.i18n.locale.language) || '',\n            \"strings\" : (exports.i18n && exports.i18n.locale.strings) || {}\n        },\n        \"ietf_lang_regex\" : /^(x\\-)?[a-z]{2,}(\\-\\w{2,})?(\\-\\w{2,})?$/,\n        \"methods\" : {}\n    };\n// start i18n\n\n\n    /**\n     * Get language, fallback to browser's language if empty\n     *\n     * IETF: RFC 5646, https://tools.ietf.org/html/rfc5646\n     * Examples: en, zh-CN, cmn-Hans-CN, sr-Latn-RS, es-419, x-private\n     */\n    i18n.getLanguage = function () {\n        var language = i18n.locale.language || window.navigator.userLanguage || window.navigator.language;\n        return i18n.ietf_lang_regex.exec(language) ? language : null;\n\n        //(WAS: convert to iso 639-1 (2-letters, lower case))\n        //return language.substr(0, 2).toLowerCase();\n    };\n\n    // i18n fixes for compatibility with WordPress\n    if ( typeof mejsL10n != 'undefined' ) {\n        i18n.locale.language = mejsL10n.language;\n    }\n\n\n\n    /**\n     * Encode special characters in a plain-text string for display as HTML.\n     */\n    i18n.methods.checkPlain = function (str) {\n        var character, regex,\n        replace = {\n            '&': '&amp;',\n            '\"': '&quot;',\n            '<': '&lt;',\n            '>': '&gt;'\n        };\n        str = String(str);\n        for (character in replace) {\n            if (replace.hasOwnProperty(character)) {\n                regex = new RegExp(character, 'g');\n                str = str.replace(regex, replace[character]);\n            }\n        }\n        return str;\n    };\n\n    /**\n     * Translate strings to the page language or a given language.\n     *\n     *\n     * @param str\n     *   A string containing the English string to translate.\n     *\n     * @param options\n     *   - 'context' (defaults to the default context): The context the source string\n     *     belongs to.\n     *\n     * @return\n     *   The translated string, escaped via i18n.methods.checkPlain()\n     */\n    i18n.methods.t = function (str, options) {\n\n        // Fetch the localized version of the string.\n        if (i18n.locale.strings && i18n.locale.strings[options.context] && i18n.locale.strings[options.context][str]) {\n            str = i18n.locale.strings[options.context][str];\n        }\n\n        return i18n.methods.checkPlain(str);\n    };\n\n\n    /**\n     * Wrapper for i18n.methods.t()\n     *\n     * @see i18n.methods.t()\n     * @throws InvalidArgumentException\n     */\n    i18n.t = function(str, options) {\n\n        if (typeof str === 'string' && str.length > 0) {\n\n            // check every time due language can change for\n            // different reasons (translation, lang switcher ..)\n            var language = i18n.getLanguage();\n\n            options = options || {\n                \"context\" : language\n            };\n\n            return i18n.methods.t(str, options);\n        }\n        else {\n            throw {\n                \"name\" : 'InvalidArgumentException',\n                \"message\" : 'First argument is either not a string or empty.'\n            };\n        }\n    };\n\n// end i18n\n    exports.i18n = i18n;\n}(document, mejs));\n\n// i18n fixes for compatibility with WordPress\n;(function(exports, undefined) {\n\n    \"use strict\";\n\n    if ( typeof mejsL10n != 'undefined' ) {\n        exports[mejsL10n.language] = mejsL10n.strings;\n    }\n\n}(mejs.i18n.locale.strings));\n\n/*!\n *\n * MediaElementPlayer\n * http://mediaelementjs.com/\n *\n * Creates a controller bar for HTML5 <video> add <audio> tags\n * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)\n *\n * Copyright 2010-2013, John Dyer (http://j.hn/)\n * License: MIT\n *\n */\nif (typeof jQuery != 'undefined') {\n\tmejs.$ = jQuery;\n} else if (typeof Zepto != 'undefined') {\n\tmejs.$ = Zepto;\n\n\t// define `outerWidth` method which has not been realized in Zepto\n\tZepto.fn.outerWidth = function(includeMargin) {\n\t\tvar width = $(this).width();\n\t\tif (includeMargin) {\n\t\t\twidth += parseInt($(this).css('margin-right'), 10);\n\t\t\twidth += parseInt($(this).css('margin-left'), 10);\n\t\t}\n\t\treturn width\n\t}\n\n} else if (typeof ender != 'undefined') {\n\tmejs.$ = ender;\n}\n(function ($) {\n\n\t// default player values\n\tmejs.MepDefaults = {\n\t\t// url to poster (to fix iOS 3.x)\n\t\tposter: '',\n\t\t// When the video is ended, we can show the poster.\n\t\tshowPosterWhenEnded: false,\n\t\t// default if the <video width> is not specified\n\t\tdefaultVideoWidth: 480,\n\t\t// default if the <video height> is not specified\n\t\tdefaultVideoHeight: 270,\n\t\t// if set, overrides <video width>\n\t\tvideoWidth: -1,\n\t\t// if set, overrides <video height>\n\t\tvideoHeight: -1,\n\t\t// default if the user doesn't specify\n\t\tdefaultAudioWidth: 400,\n\t\t// default if the user doesn't specify\n\t\tdefaultAudioHeight: 30,\n\n\t\t// default amount to move back when back key is pressed\n\t\tdefaultSeekBackwardInterval: function(media) {\n\t\t\treturn (media.duration * 0.05);\n\t\t},\n\t\t// default amount to move forward when forward key is pressed\n\t\tdefaultSeekForwardInterval: function(media) {\n\t\t\treturn (media.duration * 0.05);\n\t\t},\n\n\t\t// set dimensions via JS instead of CSS\n\t\tsetDimensions: true,\n\n\t\t// width of audio player\n\t\taudioWidth: -1,\n\t\t// height of audio player\n\t\taudioHeight: -1,\n\t\t// initial volume when the player starts (overrided by user cookie)\n\t\tstartVolume: 0.8,\n\t\t// useful for <audio> player loops\n\t\tloop: false,\n\t\t// rewind to beginning when media ends\n                autoRewind: true,\n\t\t// resize to media dimensions\n\t\tenableAutosize: true,\n\n\t\t// playback rail is full width without buttons aside - Custom Bombardier behavior\n\t\tallowFullRailMode: true,\n\t\tallowOffScreen: false,\n\t\tcustomVideoSkinName: 'bombardierVideoSkin',\n\t\trailDownDelay: 1500,\n\n\t\t/*\n\t\t * Time format to use. Default: 'mm:ss'\n\t\t * Supported units:\n\t\t *   h: hour\n\t\t *   m: minute\n\t\t *   s: second\n\t\t *   f: frame count\n\t\t * When using 'hh', 'mm', 'ss' or 'ff' we always display 2 digits.\n\t\t * If you use 'h', 'm', 's' or 'f' we display 1 digit if possible.\n\t\t *\n\t\t * Example to display 75 seconds:\n\t\t * Format 'mm:ss': 01:15\n\t\t * Format 'm:ss': 1:15\n\t\t * Format 'm:s': 1:15\n\t\t */\n\t\ttimeFormat: '',\n\t\t// forces the hour marker (##:00:00)\n\t\talwaysShowHours: false,\n\t\t// show framecount in timecode (##:00:00:00)\n\t\tshowTimecodeFrameCount: false,\n\t\t// used when showTimecodeFrameCount is set to true\n\t\tframesPerSecond: 25,\n\n\t\t// automatically calculate the width of the progress bar based on the sizes of other elements\n\t\tautosizeProgress : true,\n\t\t// Hide controls when playing and mouse is not over the video\n\t\talwaysShowControls: false,\n\t\t// Display the video control\n\t\thideVideoControlsOnLoad: false,\n\t\t// Enable click video element to toggle play/pause\n\t\tclickToPlayPause: true,\n\t\t// force iPad's native controls\n\t\tiPadUseNativeControls: false,\n\t\t// force iPhone's native controls\n\t\tiPhoneUseNativeControls: false,\n\t\t// force Android's native controls\n\t\tAndroidUseNativeControls: false,\n\t\t// features to show\n\t\tfeatures: ['playpause','current','progress','duration','tracks','volume','fullscreen'],\n\t\t// only for dynamic\n\t\tisVideo: true,\n\n\t\t// turns keyboard support on and off for this instance\n\t\tenableKeyboard: true,\n\n\t\t// whenthis player starts, it will pause other players\n\t\tpauseOtherPlayers: true,\n\n\t\t// array of keyboard actions such as play pause\n\t\tkeyActions: [\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [\n\t\t\t\t\t\t\t\t32, // SPACE\n\t\t\t\t\t\t\t\t179 // GOOGLE play/pause button\n\t\t\t\t\t\t\t  ],\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tif (media.paused || media.ended) {\n\t\t\t\t\t\t\t\t\t\tmedia.play();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tmedia.pause();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [38], // UP\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tplayer.container.find('.mejs-volume-slider').css('display','block');\n\t\t\t\t\t\t\t\tif (player.isVideo) {\n\t\t\t\t\t\t\t\t\t\tplayer.showControls();\n\t\t\t\t\t\t\t\t\t\tplayer.startControlsTimer();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar newVolume = Math.min(media.volume + 0.1, 1);\n\t\t\t\t\t\t\t\tmedia.setVolume(newVolume);\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [40], // DOWN\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tplayer.container.find('.mejs-volume-slider').css('display','block');\n\t\t\t\t\t\t\t\tif (player.isVideo) {\n\t\t\t\t\t\t\t\t\t\tplayer.showControls();\n\t\t\t\t\t\t\t\t\t\tplayer.startControlsTimer();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar newVolume = Math.max(media.volume - 0.1, 0);\n\t\t\t\t\t\t\t\tmedia.setVolume(newVolume);\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [\n\t\t\t\t\t\t\t\t37, // LEFT\n\t\t\t\t\t\t\t\t227 // Google TV rewind\n\t\t\t\t\t\t],\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tif (!isNaN(media.duration) && media.duration > 0) {\n\t\t\t\t\t\t\t\t\t\tif (player.isVideo) {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.showControls();\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.startControlsTimer();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// 5%\n\t\t\t\t\t\t\t\t\t\tvar newTime = Math.max(media.currentTime - player.options.defaultSeekBackwardInterval(media), 0);\n\t\t\t\t\t\t\t\t\t\tmedia.setCurrentTime(newTime);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [\n\t\t\t\t\t\t\t\t39, // RIGHT\n\t\t\t\t\t\t\t\t228 // Google TV forward\n\t\t\t\t\t\t],\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tif (!isNaN(media.duration) && media.duration > 0) {\n\t\t\t\t\t\t\t\t\t\tif (player.isVideo) {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.showControls();\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.startControlsTimer();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// 5%\n\t\t\t\t\t\t\t\t\t\tvar newTime = Math.min(media.currentTime + player.options.defaultSeekForwardInterval(media), media.duration);\n\t\t\t\t\t\t\t\t\t\tmedia.setCurrentTime(newTime);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [70], // F\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tif (typeof player.enterFullScreen != 'undefined') {\n\t\t\t\t\t\t\t\t\t\tif (player.isFullScreen) {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.exitFullScreen();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tplayer.enterFullScreen();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\tkeys: [77], // M\n\t\t\t\t\t\taction: function(player, media) {\n\t\t\t\t\t\t\t\tplayer.container.find('.mejs-volume-slider').css('display','block');\n\t\t\t\t\t\t\t\tif (player.isVideo) {\n\t\t\t\t\t\t\t\t\t\tplayer.showControls();\n\t\t\t\t\t\t\t\t\t\tplayer.startControlsTimer();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (player.media.muted) {\n\t\t\t\t\t\t\t\t\t\tplayer.setMuted(false);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tplayer.setMuted(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t]\n\t};\n\n\tmejs.mepIndex = 0;\n\n\tmejs.players = {};\n\n\t// wraps a MediaElement object in player controls\n\tmejs.MediaElementPlayer = function(node, o) {\n\t\t// enforce object, even without \"new\" (via John Resig)\n\t\tif ( !(this instanceof mejs.MediaElementPlayer) ) {\n\t\t\treturn new mejs.MediaElementPlayer(node, o);\n\t\t}\n\n\t\tvar t = this;\n\n\t\t// these will be reset after the MediaElement.success fires\n\t\tt.$media = t.$node = $(node);\n\t\tt.node = t.media = t.$media[0];\n\n\t\tif(!t.node) {\n\t\t\treturn\n\t\t}\n\n\t\t// check for existing player\n\t\tif (typeof t.node.player != 'undefined') {\n\t\t\treturn t.node.player;\n\t\t}\n\n\n\t\t// try to get options from data-mejsoptions\n\t\tif (typeof o == 'undefined') {\n\t\t\to = t.$node.data('mejsoptions');\n\t\t}\n\n\t\t// extend default options\n\t\tt.options = $.extend({},mejs.MepDefaults,o);\n\n\t\tif (!t.options.timeFormat) {\n\t\t\t// Generate the time format according to options\n\t\t\tt.options.timeFormat = 'mm:ss';\n\t\t\tif (t.options.alwaysShowHours) {\n\t\t\t\tt.options.timeFormat = 'hh:mm:ss';\n\t\t\t}\n\t\t\tif (t.options.showTimecodeFrameCount) {\n\t\t\t\tt.options.timeFormat += ':ff';\n\t\t\t}\n\t\t}\n\n\t\tmejs.Utility.calculateTimeFormat(0, t.options, t.options.framesPerSecond || 25);\n\n\t\t// unique ID\n\t\tt.id = 'mep_' + mejs.mepIndex++;\n\n\t\t// add to player array (for focus events)\n\t\tmejs.players[t.id] = t;\n\n\t\t// start up\n\t\tt.init();\n\n\t\treturn t;\n\t};\n\n\t// actual player\n\tmejs.MediaElementPlayer.prototype = {\n\n\t\thasFocus: false,\n\n\t\tcontrolsAreVisible: true,\n\n\t\tinit: function() {\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\tmf = mejs.MediaFeatures,\n\t\t\t\t// options for MediaElement (shim)\n\t\t\t\tmeOptions = $.extend(true, {}, t.options, {\n\t\t\t\t\tsuccess: function(media, domNode) { t.meReady(media, domNode); },\n\t\t\t\t\terror: function(e) { t.handleError(e);}\n\t\t\t\t}),\n\t\t\t\ttagName = t.media.tagName.toLowerCase();\n\n\t\t\tt.isDynamic = (tagName !== 'audio' && tagName !== 'video');\n\n\t\t\tif (t.isDynamic) {\n\t\t\t\t// get video from src or href?\n\t\t\t\tt.isVideo = t.options.isVideo;\n\t\t\t} else {\n\t\t\t\tt.isVideo = (tagName !== 'audio' && t.options.isVideo);\n\t\t\t}\n\n\t\t\t// use native controls in iPad, iPhone, and Android\n\t\t\tif ((mf.isiPad && t.options.iPadUseNativeControls) || (mf.isiPhone && t.options.iPhoneUseNativeControls)) {\n\n\t\t\t\t// add controls and stop\n\t\t\t\tt.$media.attr('controls', 'controls');\n\n\t\t\t\t// attempt to fix iOS 3 bug\n\t\t\t\t//t.$media.removeAttr('poster');\n                                // no Issue found on iOS3 -ttroxell\n\n\t\t\t\t// override Apple's autoplay override for iPads\n\t\t\t\tif (mf.isiPad && t.media.getAttribute('autoplay') !== null) {\n\t\t\t\t\tt.play();\n\t\t\t\t}\n\n\t\t\t} else if (mf.isAndroid && t.options.AndroidUseNativeControls) {\n\n\t\t\t\t// leave default player\n\n\t\t\t} else {\n\n\t\t\t\t// DESKTOP: use MediaElementPlayer controls\n\n\t\t\t\t// remove native controls\n\t\t\t\tt.$media.removeAttr('controls');\n\t\t\t\tvar videoPlayerTitle = t.isVideo ?\n\t\t\t\t\tmejs.i18n.t('Video Player') : mejs.i18n.t('Audio Player');\n\t\t\t\t// insert description for screen readers\n\t\t\t\t$('<span class=\"mejs-offscreen\">' + videoPlayerTitle + '</span>').insertBefore(t.$media);\n\t\t\t\t// build container\n\t\t\t\tt.container =\n\t\t\t\t\t$('<div id=\"' + t.id + '\" class=\"mejs-container ' + (mejs.MediaFeatures.svgAsImg ? 'svg' : 'no-svg') +\n\t\t\t\t\t  '\" tabindex=\"0\" role=\"application\" aria-label=\"' + videoPlayerTitle + '\">'+\n\t\t\t\t\t\t'<div class=\"mejs-inner\">'+\n\t\t\t\t\t\t\t'<div class=\"mejs-mediaelement\"></div>'+\n\t\t\t\t\t\t\t'<div class=\"mejs-layers\"></div>'+\n\t\t\t\t\t\t\t'<div class=\"mejs-controls\"></div>'+\n\t\t\t\t\t\t\t'<div class=\"mejs-clear\"></div>'+\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>')\n\t\t\t\t\t.addClass(t.$media[0].className)\n\t\t\t\t\t.insertBefore(t.$media)\n\t\t\t\t\t.focus(function ( e ) {\n\t\t\t\t\t\tif( !t.controlsAreVisible ) {\n\t\t\t\t\t\t\tt.showControls(true);\n\t\t\t\t\t\t\tvar playButton = t.container.find('.mejs-playpause-button > button');\n\t\t\t\t\t\t\tplayButton.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t// add classes for user and content\n\t\t\t\tt.container.addClass(\n\t\t\t\t\t(mf.isAndroid ? 'mejs-android ' : '') +\n\t\t\t\t\t(mf.isiOS ? 'mejs-ios ' : '') +\n\t\t\t\t\t(mf.isiPad ? 'mejs-ipad ' : '') +\n\t\t\t\t\t(mf.isiPhone ? 'mejs-iphone ' : '') +\n\t\t\t\t\t(t.isVideo ? 'mejs-video ' : 'mejs-audio ')\n\t\t\t\t);\n\n\n\t\t\t\t// move the <video/video> tag into the right spot\n\t\t\t\tt.container.find('.mejs-mediaelement').append(t.$media);\n\n\t\t\t\t// needs to be assigned here, after iOS remap\n\t\t\t\tt.node.player = t;\n\n\t\t\t\t// find parts\n\t\t\t\tt.controls = t.container.find('.mejs-controls');\n\t\t\t\tt.layers = t.container.find('.mejs-layers');\n\n\t\t\t\t// determine the size\n\n\t\t\t\t/* size priority:\n\t\t\t\t\t(1) videoWidth (forced),\n\t\t\t\t\t(2) style=\"width;height;\"\n\t\t\t\t\t(3) width attribute,\n\t\t\t\t\t(4) defaultVideoWidth (for unspecified cases)\n\t\t\t\t*/\n\n\t\t\t\tvar tagType = (t.isVideo ? 'video' : 'audio'),\n\t\t\t\t\tcapsTagName = tagType.substring(0,1).toUpperCase() + tagType.substring(1);\n\n\n\n\t\t\t\tif (t.options[tagType + 'Width'] > 0 || t.options[tagType + 'Width'].toString().indexOf('%') > -1) {\n\t\t\t\t\tt.width = t.options[tagType + 'Width'];\n\t\t\t\t} else if (t.media.style.width !== '' && t.media.style.width !== null) {\n\t\t\t\t\tt.width = t.media.style.width;\n\t\t\t\t} else if (t.media.getAttribute('width') !== null) {\n\t\t\t\t\tt.width = t.$media.attr('width');\n\t\t\t\t} else {\n\t\t\t\t\tt.width = t.options['default' + capsTagName + 'Width'];\n\t\t\t\t}\n\n\t\t\t\tif (t.options[tagType + 'Height'] > 0 || t.options[tagType + 'Height'].toString().indexOf('%') > -1) {\n\t\t\t\t\tt.height = t.options[tagType + 'Height'];\n\t\t\t\t} else if (t.media.style.height !== '' && t.media.style.height !== null) {\n\t\t\t\t\tt.height = t.media.style.height;\n\t\t\t\t} else if (t.$media[0].getAttribute('height') !== null) {\n\t\t\t\t\tt.height = t.$media.attr('height');\n\t\t\t\t} else {\n\t\t\t\t\tt.height = t.options['default' + capsTagName + 'Height'];\n\t\t\t\t}\n\n\t\t\t\t// set the size, while we wait for the plugins to load below\n\t\t\t\tt.setPlayerSize(t.width, t.height);\n\n\t\t\t\t// create MediaElementShim\n\t\t\t\tmeOptions.pluginWidth = t.width;\n\t\t\t\tmeOptions.pluginHeight = t.height;\n\t\t\t}\n\n\t\t\t// create MediaElement shim\n\t\t\tmejs.MediaElement(t.$media[0], meOptions);\n\n\t\t\tif (typeof(t.container) != 'undefined' && t.controlsAreVisible){\n\t\t\t\t// controls are shown when loaded\n\t\t\t\tt.container.trigger('controlsshown');\n\t\t\t}\n\t\t},\n\n\t\tshowControls: function(doAnimation) {\n\t\t\tvar t = this;\n\n\t\t\tdoAnimation = typeof doAnimation == 'undefined' || doAnimation;\n\n\t\t\tif (t.controlsAreVisible)\n\t\t\t\treturn;\n\n\t\t\tif (doAnimation) {\n\t\t\t\tt.controls\n\t\t\t\t\t.removeClass('mejs-offscreen')\n\t\t\t\t\t.stop(true, true).fadeIn(200, function() {\n\t\t\t\t\t\tt.controlsAreVisible = true;\n\t\t\t\t\t\tt.container.trigger('controlsshown');\n\t\t\t\t\t});\n\n\t\t\t\t// any additional controls people might add and want to hide\n\t\t\t\tt.container.find('.mejs-control')\n\t\t\t\t\t.removeClass('mejs-offscreen')\n\t\t\t\t\t.stop(true, true).fadeIn(200, function() {t.controlsAreVisible = true;});\n\n\t\t\t} else {\n\t\t\t\tt.controls\n\t\t\t\t\t.removeClass('mejs-offscreen')\n\t\t\t\t\t.css('display','block');\n\n\t\t\t\t// any additional controls people might add and want to hide\n\t\t\t\tt.container.find('.mejs-control')\n\t\t\t\t\t.removeClass('mejs-offscreen')\n\t\t\t\t\t.css('display','block');\n\n\t\t\t\tt.controlsAreVisible = true;\n\t\t\t\tt.container.trigger('controlsshown');\n\t\t\t}\n\n\t\t\tt.setControlsSize();\n\n\t\t},\n\n\t\thideControls: function(doAnimation) {\n\t\t\tvar t = this;\n\n\t\t\tif (!t.options.allowOffScreen) return;\n\n\t\t\tdoAnimation = typeof doAnimation == 'undefined' || doAnimation;\n\n\t\t\tif (!t.controlsAreVisible || t.options.alwaysShowControls || t.keyboardAction)\n\t\t\t\treturn;\n\n\t\t\tif (doAnimation) {\n\t\t\t\t// fade out main controls\n\t\t\t\tt.controls.stop(true, true).fadeOut(200, function() {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.addClass('mejs-offscreen')\n\t\t\t\t\t\t.css('display','block');\n\n\t\t\t\t\tt.controlsAreVisible = false;\n\t\t\t\t\tt.container.trigger('controlshidden');\n\t\t\t\t});\n\n\t\t\t\t// any additional controls people might add and want to hide\n\t\t\t\tt.container.find('.mejs-control').stop(true, true).fadeOut(200, function() {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.addClass('mejs-offscreen')\n\t\t\t\t\t\t.css('display','block');\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\t// hide main controls\n\t\t\t\tt.controls\n\t\t\t\t\t.addClass('mejs-offscreen')\n\t\t\t\t\t.css('display','block');\n\n\t\t\t\t// hide others\n\t\t\t\tt.container.find('.mejs-control')\n\t\t\t\t\t.addClass('mejs-offscreen')\n\t\t\t\t\t.css('display','block');\n\n\t\t\t\tt.controlsAreVisible = false;\n\t\t\t\tt.container.trigger('controlshidden');\n\t\t\t}\n\t\t},\n\n\t\tcontrolsTimer: null,\n\n\t\tstartControlsTimer: function(timeout) {\n\n\t\t\tvar t = this;\n\n\t\t\ttimeout = typeof timeout != 'undefined' ? timeout : 1500;\n\n\t\t\tt.killControlsTimer('start');\n\n\t\t\tt.controlsTimer = setTimeout(function() {\n\t\t\t\t//\n\t\t\t\tt.hideControls();\n\t\t\t\tt.killControlsTimer('hide');\n\t\t\t}, timeout);\n\t\t},\n\n\t\tkillControlsTimer: function(src) {\n\n\t\t\tvar t = this;\n\n\t\t\tif (t.controlsTimer !== null) {\n\t\t\t\tclearTimeout(t.controlsTimer);\n\t\t\t\tdelete t.controlsTimer;\n\t\t\t\tt.controlsTimer = null;\n\t\t\t}\n\t\t},\n\n\t\tcontrolsEnabled: true,\n\n\t\tdisableControls: function() {\n\t\t\tvar t= this;\n\n\t\t\tt.killControlsTimer();\n\t\t\tt.hideControls(false);\n\t\t\tthis.controlsEnabled = false;\n\t\t},\n\n\t\tenableControls: function() {\n\t\t\tvar t= this;\n\n\t\t\tt.showControls(false);\n\n\t\t\tt.controlsEnabled = true;\n\t\t},\n\n\n\t\t// Sets up all controls and events\n\t\tmeReady: function(media, domNode) {\n\n\n\t\t\tvar t = this,\n\t\t\t\tmf = mejs.MediaFeatures,\n\t\t\t\tautoplayAttr = domNode.getAttribute('autoplay'),\n\t\t\t\tautoplay = !(typeof autoplayAttr == 'undefined' || autoplayAttr === null || autoplayAttr === 'false'),\n\t\t\t\tfeatureIndex,\n\t\t\t\tfeature;\n\n\t\t\t// make sure it can't create itself again if a plugin reloads\n\t\t\tif (t.created) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tt.created = true;\n\t\t\t}\n\n\t\t\tt.media = media;\n\t\t\tt.domNode = domNode;\n\n\t\t\tif (!(mf.isAndroid && t.options.AndroidUseNativeControls) && !(mf.isiPad && t.options.iPadUseNativeControls) && !(mf.isiPhone && t.options.iPhoneUseNativeControls)) {\n\n\t\t\t\t// two built in features\n\t\t\t\tt.buildposter(t, t.controls, t.layers, t.media);\n\t\t\t\tt.buildkeyboard(t, t.controls, t.layers, t.media);\n\t\t\t\tt.buildoverlays(t, t.controls, t.layers, t.media);\n\n\t\t\t\t// grab for use by features\n\t\t\t\tt.findTracks();\n\n\t\t\t\t// add user-defined features/controls\n\t\t\t\tfor (featureIndex in t.options.features) {\n\t\t\t\t\tfeature = t.options.features[featureIndex];\n\t\t\t\t\tif (t['build' + feature]) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tt['build' + feature](t, t.controls, t.layers, t.media);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// TODO: report control error\n\t\t\t\t\t\t\t//throw e;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tt.container.trigger('controlsready');\n\n\t\t\t\t// reset all layers and controls\n\t\t\t\tt.setPlayerSize(t.width, t.height);\n\t\t\t\tt.setControlsSize();\n\n\n\t\t\t\t// controls fade\n\t\t\t\tif (t.isVideo) {\n\n\t\t\t\t\tif (mejs.MediaFeatures.hasTouch) {\n\n\t\t\t\t\t\t// for touch devices (iOS, Android)\n\t\t\t\t\t\t// show/hide without animation on touch\n\n\t\t\t\t\t\tt.$media.bind('touchstart', function() {\n\n\n\t\t\t\t\t\t\t// toggle controls\n\t\t\t\t\t\t\tif (t.controlsAreVisible) {\n\t\t\t\t\t\t\t\tt.hideControls(false);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (t.controlsEnabled) {\n\t\t\t\t\t\t\t\t\tt.showControls(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// create callback here since it needs access to current\n\t\t\t\t\t\t// MediaElement object\n\t\t\t\t\t\tt.clickToPlayPauseCallback = function() {\n\t\t\t\t\t\t\t//\n\n\t\t\t\t\t\t\tif (t.options.clickToPlayPause) {\n\t\t\t\t\t\t\t\tif (t.media.paused) {\n\t\t\t\t\t\t\t\t\tt.play();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tt.pause();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// click to play/pause\n\t\t\t\t\t\tt.media.addEventListener('click', t.clickToPlayPauseCallback, false);\n\n\t\t\t\t\t\t// show/hide controls\n\t\t\t\t\t\tt.container\n\t\t\t\t\t\t\t.bind('mouseenter', function () {\n\t\t\t\t\t\t\t\tif (t.controlsEnabled) {\n\t\t\t\t\t\t\t\t\tif (!t.options.alwaysShowControls ) {\n\t\t\t\t\t\t\t\t\t\tt.killControlsTimer('enter');\n\t\t\t\t\t\t\t\t\t\tt.showControls();\n\t\t\t\t\t\t\t\t\t\tt.startControlsTimer(2500);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.bind('mousemove', function() {\n\t\t\t\t\t\t\t\tif (t.controlsEnabled) {\n\t\t\t\t\t\t\t\t\tif (!t.controlsAreVisible) {\n\t\t\t\t\t\t\t\t\t\tt.showControls();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!t.options.alwaysShowControls) {\n\t\t\t\t\t\t\t\t\t\tt.startControlsTimer(2500);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.bind('mouseleave', function () {\n\t\t\t\t\t\t\t\tif (t.controlsEnabled) {\n\t\t\t\t\t\t\t\t\tif (!t.media.paused && !t.options.alwaysShowControls) {\n\t\t\t\t\t\t\t\t\t\tt.startControlsTimer(1000);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif(t.options.hideVideoControlsOnLoad) {\n\t\t\t\t\t\tt.hideControls(false);\n\t\t\t\t\t}\n\n\t\t\t\t\t// check for autoplay\n\t\t\t\t\tif (autoplay && !t.options.alwaysShowControls) {\n\t\t\t\t\t\tt.hideControls();\n\t\t\t\t\t}\n\n\t\t\t\t\t// resizer\n\t\t\t\t\tif (t.options.enableAutosize) {\n\t\t\t\t\t\tt.media.addEventListener('loadedmetadata', function(e) {\n\t\t\t\t\t\t\t// if the <video height> was not set and the options.videoHeight was not set\n\t\t\t\t\t\t\t// then resize to the real dimensions\n\t\t\t\t\t\t\tif (t.options.videoHeight <= 0 && t.domNode.getAttribute('height') === null && !isNaN(e.target.videoHeight)) {\n\t\t\t\t\t\t\t\tt.setPlayerSize(e.target.videoWidth, e.target.videoHeight);\n\t\t\t\t\t\t\t\tt.setControlsSize();\n\t\t\t\t\t\t\t\tt.media.setVideoSize(e.target.videoWidth, e.target.videoHeight);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// EVENTS\n\n\t\t\t\t// FOCUS: when a video starts playing, it takes focus from other players (possibily pausing them)\n\t\t\t\tmedia.addEventListener('play', function() {\n\t\t\t\t\tvar playerIndex;\n\n\t\t\t\t\t// go through all other players\n\t\t\t\t\tfor (playerIndex in mejs.players) {\n\t\t\t\t\t\tvar p = mejs.players[playerIndex];\n\t\t\t\t\t\tif (p.id != t.id && t.options.pauseOtherPlayers && !p.paused && !p.ended) {\n\t\t\t\t\t\t\tp.pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp.hasFocus = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tt.hasFocus = true;\n\t\t\t\t},false);\n\n\n\t\t\t\t// ended for all\n\t\t\t\tt.media.addEventListener('ended', function (e) {\n\t\t\t\t\tif(t.options.autoRewind) {\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tt.media.setCurrentTime(0);\n                            // Fixing an Android stock browser bug, where \"seeked\" isn't fired correctly after ending the video and jumping to the beginning\n                            window.setTimeout(function(){\n                                $(t.container).find('.mejs-overlay-loading').parent().hide();\n                            }, 20);\n\t\t\t\t\t\t} catch (exp) {\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tt.media.pause();\n\n\t\t\t\t\tif (t.setProgressRail) {\n\t\t\t\t\t\tt.setProgressRail();\n\t\t\t\t\t}\n\t\t\t\t\tif (t.setCurrentRail) {\n\t\t\t\t\t\tt.setCurrentRail();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (t.options.loop) {\n\t\t\t\t\t\tt.play();\n\t\t\t\t\t} else if (!t.options.alwaysShowControls && t.controlsEnabled) {\n\t\t\t\t\t\tt.showControls();\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\n\t\t\t\t// resize on the first play\n\t\t\t\tt.media.addEventListener('loadedmetadata', function(e) {\n\t\t\t\t\tif (t.updateDuration) {\n\t\t\t\t\t\tt.updateDuration();\n\t\t\t\t\t}\n\t\t\t\t\tif (t.updateCurrent) {\n\t\t\t\t\t\tt.updateCurrent();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!t.isFullScreen) {\n\t\t\t\t\t\tt.setPlayerSize(t.width, t.height);\n\t\t\t\t\t\tt.setControlsSize();\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\n\t\t\t\t// Only change the time format when necessary\n\t\t\t\tvar duration = null;\n\t\t\t\tt.media.addEventListener('timeupdate',function() {\n\t\t\t\t\tif (duration !== this.duration) {\n\t\t\t\t\t\tduration = this.duration;\n\t\t\t\t\t\tmejs.Utility.calculateTimeFormat(duration, t.options, t.options.framesPerSecond || 25);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// make sure to fill in and resize the controls (e.g., 00:00 => 01:13:15\n\t\t\t\t\t\tif (t.updateDuration) {\n\t\t\t\t\t\t\tt.updateDuration();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (t.updateCurrent) {\n\t\t\t\t\t\t\tt.updateCurrent();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tt.setControlsSize();\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\n\t\t\t\tt.container.focusout(function (e) {\n\t\t\t\t\tif( e.relatedTarget ) { //FF is working on supporting focusout https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n\t\t\t\t\t\tvar $target = $(e.relatedTarget);\n\t\t\t\t\t\tif (t.keyboardAction && $target.parents('.mejs-container').length === 0) {\n\t\t\t\t\t\t\tt.keyboardAction = false;\n\t\t\t\t\t\t\tt.hideControls(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// webkit has trouble doing this without a delay\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tt.setPlayerSize(t.width, t.height);\n\t\t\t\t\tt.setControlsSize();\n\t\t\t\t}, 50);\n\n\t\t\t\t// adjust controls whenever window sizes (used to be in fullscreen only)\n\t\t\t\tt.globalBind('resize', function() {\n\n\t\t\t\t\t// don't resize for fullscreen mode\n\t\t\t\t\tif ( !(t.isFullScreen || (mejs.MediaFeatures.hasTrueNativeFullScreen && document.webkitIsFullScreen)) ) {\n\t\t\t\t\t\tt.setPlayerSize(t.width, t.height);\n\t\t\t\t\t}\n\n\t\t\t\t\t// always adjust controls\n\t\t\t\t\tt.setControlsSize();\n\t\t\t\t});\n\n\t\t\t\t// This is a work-around for a bug in the YouTube iFrame player, which means\n\t\t\t\t//  we can't use the play() API for the initial playback on iOS or Android;\n\t\t\t\t//  user has to start playback directly by tapping on the iFrame.\n\t\t\t\tif (t.media.pluginType == 'youtube' && ( mf.isiOS || mf.isAndroid ) ) {\n\t\t\t\t\tt.container.find('.mejs-overlay-play').hide();\n                    t.container.find('.mejs-poster').hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// force autoplay for HTML5\n\t\t\tif (autoplay && media.pluginType == 'native') {\n\t\t\t\tt.play();\n\t\t\t}\n\n\n\t\t\tif (t.options.success) {\n\n\t\t\t\tif (typeof t.options.success == 'string') {\n\t\t\t\t\twindow[t.options.success](t.media, t.domNode, t);\n\t\t\t\t} else {\n\t\t\t\t\tt.options.success(t.media, t.domNode, t);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\thandleError: function(e) {\n\t\t\tvar t = this;\n\n\t\t\tif (t.controls) {\n\t\t\t\tt.controls.hide();\n\t\t\t}\n\n\t\t\t// Tell user that the file cannot be played\n\t\t\tif (t.options.error) {\n\t\t\t\tt.options.error(e);\n\t\t\t}\n\t\t},\n\n\t\tsetPlayerSize: function(width,height) {\n\t\t\tvar t = this;\n\n\t\t\tif( !t.options.setDimensions ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (typeof width != 'undefined') {\n\t\t\t\tt.width = width;\n\t\t\t}\n\n\t\t\tif (typeof height != 'undefined') {\n\t\t\t\tt.height = height;\n\t\t\t}\n\n\t\t\t// detect 100% mode - use currentStyle for IE since css() doesn't return percentages\n\t\t\tif (t.height.toString().indexOf('%') > 0 || (t.$node.css('max-width') !== 'none' && t.$node.css('max-width') !== 't.width') || (t.$node[0].currentStyle && t.$node[0].currentStyle.maxWidth === '100%')) {\n\n\t\t\t\t// do we have the native dimensions yet?\n\t\t\t\tvar nativeWidth = (function() {\n\t\t\t\t\tif (t.isVideo) {\n\t\t\t\t\t\tif (t.media.videoWidth && t.media.videoWidth > 0) {\n\t\t\t\t\t\t\treturn t.media.videoWidth;\n\t\t\t\t\t\t} else if (t.media.getAttribute('width') !== null) {\n\t\t\t\t\t\t\treturn t.media.getAttribute('width');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn t.options.defaultVideoWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn t.options.defaultAudioWidth;\n\t\t\t\t\t}\n\t\t\t\t})();\n\n\t\t\t\tvar nativeHeight = (function() {\n\t\t\t\t\tif (t.isVideo) {\n\t\t\t\t\t\tif (t.media.videoHeight && t.media.videoHeight > 0) {\n\t\t\t\t\t\t\treturn t.media.videoHeight;\n\t\t\t\t\t\t} else if (t.media.getAttribute('height') !== null) {\n\t\t\t\t\t\t\treturn t.media.getAttribute('height');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn t.options.defaultVideoHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn t.options.defaultAudioHeight;\n\t\t\t\t\t}\n\t\t\t\t})();\n\n\t\t\t\tvar\n\t\t\t\t\tparentWidth = t.container.parent().closest(':visible').width(),\n\t\t\t\t\tparentHeight = t.container.parent().closest(':visible').height(),\n\t\t\t\t\tnewHeight = t.isVideo || !t.options.autosizeProgress ? parseInt(parentWidth * nativeHeight/nativeWidth, 10) : nativeHeight;\n\n\t\t\t\t// When we use percent, the newHeight can't be calculated so we get the container height\n\t\t\t\tif (isNaN(newHeight)) {\n\t\t\t\t\tnewHeight = parentHeight;\n\t\t\t\t}\n\n\t\t\t\tif (t.container.parent().length > 0 && t.container.parent()[0].tagName.toLowerCase() === 'body') { // && t.container.siblings().count == 0) {\n\t\t\t\t\tparentWidth = $(window).width();\n\t\t\t\t\tnewHeight = $(window).height();\n\t\t\t\t}\n\n\t\t\t\tif ( newHeight && parentWidth ) {\n\n\t\t\t\t\t// set outer container size\n\t\t\t\t\tt.container\n\t\t\t\t\t\t.width(parentWidth)\n\t\t\t\t\t\t.height(newHeight);\n\n\t\t\t\t\t// set native <video> or <audio> and shims\n\t\t\t\t\tt.$media.add(t.container.find('.mejs-shim'))\n\t\t\t\t\t\t.width('100%')\n\t\t\t\t\t\t.height('100%');\n\n\t\t\t\t\t// if shim is ready, send the size to the embeded plugin\n\t\t\t\t\tif (t.isVideo) {\n\t\t\t\t\t\tif (t.media.setVideoSize) {\n\t\t\t\t\t\t\tt.media.setVideoSize(parentWidth, newHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// set the layers\n\t\t\t\t\tt.layers.children('.mejs-layer')\n\t\t\t\t\t\t.width('100%')\n\t\t\t\t\t\t.height('100%');\n\t\t\t\t}\n\n\n\t\t\t} else {\n\n\t\t\t\tt.container\n\t\t\t\t\t.width(t.width)\n\t\t\t\t\t.height(t.height);\n\n\t\t\t\tt.layers.children('.mejs-layer')\n\t\t\t\t\t.width(t.width)\n\t\t\t\t\t.height(t.height);\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetControlsSize: function() {\n\t\t\tvar t = this,\n\t\t\t\tusedWidth = 0,\n\t\t\t\trailWidth = 0,\n\t\t\t\trail = t.controls.find('.mejs-time-rail'),\n\t\t\t\ttotal = t.controls.find('.mejs-time-total'),\n\t\t\t\tothers = rail.siblings(),\n\t\t\t\tlastControl = others.last(),\n\t\t\t\tlastControlPosition = null;\n\n\t\t\t// skip calculation if hidden\n\t\t\tif (!t.container.is(':visible') || !rail.length || !rail.is(':visible')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// allow the size to come from custom CSS\n\t\t\tif (t.options && !t.options.autosizeProgress) {\n\t\t\t\t// Also, frontends devs can be more flexible\n\t\t\t\t// due the opportunity of absolute positioning.\n\t\t\t\trailWidth = parseInt(rail.css('width'), 10);\n\t\t\t}\n\n\t\t\t// attempt to autosize\n\t\t\tif (railWidth === 0 || !railWidth) {\n\n\t\t\t\t// find the size of all the other controls besides the rail\n\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\tothers.each(function () {\n\t\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t\tif ($this.css('position') != 'absolute' && $this.is(':visible')) {\n\t\t\t\t\t\t\tusedWidth += $(this).outerWidth(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tt.container.parents('.media-component').find('.media-widget').addClass(t.options.customVideoSkinName);\n\t\t\t\t}\n\n\t\t\t\t// fit the rail into the remaining space\n\t\t\t\trailWidth = t.controls.width() - usedWidth - (rail.outerWidth(true) - rail.width());\n\t\t\t}\n\n\t\t\t// resize the rail,\n\t\t\t// but then check if the last control (say, the fullscreen button) got pushed down\n\t\t\t// this often happens when zoomed\n\t\t\tdo {\n\t\t\t\t// outer area\n\t\t\t\trail.width(railWidth);\n\t\t\t\t// dark space\n\t\t\t\ttotal.width(railWidth - (total.outerWidth(true) - total.width()));\n\n\t\t\t\tif (lastControl.css('position') != 'absolute') {\n\t\t\t\t\tlastControlPosition = lastControl.length ? lastControl.position() : null;\n\t\t\t\t\trailWidth--;\n\t\t\t\t}\n\t\t\t} while (lastControlPosition !== null && lastControlPosition.top.toFixed(2) > 0 && railWidth > 0);\n\n\t\t\tt.container.trigger('controlsresize');\n\t\t},\n\n\n\t\tbuildposter: function(player, controls, layers, media) {\n\t\t\tvar t = this,\n\t\t\t\tposter =\n\t\t\t\t$('<div class=\"mejs-poster mejs-layer\">' +\n\t\t\t\t'</div>')\n\t\t\t\t\t.appendTo(layers),\n\t\t\t\tposterUrl = player.$media.attr('poster');\n\n\t\t\t// prioriy goes to option (this is useful if you need to support iOS 3.x (iOS completely fails with poster)\n\t\t\tif (player.options.poster !== '') {\n\t\t\t\tposterUrl = player.options.poster;\n\t\t\t}\n\n\t\t\t// second, try the real poster\n\t\t\tif ( posterUrl ) {\n\t\t\t\tt.setPoster(posterUrl);\n\t\t\t} else {\n\t\t\t\tposter.hide();\n\t\t\t}\n\n\t\t\tmedia.addEventListener('play',function() {\n\t\t\t\tposter.hide();\n\t\t\t}, false);\n\n\t\t\tif(player.options.showPosterWhenEnded && player.options.autoRewind){\n\t\t\t\tmedia.addEventListener('ended',function() {\n\t\t\t\t\tposter.show();\n\t\t\t\t}, false);\n\t\t\t}\n\t\t},\n\n\t\tsetPoster: function(url) {\n\t\t\tvar t = this,\n\t\t\t\tposterDiv = t.container.find('.mejs-poster'),\n\t\t\t\tposterImg = posterDiv.find('img');\n\n\t\t\tif (posterImg.length === 0) {\n\t\t\t\tposterImg = $('<img width=\"100%\" height=\"100%\" alt=\"\" />').appendTo(posterDiv);\n\t\t\t}\n\n\t\t\tposterImg.attr('src', url);\n\t\t\tposterDiv.css({'background-image' : 'url(' + url + ')'});\n\t\t},\n\n\t\tbuildoverlays: function(player, controls, layers, media) {\n            var t = this;\n\t\t\tif (!player.isVideo)\n\t\t\t\treturn;\n\n\t\t\tvar\n\t\t\tloading =\n\t\t\t\t$('<div class=\"mejs-overlay mejs-layer\">'+\n\t\t\t\t\t'<div class=\"mejs-overlay-loading\"><span></span></div>'+\n\t\t\t\t'</div>')\n\t\t\t\t.hide() // start out hidden\n\t\t\t\t.appendTo(layers),\n\t\t\terror =\n\t\t\t\t$('<div class=\"mejs-overlay mejs-layer\">'+\n\t\t\t\t\t'<div class=\"mejs-overlay-error\"></div>'+\n\t\t\t\t'</div>')\n\t\t\t\t.hide() // start out hidden\n\t\t\t\t.appendTo(layers),\n\t\t\t// this needs to come last so it's on top\n\t\t\tbigPlay =\n\t\t\t\t$('<div class=\"mejs-overlay mejs-layer mejs-overlay-play\">'+\n\t\t\t\t\t'<div class=\"mejs-overlay-button\"></div>'+\n\t\t\t\t'</div>')\n\t\t\t\t.appendTo(layers)\n\t\t\t\t.bind('click', function() {  // Removed 'touchstart' due issues on Samsung Android devices where a tap on bigPlay started and immediately stopped the video\n\t\t\t\t\tif (t.options.clickToPlayPause) {\n\t\t\t\t\t\tif (media.paused) {\n\t\t\t\t\t\t\tmedia.play();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t/*\n\t\t\tif (mejs.MediaFeatures.isiOS || mejs.MediaFeatures.isAndroid) {\n\t\t\t\tbigPlay.remove();\n\t\t\t\tloading.remove();\n\t\t\t}\n\t\t\t*/\n\n\n\t\t\t// show/hide big play button\n\t\t\tmedia.addEventListener('play',function() {\n\t\t\t\tbigPlay.hide();\n\t\t\t\tloading.hide();\n\t\t\t\tcontrols.find('.mejs-time-buffering').hide();\n\t\t\t\terror.hide();\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('playing', function() {\n\t\t\t\tbigPlay.hide();\n\t\t\t\tloading.hide();\n\t\t\t\tcontrols.find('.mejs-time-buffering').hide();\n\t\t\t\terror.hide();\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('seeking', function() {\n\t\t\t\tloading.show();\n\t\t\t\tcontrols.find('.mejs-time-buffering').show();\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('seeked', function() {\n\t\t\t\tloading.hide();\n\t\t\t\tcontrols.find('.mejs-time-buffering').hide();\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('pause',function() {\n\t\t\t\tif (!mejs.MediaFeatures.isiPhone) {\n\t\t\t\t\tbigPlay.show();\n\t\t\t\t}\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('waiting', function() {\n\t\t\t\tloading.show();\n\t\t\t\tcontrols.find('.mejs-time-buffering').show();\n\t\t\t}, false);\n\n\n\t\t\t// show/hide loading\n\t\t\tmedia.addEventListener('loadeddata',function() {\n\t\t\t\t// for some reason Chrome is firing this event\n\t\t\t\t//if (mejs.MediaFeatures.isChrome && media.getAttribute && media.getAttribute('preload') === 'none')\n\t\t\t\t//\treturn;\n\n\t\t\t\tloading.show();\n\t\t\t\tcontrols.find('.mejs-time-buffering').show();\n                // Firing the 'canplay' event after a timeout which isn't getting fired on some Android 4.1 devices (https://github.com/johndyer/mediaelement/issues/1305)\n                if (mejs.MediaFeatures.isAndroid) {\n                    media.canplayTimeout = window.setTimeout(\n                        function() {\n                            if (document.createEvent) {\n                                var evt = document.createEvent('HTMLEvents');\n                                evt.initEvent('canplay', true, true);\n                                return media.dispatchEvent(evt);\n                            }\n                        }, 300\n                    );\n                }\n\t\t\t}, false);\n\t\t\tmedia.addEventListener('canplay',function() {\n\t\t\t\tloading.hide();\n\t\t\t\tcontrols.find('.mejs-time-buffering').hide();\n                clearTimeout(media.canplayTimeout); // Clear timeout inside 'loadeddata' to prevent 'canplay' to fire twice\n\t\t\t}, false);\n\n\t\t\t// error handling\n\t\t\tmedia.addEventListener('error',function(e) {\n\t\t\t\tt.handleError(e);\n\t\t\t\tloading.hide();\n\t\t\t\tbigPlay.hide();\n\t\t\t\terror.show();\n\t\t\t\terror.find('.mejs-overlay-error').html(\"Error loading this resource\");\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('keydown', function(e) {\n\t\t\t\tt.onkeydown(player, media, e);\n\t\t\t}, false);\n\t\t},\n\n\t\tbuildkeyboard: function(player, controls, layers, media) {\n\n\t\t\t\tvar t = this;\n\n\t\t\t\tt.container.keydown(function () {\n\t\t\t\t\tt.keyboardAction = true;\n\t\t\t\t});\n\n\t\t\t\t// listen for key presses\n\t\t\t\tt.globalBind('keydown', function(event) {\n\t\t\t\t\tplayer.hasFocus = $(event.target).closest('.mejs-container').length !== 0\n\t\t\t\t\t\t&& $(event.target).closest('.mejs-container').attr('id') === player.$media.closest('.mejs-container').attr('id');\n\t\t\t\t\treturn t.onkeydown(player, media, event);\n\t\t\t\t});\n\n\n\t\t\t\t// check if someone clicked outside a player region, then kill its focus\n\t\t\t\tt.globalBind('click', function(event) {\n\t\t\t\t\tplayer.hasFocus = $(event.target).closest('.mejs-container').length !== 0;\n\t\t\t\t});\n\n\t\t},\n\t\tonkeydown: function(player, media, e) {\n\t\t\tif (player.hasFocus && player.options.enableKeyboard) {\n\t\t\t\t// find a matching key\n\t\t\t\tfor (var i = 0, il = player.options.keyActions.length; i < il; i++) {\n\t\t\t\t\tvar keyAction = player.options.keyActions[i];\n\n\t\t\t\t\tfor (var j = 0, jl = keyAction.keys.length; j < jl; j++) {\n\t\t\t\t\t\tif (e.keyCode == keyAction.keys[j]) {\n\t\t\t\t\t\t\tif (typeof(e.preventDefault) == \"function\") e.preventDefault();\n\t\t\t\t\t\t\tkeyAction.action(player, media, e.keyCode, e);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tfindTracks: function() {\n\t\t\tvar t = this,\n\t\t\t\ttracktags = t.$media.find('track');\n\n\t\t\t// store for use by plugins\n\t\t\tt.tracks = [];\n\t\t\ttracktags.each(function(index, track) {\n\n\t\t\t\ttrack = $(track);\n\n\t\t\t\tt.tracks.push({\n\t\t\t\t\tsrclang: (track.attr('srclang')) ? track.attr('srclang').toLowerCase() : '',\n\t\t\t\t\tsrc: track.attr('src'),\n\t\t\t\t\tkind: track.attr('kind'),\n\t\t\t\t\tlabel: track.attr('label') || '',\n\t\t\t\t\tentries: [],\n\t\t\t\t\tisLoaded: false\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tchangeSkin: function(className) {\n\t\t\tthis.container[0].className = 'mejs-container ' + className;\n\t\t\tthis.setPlayerSize(this.width, this.height);\n\t\t\tthis.setControlsSize();\n\t\t},\n\t\tplay: function() {\n\t\t\tthis.load();\n\t\t\tthis.media.play();\n\t\t},\n\t\tpause: function() {\n\t\t\ttry {\n\t\t\t\tthis.media.pause();\n\t\t\t} catch (e) {}\n\t\t},\n\t\tload: function() {\n\t\t\tif (!this.isLoaded) {\n\t\t\t\tthis.media.load();\n\t\t\t}\n\n\t\t\tthis.isLoaded = true;\n\t\t},\n\t\tsetMuted: function(muted) {\n\t\t\tthis.media.setMuted(muted);\n\t\t},\n\t\tsetCurrentTime: function(time) {\n\t\t\tthis.media.setCurrentTime(time);\n\t\t},\n\t\tgetCurrentTime: function() {\n\t\t\treturn this.media.currentTime;\n\t\t},\n\t\tsetVolume: function(volume) {\n\t\t\tthis.media.setVolume(volume);\n\t\t},\n\t\tgetVolume: function() {\n\t\t\treturn this.media.volume;\n\t\t},\n\t\tsetSrc: function(src) {\n\t\t\tthis.media.setSrc(src);\n\t\t},\n\t\tremove: function() {\n\t\t\tvar t = this, featureIndex, feature;\n\n\t\t\tt.container.prev('.mejs-offscreen').remove();\n\n\t\t\t// invoke features cleanup\n\t\t\tfor (featureIndex in t.options.features) {\n\t\t\t\tfeature = t.options.features[featureIndex];\n\t\t\t\tif (t['clean' + feature]) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tt['clean' + feature](t);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// TODO: report control error\n\t\t\t\t\t\t//throw e;\n\t\t\t\t\t\t//\n\t\t\t\t\t\t//\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// grab video and put it back in place\n\t\t\tif (!t.isDynamic) {\n\t\t\t\tt.$media.prop('controls', true);\n\t\t\t\t// detach events from the video\n\t\t\t\t// TODO: detach event listeners better than this;\n\t\t\t\t//       also detach ONLY the events attached by this plugin!\n\t\t\t\tt.$node.clone().insertBefore(t.container).show();\n\t\t\t\tt.$node.remove();\n\t\t\t} else {\n\t\t\t\tt.$node.insertBefore(t.container);\n\t\t\t}\n\n\t\t\tif (t.media.pluginType !== 'native') {\n\t\t\t\tt.media.remove();\n\t\t\t}\n\n\t\t\t// Remove the player from the mejs.players object so that pauseOtherPlayers doesn't blow up when trying to pause a non existance flash api.\n\t\t\tdelete mejs.players[t.id];\n\n\t\t\tif (typeof t.container == 'object') {\n\t\t\t\tt.container.remove();\n\t\t\t}\n\t\t\tt.globalUnbind();\n\t\t\tdelete t.node.player;\n\t\t},\n\t\trebuildtracks: function(){\n\t\t\tvar t = this;\n\t\t\tt.findTracks();\n\t\t\tt.buildtracks(t, t.controls, t.layers, t.media);\n\t\t},\n\t\tresetSize: function(){\n\t\t\tvar t = this;\n\t\t\t// webkit has trouble doing this without a delay\n\t\t\tsetTimeout(function () {\n\t\t\t\t//\n\t\t\t\tt.setPlayerSize(t.width, t.height);\n\t\t\t\tt.setControlsSize();\n\t\t\t}, 50);\n\t\t}\n\t};\n\n\t(function(){\n\t\tvar rwindow = /^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\\b/;\n\n\t\tfunction splitEvents(events, id) {\n\t\t\t// add player ID as an event namespace so it's easier to unbind them all later\n\t\t\tvar ret = {d: [], w: []};\n\t\t\t$.each((events || '').split(' '), function(k, v){\n\t\t\t\tvar eventname = v + '.' + id;\n\t\t\t\tif (eventname.indexOf('.') === 0) {\n\t\t\t\t\tret.d.push(eventname);\n\t\t\t\t\tret.w.push(eventname);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tret[rwindow.test(v) ? 'w' : 'd'].push(eventname);\n\t\t\t\t}\n\t\t\t});\n\t\t\tret.d = ret.d.join(' ');\n\t\t\tret.w = ret.w.join(' ');\n\t\t\treturn ret;\n\t\t}\n\n\t\tmejs.MediaElementPlayer.prototype.globalBind = function(events, data, callback) {\n    \t\tvar t = this;\n\t\t\tvar doc = t.node ? t.node.ownerDocument : document;\n\n\t\t\tevents = splitEvents(events, t.id);\n\t\t\tif (events.d) $(doc).bind(events.d, data, callback);\n\t\t\tif (events.w) $(window).bind(events.w, data, callback);\n\t\t};\n\n\t\tmejs.MediaElementPlayer.prototype.globalUnbind = function(events, callback) {\n\t\t\tvar t = this;\n\t\t\tvar doc = t.node ? t.node.ownerDocument : document;\n\n\t\t\tevents = splitEvents(events, t.id);\n\t\t\tif (events.d) $(doc).unbind(events.d, callback);\n\t\t\tif (events.w) $(window).unbind(events.w, callback);\n\t\t};\n\t})();\n\n\t// turn into jQuery plugin\n\tif (typeof $ != 'undefined') {\n\t\t$.fn.mediaelementplayer = function (options) {\n\t\t\tif (options === false) {\n\t\t\t\tthis.each(function () {\n\t\t\t\t\tvar player = $(this).data('mediaelementplayer');\n\t\t\t\t\tif (player) {\n\t\t\t\t\t\tplayer.remove();\n\t\t\t\t\t}\n\t\t\t\t\t$(this).removeData('mediaelementplayer');\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.each(function () {\n\t\t\t\t\t$(this).data('mediaelementplayer', new mejs.MediaElementPlayer(this, options));\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\n\t\t$(document).ready(function() {\n\t\t\t// auto enable using JSON attribute\n\t\t\t$('.mejs-player').mediaelementplayer();\n\t\t});\n\t}\n\n\t// push out to window\n\twindow.MediaElementPlayer = mejs.MediaElementPlayer;\n\n})(mejs.$);\n\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tplayText: mejs.i18n.t('Play'),\n\t\tpauseText: mejs.i18n.t('Pause')\n\t});\n\n\t// PLAY/pause BUTTON\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildplaypause: function(player, controls, layers, media) {\n\t\t\tvar \n\t\t\t\tt = this,\n\t\t\t\top = t.options,\n\t\t\t\tplay = \n\t\t\t\t$('<div class=\"mejs-button mejs-playpause-button mejs-play\" >' +\n\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + op.playText + '\" aria-label=\"' + op.playText + '\"></button>' +\n\t\t\t\t'</div>')\n\t\t\t\t.appendTo(controls)\n\t\t\t\t.click(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\n\t\t\t\t\tif (media.paused) {\n\t\t\t\t\t\tmedia.play();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmedia.pause();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t}),\n\t\t\t\tplay_btn = play.find('button');\n\n\n\t\t\tfunction togglePlayPause(which) {\n\t\t\t\tif ('play' === which) {\n\t\t\t\t\tplay.removeClass('mejs-play').addClass('mejs-pause');\n\t\t\t\t\tplay_btn.attr({\n\t\t\t\t\t\t'title': op.pauseText,\n\t\t\t\t\t\t'aria-label': op.pauseText\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tplay.removeClass('mejs-pause').addClass('mejs-play');\n\t\t\t\t\tplay_btn.attr({\n\t\t\t\t\t\t'title': op.playText,\n\t\t\t\t\t\t'aria-label': op.playText\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\ttogglePlayPause('pse');\n\n\n\t\t\tmedia.addEventListener('play',function() {\n\t\t\t\ttogglePlayPause('play');\n\t\t\t}, false);\n\t\t\tmedia.addEventListener('playing',function() {\n\t\t\t\ttogglePlayPause('play');\n\t\t\t}, false);\n\n\n\t\t\tmedia.addEventListener('pause',function() {\n\t\t\t\ttogglePlayPause('pse');\n\t\t\t}, false);\n\t\t\tmedia.addEventListener('paused',function() {\n\t\t\t\ttogglePlayPause('pse');\n\t\t\t}, false);\n\t\t}\n\t});\n\t\n})(mejs.$);\n\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tstopText: 'Stop'\n\t});\n\n\t// STOP BUTTON\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildstop: function(player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\t$('<div class=\"mejs-button mejs-stop-button mejs-stop\">' +\n\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + t.options.stopText + '\" aria-label=\"' + t.options.stopText + '\"></button>' +\n\t\t\t\t'</div>')\n\t\t\t\t.appendTo(controls)\n\t\t\t\t.click(function() {\n\t\t\t\t\tif (!media.paused) {\n\t\t\t\t\t\tmedia.pause();\n\t\t\t\t\t}\n\t\t\t\t\tif (media.currentTime > 0) {\n\t\t\t\t\t\tmedia.setCurrentTime(0);\n                        media.pause();\n\t\t\t\t\t\tcontrols.find('.mejs-time-current').width('0px');\n\t\t\t\t\t\tcontrols.find('.mejs-time-handle').css('left', '0px');\n\t\t\t\t\t\tcontrols.find('.mejs-time-float-current').html( mejs.Utility.secondsToTimeCode(0, player.options));\n\t\t\t\t\t\tcontrols.find('.mejs-currenttime').html( mejs.Utility.secondsToTimeCode(0, player.options));\n\t\t\t\t\t\tlayers.find('.mejs-poster').show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t});\n\t\n})(mejs.$);\n\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tprogessHelpText: mejs.i18n.t(\n\t\t'Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.')\n\t});\n\n\t// progress/loaded bar\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildprogress: function(player, controls, layers, media) {\n\n\t\t\t$('<div class=\"mejs-time-rail\">' +\n\t\t\t\t'<span  class=\"mejs-time-total mejs-time-slider\">' +\n\t\t\t\t//'<span class=\"mejs-offscreen\">' + this.options.progessHelpText + '</span>' +\n\t\t\t\t\t'<span class=\"mejs-time-buffering\"></span>' +\n\t\t\t\t\t'<span class=\"mejs-time-loaded\"></span>' +\n\t\t\t\t\t'<span class=\"mejs-time-current\"><span></span></span>' +\n\t\t\t\t\t'<span class=\"mejs-time-handle\"></span>' +\n\t\t\t\t\t'<span class=\"mejs-time-float\">' +\n\t\t\t\t\t\t'<span class=\"mejs-time-float-current\">00:00</span>' +\n\t\t\t\t\t\t'<span class=\"mejs-time-float-corner\"></span>' +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</span>' +\n\t\t\t'</div>')\n\t\t\t\t.appendTo(controls);\n\t\t\tcontrols.find('.mejs-time-buffering').hide();\n\n\t\t\tvar \n\t\t\t\tt = this,\n\t\t\t\ttotal = controls.find('.mejs-time-total'),\n\t\t\t\tloaded  = controls.find('.mejs-time-loaded'),\n\t\t\t\tcurrent  = controls.find('.mejs-time-current'),\n\t\t\t\thandle  = controls.find('.mejs-time-handle'),\n\t\t\t\ttimefloat  = controls.find('.mejs-time-float'),\n\t\t\t\ttimefloatcurrent  = controls.find('.mejs-time-float-current'),\n                slider = controls.find('.mejs-time-slider'),\n\t\t\t\thandleMouseMove = function (e) {\n\t\t\t\t\t\n                    var offset = total.offset(),\n\t\t\t\t\t\twidth = total.width(),\n\t\t\t\t\t\tpercentage = 0,\n\t\t\t\t\t\tnewTime = 0,\n\t\t\t\t\t\tpos = 0,\n                        x;\n                    \n                    // mouse or touch position relative to the object\n\t\t\t\t\tif (e.originalEvent && e.originalEvent.changedTouches) {\n\t\t\t\t\t\tx = e.originalEvent.changedTouches[0].pageX;\n\t\t\t\t\t} else if (e.changedTouches) { // for Zepto\n\t\t\t\t\t\tx = e.changedTouches[0].pageX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tx = e.pageX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (media.duration) {\n\t\t\t\t\t\tif (x < offset.left) {\n\t\t\t\t\t\t\tx = offset.left;\n\t\t\t\t\t\t} else if (x > width + offset.left) {\n\t\t\t\t\t\t\tx = width + offset.left;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tpos = x - offset.left;\n\t\t\t\t\t\tpercentage = (pos / width);\n\t\t\t\t\t\tnewTime = (percentage <= 0.02) ? 0 : percentage * media.duration;\n\n\t\t\t\t\t\t// seek to where the mouse is\n\t\t\t\t\t\tif (mouseIsDown && newTime !== media.currentTime) {\n\t\t\t\t\t\t\tmedia.setCurrentTime(newTime);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// position floating time box\n\t\t\t\t\t\ttimefloat.css('left', pos);\n\t\t\t\t\t\ttimefloatcurrent.html( mejs.Utility.secondsToTimeCode(newTime, player.options) );\n\t\t\t\t\t\ttimefloat.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouseIsDown = false,\n\t\t\t\tmouseIsOver = false,\n\t\t\t\tlastKeyPressTime = 0,\n\t\t\t\tstartedPaused = false,\n\t\t\t\tautoRewindInitial = player.options.autoRewind;\n            // Accessibility for slider\n            var updateSlider = function (e) {\n\n\t\t\t\tvar seconds = media.currentTime,\n\t\t\t\t\ttimeSliderText = mejs.i18n.t('Time Slider'),\n\t\t\t\t\ttime = mejs.Utility.secondsToTimeCode(seconds, player.options),\n\t\t\t\t\tduration = media.duration;\n\n\t\t\t\tslider.attr({\n\t\t\t\t\t'aria-label': timeSliderText,\n\t\t\t\t\t'aria-valuemin': 0,\n\t\t\t\t\t'aria-valuemax': duration,\n\t\t\t\t\t'aria-valuenow': seconds,\n\t\t\t\t\t'aria-valuetext': time,\n\t\t\t\t\t'role': 'slider',\n\t\t\t\t\t'tabindex': 0\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t\t\tvar restartPlayer = function () {\n\t\t\t\tvar now = new Date();\n\t\t\t\tif (now - lastKeyPressTime >= 1000) {\n\t\t\t\t\tmedia.play();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tslider.bind('focus', function (e) {\n\t\t\t\tplayer.options.autoRewind = false;\n\t\t\t});\n\n\t\t\tslider.bind('blur', function (e) {\n\t\t\t\tplayer.options.autoRewind = autoRewindInitial;\n\t\t\t});\n\n\t\t\tslider.bind('keydown', function (e) {\n\n\t\t\t\tif ((new Date() - lastKeyPressTime) >= 1000) {\n\t\t\t\t\tstartedPaused = media.paused;\n\t\t\t\t}\n\n\t\t\t\tvar keyCode = e.keyCode,\n\t\t\t\t\tduration = media.duration,\n\t\t\t\t\tseekTime = media.currentTime,\n\t\t\t\t\tseekForward  = player.options.defaultSeekForwardInterval(duration),\n\t\t\t\t\tseekBackward = player.options.defaultSeekBackwardInterval(duration);\n\n\t\t\t\tswitch (keyCode) {\n\t\t\t\tcase 37: // left\n\t\t\t\tcase 40: // Down\n\t\t\t\t\tseekTime -= seekBackward;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39: // Right\n\t\t\t\tcase 38: // Up\n\t\t\t\t\tseekTime += seekForward;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 36: // Home\n\t\t\t\t\tseekTime = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 35: // end\n\t\t\t\t\tseekTime = duration;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 32: // space\n\t\t\t\tcase 13: // enter\n\t\t\t\t\tmedia.paused ? media.play() : media.pause();\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tseekTime = seekTime < 0 ? 0 : (seekTime >= duration ? duration : Math.floor(seekTime));\n\t\t\t\tlastKeyPressTime = new Date();\n\t\t\t\tif (!startedPaused) {\n\t\t\t\t\tmedia.pause();\n\t\t\t\t}\n\n\t\t\t\tif (seekTime < media.duration && !startedPaused) {\n\t\t\t\t\tsetTimeout(restartPlayer, 1100);\n\t\t\t\t}\n\n\t\t\t\tmedia.setCurrentTime(seekTime);\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t});\n\n\n\t\t\t// handle clicks\n\t\t\tvar donut = controls.find('.mejs-time-current span');\n\t\t\tvar railTimeout;\n\n\t\t\tdonut.bind('dblclick', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t$(this).removeClass('focussed');\n\t\t\t\tmedia.play();\n\t\t\t});\n\n\t\t\tdonut.dragMedia({ container: '.mejs-time-rail', draggableEvent: 'mediaDragged'});\n\n\t\t\ttotal.parent().bind('mediaDragged', function(e, originalEvent) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tif (window.dragging && !media.paused) {\n\t\t\t\t\tmedia.draggedPaused = true;\n\t\t\t\t\tmedia.pause();\n\t\t\t\t}\n\t\t\t\tmouseIsDown = true;\n\t\t\t\tmouseIsOver = true;\n\t\t\t\thandleMouseMove(originalEvent);\n\t\t\t});\n\n\t\t\t$(window).on('mediaDraggedEnd', function() {\n\t\t\t\tif (media.draggedPaused) {\n\t\t\t\t\t\tmedia.draggedPaused = false;\n\t\t\t\t\t\tmedia.play();\n\t\t\t\t}\n\t\t\t\ttimefloat.hide();\n\t\t\t});\n\n\t\t\t$(window).on('mediaDraggedStart', function() {\n\t\t\t\tif (!media.paused) {\n\t\t\t\t\tmedia.draggedPaused = true;\n\t\t\t\t\tmedia.pause();\n\t\t\t\t} else if (media.draggedPaused){\n\t\t\t\t\tmedia.play();\n\t\t\t\t\tmedia.draggedPaused = false;\n\t\t\t\t} else {\n\t\t\t\t\tmedia.draggedPaused = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttotal\n\t\t\t\t.bind('mouseenter touchstart', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\thandleFocussedBar(true, $(this));\n\t\t\t\t\tclearTimeout(railTimeout);\n\t\t\t\t})\n\t\t\t\t.bind('mousedown touchmove', function (e) {\n\t\t\t\t\tif (e.which === 1 || e.which === 0) {\n\t\t\t\t\t\tmouseIsDown = true;\n\t\t\t\t\t\tmouseIsOver = true;\n\t\t\t\t\t\thandleMouseMove(e);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.bind('mouseup', function(){\n\t\t\t\t\ttimefloat.hide();\n\t\t\t\t})\n\t\t\t\t.bind('mouseleave touchend',function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar self = $(this);\n\n\t\t\t\t\trailTimeout = setTimeout( function() {\n\t\t\t\t\t\thandleFocussedBar(false, self);\n\t\t\t\t\t}, t.options.railDownDelay);\n\t\t\t\t});\n\n\t\t\thandleFocussedBar = function(focussed, el) {\n\t\t\t\tvar selector = 'focussed';\n\t\t\t\tvar donut = el.find('.mejs-time-current span');\n\n\t\t\t\tif (focussed) {\n\t\t\t\t\tel.addClass(selector);\n\t\t\t\t\tdonut.addClass(selector);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdonut.removeClass(selector);\n\t\t\t\t\tel.removeClass(selector);\n\t\t\t\t\ttimefloat.hide();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// loading\n\t\t\tmedia.addEventListener('progress', function (e) {\n\t\t\t\tplayer.setProgressRail(e);\n\t\t\t\tplayer.setCurrentRail(e);\n\t\t\t}, false);\n\n\t\t\t// current time\n\t\t\tmedia.addEventListener('timeupdate', function(e) {\n\t\t\t\tplayer.setProgressRail(e);\n\t\t\t\tplayer.setCurrentRail(e);\n\t\t\t\tupdateSlider(e);\n\t\t\t}, false);\n\t\t\t\n\t\t\tt.container.on('controlsresize', function() {\n\t\t\t\tplayer.setProgressRail();\n\t\t\t\tplayer.setCurrentRail();\n\t\t\t});\n\t\t\t\n\t\t\t// store for later use\n\t\t\tt.loaded = loaded;\n\t\t\tt.total = total;\n\t\t\tt.current = current;\n\t\t\tt.handle = handle;\n\t\t},\n\t\tsetProgressRail: function(e) {\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ttarget = (e !== undefined) ? e.target : t.media,\n\t\t\t\tpercent = null;\n\n\t\t\t// newest HTML5 spec has buffered array (FF4, Webkit)\n\t\t\tif (target && target.buffered && target.buffered.length > 0 && target.buffered.end && target.duration) {\n\t\t\t\t// account for a real array with multiple values - always read the end of the last buffer\n\t\t\t\tpercent = target.buffered.end(target.buffered.length - 1) / target.duration;\n\t\t\t} \n\t\t\t// Some browsers (e.g., FF3.6 and Safari 5) cannot calculate target.bufferered.end()\n\t\t\t// to be anything other than 0. If the byte count is available we use this instead.\n\t\t\t// Browsers that support the else if do not seem to have the bufferedBytes value and\n\t\t\t// should skip to there. Tested in Safari 5, Webkit head, FF3.6, Chrome 6, IE 7/8.\n\t\t\telse if (target && target.bytesTotal !== undefined && target.bytesTotal > 0 && target.bufferedBytes !== undefined) {\n\t\t\t\tpercent = target.bufferedBytes / target.bytesTotal;\n\t\t\t}\n\t\t\t// Firefox 3 with an Ogg file seems to go this way\n\t\t\telse if (e && e.lengthComputable && e.total !== 0) {\n\t\t\t\tpercent = e.loaded / e.total;\n\t\t\t}\n\n\t\t\t// finally update the progress bar\n\t\t\tif (percent !== null) {\n\t\t\t\tpercent = Math.min(1, Math.max(0, percent));\n\t\t\t\t// update loaded bar\n\t\t\t\tif (t.loaded && t.total) {\n\t\t\t\t\tt.loaded.width(t.total.width() * percent);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsetCurrentRail: function() {\n\n\t\t\tvar t = this;\n\t\t\n\t\t\tif (t.media.currentTime !== undefined && t.media.duration) {\n\n\t\t\t\t// update bar and handle\n\t\t\t\tif (t.total && t.handle) {\n\t\t\t\t\tvar \n\t\t\t\t\t\tnewWidth = Math.round(t.total.width() * t.media.currentTime / t.media.duration),\n\t\t\t\t\t\thandlePos = newWidth - Math.round(t.handle.outerWidth(true) / 2);\n\n\t\t\t\t\tt.current.width(newWidth);\n\t\t\t\t\tt.handle.css('left', handlePos);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t});\n})(mejs.$);\n\n(function($) {\n\t\n\t// options\n\t$.extend(mejs.MepDefaults, {\n\t\tduration: -1,\n\t\ttimeAndDurationSeparator: '<span> | </span>'\n\t});\n\n\n\t// current and duration 00:00 / 00:00\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildcurrent: function(player, controls, layers, media) {\n\t\t\tvar t = this;\n\t\t\t\n\t\t\t$('<div class=\"mejs-time\" role=\"timer\" aria-live=\"off\">' +\n\t\t\t\t\t'<span class=\"mejs-currenttime\">' + \n\t\t\t\t\t\tmejs.Utility.secondsToTimeCode(0, player.options) +\n                    '</span>'+\n\t\t\t\t'</div>')\n\t\t\t.appendTo(controls);\n\t\t\t\n\t\t\tt.currenttime = t.controls.find('.mejs-currenttime');\n\n\t\t\tmedia.addEventListener('timeupdate',function() {\n\t\t\t\tplayer.updateCurrent();\n\t\t\t}, false);\n\t\t},\n\n\n\t\tbuildduration: function(player, controls, layers, media) {\n\t\t\tvar t = this;\n\t\t\t\n\t\t\tif (controls.children().last().find('.mejs-currenttime').length > 0) {\n\t\t\t\t$(t.options.timeAndDurationSeparator +\n\t\t\t\t\t'<span class=\"mejs-duration\">' + \n\t\t\t\t\t\tmejs.Utility.secondsToTimeCode(t.options.duration, t.options) +\n\t\t\t\t\t'</span>')\n\t\t\t\t\t.appendTo(controls.find('.mejs-time'));\n\t\t\t} else {\n\n\t\t\t\t// add class to current time\n\t\t\t\tcontrols.find('.mejs-currenttime').parent().addClass('mejs-currenttime-container');\n\t\t\t\t\n\t\t\t\t$('<div class=\"mejs-time mejs-duration-container\">'+\n\t\t\t\t\t'<span class=\"mejs-duration\">' + \n\t\t\t\t\t\tmejs.Utility.secondsToTimeCode(t.options.duration, t.options) +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</div>')\n\t\t\t\t.appendTo(controls);\n\t\t\t}\n\t\t\t\n\t\t\tt.durationD = t.controls.find('.mejs-duration');\n\n\t\t\tmedia.addEventListener('timeupdate',function() {\n\t\t\t\tplayer.updateDuration();\n\t\t\t}, false);\n\t\t},\n\t\t\n\t\tupdateCurrent:  function() {\n\t\t\tvar t = this;\n\t\t\t\n\t\t\tvar currentTime = t.media.currentTime;\n\t\t\t\n\t\t\tif (isNaN(currentTime)) {\n\t\t\t\tcurrentTime = 0;\n\t\t\t}\n\n\t\t\tif (t.currenttime) {\n\t\t\t\tt.currenttime.html(mejs.Utility.secondsToTimeCode(currentTime, t.options));\n\t\t\t}\n\t\t},\n\t\t\n\t\tupdateDuration: function() {\n\t\t\tvar t = this;\n\n\t\t\tvar duration = t.media.duration;\n\t\t\tif (t.options.duration > 0) {\n\t\t\t\tduration = t.options.duration;\n\t\t\t}\n\n\t\t\tif (isNaN(duration)) {\n\t\t\t\tduration = 0;\n\t\t\t}\n\n\t\t\t//Toggle the long video class if the video is longer than an hour.\n\t\t\tt.container.toggleClass(\"mejs-long-video\", duration > 3600);\n\t\t\t\n\t\t\tif (t.durationD && duration > 0) {\n\t\t\t\tt.durationD.html(mejs.Utility.secondsToTimeCode(duration, t.options));\n\t\t\t}\t\t\n\t\t}\n\t});\n\n})(mejs.$);\n\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tmuteText: mejs.i18n.t('Mute Toggle'),\n        allyVolumeControlText: mejs.i18n.t('Use Up/Down Arrow keys to increase or decrease volume.'),\n\t\thideVolumeOnTouchDevices: true,\n\t\t\n\t\taudioVolume: 'horizontal',\n\t\tvideoVolume: 'vertical'\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildvolume: function(player, controls, layers, media) {\n\t\t\t\t\n\t\t\t// Android and iOS don't support volume controls\n\t\t\tif ((mejs.MediaFeatures.isAndroid || mejs.MediaFeatures.isiOS) && this.options.hideVolumeOnTouchDevices)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tvar t = this,\n\t\t\t\tmode = (t.isVideo) ? t.options.videoVolume : t.options.audioVolume,\n\t\t\t\tmute = (mode == 'horizontal') ?\n\t\t\t\t\n\t\t\t\t// horizontal version\n\t\t\t\t$('<div class=\"mejs-button mejs-volume-button mejs-mute\">' +\n\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + \n\t\t\t\t\t\t'\" title=\"' + t.options.muteText + \n\t\t\t\t\t\t'\" aria-label=\"' + t.options.muteText +\n\t\t\t\t\t'\"></button>'+\n\t\t\t\t'</div>' +\n                  '<a href=\"javascript:void(0);\" class=\"mejs-horizontal-volume-slider\">' + // outer background\n\t\t\t\t\t'<span class=\"mejs-offscreen\">' + t.options.allyVolumeControlText + '</span>' +\n\t\t\t\t\t'<div class=\"mejs-horizontal-volume-total\"></div>'+ // line background\n\t\t\t\t\t'<div class=\"mejs-horizontal-volume-current\"></div>'+ // current volume\n\t\t\t\t\t'<div class=\"mejs-horizontal-volume-handle\"></div>'+ // handle\n\t\t\t\t'</a>'\n\t\t\t\t)\n\t\t\t\t\t.appendTo(controls) :\n\t\t\t\t\n\t\t\t\t// vertical version\n\t\t\t\t$('<div class=\"mejs-button mejs-volume-button mejs-mute\">'+\n\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + \n\t\t\t\t\t\t'\" title=\"' + t.options.muteText + \n\t\t\t\t\t\t'\" aria-label=\"' + t.options.muteText + \n\t\t\t\t\t'\"></button>'+\n\t\t\t\t\t'<a href=\"javascript:void(0);\" class=\"mejs-volume-slider\">'+ // outer background\n\t\t\t\t\t\t'<span class=\"mejs-offscreen\">' + t.options.allyVolumeControlText + '</span>' +                  \n\t\t\t\t\t\t'<div class=\"mejs-volume-total\"></div>'+ // line background\n\t\t\t\t\t\t'<div class=\"mejs-volume-current\"></div>'+ // current volume\n\t\t\t\t\t\t'<div class=\"mejs-volume-handle\"></div>'+ // handle\n\t\t\t\t\t'</a>'+\n\t\t\t\t'</div>')\n\t\t\t\t\t.appendTo(controls),\n\t\t\tvolumeSlider = t.container.find('.mejs-volume-slider, .mejs-horizontal-volume-slider'),\n\t\t\tvolumeTotal = t.container.find('.mejs-volume-total, .mejs-horizontal-volume-total'),\n\t\t\tvolumeCurrent = t.container.find('.mejs-volume-current, .mejs-horizontal-volume-current'),\n\t\t\tvolumeHandle = t.container.find('.mejs-volume-handle, .mejs-horizontal-volume-handle'),\n\n\t\t\tpositionVolumeHandle = function(volume, secondTry) {\n\n\t\t\t\tif (!volumeSlider.is(':visible') && typeof secondTry == 'undefined') {\n\t\t\t\t\tvolumeSlider.show();\n\t\t\t\t\tpositionVolumeHandle(volume, true);\n\t\t\t\t\tvolumeSlider.hide();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// correct to 0-1\n\t\t\t\tvolume = Math.max(0,volume);\n\t\t\t\tvolume = Math.min(volume,1);\n\n\t\t\t\t// ajust mute button style\n\t\t\t\tif (volume === 0) {\n\t\t\t\t\tmute.removeClass('mejs-mute').addClass('mejs-unmute');\n\t\t\t\t\tmute.children('button').attr('title', mejs.i18n.t('Unmute')).attr('aria-label', mejs.i18n.t('Unmute'));\n\t\t\t\t} else {\n\t\t\t\t\tmute.removeClass('mejs-unmute').addClass('mejs-mute');\n\t\t\t\t\tmute.children('button').attr('title', mejs.i18n.t('Mute')).attr('aria-label', mejs.i18n.t('Mute'));\n\t\t\t\t}\n\n                // top/left of full size volume slider background\n                var totalPosition = volumeTotal.position();\n\t\t\t\t// position slider \n\t\t\t\tif (mode == 'vertical') {\n\t\t\t\t\tvar\n                    // height of the full size volume slider background\n\t\t\t\t\t\ttotalHeight = volumeTotal.height(),\n\n                        // the new top position based on the current volume\n\t\t\t\t\t\t// 70% volume on 100px height == top:30px\n\t\t\t\t\t\tnewTop = totalHeight - (totalHeight * volume);\n\t\n\t\t\t\t\t// handle\n\t\t\t\t\tvolumeHandle.css('top', Math.round(totalPosition.top + newTop - (volumeHandle.height() / 2)));\n\t\n\t\t\t\t\t// show the current visibility\n\t\t\t\t\tvolumeCurrent.height(totalHeight - newTop );\n\t\t\t\t\tvolumeCurrent.css('top', totalPosition.top + newTop);\n\t\t\t\t} else {\n                    var\n\t\t\t\t\t\t// height of the full size volume slider background\n\t\t\t\t\t\ttotalWidth = volumeTotal.width(),\n\t\t\t\t\t\t\n\t\t\t\t\t\t// the new left position based on the current volume\n\t\t\t\t\t\tnewLeft = totalWidth * volume;\n\t\n\t\t\t\t\t// handle\n\t\t\t\t\tvolumeHandle.css('left', Math.round(totalPosition.left + newLeft - (volumeHandle.width() / 2)));\n\t\n\t\t\t\t\t// rezize the current part of the volume bar\n\t\t\t\t\tvolumeCurrent.width( Math.round(newLeft) );\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleVolumeMove = function(e) {\n\t\t\t\t\n\t\t\t\tvar volume = null,\n\t\t\t\t\ttotalOffset = volumeTotal.offset();\n\t\t\t\t\n\t\t\t\t// calculate the new volume based on the moust position\n\t\t\t\tif (mode === 'vertical') {\n\t\t\t\t\n\t\t\t\t\tvar\n\t\t\t\t\t\trailHeight = volumeTotal.height(),\n\t\t\t\t\t\tnewY = e.pageY - totalOffset.top;\n\t\t\t\t\t\t\n\t\t\t\t\tvolume = (railHeight - newY) / railHeight;\n\t\t\t\t\t\t\n\t\t\t\t\t// the controls just hide themselves (usually when mouse moves too far up)\n\t\t\t\t\tif (totalOffset.top === 0 || totalOffset.left === 0) {\n\t\t\t\t\t\treturn;\n                    }\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tvar\n\t\t\t\t\t\trailWidth = volumeTotal.width(),\n\t\t\t\t\t\tnewX = e.pageX - totalOffset.left;\n\t\t\t\t\t\t\n\t\t\t\t\tvolume = newX / railWidth;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// ensure the volume isn't outside 0-1\n\t\t\t\tvolume = Math.max(0,volume);\n\t\t\t\tvolume = Math.min(volume,1);\n\t\t\t\t\n\t\t\t\t// position the slider and handle\n\t\t\t\tpositionVolumeHandle(volume);\n\t\t\t\t\n\t\t\t\t// set the media object (this will trigger the volumechanged event)\n\t\t\t\tif (volume === 0) {\n\t\t\t\t\tmedia.setMuted(true);\n\t\t\t\t} else {\n\t\t\t\t\tmedia.setMuted(false);\n\t\t\t\t}\n\t\t\t\tmedia.setVolume(volume);\n\t\t\t},\n\t\t\tmouseIsDown = false,\n\t\t\tmouseIsOver = false;\n\n\t\t\t// SLIDER\n\t\t\t\n\t\t\tmute\n\t\t\t\t.hover(function() {\n\t\t\t\t\tvolumeSlider.show();\n\t\t\t\t\tmouseIsOver = true;\n\t\t\t\t}, function() {\n\t\t\t\t\tmouseIsOver = false;\n\t\t\t\t\t\t\n\t\t\t\t\tif (!mouseIsDown && mode == 'vertical')\t{\n\t\t\t\t\t\tvolumeSlider.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n            \n            var updateVolumeSlider = function (e) {\n\n                var volume = Math.floor(media.volume*100);\n\n\t\t\t\tvolumeSlider.attr({\n\t\t\t\t\t'aria-label': mejs.i18n.t('Volume Slider'),\n\t\t\t\t\t'aria-valuemin': 0,\n\t\t\t\t\t'aria-valuemax': 100,\n\t\t\t\t\t'aria-valuenow': volume,\n\t\t\t\t\t'aria-valuetext': volume+'%',\n\t\t\t\t\t'role': 'slider',\n\t\t\t\t\t'tabindex': 0\n\t\t\t\t});\n\n\t\t\t};\n\t\t\t\n\t\t\tvolumeSlider\n\t\t\t\t.bind('mouseover', function() {\n\t\t\t\t\tmouseIsOver = true;\t\n\t\t\t\t})\n\t\t\t\t.bind('mousedown', function (e) {\n\t\t\t\t\thandleVolumeMove(e);\n\t\t\t\t\tt.globalBind('mousemove.vol', function(e) {\n\t\t\t\t\t\thandleVolumeMove(e);\n\t\t\t\t\t});\n\t\t\t\t\tt.globalBind('mouseup.vol', function () {\n\t\t\t\t\t\tmouseIsDown = false;\n\t\t\t\t\t\tt.globalUnbind('.vol');\n\n\t\t\t\t\t\tif (!mouseIsOver && mode == 'vertical') {\n\t\t\t\t\t\t\tvolumeSlider.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tmouseIsDown = true;\n\t\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t\t.bind('keydown', function (e) {\n\t\t\t\t\tvar keyCode = e.keyCode;\n\t\t\t\t\tvar volume = media.volume;\n\t\t\t\t\tswitch (keyCode) {\n                        case 38: // Up\n                            volume = Math.min(volume + 0.1, 1);\n                            break;\n                        case 40: // Down\n                            volume = Math.max(0, volume - 0.1);\n                            break;\n                        default:\n                            return true;\n                    }\n\n\t\t\t\t\tmouseIsDown = false;\n\t\t\t\t\tpositionVolumeHandle(volume);\n\t\t\t\t\tmedia.setVolume(volume);\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t// MUTE button\n\t\t\tmute.find('button').click(function() {\n\t\t\t\tmedia.setMuted( !media.muted );\n\t\t\t});\n            \n            //Keyboard input\n            mute.find('button').bind('focus', function () {\n\t\t\t\tvolumeSlider.show();\n\t\t\t});\n\n\t\t\t// listen for volume change events from other sources\n\t\t\tmedia.addEventListener('volumechange', function(e) {\n\t\t\t\tif (!mouseIsDown) {\n\t\t\t\t\tif (media.muted) {\n\t\t\t\t\t\tpositionVolumeHandle(0);\n\t\t\t\t\t\tmute.removeClass('mejs-mute').addClass('mejs-unmute');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpositionVolumeHandle(media.volume);\n\t\t\t\t\t\tmute.removeClass('mejs-unmute').addClass('mejs-mute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateVolumeSlider(e);\n\t\t\t}, false);\n\t\t\t\n\t\t\t// mutes the media and sets the volume icon muted if the initial volume is set to 0\n\t\t\tif (player.options.startVolume === 0) {\n\t\t\t\tmedia.setMuted(true);\n\t\t\t}\n\t\t\t\n\t\t\t// shim gets the startvolume as a parameter, but we have to set it on the native <video> and <audio> elements\n\t\t\tif (media.pluginType === 'native') {\n\t\t\t\tmedia.setVolume(player.options.startVolume);\n\t\t\t}\n\t\t\t\n\t\t\tt.container.on('controlsresize', function() {\n\t\t\t\tpositionVolumeHandle(media.volume);\n\t\t\t});\n\t\t}\n\t});\n\t\n})(mejs.$);\n\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tusePluginFullScreen: true,\n\t\tnewWindowCallback: function() { return '';},\n\t\tfullscreenText: mejs.i18n.t('Fullscreen')\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\n\t\tisFullScreen: false,\n\n\t\tisNativeFullScreen: false,\n\n\t\tisInIframe: false,\n\t\t\t\t\t\t\t\n\t\t// Possible modes\n\t\t// (1) 'native-native' \tHTML5 video  + browser fullscreen (IE10+, etc.)\n\t\t// (2) 'plugin-native' \tplugin video + browser fullscreen (fails in some versions of Firefox)\n\t\t// (3) 'fullwindow' \tFull window (retains all UI)\n\t\t// usePluginFullScreen = true\n\t\t// (4) 'plugin-click' \tFlash 1 - click through with pointer events\n\t\t// (5) 'plugin-hover' \tFlash 2 - hover popup in flash (IE6-8)\t\t\n\t\tfullscreenMode: '',\n\n\t\tbuildfullscreen: function(player, controls, layers, media) {\n\n\t\t\tif (!player.isVideo)\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\tplayer.isInIframe = (window.location != window.parent.location);\t\n\t\t\n\t\t\t// detect on start\n\t\t\tmedia.addEventListener('play', function() { player.detectFullscreenMode(); });\n\t\t\t\t\n\t\t\t// build button\n\t\t\tvar t = this,\n\t\t\t\thideTimeout = null,\n\t\t\t\tfullscreenBtn =\n\t\t\t\t\t$('<div class=\"mejs-button mejs-fullscreen-button\">' +\n\t\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + t.options.fullscreenText + '\" aria-label=\"' + t.options.fullscreenText + '\"></button>' +\n\t\t\t\t\t'</div>')\n\t\t\t\t\t.appendTo(controls)\n\t\t\t\t\t.on('click', function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// toggle fullscreen\n\t\t\t\t\t\tvar isFullScreen = (mejs.MediaFeatures.hasTrueNativeFullScreen && mejs.MediaFeatures.isFullScreen()) || player.isFullScreen;\n\t\n\t\t\t\t\t\tif (isFullScreen) {\n\t\t\t\t\t\t\tplayer.exitFullScreen();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.enterFullScreen();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t.on('mouseover', function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// very old browsers with a plugin\n\t\t\t\t\t\tif (t.fullscreenMode == 'plugin-hover') {\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (hideTimeout !== null) {\n\t\t\t\t\t\t\t\tclearTimeout(hideTimeout);\n\t\t\t\t\t\t\t\tdelete hideTimeout;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tvar buttonPos = fullscreenBtn.offset(),\n\t\t\t\t\t\t\t\tcontainerPos = player.container.offset();\n\t\n\t\t\t\t\t\t\tmedia.positionFullscreenButton(buttonPos.left - containerPos.left, buttonPos.top - containerPos.top, true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})\n\t\t\t\t\t.on('mouseout', function() {\n\n\t\t\t\t\t\tif (t.fullscreenMode == 'plugin-hover') {\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (hideTimeout !== null) {\n\t\t\t\t\t\t\t\tclearTimeout(hideTimeout);\n\t\t\t\t\t\t\t\tdelete hideTimeout;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\thideTimeout = setTimeout(function() {\n\t\t\t\t\t\t\t\tmedia.hideFullscreenButton();\n\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t\n\n\t\t\tplayer.fullscreenBtn = fullscreenBtn;\n\n\t\t\tt.globalBind('keydown',function (e) {\n\t\t\t\tif (e.keyCode == 27 && ((mejs.MediaFeatures.hasTrueNativeFullScreen && mejs.MediaFeatures.isFullScreen()) || t.isFullScreen)) {\n\t\t\t\t\tplayer.exitFullScreen();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tt.normalHeight = 0;\n\t\t\tt.normalWidth = 0;\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t// setup native fullscreen event\n\t\t\tif (mejs.MediaFeatures.hasTrueNativeFullScreen) {\n\n\t\t\t\t// chrome doesn't alays fire this in an iframe\n\t\t\t\tvar fullscreenChanged = function(e) {\n\t\t\t\t\tif (player.isFullScreen) {\n\t\t\t\t\t\tif (mejs.MediaFeatures.isFullScreen()) {\n\t\t\t\t\t\t\tplayer.isNativeFullScreen = true;\n\t\t\t\t\t\t\t// reset the controls once we are fully in full screen\n\t\t\t\t\t\t\tplayer.setControlsSize();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplayer.isNativeFullScreen = false;\n\t\t\t\t\t\t\t// when a user presses ESC\n\t\t\t\t\t\t\t// make sure to put the player back into place\n\t\t\t\t\t\t\tplayer.exitFullScreen();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tplayer.globalBind(mejs.MediaFeatures.fullScreenEventName, fullscreenChanged);\n\t\t\t}\n\n\t\t},\n\t\t\n\t\tdetectFullscreenMode: function() {\n\t\t\t\n\t\t\tvar t = this,\n\t\t\t\tmode = '',\n\t\t\t\tfeatures = mejs.MediaFeatures;\n\t\t\t\n\t\t\tif (features.hasTrueNativeFullScreen && t.media.pluginType === 'native') {\n\t\t\t\tmode = 'native-native';\n\t\t\t} else if (features.hasTrueNativeFullScreen && t.media.pluginType !== 'native' && !features.hasFirefoxPluginMovingProblem) {\n\t\t\t\tmode = 'plugin-native';\t\t\t\t\t\n\t\t\t} else if (t.usePluginFullScreen) { \n\t\t\t\tif (mejs.MediaFeatures.supportsPointerEvents) {\n\t\t\t\t\tmode = 'plugin-click';\n\t\t\t\t\t// this needs some special setup\n\t\t\t\t\tt.createPluginClickThrough();\t\t\t\t\n\t\t\t\t} else { \n\t\t\t\t\tmode = 'plugin-hover';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tmode = 'fullwindow';\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tt.fullscreenMode = mode;\t\t\n\t\t\treturn mode;\n\t\t},\n\t\t\n\t\tisPluginClickThroughCreated: false,\n\t\t\n\t\tcreatePluginClickThrough: function() {\n\t\t\t\t\n\t\t\tvar t = this;\n\t\t\t\n\t\t\t// don't build twice\n\t\t\tif (t.isPluginClickThroughCreated) {\n\t\t\t\treturn;\n\t\t\t}\t\n\n\t\t\t// allows clicking through the fullscreen button and controls down directly to Flash\n\n\t\t\t/*\n\t\t\t When a user puts his mouse over the fullscreen button, we disable the controls so that mouse events can go down to flash (pointer-events)\n\t\t\t We then put a divs over the video and on either side of the fullscreen button\n\t\t\t to capture mouse movement and restore the controls once the mouse moves outside of the fullscreen button\n\t\t\t*/\n\n\t\t\tvar fullscreenIsDisabled = false,\n\t\t\t\trestoreControls = function() {\n\t\t\t\t\tif (fullscreenIsDisabled) {\n\t\t\t\t\t\t// hide the hovers\n\t\t\t\t\t\tfor (var i in hoverDivs) {\n\t\t\t\t\t\t\thoverDivs[i].hide();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// restore the control bar\n\t\t\t\t\t\tt.fullscreenBtn.css('pointer-events', '');\n\t\t\t\t\t\tt.controls.css('pointer-events', '');\n\n\t\t\t\t\t\t// prevent clicks from pausing video\n\t\t\t\t\t\tt.media.removeEventListener('click', t.clickToPlayPauseCallback);\n\n\t\t\t\t\t\t// store for later\n\t\t\t\t\t\tfullscreenIsDisabled = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thoverDivs = {},\n\t\t\t\thoverDivNames = ['top', 'left', 'right', 'bottom'],\n\t\t\t\ti, len,\n\t\t\t\tpositionHoverDivs = function() {\n\t\t\t\t\tvar fullScreenBtnOffsetLeft = fullscreenBtn.offset().left - t.container.offset().left,\n\t\t\t\t\t\tfullScreenBtnOffsetTop = fullscreenBtn.offset().top - t.container.offset().top,\n\t\t\t\t\t\tfullScreenBtnWidth = fullscreenBtn.outerWidth(true),\n\t\t\t\t\t\tfullScreenBtnHeight = fullscreenBtn.outerHeight(true),\n\t\t\t\t\t\tcontainerWidth = t.container.width(),\n\t\t\t\t\t\tcontainerHeight = t.container.height();\n\n\t\t\t\t\tfor (i in hoverDivs) {\n\t\t\t\t\t\thoverDivs[i].css({position: 'absolute', top: 0, left: 0}); //, backgroundColor: '#f00'});\n\t\t\t\t\t}\n\n\t\t\t\t\t// over video, but not controls\n\t\t\t\t\thoverDivs['top']\n\t\t\t\t\t\t.width( containerWidth )\n\t\t\t\t\t\t.height( fullScreenBtnOffsetTop );\n\n\t\t\t\t\t// over controls, but not the fullscreen button\n\t\t\t\t\thoverDivs['left']\n\t\t\t\t\t\t.width( fullScreenBtnOffsetLeft )\n\t\t\t\t\t\t.height( fullScreenBtnHeight )\n\t\t\t\t\t\t.css({top: fullScreenBtnOffsetTop});\n\n\t\t\t\t\t// after the fullscreen button\n\t\t\t\t\thoverDivs['right']\n\t\t\t\t\t\t.width( containerWidth - fullScreenBtnOffsetLeft - fullScreenBtnWidth )\n\t\t\t\t\t\t.height( fullScreenBtnHeight )\n\t\t\t\t\t\t.css({top: fullScreenBtnOffsetTop,\n\t\t\t\t\t\t\t left: fullScreenBtnOffsetLeft + fullScreenBtnWidth});\n\n\t\t\t\t\t// under the fullscreen button\n\t\t\t\t\thoverDivs['bottom']\n\t\t\t\t\t\t.width( containerWidth )\n\t\t\t\t\t\t.height( containerHeight - fullScreenBtnHeight - fullScreenBtnOffsetTop )\n\t\t\t\t\t\t.css({top: fullScreenBtnOffsetTop + fullScreenBtnHeight});\n\t\t\t\t};\n\n\t\t\tt.globalBind('resize', function() {\n\t\t\t\tpositionHoverDivs();\n\t\t\t});\n\n\t\t\tfor (i = 0, len = hoverDivNames.length; i < len; i++) {\n\t\t\t\thoverDivs[hoverDivNames[i]] = $('<div class=\"mejs-fullscreen-hover\" />').appendTo(t.container).mouseover(restoreControls).hide();\n\t\t\t}\n\n\t\t\t// on hover, kill the fullscreen button's HTML handling, allowing clicks down to Flash\n\t\t\tfullscreenBtn.on('mouseover',function() {\n\n\t\t\t\tif (!t.isFullScreen) {\n\n\t\t\t\t\tvar buttonPos = fullscreenBtn.offset(),\n\t\t\t\t\t\tcontainerPos = player.container.offset();\n\n\t\t\t\t\t// move the button in Flash into place\n\t\t\t\t\tmedia.positionFullscreenButton(buttonPos.left - containerPos.left, buttonPos.top - containerPos.top, false);\n\n\t\t\t\t\t// allows click through\n\t\t\t\t\tt.fullscreenBtn.css('pointer-events', 'none');\n\t\t\t\t\tt.controls.css('pointer-events', 'none');\n\n\t\t\t\t\t// restore click-to-play\n\t\t\t\t\tt.media.addEventListener('click', t.clickToPlayPauseCallback);\n\n\t\t\t\t\t// show the divs that will restore things\n\t\t\t\t\tfor (i in hoverDivs) {\n\t\t\t\t\t\thoverDivs[i].show();\n\t\t\t\t\t}\n\n\t\t\t\t\tpositionHoverDivs();\n\n\t\t\t\t\tfullscreenIsDisabled = true;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// restore controls anytime the user enters or leaves fullscreen\n\t\t\tmedia.addEventListener('fullscreenchange', function(e) {\n\t\t\t\tt.isFullScreen = !t.isFullScreen;\n\t\t\t\t// don't allow plugin click to pause video - messes with\n\t\t\t\t// plugin's controls\n\t\t\t\tif (t.isFullScreen) {\n\t\t\t\t\tt.media.removeEventListener('click', t.clickToPlayPauseCallback);\n\t\t\t\t} else {\n\t\t\t\t\tt.media.addEventListener('click', t.clickToPlayPauseCallback);\n\t\t\t\t}\n\t\t\t\trestoreControls();\n\t\t\t});\n\n\n\t\t\t// the mouseout event doesn't work on the fullscren button, because we already killed the pointer-events\n\t\t\t// so we use the document.mousemove event to restore controls when the mouse moves outside the fullscreen button\n\n\t\t\tt.globalBind('mousemove', function(e) {\n\n\t\t\t\t// if the mouse is anywhere but the fullsceen button, then restore it all\n\t\t\t\tif (fullscreenIsDisabled) {\n\n\t\t\t\t\tvar fullscreenBtnPos = fullscreenBtn.offset();\n\n\n\t\t\t\t\tif (e.pageY < fullscreenBtnPos.top || e.pageY > fullscreenBtnPos.top + fullscreenBtn.outerHeight(true) ||\n\t\t\t\t\t\te.pageX < fullscreenBtnPos.left || e.pageX > fullscreenBtnPos.left + fullscreenBtn.outerWidth(true)\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\tfullscreenBtn.css('pointer-events', '');\n\t\t\t\t\t\tt.controls.css('pointer-events', '');\n\n\t\t\t\t\t\tfullscreenIsDisabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t\tt.isPluginClickThroughCreated = true;\n\t\t},\t\t\n\n\t\tcleanfullscreen: function(player) {\n\t\t\tplayer.exitFullScreen();\n\t\t},\n\n        containerSizeTimeout: null,\n\n\t\tenterFullScreen: function() {\n\n\t\t\tvar t = this;\n\n\t\t\tif (mejs.MediaFeatures.hasiOSFullScreen) {\n\t\t\t\tt.media.webkitEnterFullscreen();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// set it to not show scroll bars so 100% will work\n            $(document.documentElement).addClass('mejs-fullscreen');\n\n\t\t\t// store sizing\n\t\t\tt.normalHeight = t.container.height();\n\t\t\tt.normalWidth = t.container.width();\n\n\n\n\t\t\t// attempt to do true fullscreen\n\t\t\tif (t.fullscreenMode === 'native-native' || t.fullscreenMode === 'plugin-native') {\n\n\t\t\t\tmejs.MediaFeatures.requestFullScreen(t.container[0]);\n\t\t\t\t//return;\n\n\t\t\t\tif (t.isInIframe) {\n\t\t\t\t\t// sometimes exiting from fullscreen doesn't work\n\t\t\t\t\t// notably in Chrome <iframe>. Fixed in version 17\n\t\t\t\t\tsetTimeout(function checkFullscreen() {\n\n\t\t\t\t\t\tif (t.isNativeFullScreen) {\n\t\t\t\t\t\t\tvar percentErrorMargin = 0.002, // 0.2%\n\t\t\t\t\t\t\t\twindowWidth = $(window).width(),\n\t\t\t\t\t\t\t\tscreenWidth = screen.width,\n\t\t\t\t\t\t\t\tabsDiff = Math.abs(screenWidth - windowWidth),\n\t\t\t\t\t\t\t\tmarginError = screenWidth * percentErrorMargin;\n\n\t\t\t\t\t\t\t// check if the video is suddenly not really fullscreen\n\t\t\t\t\t\t\tif (absDiff > marginError) {\n\t\t\t\t\t\t\t\t// manually exit\n\t\t\t\t\t\t\t\tt.exitFullScreen();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// test again\n\t\t\t\t\t\t\t\tsetTimeout(checkFullscreen, 500);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if (t.fullscreeMode == 'fullwindow') {\t\t\t\t\n\t\t\t\t// move into position\n\t\t\t\t\n\t\t\t}\t\t\t\n\t\t\t\n\t\t\t// make full size\n\t\t\tt.container\n\t\t\t\t.addClass('mejs-container-fullscreen')\n\t\t\t\t.width('100%')\n\t\t\t\t.height('100%');\n\t\t\t\t//.css({position: 'fixed', left: 0, top: 0, right: 0, bottom: 0, overflow: 'hidden', width: '100%', height: '100%', 'z-index': 1000});\n\n\t\t\t// Only needed for safari 5.1 native full screen, can cause display issues elsewhere\n\t\t\t// Actually, it seems to be needed for IE8, too\n\t\t\t//if (mejs.MediaFeatures.hasTrueNativeFullScreen) {\n\t\t\t\tt.containerSizeTimeout = setTimeout(function() {\n\t\t\t\t\tt.container.css({width: '100%', height: '100%'});\n\t\t\t\t\tt.setControlsSize();\n\t\t\t\t}, 500);\n\t\t\t//}\n\n\t\t\tif (t.media.pluginType === 'native') {\n\t\t\t\tt.$media\n\t\t\t\t\t.width('100%')\n\t\t\t\t\t.height('100%');\n\t\t\t} else {\n\t\t\t\tt.container.find('.mejs-shim')\n\t\t\t\t\t.width('100%')\n\t\t\t\t\t.height('100%');\t\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tvar win = $(window),\n\t\t\t\t\t\twinW = win.width(),\n\t\t\t\t\t\twinH = win.height();\n\t\t\t\t\t\t\t\n\t\t\t\t\tt.media.setVideoSize(winW,winH);\t\t\t\n\t\t\t\t}, 500);\n\t\t\t}\n\n\t\t\tt.layers.children('div')\n\t\t\t\t.width('100%')\n\t\t\t\t.height('100%');\n\n\t\t\tif (t.fullscreenBtn) {\n\t\t\t\tt.fullscreenBtn\n\t\t\t\t\t.removeClass('mejs-fullscreen')\n\t\t\t\t\t.addClass('mejs-unfullscreen');\n\t\t\t}\n\n\t\t\tt.setControlsSize();\n\t\t\tt.isFullScreen = true;\n\n\t\t\tt.container.find('.mejs-captions-text').css('font-size', screen.width / t.width * 1.00 * 100 + '%');\n\t\t\tt.container.find('.mejs-captions-position').css('bottom', '45px');\n\n\t\t\tt.container.trigger('enteredfullscreen');\n\t\t},\n\n\t\texitFullScreen: function() {\n\n\t\t\tvar t = this;\n\n            // Prevent container from attempting to stretch a second time\n            clearTimeout(t.containerSizeTimeout);\n\n\t\t\t// firefox can't adjust plugins\n\t\t\t/*\n\t\t\tif (t.media.pluginType !== 'native' && mejs.MediaFeatures.isFirefox) {\n\t\t\t\tt.media.setFullscreen(false);\n\t\t\t\t//player.isFullScreen = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t*/\n\n\t\t\t// come out of native fullscreen\n\t\t\tif (mejs.MediaFeatures.hasTrueNativeFullScreen && (mejs.MediaFeatures.isFullScreen() || t.isFullScreen)) {\n\t\t\t\tmejs.MediaFeatures.cancelFullScreen();\n\t\t\t}\n\n\t\t\t// restore scroll bars to document\n            $(document.documentElement).removeClass('mejs-fullscreen');\n\n\t\t\tt.container\n\t\t\t\t.removeClass('mejs-container-fullscreen')\n\t\t\t\t.width(t.normalWidth)\n\t\t\t\t.height(t.normalHeight);\n\n\t\t\tif (t.media.pluginType === 'native') {\n\t\t\t\tt.$media\n\t\t\t\t\t.width(t.normalWidth)\n\t\t\t\t\t.height(t.normalHeight);\n\t\t\t} else {\n\t\t\t\tt.container.find('.mejs-shim')\n\t\t\t\t\t.width(t.normalWidth)\n\t\t\t\t\t.height(t.normalHeight);\n\n\t\t\t\tt.media.setVideoSize(t.normalWidth, t.normalHeight);\n\t\t\t}\n\n\t\t\tt.layers.children('div')\n\t\t\t\t.width(t.normalWidth)\n\t\t\t\t.height(t.normalHeight);\n\n\t\t\tt.fullscreenBtn\n\t\t\t\t.removeClass('mejs-unfullscreen')\n\t\t\t\t.addClass('mejs-fullscreen');\n\n\t\t\tt.setControlsSize();\n\t\t\tt.isFullScreen = false;\n\n\t\t\tt.container.find('.mejs-captions-text').css('font-size','');\n\t\t\tt.container.find('.mejs-captions-position').css('bottom', '');\n\n\t\t\tt.container.trigger('exitedfullscreen');\n\t\t}\n\t});\n\n})(mejs.$);\n\n(function($) {\n\n\t// Speed\n\t$.extend(mejs.MepDefaults, {\n\n\t\t// We also support to pass object like this:\n\t\t// [{name: 'Slow', value: '0.75'}, {name: 'Normal', value: '1.00'}, ...]\n\t\tspeeds: ['2.00', '1.50', '1.25', '1.00', '0.75'],\n\n\t\tdefaultSpeed: '1.00',\n\t\t\n\t\tspeedChar: 'x'\n\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\n\t\tbuildspeed: function(player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\tif (t.media.pluginType == 'native') {\n\t\t\t\tvar \n\t\t\t\t\tspeedButton = null,\n\t\t\t\t\tspeedSelector = null,\n\t\t\t\t\tplaybackSpeed = null,\n\t\t\t\t\tinputId = null;\n\n\t\t\t\tvar speeds = [];\n\t\t\t\tvar defaultInArray = false;\n\t\t\t\tfor (var i=0, len=t.options.speeds.length; i < len; i++) {\n\t\t\t\t\tvar s = t.options.speeds[i];\n\t\t\t\t\tif (typeof(s) === 'string'){\n\t\t\t\t\t\tspeeds.push({\n\t\t\t\t\t\t\tname: s + t.options.speedChar,\n\t\t\t\t\t\t\tvalue: s\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(s === t.options.defaultSpeed) {\n\t\t\t\t\t\t\tdefaultInArray = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tspeeds.push(s);\n\t\t\t\t\t\tif(s.value === t.options.defaultSpeed) {\n\t\t\t\t\t\t\tdefaultInArray = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!defaultInArray) {\n\t\t\t\t\tspeeds.push({\n\t\t\t\t\t\tname: t.options.defaultSpeed + t.options.speedChar,\n\t\t\t\t\t\tvalue: t.options.defaultSpeed\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tspeeds.sort(function(a, b) {\n\t\t\t\t\treturn parseFloat(b.value) - parseFloat(a.value);\n\t\t\t\t});\n\n\t\t\t\tvar getSpeedNameFromValue = function(value) {\n\t\t\t\t\tfor(i=0,len=speeds.length; i <len; i++) {\n\t\t\t\t\t\tif (speeds[i].value === value) {\n\t\t\t\t\t\t\treturn speeds[i].name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar html = '<div class=\"mejs-button mejs-speed-button\">' +\n\t\t\t\t\t\t\t'<button type=\"button\">' + getSpeedNameFromValue(t.options.defaultSpeed) + '</button>' +\n\t\t\t\t\t\t\t'<div class=\"mejs-speed-selector\">' +\n\t\t\t\t\t\t\t'<ul>';\n\n\t\t\t\tfor (i = 0, il = speeds.length; i<il; i++) {\n\t\t\t\t\tinputId = t.id + '-speed-' + speeds[i].value;\n\t\t\t\t\thtml += '<li>' + \n\t\t\t\t\t\t\t\t'<input type=\"radio\" name=\"speed\" ' + \n\t\t\t\t\t\t\t\t\t\t\t'value=\"' + speeds[i].value + '\" ' +\n\t\t\t\t\t\t\t\t\t\t\t'id=\"' + inputId + '\" ' +\n\t\t\t\t\t\t\t\t\t\t\t(speeds[i].value === t.options.defaultSpeed ? ' checked' : '') +\n\t\t\t\t\t\t\t\t\t\t\t' />' +\n\t\t\t\t\t\t\t\t'<label for=\"' + inputId + '\" ' +\n\t\t\t\t\t\t\t\t\t\t\t(speeds[i].value === t.options.defaultSpeed ? ' class=\"mejs-speed-selected\"' : '') +\n\t\t\t\t\t\t\t\t\t\t\t'>' + speeds[i].name + '</label>' +\n\t\t\t\t\t\t\t'</li>';\n\t\t\t\t}\n\t\t\t\thtml += '</ul></div></div>';\n\n\t\t\t\tspeedButton = $(html).appendTo(controls);\n\t\t\t\tspeedSelector = speedButton.find('.mejs-speed-selector');\n\n\t\t\t\tplaybackSpeed = t.options.defaultSpeed;\n\n\t\t\t\tmedia.addEventListener('loadedmetadata', function(e) {\n\t\t\t\t\tif (playbackSpeed) {\n\t\t\t\t\t\tmedia.playbackRate = parseFloat(playbackSpeed);\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\n\t\t\t\tspeedSelector\n\t\t\t\t\t.on('click', 'input[type=\"radio\"]', function() {\n\t\t\t\t\t\tvar newSpeed = $(this).attr('value');\n\t\t\t\t\t\tplaybackSpeed = newSpeed;\n\t\t\t\t\t\tmedia.playbackRate = parseFloat(newSpeed);\n\t\t\t\t\t\tspeedButton.find('button').html(getSpeedNameFromValue(newSpeed));\n\t\t\t\t\t\tspeedButton.find('.mejs-speed-selected').removeClass('mejs-speed-selected');\n\t\t\t\t\t\tspeedButton.find('input[type=\"radio\"]:checked').next().addClass('mejs-speed-selected');\n\t\t\t\t\t});\n\t\t\t\tspeedButton\n\t\t\t\t\t.one( 'mouseenter focusin', function() {\n\t\t\t\t\t\tspeedSelector\n\t\t\t\t\t\t\t.height(\n\t\t\t\t\t\t\t\tspeedButton.find('.mejs-speed-selector ul').outerHeight(true) +\n\t\t\t\t\t\t\t\tspeedButton.find('.mejs-speed-translations').outerHeight(true))\n\t\t\t\t\t\t\t.css('top', (-1 * speedSelector.height()) + 'px');\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n})(mejs.$);\n\n(function($) {\n\n\t// add extra default options\n\t$.extend(mejs.MepDefaults, {\n\t\t// this will automatically turn on a <track>\n\t\tstartLanguage: '',\n\n\t\ttracksText: mejs.i18n.t('Captions/Subtitles'),\n\n\t\t// By default, no WAI-ARIA live region - don't make a\n\t\t// screen reader speak captions over an audio track.\n\t\ttracksAriaLive: false,\n\n\t\t// option to remove the [cc] button when no <track kind=\"subtitles\"> are present\n\t\thideCaptionsButtonWhenEmpty: true,\n\n\t\t// If true and we only have one track, change captions to popup\n\t\ttoggleCaptionsButtonWhenOnlyOne: false,\n\n\t\t// #id or .class\n\t\tslidesSelector: ''\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\n\t\thasChapters: false,\n\n\t\tcleartracks: function(player, controls, layers, media){\n\t\t\tif(player) {\n\t\t\t\tif(player.captions) player.captions.remove();\n\t\t\t\tif(player.chapters) player.chapters.remove();\n\t\t\t\tif(player.captionsText) player.captionsText.remove();\n\t\t\t\tif(player.captionsButton) player.captionsButton.remove();\n\t\t\t}\n\t\t},\n\t\tbuildtracks: function(player, controls, layers, media) {\n\t\t\tif (player.tracks.length === 0)\n\t\t\t\treturn;\n\n\t\t\tvar t = this,\n\t\t\t\tattr = t.options.tracksAriaLive ?\n\t\t\t\t\t'role=\"log\" aria-live=\"assertive\" aria-atomic=\"false\"' : '',\n\t\t\t\ti;\n\n\t\t\tif (t.domNode.textTracks) { // if browser will do native captions, prefer mejs captions, loop through tracks and hide\n\t\t\t\tfor (i = t.domNode.textTracks.length - 1; i >= 0; i--) {\n\t\t\t\t\tt.domNode.textTracks[i].mode = \"hidden\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tt.cleartracks(player, controls, layers, media);\n\t\t\tplayer.chapters =\n\t\t\t\t\t$('<div class=\"mejs-chapters mejs-layer\"></div>')\n\t\t\t\t\t\t.prependTo(layers).hide();\n\t\t\tplayer.captions =\n\t\t\t\t\t$('<div class=\"mejs-captions-layer mejs-layer\"><div class=\"mejs-captions-position mejs-captions-position-hover\" ' +\n\t\t\t\t\tattr + '><span class=\"mejs-captions-text\"></span></div></div>')\n\t\t\t\t\t\t.prependTo(layers).hide();\n\t\t\tplayer.captionsText = player.captions.find('.mejs-captions-text');\n\t\t\tplayer.captionsButton =\n\t\t\t\t\t$('<div class=\"mejs-button mejs-captions-button\">'+\n\t\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + t.options.tracksText + '\" aria-label=\"' + t.options.tracksText + '\"></button>'+\n\t\t\t\t\t\t'<div class=\"mejs-captions-selector\">'+\n\t\t\t\t\t\t\t'<ul>'+\n\t\t\t\t\t\t\t\t'<li>'+\n\t\t\t\t\t\t\t\t\t'<input type=\"radio\" name=\"' + player.id + '_captions\" id=\"' + player.id + '_captions_none\" value=\"none\" checked=\"checked\" />' +\n\t\t\t\t\t\t\t\t\t'<label for=\"' + player.id + '_captions_none\">' + mejs.i18n.t('None') +'</label>'+\n\t\t\t\t\t\t\t\t'</li>'\t+\n\t\t\t\t\t\t\t'</ul>'+\n\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t'</div>')\n\t\t\t\t\t\t.appendTo(controls);\n\n\n\t\t\tvar subtitleCount = 0;\n\t\t\tfor (i=0; i<player.tracks.length; i++) {\n\t\t\t\tif (player.tracks[i].kind == 'subtitles') {\n\t\t\t\t\tsubtitleCount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if only one language then just make the button a toggle\n\t\t\tif (t.options.toggleCaptionsButtonWhenOnlyOne && subtitleCount == 1){\n\t\t\t\t// click\n\t\t\t\tplayer.captionsButton.on('click',function() {\n\t\t\t\t\tif (player.selectedTrack === null) {\n\t\t\t\t\t\tlang = player.tracks[0].srclang;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlang = 'none';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.setTrack(lang);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// hover or keyboard focus\n\t\t\t\tif (t.options.allowOffScreen) {\n\t\t\t\t\tplayer.captionsButton.on('mouseenter focusin', function () {\n\t\t\t\t\t\t$(this).find('.mejs-captions-selector').removeClass('mejs-offscreen');\n\t\t\t\t\t});\n\n\t\t\t\t\t// handle clicks to the language radio buttons\n\t\t\t\t\tplayer.captionsButton.on('click', 'input[type=radio]', function () {\n\t\t\t\t\t\t\tlang = this.value;\n\t\t\t\t\t\t\tplayer.setTrack(lang);\n\t\t\t\t\t});\n\n\t\t\t\t\tplayer.captionsButton.on('mouseleave focusout', function () {\n\t\t\t\t\t\t$(this).find(\".mejs-captions-selector\").addClass(\"mejs-offscreen\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!player.options.alwaysShowControls) {\n\t\t\t\t// move with controls\n\t\t\t\tplayer.container\n\t\t\t\t\t.bind('controlsshown', function () {\n\t\t\t\t\t\t// push captions above controls\n\t\t\t\t\t\tplayer.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');\n\n\t\t\t\t\t})\n\t\t\t\t\t.bind('controlshidden', function () {\n\t\t\t\t\t\tif (!media.paused) {\n\t\t\t\t\t\t\t// move back to normal place\n\t\t\t\t\t\t\tplayer.container.find('.mejs-captions-position').removeClass('mejs-captions-position-hover');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tplayer.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');\n\t\t\t}\n\n\t\t\tplayer.trackToLoad = -1;\n\t\t\tplayer.selectedTrack = null;\n\t\t\tplayer.isLoadingTrack = false;\n\n\t\t\t// add to list\n\t\t\tfor (i=0; i<player.tracks.length; i++) {\n\t\t\t\tif (player.tracks[i].kind == 'subtitles') {\n\t\t\t\t\tplayer.addTrackButton(player.tracks[i].srclang, player.tracks[i].label);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start loading tracks\n\t\t\tplayer.loadNextTrack();\n\n\t\t\tmedia.addEventListener('timeupdate',function(e) {\n\t\t\t\tplayer.displayCaptions();\n\t\t\t}, false);\n\n\t\t\tif (player.options.slidesSelector !== '') {\n\t\t\t\tplayer.slidesContainer = $(player.options.slidesSelector);\n\n\t\t\t\tmedia.addEventListener('timeupdate',function(e) {\n\t\t\t\t\tplayer.displaySlides();\n\t\t\t\t}, false);\n\n\t\t\t}\n\n\t\t\tmedia.addEventListener('loadedmetadata', function(e) {\n\t\t\t\tplayer.displayChapters();\n\t\t\t}, false);\n\n\t\t\tplayer.container.hover(\n\t\t\t\tfunction () {\n\t\t\t\t\t// chapters\n\t\t\t\t\tif (player.hasChapters) {\n\t\t\t\t\t\tplayer.chapters.removeClass('mejs-offscreen');\n\t\t\t\t\t\tplayer.chapters.fadeIn(200).height(player.chapters.find('.mejs-chapter').outerHeight());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tif (player.hasChapters && !media.paused) {\n\t\t\t\t\t\tplayer.chapters.fadeOut(200, function() {\n\t\t\t\t\t\t\t$(this).addClass('mejs-offscreen');\n\t\t\t\t\t\t\t$(this).css('display','block');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tt.container.on('controlsresize', function() {\n\t\t\t\tt.adjustLanguageBox();\n\t\t\t});\n\n\t\t\t// check for autoplay\n\t\t\tif (player.node.getAttribute('autoplay') !== null) {\n\t\t\t\tplayer.chapters.addClass('mejs-offscreen');\n\t\t\t}\n\t\t},\n\n\t\tsetTrack: function(lang){\n\n\t\t\tvar t = this,\n\t\t\t\ti;\n\n\t\t\tif (lang == 'none') {\n\t\t\t\tt.selectedTrack = null;\n\t\t\t\tt.captionsButton.removeClass('mejs-captions-enabled');\n\t\t\t} else {\n\t\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\t\tif (t.tracks[i].srclang == lang) {\n\t\t\t\t\t\tif (t.selectedTrack === null)\n\t\t\t\t\t\t\tt.captionsButton.addClass('mejs-captions-enabled');\n\t\t\t\t\t\tt.selectedTrack = t.tracks[i];\n\t\t\t\t\t\tt.captions.attr('lang', t.selectedTrack.srclang);\n\t\t\t\t\t\tt.displayCaptions();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tloadNextTrack: function() {\n\t\t\tvar t = this;\n\n\t\t\tt.trackToLoad++;\n\t\t\tif (t.trackToLoad < t.tracks.length) {\n\t\t\t\tt.isLoadingTrack = true;\n\t\t\t\tt.loadTrack(t.trackToLoad);\n\t\t\t} else {\n\t\t\t\t// add done?\n\t\t\t\tt.isLoadingTrack = false;\n\n\t\t\t\tt.checkForTracks();\n\t\t\t}\n\t\t},\n\n\t\tloadTrack: function(index){\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ttrack = t.tracks[index],\n\t\t\t\tafter = function() {\n\n\t\t\t\t\ttrack.isLoaded = true;\n\n\t\t\t\t\tt.enableTrackButton(track.srclang, track.label);\n\n\t\t\t\t\tt.loadNextTrack();\n\n\t\t\t\t};\n\n\n\t\t\t$.ajax({\n\t\t\t\turl: track.src,\n\t\t\t\tdataType: \"text\",\n\t\t\t\tsuccess: function(d) {\n\n\t\t\t\t\t// parse the loaded file\n\t\t\t\t\tif (typeof d == \"string\" && (/<tt\\s+xml/ig).exec(d)) {\n\t\t\t\t\t\ttrack.entries = mejs.TrackFormatParser.dfxp.parse(d);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttrack.entries = mejs.TrackFormatParser.webvtt.parse(d);\n\t\t\t\t\t}\n\n\t\t\t\t\tafter();\n\n\t\t\t\t\tif (track.kind == 'chapters') {\n\t\t\t\t\t\tt.media.addEventListener('play', function(e) {\n\t\t\t\t\t\t\tif (t.media.duration > 0) {\n\t\t\t\t\t\t\t\tt.displayChapters(track);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (track.kind == 'slides') {\n\t\t\t\t\t\tt.setupSlides(track);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\tt.removeTrackButton(track.srclang);\n\t\t\t\t\tt.loadNextTrack();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tenableTrackButton: function(lang, label) {\n\t\t\tvar t = this;\n\n\t\t\tif (label === '') {\n\t\t\t\tlabel = mejs.language.codes[lang] || lang;\n\t\t\t}\n\n\t\t\tt.captionsButton\n\t\t\t\t.find('input[value=' + lang + ']')\n\t\t\t\t\t.prop('disabled',false)\n\t\t\t\t.siblings('label')\n\t\t\t\t\t.html( label );\n\n\t\t\t// auto select\n\t\t\tif (t.options.startLanguage == lang) {\n\t\t\t\t$('#' + t.id + '_captions_' + lang).prop('checked', true).trigger('click');\n\t\t\t}\n\n\t\t\tt.adjustLanguageBox();\n\t\t},\n\n\t\tremoveTrackButton: function(lang) {\n\t\t\tvar t = this;\n\n\t\t\tt.captionsButton.find('input[value=' + lang + ']').closest('li').remove();\n\n\t\t\tt.adjustLanguageBox();\n\t\t},\n\n\t\taddTrackButton: function(lang, label) {\n\t\t\tvar t = this;\n\t\t\tif (label === '') {\n\t\t\t\tlabel = mejs.language.codes[lang] || lang;\n\t\t\t}\n\n\t\t\tt.captionsButton.find('ul').append(\n\t\t\t\t$('<li>'+\n\t\t\t\t\t'<input type=\"radio\" name=\"' + t.id + '_captions\" id=\"' + t.id + '_captions_' + lang + '\" value=\"' + lang + '\" disabled=\"disabled\" />' +\n\t\t\t\t\t'<label for=\"' + t.id + '_captions_' + lang + '\">' + label + ' (loading)' + '</label>'+\n\t\t\t\t'</li>')\n\t\t\t);\n\n\t\t\tt.adjustLanguageBox();\n\n\t\t\t// remove this from the dropdownlist (if it exists)\n\t\t\tt.container.find('.mejs-captions-translations option[value=' + lang + ']').remove();\n\t\t},\n\n\t\tadjustLanguageBox:function() {\n\t\t\tvar t = this;\n\t\t\t// adjust the size of the outer box\n\t\t\tt.captionsButton.find('.mejs-captions-selector').height(\n\t\t\t\tt.captionsButton.find('.mejs-captions-selector ul').outerHeight(true) +\n\t\t\t\tt.captionsButton.find('.mejs-captions-translations').outerHeight(true)\n\t\t\t);\n\t\t},\n\n\t\tcheckForTracks: function() {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\thasSubtitles = false;\n\n\t\t\t// check if any subtitles\n\t\t\tif (t.options.hideCaptionsButtonWhenEmpty) {\n\t\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\t\tif (t.tracks[i].kind == 'subtitles' && t.tracks[i].isLoaded) {\n\t\t\t\t\t\thasSubtitles = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!hasSubtitles) {\n\t\t\t\t\tt.captionsButton.hide();\n\t\t\t\t\tt.setControlsSize();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdisplayCaptions: function() {\n\n\t\t\tif (typeof this.tracks == 'undefined')\n\t\t\t\treturn;\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti,\n\t\t\t\ttrack = t.selectedTrack;\n\n\t\t\tif (track !== null && track.isLoaded) {\n\t\t\t\tfor (i=0; i<track.entries.times.length; i++) {\n\t\t\t\t\tif (t.media.currentTime >= track.entries.times[i].start && t.media.currentTime <= track.entries.times[i].stop) {\n\t\t\t\t\t\t// Set the line before the timecode as a class so the cue can be targeted if needed\n\t\t\t\t\t\tt.captionsText.html(track.entries.text[i]).attr('class', 'mejs-captions-text ' + (track.entries.times[i].identifier || ''));\n\t\t\t\t\t\tt.captions.show().height(0);\n\t\t\t\t\t\treturn; // exit out if one is visible;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt.captions.hide();\n\t\t\t} else {\n\t\t\t\tt.captions.hide();\n\t\t\t}\n\t\t},\n\n\t\tsetupSlides: function(track) {\n\t\t\tvar t = this;\n\n\t\t\tt.slides = track;\n\t\t\tt.slides.entries.imgs = [t.slides.entries.text.length];\n\t\t\tt.showSlide(0);\n\n\t\t},\n\n\t\tshowSlide: function(index) {\n\t\t\tif (typeof this.tracks == 'undefined' || typeof this.slidesContainer == 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar t = this,\n\t\t\t\turl = t.slides.entries.text[index],\n\t\t\t\timg = t.slides.entries.imgs[index];\n\n\t\t\tif (typeof img == 'undefined' || typeof img.fadeIn == 'undefined') {\n\n\t\t\t\tt.slides.entries.imgs[index] = img = $('<img src=\"' + url + '\">')\n\t\t\t\t\t\t.on('load', function() {\n\t\t\t\t\t\t\timg.appendTo(t.slidesContainer)\n\t\t\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t\t\t.fadeIn()\n\t\t\t\t\t\t\t\t.siblings(':visible')\n\t\t\t\t\t\t\t\t\t.fadeOut();\n\n\t\t\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\tif (!img.is(':visible') && !img.is(':animated')) {\n\n\t\t\t\t\t//\n\n\t\t\t\t\timg.fadeIn()\n\t\t\t\t\t\t.siblings(':visible')\n\t\t\t\t\t\t\t.fadeOut();\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\tdisplaySlides: function() {\n\n\t\t\tif (typeof this.slides == 'undefined')\n\t\t\t\treturn;\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\tslides = t.slides,\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<slides.entries.times.length; i++) {\n\t\t\t\tif (t.media.currentTime >= slides.entries.times[i].start && t.media.currentTime <= slides.entries.times[i].stop){\n\n\t\t\t\t\tt.showSlide(i);\n\n\t\t\t\t\treturn; // exit out if one is visible;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdisplayChapters: function() {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\tif (t.tracks[i].kind == 'chapters' && t.tracks[i].isLoaded) {\n\t\t\t\t\tt.drawChapters(t.tracks[i]);\n\t\t\t\t\tt.hasChapters = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdrawChapters: function(chapters) {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti,\n\t\t\t\tdur,\n\t\t\t\t//width,\n\t\t\t\t//left,\n\t\t\t\tpercent = 0,\n\t\t\t\tusedPercent = 0;\n\n\t\t\tt.chapters.empty();\n\n\t\t\tfor (i=0; i<chapters.entries.times.length; i++) {\n\t\t\t\tdur = chapters.entries.times[i].stop - chapters.entries.times[i].start;\n\t\t\t\tpercent = Math.floor(dur / t.media.duration * 100);\n\t\t\t\tif (percent + usedPercent > 100 || // too large\n\t\t\t\t\ti == chapters.entries.times.length-1 && percent + usedPercent < 100) // not going to fill it in\n\t\t\t\t\t{\n\t\t\t\t\tpercent = 100 - usedPercent;\n\t\t\t\t}\n\t\t\t\t//width = Math.floor(t.width * dur / t.media.duration);\n\t\t\t\t//left = Math.floor(t.width * chapters.entries.times[i].start / t.media.duration);\n\t\t\t\t//if (left + width > t.width) {\n\t\t\t\t//\twidth = t.width - left;\n\t\t\t\t//}\n\n\t\t\t\tt.chapters.append( $(\n\t\t\t\t\t'<div class=\"mejs-chapter\" rel=\"' + chapters.entries.times[i].start + '\" style=\"left: ' + usedPercent.toString() + '%;width: ' + percent.toString() + '%;\">' +\n\t\t\t\t\t\t'<div class=\"mejs-chapter-block' + ((i==chapters.entries.times.length-1) ? ' mejs-chapter-block-last' : '') + '\">' +\n\t\t\t\t\t\t\t'<span class=\"ch-title\">' + chapters.entries.text[i] + '</span>' +\n\t\t\t\t\t\t\t'<span class=\"ch-time\">' + mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start, t.options) + '&ndash;' + mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop, t.options) + '</span>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>'));\n\t\t\t\tusedPercent += percent;\n\t\t\t}\n\n\t\t\tt.chapters.find('div.mejs-chapter').click(function() {\n\t\t\t\tt.media.setCurrentTime( parseFloat( $(this).attr('rel') ) );\n\t\t\t\tif (t.media.paused) {\n\t\t\t\t\tt.media.play();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.chapters.show();\n\t\t}\n\t});\n\n\n\n\tmejs.language = {\n\t\tcodes:  {\n\t\t\taf:'Afrikaans',\n\t\t\tsq:'Albanian',\n\t\t\tar:'Arabic',\n\t\t\tbe:'Belarusian',\n\t\t\tbg:'Bulgarian',\n\t\t\tca:'Catalan',\n\t\t\tzh:'Chinese',\n\t\t\t'zh-cn':'Chinese Simplified',\n\t\t\t'zh-tw':'Chinese Traditional',\n\t\t\thr:'Croatian',\n\t\t\tcs:'Czech',\n\t\t\tda:'Danish',\n\t\t\tnl:'Dutch',\n\t\t\ten:'English',\n\t\t\tet:'Estonian',\n\t\t\tfl:'Filipino',\n\t\t\tfi:'Finnish',\n\t\t\tfr:'French',\n\t\t\tgl:'Galician',\n\t\t\tde:'German',\n\t\t\tel:'Greek',\n\t\t\tht:'Haitian Creole',\n\t\t\tiw:'Hebrew',\n\t\t\thi:'Hindi',\n\t\t\thu:'Hungarian',\n\t\t\tis:'Icelandic',\n\t\t\tid:'Indonesian',\n\t\t\tga:'Irish',\n\t\t\tit:'Italian',\n\t\t\tja:'Japanese',\n\t\t\tko:'Korean',\n\t\t\tlv:'Latvian',\n\t\t\tlt:'Lithuanian',\n\t\t\tmk:'Macedonian',\n\t\t\tms:'Malay',\n\t\t\tmt:'Maltese',\n\t\t\tno:'Norwegian',\n\t\t\tfa:'Persian',\n\t\t\tpl:'Polish',\n\t\t\tpt:'Portuguese',\n\t\t\t// 'pt-pt':'Portuguese (Portugal)',\n\t\t\tro:'Romanian',\n\t\t\tru:'Russian',\n\t\t\tsr:'Serbian',\n\t\t\tsk:'Slovak',\n\t\t\tsl:'Slovenian',\n\t\t\tes:'Spanish',\n\t\t\tsw:'Swahili',\n\t\t\tsv:'Swedish',\n\t\t\ttl:'Tagalog',\n\t\t\tth:'Thai',\n\t\t\ttr:'Turkish',\n\t\t\tuk:'Ukrainian',\n\t\t\tvi:'Vietnamese',\n\t\t\tcy:'Welsh',\n\t\t\tyi:'Yiddish'\n\t\t}\n\t};\n\n\t/*\n\tParses WebVTT format which should be formatted as\n\t================================\n\tWEBVTT\n\n\t1\n\t00:00:01,1 --> 00:00:05,000\n\tA line of text\n\n\t2\n\t00:01:15,1 --> 00:02:05,000\n\tA second line of text\n\n\t===============================\n\n\tAdapted from: http://www.delphiki.com/html5/playr\n\t*/\n\tmejs.TrackFormatParser = {\n\t\twebvtt: {\n\t\t\tpattern_timecode: /^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,\n\n\t\t\tparse: function(trackText) {\n\t\t\t\tvar\n\t\t\t\t\ti = 0,\n\t\t\t\t\tlines = mejs.TrackFormatParser.split2(trackText, /\\r?\\n/),\n\t\t\t\t\tentries = {text:[], times:[]},\n\t\t\t\t\ttimecode,\n\t\t\t\t\ttext,\n\t\t\t\t\tidentifier;\n\t\t\t\tfor(; i<lines.length; i++) {\n\t\t\t\t\ttimecode = this.pattern_timecode.exec(lines[i]);\n\n\t\t\t\t\tif (timecode && i<lines.length) {\n\t\t\t\t\t\tif ((i - 1) >= 0 && lines[i - 1] !== '') {\n\t\t\t\t\t\t\tidentifier = lines[i - 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t// grab all the (possibly multi-line) text that follows\n\t\t\t\t\t\ttext = lines[i];\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\twhile(lines[i] !== '' && i<lines.length){\n\t\t\t\t\t\t\ttext = text + '\\n' + lines[i];\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext = $.trim(text).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n\t\t\t\t\t\t// Text is in a different array so I can use .join\n\t\t\t\t\t\tentries.text.push(text);\n\t\t\t\t\t\tentries.times.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tidentifier: identifier,\n\t\t\t\t\t\t\tstart: (mejs.Utility.convertSMPTEtoSeconds(timecode[1]) === 0) ? 0.200 : mejs.Utility.convertSMPTEtoSeconds(timecode[1]),\n\t\t\t\t\t\t\tstop: mejs.Utility.convertSMPTEtoSeconds(timecode[3]),\n\t\t\t\t\t\t\tsettings: timecode[5]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tidentifier = '';\n\t\t\t\t}\n\t\t\t\treturn entries;\n\t\t\t}\n\t\t},\n\t\t// Thanks to Justin Capella: https://github.com/johndyer/mediaelement/pull/420\n\t\tdfxp: {\n\t\t\tparse: function(trackText) {\n\t\t\t\ttrackText = $(trackText).filter(\"tt\");\n\t\t\t\tvar\n\t\t\t\t\ti = 0,\n\t\t\t\t\tcontainer = trackText.children(\"div\").eq(0),\n\t\t\t\t\tlines = container.find(\"p\"),\n\t\t\t\t\tstyleNode = trackText.find(\"#\" + container.attr(\"style\")),\n\t\t\t\t\tstyles,\n\t\t\t\t\ttext,\n\t\t\t\t\tentries = {text:[], times:[]};\n\n\n\t\t\t\tif (styleNode.length) {\n\t\t\t\t\tvar attributes = styleNode.removeAttr(\"id\").get(0).attributes;\n\t\t\t\t\tif (attributes.length) {\n\t\t\t\t\t\tstyles = {};\n\t\t\t\t\t\tfor (i = 0; i < attributes.length; i++) {\n\t\t\t\t\t\t\tstyles[attributes[i].name.split(\":\")[1]] = attributes[i].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0; i<lines.length; i++) {\n\t\t\t\t\tvar style;\n\t\t\t\t\tvar _temp_times = {\n\t\t\t\t\t\tstart: null,\n\t\t\t\t\t\tstop: null,\n\t\t\t\t\t\tstyle: null\n\t\t\t\t\t};\n\t\t\t\t\tif (lines.eq(i).attr(\"begin\")) _temp_times.start = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr(\"begin\"));\n\t\t\t\t\tif (!_temp_times.start && lines.eq(i-1).attr(\"end\")) _temp_times.start = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr(\"end\"));\n\t\t\t\t\tif (lines.eq(i).attr(\"end\")) _temp_times.stop = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr(\"end\"));\n\t\t\t\t\tif (!_temp_times.stop && lines.eq(i+1).attr(\"begin\")) _temp_times.stop = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr(\"begin\"));\n\t\t\t\t\tif (styles) {\n\t\t\t\t\t\tstyle = \"\";\n\t\t\t\t\t\tfor (var _style in styles) {\n\t\t\t\t\t\t\tstyle += _style + \":\" + styles[_style] + \";\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (style) _temp_times.style = style;\n\t\t\t\t\tif (_temp_times.start === 0) _temp_times.start = 0.200;\n\t\t\t\t\tentries.times.push(_temp_times);\n\t\t\t\t\ttext = $.trim(lines.eq(i).html()).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n\t\t\t\t\tentries.text.push(text);\n\t\t\t\t\tif (entries.times.start === 0) entries.times.start = 2;\n\t\t\t\t}\n\t\t\t\treturn entries;\n\t\t\t}\n\t\t},\n\t\tsplit2: function (text, regex) {\n\t\t\t// normal version for compliant browsers\n\t\t\t// see below for IE fix\n\t\t\treturn text.split(regex);\n\t\t}\n\t};\n\n\t// test for browsers with bad String.split method.\n\tif ('x\\n\\ny'.split(/\\n/gi).length != 3) {\n\t\t// add super slow IE8 and below version\n\t\tmejs.TrackFormatParser.split2 = function(text, regex) {\n\t\t\tvar\n\t\t\t\tparts = [],\n\t\t\t\tchunk = '',\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<text.length; i++) {\n\t\t\t\tchunk += text.substring(i,i+1);\n\t\t\t\tif (regex.test(chunk)) {\n\t\t\t\t\tparts.push(chunk.replace(regex, ''));\n\t\t\t\t\tchunk = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tparts.push(chunk);\n\t\t\treturn parts;\n\t\t};\n\t}\n\n})(mejs.$);\n\n/*\n* ContextMenu Plugin\n* \n*\n*/\n\n(function($) {\n\n$.extend(mejs.MepDefaults,\n\t{ 'contextMenuItems': [\n\t\t// demo of a fullscreen option\n\t\t{ \n\t\t\trender: function(player) {\n\t\t\t\t\n\t\t\t\t// check for fullscreen plugin\n\t\t\t\tif (typeof player.enterFullScreen == 'undefined')\n\t\t\t\t\treturn null;\n\t\t\t\n\t\t\t\tif (player.isFullScreen) {\n\t\t\t\t\treturn mejs.i18n.t('Turn off Fullscreen');\n\t\t\t\t} else {\n\t\t\t\t\treturn mejs.i18n.t('Go Fullscreen');\n\t\t\t\t}\n\t\t\t},\n\t\t\tclick: function(player) {\n\t\t\t\tif (player.isFullScreen) {\n\t\t\t\t\tplayer.exitFullScreen();\n\t\t\t\t} else {\n\t\t\t\t\tplayer.enterFullScreen();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t,\n\t\t// demo of a mute/unmute button\n\t\t{ \n\t\t\trender: function(player) {\n\t\t\t\tif (player.media.muted) {\n\t\t\t\t\treturn mejs.i18n.t('Unmute');\n\t\t\t\t} else {\n\t\t\t\t\treturn mejs.i18n.t('Mute');\n\t\t\t\t}\n\t\t\t},\n\t\t\tclick: function(player) {\n\t\t\t\tif (player.media.muted) {\n\t\t\t\t\tplayer.setMuted(false);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.setMuted(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// separator\n\t\t{\n\t\t\tisSeparator: true\n\t\t}\n\t\t,\n\t\t// demo of simple download video\n\t\t{ \n\t\t\trender: function(player) {\n\t\t\t\treturn mejs.i18n.t('Download Video');\n\t\t\t},\n\t\t\tclick: function(player) {\n\t\t\t\twindow.location.href = player.media.currentSrc;\n\t\t\t}\n\t\t}\t\n\t]}\n);\n\n\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildcontextmenu: function(player, controls, layers, media) {\n\t\t\t\n\t\t\t// create context menu\n\t\t\tplayer.contextMenu = $('<div class=\"mejs-contextmenu\"></div>')\n\t\t\t\t\t\t\t\t.appendTo($('body'))\n\t\t\t\t\t\t\t\t.hide();\n\t\t\t\n\t\t\t// create events for showing context menu\n\t\t\tplayer.container.bind('contextmenu', function(e) {\n\t\t\t\tif (player.isContextMenuEnabled) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tplayer.renderContextMenu(e.clientX-1, e.clientY-1);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tplayer.container.bind('click', function() {\n\t\t\t\tplayer.contextMenu.hide();\n\t\t\t});\t\n\t\t\tplayer.contextMenu.bind('mouseleave', function() {\n\n\t\t\t\t//\n\t\t\t\tplayer.startContextMenuTimer();\n\t\t\t\t\n\t\t\t});\t\t\n\t\t},\n\n\t\tcleancontextmenu: function(player) {\n\t\t\tplayer.contextMenu.remove();\n\t\t},\n\t\t\n\t\tisContextMenuEnabled: true,\n\t\tenableContextMenu: function() {\n\t\t\tthis.isContextMenuEnabled = true;\n\t\t},\n\t\tdisableContextMenu: function() {\n\t\t\tthis.isContextMenuEnabled = false;\n\t\t},\n\t\t\n\t\tcontextMenuTimeout: null,\n\t\tstartContextMenuTimer: function() {\n\t\t\t//\n\t\t\t\n\t\t\tvar t = this;\n\t\t\t\n\t\t\tt.killContextMenuTimer();\n\t\t\t\n\t\t\tt.contextMenuTimer = setTimeout(function() {\n\t\t\t\tt.hideContextMenu();\n\t\t\t\tt.killContextMenuTimer();\n\t\t\t}, 750);\n\t\t},\n\t\tkillContextMenuTimer: function() {\n\t\t\tvar timer = this.contextMenuTimer;\n\t\t\t\n\t\t\t//\n\t\t\t\n\t\t\tif (timer != null) {\t\t\t\t\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tdelete timer;\n\t\t\t\ttimer = null;\n\t\t\t}\n\t\t},\t\t\n\t\t\n\t\thideContextMenu: function() {\n\t\t\tthis.contextMenu.hide();\n\t\t},\n\t\t\n\t\trenderContextMenu: function(x,y) {\n\t\t\t\n\t\t\t// alway re-render the items so that things like \"turn fullscreen on\" and \"turn fullscreen off\" are always written correctly\n\t\t\tvar t = this,\n\t\t\t\thtml = '',\n\t\t\t\titems = t.options.contextMenuItems;\n\t\t\t\n\t\t\tfor (var i=0, il=items.length; i<il; i++) {\n\t\t\t\t\n\t\t\t\tif (items[i].isSeparator) {\n\t\t\t\t\thtml += '<div class=\"mejs-contextmenu-separator\"></div>';\n\t\t\t\t} else {\n\t\t\t\t\n\t\t\t\t\tvar rendered = items[i].render(t);\n\t\t\t\t\n\t\t\t\t\t// render can return null if the item doesn't need to be used at the moment\n\t\t\t\t\tif (rendered != null) {\n\t\t\t\t\t\thtml += '<div class=\"mejs-contextmenu-item\" data-itemindex=\"' + i + '\" id=\"element-' + (Math.random()*1000000) + '\">' + rendered + '</div>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// position and show the context menu\n\t\t\tt.contextMenu\n\t\t\t\t.empty()\n\t\t\t\t.append($(html))\n\t\t\t\t.css({top:y, left:x})\n\t\t\t\t.show();\n\t\t\t\t\n\t\t\t// bind events\n\t\t\tt.contextMenu.find('.mejs-contextmenu-item').each(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t// which one is this?\n\t\t\t\tvar $dom = $(this),\n\t\t\t\t\titemIndex = parseInt( $dom.data('itemindex'), 10 ),\n\t\t\t\t\titem = t.options.contextMenuItems[itemIndex];\n\t\t\t\t\n\t\t\t\t// bind extra functionality?\n\t\t\t\tif (typeof item.show != 'undefined')\n\t\t\t\t\titem.show( $dom , t);\n\t\t\t\t\n\t\t\t\t// bind click action\n\t\t\t\t$dom.click(function() {\t\t\t\n\t\t\t\t\t// perform click action\n\t\t\t\t\tif (typeof item.click != 'undefined')\n\t\t\t\t\t\titem.click(t);\n\t\t\t\t\t\n\t\t\t\t\t// close\n\t\t\t\t\tt.contextMenu.hide();\t\t\t\t\n\t\t\t\t});\t\t\t\t\n\t\t\t});\t\n\t\t\t\n\t\t\t// stop the controls from hiding\n\t\t\tsetTimeout(function() {\n\t\t\t\tt.killControlsTimer('rev3');\t\n\t\t\t}, 100);\n\t\t\t\t\t\t\n\t\t}\n\t});\n\t\n})(mejs.$);\n(function($) {\n\t// skip back button\n\n\t$.extend(mejs.MepDefaults, {\n\t\tskipBackInterval: 30,\n\t\t// %1 will be replaced with skipBackInterval in this string\n\t\tskipBackText: mejs.i18n.t('Skip back %1 seconds')\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildskipback: function(player, controls, layers, media) {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\t// Replace %1 with skip back interval\n\t\t\t\tbackText = t.options.skipBackText.replace('%1', t.options.skipBackInterval),\n\t\t\t\t// create the loop button\n\t\t\t\tloop =\n\t\t\t\t$('<div class=\"mejs-button mejs-skip-back-button\">' +\n\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + backText + '\" aria-label=\"' + backText + '\">' + t.options.skipBackInterval + '</button>' +\n\t\t\t\t'</div>')\n\t\t\t\t// append it to the toolbar\n\t\t\t\t.appendTo(controls)\n\t\t\t\t// add a click toggle event\n\t\t\t\t.click(function() {\n\t\t\t\t\tmedia.setCurrentTime(Math.max(media.currentTime - t.options.skipBackInterval, 0));\n\t\t\t\t\t$(this).find('button').blur();\n\t\t\t\t});\n\t\t}\n\t});\n\n})(mejs.$);\n\n/**\n * Postroll plugin\n */\n(function($) {\n\n\t$.extend(mejs.MepDefaults, {\n\t\tpostrollCloseText: mejs.i18n.t('Close')\n\t});\n\n\t// Postroll\n\t$.extend(MediaElementPlayer.prototype, {\n\t\tbuildpostroll: function(player, controls, layers, media) {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\tpostrollLink = t.container.find('link[rel=\"postroll\"]').attr('href');\n\n\t\t\tif (typeof postrollLink !== 'undefined') {\n\t\t\t\tplayer.postroll =\n\t\t\t\t\t$('<div class=\"mejs-postroll-layer mejs-layer\"><a class=\"mejs-postroll-close\" onclick=\"$(this).parent().hide();return false;\">' + t.options.postrollCloseText + '</a><div class=\"mejs-postroll-layer-content\"></div></div>').prependTo(layers).hide();\n\n\t\t\t\tt.media.addEventListener('ended', function (e) {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\tdataType: 'html',\n\t\t\t\t\t\turl: postrollLink,\n\t\t\t\t\t\tsuccess: function (data, textStatus) {\n\t\t\t\t\t\t\tlayers.find('.mejs-postroll-layer-content').html(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tplayer.postroll.show();\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t});\n\n})(mejs.$);\ndefine(\"components/adapt-contrib-media/libraries/mediaelement-and-player\", function(){});\n\n",
    "/*Accessible closed captions*/\ndefine('components/adapt-contrib-media/libraries/mediaelement-and-player-accessible-captions',[\n    '../libraries/mediaelement-and-player'\n], function() {\n\n\t// add extra default options\n\t$.extend(mejs.MepDefaults, {\n\t\t// this will automatically turn on a <track>\n\t\tstartLanguage: '',\n\n\t\ttracksText: mejs.i18n.t('Captions/Subtitles'),\n\n\t\t// By default, no WAI-ARIA live region - don't make a\n\t\t// screen reader speak captions over an audio track.\n\t\ttracksAriaLive: false,\n\n\t\t// option to remove the [cc] button when no <track kind=\"subtitles\"> are present\n\t\thideCaptionsButtonWhenEmpty: true,\n\n\t\t// If true and we only have one track, change captions to popup\n\t\ttoggleCaptionsButtonWhenOnlyOne: false,\n\n\t\t// #id or .class\n\t\tslidesSelector: ''\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\n\t\thasChapters: false,\n\n\t\tcleartracks: function(player, controls, layers, media){\n\t\t\tif(player) {\n\t\t\t\tif(player.captions) player.captions.remove();\n\t\t\t\tif(player.chapters) player.chapters.remove();\n\t\t\t\tif(player.captionsText) player.captionsText.remove();\n\t\t\t\tif(player.captionsButton) player.captionsButton.remove();\n\t\t\t}\n\t\t},\n\t\tbuildtracks: function(player, controls, layers, media) {\n\t\t\tif (player.tracks.length === 0)\n\t\t\t\treturn;\n\n\t\t\tvar t = this,\n\t\t\t\tattr = t.options.tracksAriaLive ?\n\t\t\t\t\t'role=\"log\" aria-live=\"assertive\" aria-atomic=\"false\"' : '',\n\t\t\t\ti;\n\n\t\t\tif (t.domNode.textTracks) { // if browser will do native captions, prefer mejs captions, loop through tracks and hide\n\t\t\t\tfor (i = t.domNode.textTracks.length - 1; i >= 0; i--) {\n\t\t\t\t\tt.domNode.textTracks[i].mode = \"hidden\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tt.cleartracks(player, controls, layers, media);\n\t\t\tplayer.chapters =\n\t\t\t\t\t$('<div class=\"mejs-chapters mejs-layer\"></div>')\n\t\t\t\t\t\t.prependTo(layers).hide();\n\t\t\tplayer.captions =\n\t\t\t\t\t$('<div class=\"mejs-captions-layer mejs-layer\"><div class=\"mejs-captions-position mejs-captions-position-hover\" ' +\n\t\t\t\t\tattr + '><span class=\"mejs-captions-text\"></span></div></div>')\n\t\t\t\t\t\t.prependTo(layers).hide();\n\t\t\tplayer.captionsText = player.captions.find('.mejs-captions-text');\n\t\t\tplayer.captionsButton =\n\t\t\t\t\t$('<div class=\"mejs-button mejs-captions-button\">'+\n\t\t\t\t\t\t'<button type=\"button\" aria-controls=\"' + t.id + '\" title=\"' + t.options.tracksText + '\" aria-label=\"' + t.options.tracksText + '\"></button>'+\n\t\t\t\t\t\t'<div class=\"mejs-captions-selector\">'+\n\t\t\t\t\t\t\t'<ul>'+\n\t\t\t\t\t\t\t\t'<li>'+\n\t\t\t\t\t\t\t\t\t'<input type=\"checkbox\" name=\"' + player.id + '_captions\" id=\"' + player.id + '_captions_none\" value=\"none\" checked=\"checked\" />' +\n\t\t\t\t\t\t\t\t\t'<label for=\"' + player.id + '_captions_none\">' + mejs.i18n.t('None') +'</label>'+\n\t\t\t\t\t\t\t\t'</li>'\t+\n\t\t\t\t\t\t\t'</ul>'+\n\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t'</div>')\n\t\t\t\t\t\t.appendTo(controls);\n\n\n\t\t\tvar subtitleCount = 0;\n\t\t\tfor (i=0; i<player.tracks.length; i++) {\n\t\t\t\tif (player.tracks[i].kind == 'subtitles') {\n\t\t\t\t\tsubtitleCount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if only one language then just make the button a toggle\n\t\t\tif (t.options.toggleCaptionsButtonWhenOnlyOne && subtitleCount == 1){\n\t\t\t\t// click\n\t\t\t\tplayer.captionsButton.on('click',function() {\n\t\t\t\t\tif (player.selectedTrack === null) {\n\t\t\t\t\t\tlang = player.tracks[0].srclang;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlang = 'none';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.setTrack(lang);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// hover or keyboard focus\n\t\t\t\tplayer.captionsButton.on( 'click', function(e) {\n\t\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\t\t$(this).find('.mejs-captions-selector').removeClass('mejs-offscreen').css(\"visibility\", \"visible\");\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(function() {\n                    \t$($(e.currentTarget).find(\".mejs-captions-selector\").find(\"input[type=checkbox]\")[0]).focus();\n                \t}, 250);\n\t\t\t\t})\n\n\t\t\t\t// handle clicks to the language checkbox buttons\n\t\t\t\t.on('click keyup','input[type=checkbox]',function(e) {\n\t\t\t\t\t\n\t\t\t\t\te.stopPropagation();\n                \tif (e.type===\"keyup\" && (e.which!==32&&e.which!==13)) return;\n                \t$(this).parents(\".mejs-captions-selector\").find(\"input[type=checkbox]\").prop(\"checked\", false);\n                \t$(this).prop(\"checked\",true);\n\n\t\t\t\t\tlang = this.value;\n\t\t\t\t\tplayer.setTrack(lang);\n\n\n\t\t\t\t\tif (e.type===\"keyup\") {\n\t                    $(this).parents(\".mejs-captions-button\").find(\"button\").focus();\n\t                }\n\t\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\t\t$(this).parents(\".mejs-captions-selector\").addClass('mejs-offscreen').css(\"visibility\", \"hidden\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tif (!player.options.alwaysShowControls) {\n\t\t\t\t// move with controls\n\t\t\t\tplayer.container\n\t\t\t\t\t.bind('controlsshown', function () {\n\t\t\t\t\t\t// push captions above controls\n\t\t\t\t\t\tplayer.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');\n\n\t\t\t\t\t})\n\t\t\t\t\t.bind('controlshidden', function () {\n\t\t\t\t\t\tif (!media.paused) {\n\t\t\t\t\t\t\t// move back to normal place\n\t\t\t\t\t\t\tplayer.container.find('.mejs-captions-position').removeClass('mejs-captions-position-hover');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tplayer.container.find('.mejs-captions-position').addClass('mejs-captions-position-hover');\n\t\t\t}\n\n\t\t\tplayer.trackToLoad = -1;\n\t\t\tplayer.selectedTrack = null;\n\t\t\tplayer.isLoadingTrack = false;\n\n\t\t\t// add to list\n\t\t\tfor (i=0; i<player.tracks.length; i++) {\n\t\t\t\tif (player.tracks[i].kind == 'subtitles') {\n\t\t\t\t\tplayer.addTrackButton(player.tracks[i].srclang, player.tracks[i].label);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start loading tracks\n\t\t\tplayer.loadNextTrack();\n\n\t\t\tmedia.addEventListener('timeupdate',function(e) {\n\t\t\t\tplayer.displayCaptions();\n\t\t\t}, false);\n\n\t\t\tif (player.options.slidesSelector !== '') {\n\t\t\t\tplayer.slidesContainer = $(player.options.slidesSelector);\n\n\t\t\t\tmedia.addEventListener('timeupdate',function(e) {\n\t\t\t\t\tplayer.displaySlides();\n\t\t\t\t}, false);\n\n\t\t\t}\n\n\t\t\tmedia.addEventListener('loadedmetadata', function(e) {\n\t\t\t\tplayer.displayChapters();\n\t\t\t}, false);\n\n\t\t\tplayer.container.hover(\n\t\t\t\tfunction () {\n\t\t\t\t\t// chapters\n\t\t\t\t\tif (player.hasChapters) {\n\t\t\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\t\t\tplayer.chapters.removeClass('mejs-offscreen');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chapters.fadeIn(200).height(player.chapters.find('.mejs-chapter').outerHeight());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tif (player.hasChapters && !media.paused) {\n\t\t\t\t\t\tplayer.chapters.fadeOut(200, function() {\n\t\t\t\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\t\t\t\t$(this).addClass('mejs-offscreen');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$(this).css('display','block');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tt.container.on('controlsresize', function() {\n\t\t\t\tt.adjustLanguageBox();\n\t\t\t});\n\n\t\t\t// check for autoplay\n\t\t\tif (player.node.getAttribute('autoplay') !== null) {\n\t\t\t\tif (!t.options.allowFullRailMode) {\n\t\t\t\t\tplayer.chapters.addClass('mejs-offscreen');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetTrack: function(lang){\n\n\t\t\tvar t = this,\n\t\t\t\ti;\n\n\t\t\tif (lang == 'none') {\n\t\t\t\tt.selectedTrack = null;\n\t\t\t\tt.captionsButton.removeClass('mejs-captions-enabled');\n\t\t\t} else {\n\t\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\t\tif (t.tracks[i].srclang == lang) {\n\t\t\t\t\t\tif (t.selectedTrack === null)\n\t\t\t\t\t\t\tt.captionsButton.addClass('mejs-captions-enabled');\n\t\t\t\t\t\tt.selectedTrack = t.tracks[i];\n\t\t\t\t\t\tt.captions.attr('lang', t.selectedTrack.srclang);\n\t\t\t\t\t\tt.displayCaptions();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tloadNextTrack: function() {\n\t\t\tvar t = this;\n\n\t\t\tt.trackToLoad++;\n\t\t\tif (t.trackToLoad < t.tracks.length) {\n\t\t\t\tt.isLoadingTrack = true;\n\t\t\t\tt.loadTrack(t.trackToLoad);\n\t\t\t} else {\n\t\t\t\t// add done?\n\t\t\t\tt.isLoadingTrack = false;\n\n\t\t\t\tt.checkForTracks();\n\t\t\t}\n\t\t},\n\n\t\tloadTrack: function(index){\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ttrack = t.tracks[index],\n\t\t\t\tafter = function() {\n\n\t\t\t\t\ttrack.isLoaded = true;\n\n\t\t\t\t\tt.enableTrackButton(track.srclang, track.label);\n\n\t\t\t\t\tt.loadNextTrack();\n\n\t\t\t\t};\n\n\n\t\t\t$.ajax({\n\t\t\t\turl: track.src,\n\t\t\t\tdataType: \"text\",\n\t\t\t\tsuccess: function(d) {\n\n\t\t\t\t\t// parse the loaded file\n\t\t\t\t\tif (typeof d == \"string\" && (/<tt\\s+xml/ig).exec(d)) {\n\t\t\t\t\t\ttrack.entries = mejs.TrackFormatParser.dfxp.parse(d);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttrack.entries = mejs.TrackFormatParser.webvtt.parse(d);\n\t\t\t\t\t}\n\n\t\t\t\t\tafter();\n\n\t\t\t\t\tif (track.kind == 'chapters') {\n\t\t\t\t\t\tt.media.addEventListener('play', function(e) {\n\t\t\t\t\t\t\tif (t.media.duration > 0) {\n\t\t\t\t\t\t\t\tt.displayChapters(track);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (track.kind == 'slides') {\n\t\t\t\t\t\tt.setupSlides(track);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\tt.removeTrackButton(track.srclang);\n\t\t\t\t\tt.loadNextTrack();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tenableTrackButton: function(lang, label) {\n\t\t\tvar t = this;\n\n\t\t\tif (label === '') {\n\t\t\t\tlabel = mejs.language.codes[lang] || lang;\n\t\t\t}\n\n\t\t\tt.captionsButton\n\t\t\t\t.find('input[value=' + lang + ']')\n\t\t\t\t\t.prop('disabled',false)\n\t\t\t\t.siblings('label')\n\t\t\t\t\t.html( label );\n\n\t\t\t// auto select\n\t\t\tif (t.options.startLanguage == lang) {\n\t\t\t\t$('#' + t.id + '_captions_' + lang).prop('checked', true).trigger('click');\n\t\t\t}\n\n\t\t\tt.adjustLanguageBox();\n\t\t},\n\n\t\tremoveTrackButton: function(lang) {\n\t\t\tvar t = this;\n\n\t\t\tt.captionsButton.find('input[value=' + lang + ']').closest('li').remove();\n\n\t\t\tt.adjustLanguageBox();\n\t\t},\n\n\t\taddTrackButton: function(lang, label) {\n\t\t\tvar t = this;\n\t\t\tif (label === '') {\n\t\t\t\tlabel = mejs.language.codes[lang] || lang;\n\t\t\t}\n\n\t\t\tt.captionsButton.find('ul').append(\n\t\t\t\t$('<li>'+\n\t\t\t\t\t'<input type=\"checkbox\" name=\"' + t.id + '_captions\" id=\"' + t.id + '_captions_' + lang + '\" value=\"' + lang + '\" disabled=\"disabled\" />' +\n\t\t\t\t\t'<label for=\"' + t.id + '_captions_' + lang + '\">' + label + ' (loading)' + '</label>'+\n\t\t\t\t'</li>')\n\t\t\t);\n\n\t\t\tt.adjustLanguageBox();\n\n\t\t\t// remove this from the dropdownlist (if it exists)\n\t\t\tt.container.find('.mejs-captions-translations option[value=' + lang + ']').remove();\n\t\t},\n\n\t\tadjustLanguageBox:function() {\n\t\t\tvar t = this;\n\t\t\t// adjust the size of the outer box\n\t\t\tt.captionsButton.find('.mejs-captions-selector').height(\n\t\t\t\tt.captionsButton.find('.mejs-captions-selector ul').outerHeight(true) +\n\t\t\t\tt.captionsButton.find('.mejs-captions-translations').outerHeight(true)\n\t\t\t);\n\t\t},\n\n\t\tcheckForTracks: function() {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\thasSubtitles = false;\n\n\t\t\t// check if any subtitles\n\t\t\tif (t.options.hideCaptionsButtonWhenEmpty) {\n\t\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\t\tif (t.tracks[i].kind == 'subtitles' && t.tracks[i].isLoaded) {\n\t\t\t\t\t\thasSubtitles = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!hasSubtitles) {\n\t\t\t\t\tt.captionsButton.hide();\n\t\t\t\t\tt.setControlsSize();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdisplayCaptions: function() {\n\n\t\t\tif (typeof this.tracks == 'undefined')\n\t\t\t\treturn;\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti,\n\t\t\t\ttrack = t.selectedTrack;\n\n\t\t\tif (track !== null && track.isLoaded) {\n\t\t\t\tfor (i=0; i<track.entries.times.length; i++) {\n\t\t\t\t\tif (t.media.currentTime >= track.entries.times[i].start && t.media.currentTime <= track.entries.times[i].stop) {\n\t\t\t\t\t\t// Set the line before the timecode as a class so the cue can be targeted if needed\n\t\t\t\t\t\tt.captionsText.html(track.entries.text[i]).attr('class', 'mejs-captions-text ' + (track.entries.times[i].identifier || ''));\n\t\t\t\t\t\tt.captions.show().height(0);\n\t\t\t\t\t\treturn; // exit out if one is visible;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt.captions.hide();\n\t\t\t} else {\n\t\t\t\tt.captions.hide();\n\t\t\t}\n\t\t},\n\n\t\tsetupSlides: function(track) {\n\t\t\tvar t = this;\n\n\t\t\tt.slides = track;\n\t\t\tt.slides.entries.imgs = [t.slides.entries.text.length];\n\t\t\tt.showSlide(0);\n\n\t\t},\n\n\t\tshowSlide: function(index) {\n\t\t\tif (typeof this.tracks == 'undefined' || typeof this.slidesContainer == 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar t = this,\n\t\t\t\turl = t.slides.entries.text[index],\n\t\t\t\timg = t.slides.entries.imgs[index];\n\n\t\t\tif (typeof img == 'undefined' || typeof img.fadeIn == 'undefined') {\n\n\t\t\t\tt.slides.entries.imgs[index] = img = $('<img src=\"' + url + '\">')\n\t\t\t\t\t\t.on('load', function() {\n\t\t\t\t\t\t\timg.appendTo(t.slidesContainer)\n\t\t\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t\t\t.fadeIn()\n\t\t\t\t\t\t\t\t.siblings(':visible')\n\t\t\t\t\t\t\t\t\t.fadeOut();\n\n\t\t\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\tif (!img.is(':visible') && !img.is(':animated')) {\n\n\t\t\t\t\t//\n\n\t\t\t\t\timg.fadeIn()\n\t\t\t\t\t\t.siblings(':visible')\n\t\t\t\t\t\t\t.fadeOut();\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\tdisplaySlides: function() {\n\n\t\t\tif (typeof this.slides == 'undefined')\n\t\t\t\treturn;\n\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\tslides = t.slides,\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<slides.entries.times.length; i++) {\n\t\t\t\tif (t.media.currentTime >= slides.entries.times[i].start && t.media.currentTime <= slides.entries.times[i].stop){\n\n\t\t\t\t\tt.showSlide(i);\n\n\t\t\t\t\treturn; // exit out if one is visible;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdisplayChapters: function() {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<t.tracks.length; i++) {\n\t\t\t\tif (t.tracks[i].kind == 'chapters' && t.tracks[i].isLoaded) {\n\t\t\t\t\tt.drawChapters(t.tracks[i]);\n\t\t\t\t\tt.hasChapters = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdrawChapters: function(chapters) {\n\t\t\tvar\n\t\t\t\tt = this,\n\t\t\t\ti,\n\t\t\t\tdur,\n\t\t\t\t//width,\n\t\t\t\t//left,\n\t\t\t\tpercent = 0,\n\t\t\t\tusedPercent = 0;\n\n\t\t\tt.chapters.empty();\n\n\t\t\tfor (i=0; i<chapters.entries.times.length; i++) {\n\t\t\t\tdur = chapters.entries.times[i].stop - chapters.entries.times[i].start;\n\t\t\t\tpercent = Math.floor(dur / t.media.duration * 100);\n\t\t\t\tif (percent + usedPercent > 100 || // too large\n\t\t\t\t\ti == chapters.entries.times.length-1 && percent + usedPercent < 100) // not going to fill it in\n\t\t\t\t\t{\n\t\t\t\t\tpercent = 100 - usedPercent;\n\t\t\t\t}\n\t\t\t\t//width = Math.floor(t.width * dur / t.media.duration);\n\t\t\t\t//left = Math.floor(t.width * chapters.entries.times[i].start / t.media.duration);\n\t\t\t\t//if (left + width > t.width) {\n\t\t\t\t//\twidth = t.width - left;\n\t\t\t\t//}\n\n\t\t\t\tt.chapters.append( $(\n\t\t\t\t\t'<div class=\"mejs-chapter\" rel=\"' + chapters.entries.times[i].start + '\" style=\"left: ' + usedPercent.toString() + '%;width: ' + percent.toString() + '%;\">' +\n\t\t\t\t\t\t'<div class=\"mejs-chapter-block' + ((i==chapters.entries.times.length-1) ? ' mejs-chapter-block-last' : '') + '\">' +\n\t\t\t\t\t\t\t'<span class=\"ch-title\">' + chapters.entries.text[i] + '</span>' +\n\t\t\t\t\t\t\t'<span class=\"ch-time\">' + mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start, t.options) + '&ndash;' + mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop, t.options) + '</span>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>'));\n\t\t\t\tusedPercent += percent;\n\t\t\t}\n\n\t\t\tt.chapters.find('div.mejs-chapter').click(function() {\n\t\t\t\tt.media.setCurrentTime( parseFloat( $(this).attr('rel') ) );\n\t\t\t\tif (t.media.paused) {\n\t\t\t\t\tt.media.play();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.chapters.show();\n\t\t}\n\t});\n\n\n\n\tmejs.language = {\n\t\tcodes:  {\n\t\t\taf:'Afrikaans',\n\t\t\tsq:'Albanian',\n\t\t\tar:'Arabic',\n\t\t\tbe:'Belarusian',\n\t\t\tbg:'Bulgarian',\n\t\t\tca:'Catalan',\n\t\t\tzh:'Chinese',\n\t\t\t'zh-cn':'Chinese Simplified',\n\t\t\t'zh-tw':'Chinese Traditional',\n\t\t\thr:'Croatian',\n\t\t\tcs:'Czech',\n\t\t\tda:'Danish',\n\t\t\tnl:'Dutch',\n\t\t\ten:'English',\n\t\t\tet:'Estonian',\n\t\t\tfl:'Filipino',\n\t\t\tfi:'Finnish',\n\t\t\tfr:'French',\n\t\t\tgl:'Galician',\n\t\t\tde:'German',\n\t\t\tel:'Greek',\n\t\t\tht:'Haitian Creole',\n\t\t\tiw:'Hebrew',\n\t\t\thi:'Hindi',\n\t\t\thu:'Hungarian',\n\t\t\tis:'Icelandic',\n\t\t\tid:'Indonesian',\n\t\t\tga:'Irish',\n\t\t\tit:'Italian',\n\t\t\tja:'Japanese',\n\t\t\tko:'Korean',\n\t\t\tlv:'Latvian',\n\t\t\tlt:'Lithuanian',\n\t\t\tmk:'Macedonian',\n\t\t\tms:'Malay',\n\t\t\tmt:'Maltese',\n\t\t\tno:'Norwegian',\n\t\t\tfa:'Persian',\n\t\t\tpl:'Polish',\n\t\t\tpt:'Portuguese',\n\t\t\t// 'pt-pt':'Portuguese (Portugal)',\n\t\t\tro:'Romanian',\n\t\t\tru:'Russian',\n\t\t\tsr:'Serbian',\n\t\t\tsk:'Slovak',\n\t\t\tsl:'Slovenian',\n\t\t\tes:'Spanish',\n\t\t\tsw:'Swahili',\n\t\t\tsv:'Swedish',\n\t\t\ttl:'Tagalog',\n\t\t\tth:'Thai',\n\t\t\ttr:'Turkish',\n\t\t\tuk:'Ukrainian',\n\t\t\tvi:'Vietnamese',\n\t\t\tcy:'Welsh',\n\t\t\tyi:'Yiddish'\n\t\t}\n\t};\n\n\t/*\n\tParses WebVTT format which should be formatted as\n\t================================\n\tWEBVTT\n\n\t1\n\t00:00:01,1 --> 00:00:05,000\n\tA line of text\n\n\t2\n\t00:01:15,1 --> 00:02:05,000\n\tA second line of text\n\n\t===============================\n\n\tAdapted from: http://www.delphiki.com/html5/playr\n\t*/\n\tmejs.TrackFormatParser = {\n\t\twebvtt: {\n\t\t\tpattern_timecode: /^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,\n\n\t\t\tparse: function(trackText) {\n\t\t\t\tvar\n\t\t\t\t\ti = 0,\n\t\t\t\t\tlines = mejs.TrackFormatParser.split2(trackText, /\\r?\\n/),\n\t\t\t\t\tentries = {text:[], times:[]},\n\t\t\t\t\ttimecode,\n\t\t\t\t\ttext,\n\t\t\t\t\tidentifier;\n\t\t\t\tfor(; i<lines.length; i++) {\n\t\t\t\t\ttimecode = this.pattern_timecode.exec(lines[i]);\n\n\t\t\t\t\tif (timecode && i<lines.length) {\n\t\t\t\t\t\tif ((i - 1) >= 0 && lines[i - 1] !== '') {\n\t\t\t\t\t\t\tidentifier = lines[i - 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t// grab all the (possibly multi-line) text that follows\n\t\t\t\t\t\ttext = lines[i];\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\twhile(lines[i] !== '' && i<lines.length){\n\t\t\t\t\t\t\ttext = text + '\\n' + lines[i];\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext = $.trim(text).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n\t\t\t\t\t\t// Text is in a different array so I can use .join\n\t\t\t\t\t\tentries.text.push(text);\n\t\t\t\t\t\tentries.times.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tidentifier: identifier,\n\t\t\t\t\t\t\tstart: (mejs.Utility.convertSMPTEtoSeconds(timecode[1]) === 0) ? 0.200 : mejs.Utility.convertSMPTEtoSeconds(timecode[1]),\n\t\t\t\t\t\t\tstop: mejs.Utility.convertSMPTEtoSeconds(timecode[3]),\n\t\t\t\t\t\t\tsettings: timecode[5]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tidentifier = '';\n\t\t\t\t}\n\t\t\t\treturn entries;\n\t\t\t}\n\t\t},\n\t\t// Thanks to Justin Capella: https://github.com/johndyer/mediaelement/pull/420\n\t\tdfxp: {\n\t\t\tparse: function(trackText) {\n\t\t\t\ttrackText = $(trackText).filter(\"tt\");\n\t\t\t\tvar\n\t\t\t\t\ti = 0,\n\t\t\t\t\tcontainer = trackText.children(\"div\").eq(0),\n\t\t\t\t\tlines = container.find(\"p\"),\n\t\t\t\t\tstyleNode = trackText.find(\"#\" + container.attr(\"style\")),\n\t\t\t\t\tstyles,\n\t\t\t\t\ttext,\n\t\t\t\t\tentries = {text:[], times:[]};\n\n\n\t\t\t\tif (styleNode.length) {\n\t\t\t\t\tvar attributes = styleNode.removeAttr(\"id\").get(0).attributes;\n\t\t\t\t\tif (attributes.length) {\n\t\t\t\t\t\tstyles = {};\n\t\t\t\t\t\tfor (i = 0; i < attributes.length; i++) {\n\t\t\t\t\t\t\tstyles[attributes[i].name.split(\":\")[1]] = attributes[i].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0; i<lines.length; i++) {\n\t\t\t\t\tvar style;\n\t\t\t\t\tvar _temp_times = {\n\t\t\t\t\t\tstart: null,\n\t\t\t\t\t\tstop: null,\n\t\t\t\t\t\tstyle: null\n\t\t\t\t\t};\n\t\t\t\t\tif (lines.eq(i).attr(\"begin\")) _temp_times.start = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr(\"begin\"));\n\t\t\t\t\tif (!_temp_times.start && lines.eq(i-1).attr(\"end\")) _temp_times.start = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr(\"end\"));\n\t\t\t\t\tif (lines.eq(i).attr(\"end\")) _temp_times.stop = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr(\"end\"));\n\t\t\t\t\tif (!_temp_times.stop && lines.eq(i+1).attr(\"begin\")) _temp_times.stop = mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr(\"begin\"));\n\t\t\t\t\tif (styles) {\n\t\t\t\t\t\tstyle = \"\";\n\t\t\t\t\t\tfor (var _style in styles) {\n\t\t\t\t\t\t\tstyle += _style + \":\" + styles[_style] + \";\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (style) _temp_times.style = style;\n\t\t\t\t\tif (_temp_times.start === 0) _temp_times.start = 0.200;\n\t\t\t\t\tentries.times.push(_temp_times);\n\t\t\t\t\ttext = $.trim(lines.eq(i).html()).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n\t\t\t\t\tentries.text.push(text);\n\t\t\t\t\tif (entries.times.start === 0) entries.times.start = 2;\n\t\t\t\t}\n\t\t\t\treturn entries;\n\t\t\t}\n\t\t},\n\t\tsplit2: function (text, regex) {\n\t\t\t// normal version for compliant browsers\n\t\t\t// see below for IE fix\n\t\t\treturn text.split(regex);\n\t\t}\n\t};\n\n\t// test for browsers with bad String.split method.\n\tif ('x\\n\\ny'.split(/\\n/gi).length != 3) {\n\t\t// add super slow IE8 and below version\n\t\tmejs.TrackFormatParser.split2 = function(text, regex) {\n\t\t\tvar\n\t\t\t\tparts = [],\n\t\t\t\tchunk = '',\n\t\t\t\ti;\n\n\t\t\tfor (i=0; i<text.length; i++) {\n\t\t\t\tchunk += text.substring(i,i+1);\n\t\t\t\tif (regex.test(chunk)) {\n\t\t\t\t\tparts.push(chunk.replace(regex, ''));\n\t\t\t\t\tchunk = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tparts.push(chunk);\n\t\t\treturn parts;\n\t\t};\n\t}\n\n});\n\n",
    "define('components/adapt-contrib-media/js/adapt-contrib-media',['require','coreViews/componentView','coreJS/adapt','components/adapt-contrib-media/libraries/mediaelement-and-player','components/adapt-contrib-media/libraries/mediaelement-and-player-accessible-captions'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var mediaelementAndPlayer = require('components/adapt-contrib-media/libraries/mediaelement-and-player');\n    var mediaelementAndPlayerAccessibleCaptions = require('components/adapt-contrib-media/libraries/mediaelement-and-player-accessible-captions');\n\n    var froogaloopAdded = false;\n\n    // The following function is used to to prevent a memory leak in Internet Explorer\n    // See: http://javascript.crockford.com/memory/leak.html\n    function purge(d) {\n        var a = d.attributes, i, l, n;\n        if (a) {\n            for (i = a.length - 1; i >= 0; i -= 1) {\n                n = a[i].name;\n                if (typeof d[n] === 'function') {\n                    d[n] = null;\n                }\n            }\n        }\n        a = d.childNodes;\n        if (a) {\n            l = a.length;\n            for (i = 0; i < l; i += 1) {\n                purge(d.childNodes[i]);\n            }\n        }\n    }\n\n    var Media = ComponentView.extend({\n\n        events: {\n            \"click .media-inline-transcript-button\": \"onToggleInlineTranscript\",\n            \"click .media-external-transcript-button\": \"onExternalTranscriptClicked\"\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, {\n                'device:resize': this.onScreenSizeChanged,\n                'device:changed': this.onDeviceChanged,\n                'accessibility:toggle': this.onAccessibilityToggle,\n                'media:stop': this.onMediaStop\n            });\n\n            _.bindAll(this, 'onMediaElementPlay', 'onMediaElementPause', 'onMediaElementEnded', 'onMediaElementTimeUpdate', 'onMediaElementSeeking');\n\n            // set initial player state attributes\n            this.model.set({\n                '_isMediaEnded': false,\n                '_isMediaCompleted': false,\n                '_isMediaPlaying': false\n            });\n\n            if (this.model.get('_media').source) {\n                // Remove the protocol for streaming service.\n                // This prevents conflicts with HTTP/HTTPS\n                var media = this.model.get('_media');\n\n                media.source = media.source.replace(/^https?\\:/, \"\");\n\n                this.model.set('_media', media);\n            }\n\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.setupPlayer();\n            this.addTabIndex();\n        },\n        addTabIndex:function(){\n            console.log(this.$el);\n            this.$('.mejs-container').attr('tabindex','0');\n\n        },\n\n        setupPlayer: function() {\n            if (!this.model.get('_playerOptions')) this.model.set('_playerOptions', {});\n\n            var modelOptions = this.model.get('_playerOptions');\n\n            if (modelOptions.pluginPath === undefined) modelOptions.pluginPath = 'assets/';\n            if(modelOptions.features === undefined) {\n                modelOptions.features = ['playpause','progress','current','duration'];\n                if (this.model.get('_useClosedCaptions')) {\n                    modelOptions.features.unshift('tracks');\n                }\n                if (this.model.get(\"_allowFullScreen\") && !$(\"html\").is(\".ie9\")) {\n                    modelOptions.features.push('fullscreen');\n                }\n            }\n\n            modelOptions.success = _.bind(this.onPlayerReady, this);\n\n            if (this.model.get('_useClosedCaptions')) {\n                modelOptions.startLanguage = this.model.get('_startLanguage') === undefined ? 'en' : this.model.get('_startLanguage');\n            }\n\n            var hasAccessibility = Adapt.config.has('_accessibility') && Adapt.config.get('_accessibility')._isActive\n                ? true\n                : false;\n\n            if (hasAccessibility) {\n                modelOptions.alwaysShowControls = true;\n                modelOptions.hideVideoControlsOnLoad = false;\n            }\n\n            if (modelOptions.alwaysShowControls === undefined) {\n                modelOptions.alwaysShowControls = false;\n            }\n            if (modelOptions.hideVideoControlsOnLoad === undefined) {\n                modelOptions.hideVideoControlsOnLoad = true;\n            }\n\n            this.addMediaTypeClass();\n\n            this.addThirdPartyFixes(modelOptions, _.bind(function createPlayer() {\n                // create the player\n                this.$('audio, video').mediaelementplayer(modelOptions);\n\n                // We're streaming - set ready now, as success won't be called above\n                try {\n                    if (this.model.get('_media').source) {\n                        this.$('.media-widget').addClass('external-source');\n                    }\n                } catch (e) {\n                    console.log(\"ERROR! No _media property found in components.json for component \" + this.model.get('_id'));\n                } finally {\n                    this.setReadyStatus();\n                }\n            }, this));\n        },\n\n        addMediaTypeClass: function() {\n            var media = this.model.get(\"_media\");\n            if (media && media.type) {\n                var typeClass = media.type.replace(/\\//, \"-\");\n                this.$(\".media-widget\").addClass(typeClass);\n            }\n        },\n\n        addThirdPartyFixes: function(modelOptions, callback) {\n            var media = this.model.get(\"_media\");\n            if (!media) return callback();\n\n            switch (media.type) {\n                case \"video/vimeo\":\n                    modelOptions.alwaysShowControls = false;\n                    modelOptions.hideVideoControlsOnLoad = true;\n                    modelOptions.features = [];\n                    if (froogaloopAdded) return callback();\n                    Modernizr.load({\n                        load: \"assets/froogaloop.js\",\n                        complete: function() {\n                            froogaloopAdded = true;\n                            callback();\n                        }\n                    });\n                    break;\n                default:\n                    callback();\n            }\n        },\n\n        setupEventListeners: function() {\n            this.completionEvent = (!this.model.get('_setCompletionOn')) ? 'play' : this.model.get('_setCompletionOn');\n\n            if (this.completionEvent === 'inview') {\n                this.$('.component-widget').on('inview', _.bind(this.inview, this));\n            } else {\n                this.onCompletion = _.bind(this.onCompletion, this);\n                this.mediaElement.addEventListener(this.completionEvent, this.onCompletion);\n            }\n\n            // wrapper to check if preventForwardScrubbing is turned on.\n            if ((this.model.get('_preventForwardScrubbing')) && (!this.model.get('_isComplete'))) {\n                $(this.mediaElement).on({\n                    'seeking': this.onMediaElementSeeking,\n                    'timeupdate': this.onMediaElementTimeUpdate\n                });\n            }\n\n            // handle other completion events in the event Listeners\n            $(this.mediaElement).on({\n                'play': this.onMediaElementPlay.bind(this),\n                'pause': this.onMediaElementPause.bind(this),\n                'ended': this.onMediaElementEnded.bind(this)\n            });\n        },\n\n        onMediaElementPlay: function(event) {\n            this.model.set({\n                '_isMediaPlaying': true,\n                '_isMediaEnded': false\n            });\n\n            if (this.completionEvent === 'play') {\n                this.setCompletionStatus();\n            }\n        },\n\n        onMediaElementPause: function(event) {\n            this.model.set('_isMediaPlaying', false);\n        },\n\n        onMediaElementEnded: function(event) {\n            this.model.set('_isMediaEnded', true);\n            this.model.set('_isMediaCompleted', true);\n\n            if (this.completionEvent === 'ended') {\n                this.setCompletionStatus();\n            }\n        },\n\n        onMediaElementSeeking: function(event) {\n            var maxViewed = this.model.get(\"_maxViewed\");\n            if(!maxViewed) {\n                maxViewed = 0;\n            }\n            if (event.target.currentTime > maxViewed) {\n                event.target.currentTime = maxViewed;\n            }\n        },\n\n        onMediaElementTimeUpdate: function(event) {\n            var maxViewed = this.model.get(\"_maxViewed\");\n            if (!maxViewed) {\n                maxViewed = 0;\n            }\n            if (event.target.currentTime > maxViewed) {\n                this.model.set(\"_maxViewed\", event.target.currentTime);\n            }\n        },\n\n        // Overrides the default play/pause functionality to stop accidental playing on touch devices\n        setupPlayPauseToggle: function() {\n            // bit sneaky, but we don't have a this.mediaElement.player ref on iOS devices\n            var player = this.mediaElement.player;\n\n            if (!player) {\n                console.log(\"Media.setupPlayPauseToggle: OOPS! there's no player reference.\");\n                return;\n            }\n\n            // stop the player dealing with this, we'll do it ourselves\n            player.options.clickToPlayPause = false;\n\n            this.onOverlayClick = _.bind(this.onOverlayClick, this);\n            this.onMediaElementClick = _.bind(this.onMediaElementClick, this);\n\n            // play on 'big button' click\n            this.$('.mejs-overlay-button').on(\"click\", this.onOverlayClick);\n\n            // pause on player click\n            this.$('.mejs-mediaelement').on(\"click\", this.onMediaElementClick);\n        },\n\n        onMediaStop: function() {\n            var player = this.mediaElement.player;\n            if (!player) return;\n\n            player.pause();\n        },\n\n        onOverlayClick: function() {\n            var player = this.mediaElement.player;\n            if (!player) return;\n\n            player.play();\n        },\n\n        onMediaElementClick: function(event) {\n            var player = this.mediaElement.player;\n            if (!player) return;\n\n            var isPaused = player.media.paused;\n            if(!isPaused) player.pause();\n        },\n\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.component-inner').off('inview');\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        remove: function() {\n            this.$('.mejs-overlay-button').off(\"click\", this.onOverlayClick);\n            this.$('.mejs-mediaelement').off(\"click\", this.onMediaElementClick);\n\n            var modelOptions = this.model.get('_playerOptions');\n            delete modelOptions.success;\n\n            var media = this.model.get(\"_media\");\n            if (media) {\n                switch (media.type) {\n                case \"video/vimeo\":\n                    this.$(\"iframe\")[0].isRemoved = true;\n                }\n            }\n\n            if ($(\"html\").is(\".ie8\")) {\n                var obj = this.$(\"object\")[0];\n                if (obj) {\n                    obj.style.display = \"none\";\n                }\n            }\n            if (this.mediaElement && this.mediaElement.player) {\n\n                if (this.completionEvent !== 'inview') {\n                    this.mediaElement.removeEventListener(this.completionEvent, this.onCompletion);\n                }\n\n                var player_id = this.mediaElement.player.id;\n\n                purge(this.$el[0]);\n                this.mediaElement.player.remove();\n\n                if (mejs.players[player_id]) {\n                    delete mejs.players[player_id];\n                }\n            }\n\n            if (this.mediaElement) {\n                $(this.mediaElement).off({\n                    'play': this.onMediaElementPlay,\n                    'pause': this.onMediaElementPause,\n                    'ended': this.onMediaElementEnded,\n                    'seeking': this.onMediaElementSeeking,\n                    'timeupdate': this.onMediaElementTimeUpdate\n                });\n\n                this.mediaElement.src = \"\";\n                $(this.mediaElement.pluginElement).remove();\n                delete this.mediaElement;\n            }\n\n            ComponentView.prototype.remove.call(this);\n        },\n\n        onCompletion: function() {\n            this.setCompletionStatus();\n            // removeEventListener needs to pass in the method to remove the event in firefox and IE10\n            this.mediaElement.removeEventListener(this.completionEvent, this.onCompletion);\n        },\n\n        onDeviceChanged: function() {\n            if (this.model.get('_media').source) {\n                this.$('.mejs-container').width(this.$('.component-widget').width());\n            }\n        },\n\n        onPlayerReady: function (mediaElement, domObject) {\n            this.mediaElement = mediaElement;\n\n            if (!this.mediaElement.player) {\n                this.mediaElement.player =  mejs.players[this.$('.mejs-container').attr('id')];\n            }\n\n            var hasTouch = mejs.MediaFeatures.hasTouch;\n            if (hasTouch) {\n                this.setupPlayPauseToggle();\n            }\n\n            this.addThirdPartyAfterFixes();\n\n            this.setReadyStatus();\n            this.setupEventListeners();\n        },\n\n        addThirdPartyAfterFixes: function() {\n            var media = this.model.get(\"_media\");\n            switch (media.type) {\n            case \"video/vimeo\":\n                this.$(\".mejs-container\").attr(\"tabindex\", 0);\n            }\n        },\n\n        onScreenSizeChanged: function() {\n            this.$('audio, video').width(this.$('.component-widget').width());\n        },\n\n        onAccessibilityToggle: function() {\n           this.showControls();\n        },\n\n        onToggleInlineTranscript: function(event) {\n            if (event) event.preventDefault();\n            var $transcriptBodyContainer = this.$(\".media-inline-transcript-body-container\");\n            var $button = this.$(\".media-inline-transcript-button\");\n\n            if ($transcriptBodyContainer.hasClass(\"inline-transcript-open\")) {\n                $transcriptBodyContainer.slideUp(function() {\n                    $(window).resize();\n                });\n                $transcriptBodyContainer.removeClass(\"inline-transcript-open\");\n                $button.html(this.model.get(\"_transcript\").inlineTranscriptButton);\n            } else {\n                $transcriptBodyContainer.slideDown(function() {\n                    $(window).resize();\n                }).a11y_focus();\n                $transcriptBodyContainer.addClass(\"inline-transcript-open\");\n                $button.html(this.model.get(\"_transcript\").inlineTranscriptCloseButton);\n\n                if (this.model.get('_transcript')._setCompletionOnView !== false) {\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        onExternalTranscriptClicked: function(event) {\n            if (this.model.get('_transcript')._setCompletionOnView !== false) {\n                this.setCompletionStatus();\n            }\n        },\n\n        showControls: function() {\n            var hasAccessibility = Adapt.config.has('_accessibility') && Adapt.config.get('_accessibility')._isActive\n                ? true\n                : false;\n\n            if (hasAccessibility) {\n                if (!this.mediaElement.player) return;\n\n                var player = this.mediaElement.player;\n\n                player.options.alwaysShowControls = true;\n                player.options.hideVideoControlsOnLoad = false;\n                player.enableControls();\n                player.showControls();\n\n                this.$('.mejs-playpause-button button').attr({\n                    \"role\": \"button\"\n                });\n                var screenReaderVideoTagFix = $(\"<div role='region' aria-label='.'>\");\n                this.$('.mejs-playpause-button').prepend(screenReaderVideoTagFix);\n\n                this.$('.mejs-time, .mejs-time-rail').attr({\n                    \"aria-hidden\": \"true\"\n                });\n            }\n        }\n\n    });\n\n    Adapt.register('media', Media);\n\n    return Media;\n\n});\n\n",
    "define('components/adapt-contrib-narrative/js/adapt-contrib-narrative',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var Narrative = ComponentView.extend({\n\n        events: {\n            'click .narrative-strapline-title': 'openPopup',\n            'click .narrative-controls': 'onNavigationClicked',\n            'click .narrative-indicators .narrative-progress': 'onProgressClicked'\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.listenTo(Adapt, 'device:resize', this.resizeControl, this);\n            this.listenTo(Adapt, 'notify:closed', this.closeNotify, this);\n            this.setDeviceSize();\n            // Checks to see if the narrative should be reset on revisit\n            this.checkIfResetOnRevisit();\n            this.model.set({\n                'AdobeEdges': [],\n                'edgeCompositionIds': [],\n                'edgeCompositionStages': []\n            });\n\n            if(this.model.get('_isPartOfVerticalBlockSlider')) {\n                 this.model.set('_didYouKnow')._isEnabled=false;\n            }\n        },\n\n        setDeviceSize: function() {\n            if (Adapt.device.screenSize === 'large') {\n                this.$el.addClass('desktop').removeClass('mobile');\n                this.model.set('_isDesktop', true);\n            } else {\n                this.$el.addClass('mobile').removeClass('desktop');\n                this.model.set('_isDesktop', false)\n            }\n        },\n\n        postRender: function() {\n            this.renderState();\n            this.$('.narrative-slider').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n            this.setupNarrative();\n\n            var that = this;\n            var AdobeEdges = this.model.get('AdobeEdges');\n            var $narrativeSliderGraphic = this.$('.narrative-slider-graphic');\n            _.each(this.model.get('_items'), function(item, index) {\n                if (item._iframe && item._iframe.src) {\n                    var $iframe = $narrativeSliderGraphic.eq(index).find('iframe');\n                    $iframe.load(function() {\n                        AdobeEdges[index] = $iframe.get(0).contentWindow.AdobeEdge;\n\n                        if (AdobeEdges.length > 0) {\n                            window.AdobeEdge = AdobeEdges[index];\n                            AdobeEdges[index].bootstrapCallback(function(compId) {\n                                if (compId && compId.length > 0) {\n                                    that.onEdgeAnimationLoaded(index, compId);\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n        },\n\n        // Used to check if the narrative should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n                this.model.set({ _stage: 0 });\n\n                _.each(this.model.get('_items'), function(item) {\n                    item.visited = false;\n                });\n            }\n        },\n\n        setupNarrative: function() {\n            this.setDeviceSize();\n            this.model.set('_marginDir', 'left');\n            if (Adapt.config.get('_defaultDirection') == 'rtl') {\n                this.model.set('_marginDir', 'right');\n            }\n\n            this.model.set('_itemCount', this.model.get('_items').length);\n            //_sourcedItems used for storing all the iframe source in an array\n            var items = this.model.get('_items');\n\n            this.model.set('_active', true);\n\n            if (this.model.get('_stage')) {\n                this.setStage(this.model.get('_stage'), true);\n            } else {\n                this.setStage(0, true);\n            }\n            this.calculateWidths();\n\n            if (Adapt.device.screenSize !== 'large' && !this.model.get('_wasHotgraphic')) {\n                this.replaceInstructions();\n            }\n            this.setupEventListeners();\n\n            // if hasNavigationInTextArea set margin left\n            var hasNavigationInTextArea = this.model.get('_hasNavigationInTextArea');\n            if (hasNavigationInTextArea == true) {\n                var indicatorWidth = this.$('.narrative-indicators').width();\n                var marginLeft = indicatorWidth / 2;\n\n                this.$('.narrative-indicators').css({\n                    marginLeft: '-' + marginLeft + 'px'\n                });\n            }\n        },\n\n        injectEdgeObject: function(index) {\n            var AdobeEdges = this.model.get(\"AdobeEdges\");\n            if (AdobeEdges[index] && (!AdobeEdges[index].compositions[this.model.get(\"edgeCompositionIds\")[index]])) {\n                window.AdobeEdge = AdobeEdges[index];\n            }\n        },\n\n        onEdgeAnimationLoaded: function(index, compId) {\n            this.setReadyStatus();\n            this.model.get(\"edgeCompositionIds\")[index] = compId;\n            var AdobeEdges = this.model.get(\"AdobeEdges\");\n            var compositionStage = AdobeEdges[index].getComposition(compId).getStage();\n            this.model.get('edgeCompositionStages')[index] = compositionStage;\n        },\n\n        playEdgeAnimation: function(index) {\n            var composition = this.model.get('edgeCompositionStages')[index];\n            if (composition) {\n                this.injectEdgeObject(index);\n                composition.stop(0);\n                composition.play();\n            }\n        },\n\n        stopEdgeAnimation: function(index) {\n            var composition = this.model.get('edgeCompositionStages')[index];\n            if (composition) {\n                this.injectEdgeObject(index);\n                composition.stop(0);\n            }\n        },\n\n        calculateWidths: function() {\n            var slideWidth = this.$('.narrative-slide-container').width();\n            var slideCount = this.model.get('_itemCount');\n            var marginRight = this.$('.narrative-slider-graphic').css('margin-right');\n            var extraMargin = marginRight === '' ? 0 : parseInt(marginRight);\n            var fullSlideWidth = (slideWidth + extraMargin) * slideCount;\n            var iconWidth = this.$('.narrative-popup-open').outerWidth();\n\n            this.$('.narrative-slider-graphic').width(slideWidth);\n            this.$('.narrative-strapline-header').width(slideWidth);\n            this.$('.narrative-strapline-title').width(slideWidth);\n\n            this.$('.narrative-slider').width(fullSlideWidth);\n            this.$('.narrative-strapline-header-inner').width(fullSlideWidth);\n\n            var stage = this.model.get('_stage');\n            var margin = -(stage * slideWidth);\n\n            this.$('.narrative-slider').css(('margin-' + this.model.get('_marginDir')), margin);\n            this.$('.narrative-strapline-header-inner').css(('margin-' + this.model.get('_marginDir')), margin);\n            this.model.set('_finalItemLeft', fullSlideWidth - slideWidth);\n\n            if (this.model.get(\"_shouldScale\")) {\n\n                _.each(this.model.get('_items'), function(item, index) {\n\n                    if (item._iframe && item._iframe.src) {\n                        var scale = slideWidth / item._iframe._width;\n                        this.$('.narrative-frame').css({\n                            '-ms-transform': 'scale(' + scale + ')',\n                            '-moz-transform': 'scale(' + scale + ')',\n                            '-webkit-transform': 'scale(' + scale + ')',\n                            '-webkit-transform-style': 'preserve-3d',\n                            '-webkit-transform': 'scale3d(' + scale + ',' + scale + ',' + scale + ')',\n                            'transform': 'scale(' + scale + ')'\n                        });\n\n                        _.defer(_.bind(function() {\n                            this.$('.narrative-slider-graphic').eq(index).height(item._iframe._height * scale);\n                        }, this));\n                    }\n                });\n            }\n        },\n\n        resizeControl: function() {\n            this.setDeviceSize();\n            this.replaceInstructions();\n            this.calculateWidths();\n            this.evaluateNavigation();\n        },\n\n        reRender: function() {\n            if (this.model.get('_wasHotgraphic') && Adapt.device.screenSize == 'large') {\n                this.replaceWithHotgraphic();\n            } else {\n                this.resizeControl();\n            }\n        },\n\n        closeNotify: function() {\n            this.evaluateCompletion();\n        },\n\n        replaceInstructions: function() {\n            if (Adapt.device.screenSize === 'large') {\n                this.$('.narrative-instruction-inner').html(this.model.get('instruction')).a11y_text();\n            } else if (this.model.get('mobileInstruction') && !this.model.get('_wasHotgraphic')) {\n                this.$('.narrative-instruction-inner').html(this.model.get('mobileInstruction')).a11y_text();\n            }\n        },\n\n        replaceWithHotgraphic: function() {\n            if (!Adapt.componentStore.hotgraphic) throw \"Hotgraphic not included in build\";\n            var Hotgraphic = Adapt.componentStore.hotgraphic;\n            var model = this.prepareHotgraphicModel();\n            var newHotgraphic = new Hotgraphic({ model: model });\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n\n            $container.append(newHotgraphic.$el);\n            this.remove();\n            _.defer(function() {\n                Adapt.trigger('device:resize');\n            });\n        },\n\n        prepareHotgraphicModel: function() {\n            var model = this.model;\n            model.set('_component', 'hotgraphic');\n            model.set('body', model.get('originalBody'));\n            model.set('instruction', model.get('originalInstruction'));\n            return model;\n        },\n\n        moveSliderToIndex: function(itemIndex, animate, callback) {\n            var extraMargin = parseInt(this.$('.narrative-slider-graphic').css('margin-right'));\n            var movementSize = this.$('.narrative-slide-container').width() + extraMargin;\n            var marginDir = {};\n            if (animate && !Adapt.config.get('_disableAnimation')) {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.narrative-slider').velocity(\"stop\", true).velocity(marginDir);\n                this.$('.narrative-strapline-header-inner').velocity(\"stop\", true).velocity(marginDir, { complete: callback });\n            } else {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.narrative-slider').css(marginDir);\n                this.$('.narrative-strapline-header-inner').css(marginDir);\n                callback();\n            }\n        },\n\n        setStage: function(stage, initial) {\n            this.model.set('_stage', stage);\n            if (this.model.get('_isDesktop')) {\n                // Set the visited attribute for large screen devices\n                var currentItem = this.getCurrentItem(stage);\n                currentItem.visited = true;\n            }\n\n            this.$('.narrative-progress:visible').removeClass('selected').eq(stage).addClass('selected');\n            this.$('.narrative-slider-graphic').children('.controls').a11y_cntrl_enabled(false);\n            this.$('.narrative-slider-graphic').eq(stage).children('.controls').a11y_cntrl_enabled(true);\n            this.$('.narrative-content-item').addClass('narrative-hidden').a11y_on(false).eq(stage).removeClass('narrative-hidden').a11y_on(true);\n            this.$('.narrative-strapline-title').a11y_cntrl_enabled(false).eq(stage).a11y_cntrl_enabled(true);\n\n            this.evaluateNavigation();\n            this.evaluateCompletion();\n\n            this.moveSliderToIndex(stage, !initial, _.bind(function() {\n                if (this.model.get('_isDesktop')) {\n                    if (!initial) this.$('.narrative-content-item').eq(stage).a11y_focus();\n                } else {\n                    if (!initial) this.$('.narrative-popup-open').a11y_focus();\n                }\n            }, this));\n        },\n\n        constrainStage: function(stage) {\n            if (stage > this.model.get('_items').length - 1) {\n                stage = this.model.get('_items').length - 1;\n            } else if (stage < 0) {\n                stage = 0;\n            }\n            return stage;\n        },\n\n        constrainXPosition: function(previousLeft, newLeft, deltaX) {\n            if (newLeft > 0 && deltaX > 0) {\n                newLeft = previousLeft + (deltaX / (newLeft * 0.1));\n            }\n            var finalItemLeft = this.model.get('_finalItemLeft');\n            if (newLeft < -finalItemLeft && deltaX < 0) {\n                var distance = Math.abs(newLeft + finalItemLeft);\n                newLeft = previousLeft + (deltaX / (distance * 0.1));\n            }\n            return newLeft;\n        },\n\n        evaluateNavigation: function() {\n            var currentStage = this.model.get('_stage');\n            var itemCount = this.model.get('_itemCount');\n            if (currentStage == 0) {\n                this.$('.narrative-control-left').addClass('narrative-hidden');\n\n                if (itemCount > 1) {\n                    this.$('.narrative-control-right').removeClass('narrative-hidden');\n                }\n            } else {\n                this.$('.narrative-control-left').removeClass('narrative-hidden');\n\n                if (currentStage == itemCount - 1) {\n                    this.$('.narrative-control-right').addClass('narrative-hidden');\n                } else {\n                    this.$('.narrative-control-right').removeClass('narrative-hidden');\n                }\n            }\n\n        },\n\n        getNearestItemIndex: function() {\n            var currentPosition = parseInt(this.$('.narrative-slider').css('margin-left'));\n            var graphicWidth = this.$('.narrative-slider-graphic').width();\n            var absolutePosition = currentPosition / graphicWidth;\n            var stage = this.model.get('_stage');\n            var relativePosition = stage - Math.abs(absolutePosition);\n\n            if (relativePosition < -0.3) {\n                stage++;\n            } else if (relativePosition > 0.3) {\n                stage--;\n            }\n\n            return this.constrainStage(stage);\n        },\n\n        getCurrentItem: function(index) {\n            return this.model.get('_items')[index];\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item.visited;\n            });\n        },\n\n        evaluateCompletion: function() {\n            if (this.getVisitedItems().length === this.model.get('_items').length) {\n                this.trigger('allItems');\n            }\n        },\n\n        moveElement: function($element, deltaX) {\n            var previousLeft = parseInt($element.css('margin-left'));\n            var newLeft = previousLeft + deltaX;\n\n            newLeft = this.constrainXPosition(previousLeft, newLeft, deltaX);\n            $element.css(('margin-' + this.model.get('_marginDir')), newLeft + 'px');\n        },\n\n        openPopup: function(event) {\n            event.preventDefault();\n            var currentItem = this.getCurrentItem(this.model.get('_stage'));\n            var popupObject = {\n                title: currentItem.title,\n                body: currentItem.body\n            };\n            // Set the visited attribute for small and medium screen devices\n            currentItem.visited = true;\n\n            Adapt.trigger('notify:popup', popupObject);\n        },\n\n        onNavigationClicked: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            if (!this.model.get('_active')) return;\n\n            var stage = this.model.get('_stage');\n            var numberOfItems = this.model.get('_itemCount');\n\n            if ($(event.currentTarget).hasClass('narrative-control-right')) {\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.stopEdgeAnimation(stage);\n                }\n                stage++;\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.playEdgeAnimation(stage);\n                }\n            } else if ($(event.currentTarget).hasClass('narrative-control-left')) {\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.stopEdgeAnimation(stage);\n                }\n                stage--;\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.playEdgeAnimation(stage);\n                }\n            }\n            stage = (stage + numberOfItems) % numberOfItems;\n            this.setStage(stage);\n        },\n\n        onProgressClicked: function(event) {\n            event.preventDefault();\n            var clickedIndex = $(event.target).index();\n            this.setStage(clickedIndex);\n        },\n\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    //this.$('.component-inner').off('inview');\n                    if(this.completionEvent === 'inview') {\n                        this.setCompletionStatus();\n                    }\n                    this.playEdgeAnimation(this.model.get('_stage'));\n                }\n            } else {\n                this.stopEdgeAnimation(this.model.get('_stage'));\n            }\n        },\n\n        onCompletion: function() {\n            this.setCompletionStatus();\n            if (this.completionEvent && this.completionEvent != 'inview') {\n                this.off(this.completionEvent, this);\n            }\n        },\n\n        setupEventListeners: function() {\n            this.completionEvent = (!this.model.get('_setCompletionOn')) ? 'allItems' : this.model.get('_setCompletionOn');\n            if (this.completionEvent !== 'inview') {\n                this.on(this.completionEvent, _.bind(this.onCompletion, this));\n            }\n            this.$('.component-widget').on('inview', _.bind(this.onInview, this));\n        }\n\n    });\n\n    Adapt.register('narrative', Narrative);\n\n    return Narrative;\n\n});\n\n",
    "/*\n* adapt-contrib-responsiveIframe\n* License - http://github.com/adaptlearning/adapt_framework/LICENSE\n* Maintainers - Kevin Corry <kevinc@learningpool.com>\n*/\ndefine('components/adapt-contrib-responsiveIframe/js/adapt-contrib-responsiveIframe',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require(\"coreViews/componentView\");\n    var Adapt = require(\"coreJS/adapt\");\n\n    var ResponsiveIframe = ComponentView.extend({\n\n        events: {\n            'inview':'inview'\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.resizeControl);\n        },\n\n        postRender: function() {\n            var that = this;\n            this.$('.responsiveIframe-iframe').ready(function() {\n                that.resizeControl(Adapt.device.screenSize);\n                that.setReadyStatus();\n            });\n        },\n\n        inview: function(event, visible) {\n            if (visible) {\n                this.setCompletionStatus();\n            }\n        },\n\n        resizeControl: function(size) {\n            var width = this.$('.responsiveIframe-iframe').attr('data-width-' + size);\n            var height = this.$('.responsiveIframe-iframe').attr('data-height-' + size);\n            this.$('.responsiveIframe-iframe').width(width);\n            this.$('.responsiveIframe-iframe').height(height);\n        }\n\n    });\n\n    Adapt.register(\"responsiveIframe\", ResponsiveIframe);\n\n});\n\n",
    "define('components/adapt-contrib-slider/js/adapt-contrib-slider',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var Slider = QuestionView.extend({\n\n        events: {\n            'click .slider-sliderange': 'onSliderSelected',\n            'click .slider-handle': 'preventEvent',\n            'click .slider-scale-number': 'onNumberSelected',\n            'touchstart .slider-handle':'onHandlePressed',\n            'mousedown .slider-handle': 'onHandlePressed',\n            'focus .slider-handle':'onHandleFocus',\n            'blur .slider-handle':'onHandleBlur'\n        },\n\n        // Used by the question to reset the question when revisiting the component\n        resetQuestionOnRevisit: function() {\n            this.setAllItemsEnabled(true);\n            this.deselectAllItems();\n            this.resetQuestion();\n        },\n\n        // Used by question to setup itself just before rendering\n        setupQuestion: function() {\n            if(!this.model.get('_items')) {\n                this.setupModelItems();\n            }\n\n            this.model.set({\n                _selectedItem: {}\n            });\n\n            this.restoreUserAnswers();\n            if (this.model.get('_isSubmitted')) return;\n\n            this.selectItem(0);\n        },\n\n        setupModelItems: function() {\n            var items = [];\n            var answer = this.model.get('_correctAnswer');\n            var range = this.model.get('_correctRange');\n            var start = this.model.get('_scaleStart');\n            var end = this.model.get('_scaleEnd');\n\n            for (var i = start; i <= end; i++) {\n                if (answer) {\n                    items.push({value: i, selected: false, correct: (i == answer)});\n                } else {\n                    items.push({value: i, selected: false, correct: (i >= range._bottom && i <= range._top)});\n                }\n            }\n\n            this.model.set('_items', items);\n        },\n\n        restoreUserAnswers: function() {\n            if (!this.model.get('_isSubmitted')) return;\n\n            var items = this.model.get('_items');\n            var userAnswer = this.model.get('_userAnswer');\n            for (var i = 0, l = items.length; i < l; i++) {\n                var item = items[i];\n                if (item.value == userAnswer) {\n                    this.model.set('_selectedItem', item);\n                    this.selectItem(this.getIndexFromValue(item.value));\n                    break;\n                }\n            }\n\n            this.setQuestionAsSubmitted();\n            this.markQuestion();\n            this.setScore();\n            this.showMarking();\n            this.setupFeedback();\n        },\n\n        // Used by question to disable the question during submit and complete stages\n        disableQuestion: function() {\n            this.setAllItemsEnabled(false);\n        },\n\n        // Used by question to enable the question during interactions\n        enableQuestion: function() {\n            this.setAllItemsEnabled(true);\n        },\n\n        setAllItemsEnabled: function(isEnabled) {\n            if (isEnabled) {\n                this.$('.slider-widget').removeClass('disabled');\n            } else {\n                this.$('.slider-widget').addClass('disabled');\n            }\n        },\n\n        // Used by question to setup itself just after rendering\n        onQuestionRendered: function() {\n            this.setScalePositions();\n            this.onScreenSizeChanged();\n            this.showScaleMarker(true);\n            this.listenTo(Adapt, 'device:resize', this.onScreenSizeChanged);\n            this.setAltText(this.model.get('_scaleStart'));\n            this.setReadyStatus();\n        },\n\n        // this should make the slider handle, slider marker and slider bar to animate to give position\n        animateToPosition: function(newPosition) {\n            this.$('.slider-handle').stop(true).animate({\n                left: newPosition + 'px'\n            },200);\n            this.$('.slider-bar').stop(true).animate({width:newPosition + 'px'});\n            this.$('.slider-scale-marker').stop(true).animate({\n                left: newPosition + 'px'\n            },200);\n            this.$('.slider-bar').stop(true).animate({width:newPosition + 'px'});\n        },\n\n        // this shoud give the index of item using given slider value\n        getIndexFromValue: function(itemValue) {\n            var scaleStart = this.model.get('_scaleStart'),\n                scaleEnd = this.model.get('_scaleEnd');\n            return Math.floor(this.mapValue(itemValue, scaleStart, scaleEnd, 0, this.model.get('_items').length - 1));\n        },\n\n        // this should set given value to slider handle\n        setAltText: function(value) {\n            this.$('.slider-handle').attr('aria-valuenow', value);\n        },\n\n        mapIndexToPixels: function(value, $widthObject) {\n            var numberOfItems = this.model.get('_items').length,\n                width = $widthObject ? $widthObject.width() : this.$('.slider-sliderange').width();\n\n            return Math.round(this.mapValue(value, 0, numberOfItems - 1, 0, width));\n        },\n\n        mapPixelsToIndex: function(value) {\n            var numberOfItems = this.model.get('_items').length,\n                width = this.$('.slider-sliderange').width();\n\n            return Math.round(this.mapValue(value, 0, width, 0, numberOfItems - 1));\n        },\n\n        normalise: function(value, low, high) {\n            var range = high - low;\n            return (value - low) / range;\n        },\n\n        mapValue: function(value, inputLow, inputHigh, outputLow, outputHigh) {\n            var normal = this.normalise(value, inputLow, inputHigh);\n            return normal * (outputHigh - outputLow) + outputLow;\n        },\n\n        onDragReleased: function (event) {\n            event.preventDefault();\n\n            if (Modernizr.touch) {\n                this.$('.slider-handle').off('touchmove');\n            } else {\n                $(document).off('mousemove.adapt-contrib-slider');\n            }\n\n            var itemValue = this.model.get('_selectedItem').value;\n            var itemIndex = this.getIndexFromValue(itemValue);\n            this.animateToPosition(this.mapIndexToPixels(itemIndex));\n            this.setAltText(itemValue);\n        },\n\n        onHandleDragged: function (event) {\n            event.preventDefault();\n            var left = (event.pageX || event.originalEvent.touches[0].pageX) - event.data.offsetLeft;\n            left = Math.max(Math.min(left, event.data.width), 0);\n\n            this.$('.slider-handle').css({\n                left: left + 'px'\n            });\n\n            this.$('.slider-scale-marker').css({\n                left: left + 'px'\n            });\n\n            this.selectItem(this.mapPixelsToIndex(left));\n        },\n\n        onHandleFocus: function(event) {\n            event.preventDefault();\n            this.$('.slider-handle').on('keydown', _.bind(this.onKeyDown, this));\n        },\n\n        onHandleBlur: function(event) {\n            event.preventDefault();\n            this.$('.slider-handle').off('keydown');\n        },\n\n        onHandlePressed: function (event) {\n            event.preventDefault();\n            if (!this.model.get('_isEnabled') || this.model.get('_isSubmitted')) return;\n\n            this.showScaleMarker(true);\n\n            var eventData = {\n                width:this.$('.slider-sliderange').width(),\n                offsetLeft: this.$('.slider-sliderange').offset().left\n            };\n\n            if(Modernizr.touch) {\n                this.$('.slider-handle').on('touchmove', eventData, _.bind(this.onHandleDragged, this));\n                this.$('.slider-handle').one('touchend', eventData, _.bind(this.onDragReleased, this));\n            } else {\n                $(document).on('mousemove.adapt-contrib-slider', eventData, _.bind(this.onHandleDragged, this));\n                $(document).one('mouseup', eventData, _.bind(this.onDragReleased, this));\n            }\n        },\n\n        onKeyDown: function(event) {\n            if(event.which == 9) return; // tab key\n            event.preventDefault();\n\n            var newItemIndex = this.getIndexFromValue(this.model.get('_selectedItem').value);\n\n            switch (event.which) {\n                case 40: //  down\n                case 37: //  left\n                    newItemIndex = Math.max(newItemIndex - 1, 0);\n                    break;\n                case 38: //  up\n                case 39: //  right\n                    newItemIndex = Math.min(newItemIndex + 1, this.model.get('_items').length - 1);\n                    break;\n            }\n\n            this.selectItem(newItemIndex);\n            if(typeof newItemIndex == 'number') this.showScaleMarker(true);\n            this.animateToPosition(this.mapIndexToPixels(newItemIndex));\n            this.setAltText(this.getValueFromIndex(newItemIndex));\n        },\n\n        onSliderSelected: function (event) {\n            event.preventDefault();\n\n            if (!this.model.get('_isEnabled') || this.model.get('_isSubmitted')) {\n              return;\n            }\n\n            this.showScaleMarker(true);\n\n            var offsetLeft = this.$('.slider-sliderange').offset().left;\n            var width = this.$('.slider-sliderange').width();\n            var left = (event.pageX || event.originalEvent.touches[0].pageX) - offsetLeft;\n\n            left = Math.max(Math.min(left, width), 0);\n            var itemIndex = this.mapPixelsToIndex(left);\n            this.selectItem(itemIndex);\n            this.animateToPosition(this.mapIndexToPixels(itemIndex));\n            this.setAltText(this.getValueFromIndex(itemIndex));\n        },\n\n        onNumberSelected: function(event) {\n            event.preventDefault();\n\n            if (this.model.get('_isComplete')) {\n              return;\n            }\n\n            var itemValue = parseInt($(event.currentTarget).attr('data-id'));\n            var index = this.getIndexFromValue(itemValue);\n            var $scaler = this.$('.slider-scaler');\n            this.selectItem(index);\n            this.animateToPosition(this.mapIndexToPixels(index, $scaler));\n            this.setAltText(itemValue);\n        },\n\n        getValueFromIndex: function(index) {\n          return this.model.get('_items')[index].value;\n        },\n\n        preventEvent: function(event) {\n            event.preventDefault();\n        },\n\n        resetControlStyles: function() {\n            this.$('.slider-handle').empty();\n            this.showScaleMarker(false);\n            this.$('.slider-bar').animate({width:'0px'});\n        },\n\n        /**\n        * allow the user to submit immediately; the slider handle may already be in the position they want to choose\n        */\n        canSubmit: function() {\n            return true;\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {},\n\n        //This preserves the state of the users answers for returning or showing the users answer\n        storeUserAnswer: function() {\n            this.model.set('_userAnswer', this.model.get('_selectedItem').value);\n        },\n\n        isCorrect: function() {\n            var numberOfCorrectAnswers = 0;\n\n            _.each(this.model.get('_items'), function(item, index) {\n                if(item.selected && item.correct)  {\n                    this.model.set('_isAtLeastOneCorrectSelection', true);\n                    numberOfCorrectAnswers++;\n                }\n            }, this);\n\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n\n            return this.model.get('_isAtLeastOneCorrectSelection') ? true : false;\n        },\n\n        // Used to set the score based upon the _questionWeight\n        setScore: function() {\n            var numberOfCorrectAnswers = this.model.get('_numberOfCorrectAnswers');\n            var questionWeight = this.model.get('_questionWeight');\n            var score = questionWeight * numberOfCorrectAnswers;\n            this.model.set('_score', score);\n        },\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {\n            this.$('.slider-item').removeClass('correct incorrect')\n                .addClass(this.model.get('_selectedItem').correct ? 'correct' : 'incorrect');\n        },\n\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        // Used by the question view to reset the stored user answer\n        resetUserAnswer: function() {\n            this.model.set({\n                _selectedItem: {},\n                _userAnswer: undefined\n            });\n        },\n\n        // Used by the question view to reset the look and feel of the component.\n        // This could also include resetting item data\n        resetQuestion: function() {\n            this.selectItem(0);\n            this.animateToPosition(0);\n            this.resetControlStyles();\n            this.showScaleMarker(true);\n            this.setAltText(this.model.get('_scaleStart'));\n        },\n\n        setScalePositions: function() {\n            var numberOfItems = this.model.get('_items').length;\n            _.each(this.model.get('_items'), function(item, index) {\n                var normalisedPosition = this.normalise(index, 0, numberOfItems -1);\n                this.$('.slider-scale-number').eq(index).data('normalisedPosition', normalisedPosition);\n            }, this);\n        },\n\n        showScale: function () {\n            this.$('.slider-markers').empty();\n            if (this.model.get('_showScale') === false) {\n                this.$('.slider-markers').eq(0).css({display: 'none'});\n                this.model.get('_showScaleIndicator')\n                    ? this.$('.slider-scale-numbers').eq(0).css({visibility: 'hidden'})\n                    : this.$('.slider-scale-numbers').eq(0).css({display: 'none'});\n            } else {\n                var $scaler = this.$('.slider-scaler');\n                var $markers = this.$('.slider-markers');\n                for (var i = 0, count = this.model.get('_items').length; i < count; i++) {\n                    $markers.append(\"<div class='slider-line component-item-color'>\");\n                    $('.slider-line', $markers).eq(i).css({left: this.mapIndexToPixels(i, $scaler) + 'px'});\n                }\n                var scaleWidth = $scaler.width(),\n                    $numbers = this.$('.slider-scale-number');\n                for (var i = 0, count = this.model.get('_items').length; i < count; i++) {\n                    var $number = $numbers.eq(i),\n                        newLeft = Math.round($number.data('normalisedPosition') * scaleWidth);\n                    $number.css({left: newLeft});\n                }\n            }\n        },\n\n        //Labels are enabled in slider.hbs. Here we manage their containing div.\n        showLabels: function () {\n            if(!this.model.get('labelStart') && !this.model.get('labelEnd')) {\n                this.$('.slider-scale-labels').eq(0).css({display: 'none'});\n            }\n        },\n\n        remapSliderBar: function() {\n            var $scaler = this.$('.slider-scaler');\n            var currentIndex = this.getIndexFromValue(this.model.get('_selectedItem').value);\n            this.$('.slider-handle').css({left: this.mapIndexToPixels(currentIndex, $scaler) + 'px'});\n            this.$('.slider-scale-marker').css({left: this.mapIndexToPixels(currentIndex, $scaler) + 'px'});\n            this.$('.slider-bar').width(this.mapIndexToPixels(currentIndex, $scaler));\n        },\n\n        onScreenSizeChanged: function() {\n            this.showScale();\n            this.showLabels();\n            this.remapSliderBar();\n            if (this.$('.slider-widget.user .button.model').css('display') === 'inline-block') {\n                this.hideCorrectAnswer();\n            } else if (this.$('.slider-widget.model .button.user ').css('display') === 'inline-block') {\n                this.showCorrectAnswer();\n            }\n        },\n\n        showCorrectAnswer: function() {\n            var answers = [];\n            var bottom = this.model.get('_correctRange')._bottom;\n            var top = this.model.get('_correctRange')._top;\n            var range = top - bottom;\n            var correctAnswer = this.model.get('_correctAnswer');\n\n            this.showScaleMarker(false);\n\n            if (correctAnswer) {\n                // Check that correctAnswer is neither undefined nor empty\n                answers.push(correctAnswer);\n            } else if (bottom !== undefined) {\n                for (var i = 0; i <= range; i++) {\n                  answers.push(this.model.get('_items')[this.getIndexFromValue(bottom) + i].value);\n                }\n            } else {\n                console.log(this.constructor + \"::WARNING: no correct answer or correct range set in JSON\")\n            }\n            var middleAnswer = answers[Math.floor(answers.length / 2)];\n            this.animateToPosition(this.mapIndexToPixels(this.getIndexFromValue(middleAnswer)));\n            this.showModelAnswers(answers);\n        },\n\n        showModelAnswers: function(correctAnswerArray) {\n            var $parentDiv = this.$('.slider-modelranges');\n            _.each(correctAnswerArray, function(correctAnswer, index) {\n                $parentDiv.append($(\"<div class='slider-model-answer component-item-color component-item-text-color'>\"));\n\n                var $element = $(this.$('.slider-modelranges .slider-model-answer')[index]),\n                    startingLeft = this.mapIndexToPixels(this.getIndexFromValue(this.model.get('_selectedItem').value));\n\n                if(this.model.get('_showNumber')) $element.html(correctAnswer);\n\n                $element.css({left:startingLeft}).fadeIn(0, _.bind(function() {\n                    $element.animate({left: this.mapIndexToPixels(this.getIndexFromValue(correctAnswer))});\n                }, this));\n            }, this);\n        },\n\n        // Used by the question to display the users answer and\n        // hide the correct answer\n        // Should use the values stored in storeUserAnswer\n        hideCorrectAnswer: function() {\n            var userAnswerIndex = this.getIndexFromValue(this.model.get('_userAnswer'));\n            this.$('.slider-modelranges').empty();\n\n            this.showScaleMarker(true);\n            this.selectItem(userAnswerIndex);\n            this.animateToPosition(this.mapIndexToPixels(userAnswerIndex));\n        },\n\n        // according to given item index this should make the item as selected\n        selectItem: function(itemIndex) {\n            this.$el.a11y_selected(false);\n            _.each(this.model.get('_items'), function(item, index) {\n                item.selected = (index == itemIndex);\n                if(item.selected) {\n                    this.model.set('_selectedItem', item);\n                    this.$('.slider-scale-number[data-id=\"'+(itemIndex+1)+'\"]').a11y_selected(true);\n                }\n            }, this);\n            this.showNumber(true);\n        },\n\n        // this should reset the selected state of each item\n        deselectAllItems: function() {\n            _.each(this.model.get('_items'), function(item) {\n                item.selected = false;\n            }, this);\n        },\n\n        // this makes the marker visible or hidden\n        showScaleMarker: function(show) {\n            var $scaleMarker = this.$('.slider-scale-marker');\n            if (this.model.get('_showScaleIndicator')) {\n                this.showNumber(show);\n                if(show) {\n                    $scaleMarker.addClass('display-block');\n                } else {\n                    $scaleMarker.removeClass('display-block');\n                }\n            }\n        },\n\n        // this should add the current slider value to the marker\n        showNumber: function(show) {\n            var $scaleMarker = this.$('.slider-scale-marker');\n            if(this.model.get('_showNumber')) {\n                if(show) {\n                    $scaleMarker.html(this.model.get('_selectedItem').value);\n                } else {\n                    $scaleMarker.html = \"\";\n                }\n            }\n        },\n\n        /**\n        * Used by adapt-contrib-spoor to get the user's answers in the format required by the cmi.interactions.n.student_response data field\n        */\n        getResponse:function() {\n            return this.model.get('_userAnswer').toString();\n        },\n\n        /**\n        * Used by adapt-contrib-spoor to get the type of this question in the format required by the cmi.interactions.n.type data field\n        */\n        getResponseType:function() {\n            return \"numeric\";\n        }\n\n    });\n\n    Adapt.register('slider', Slider);\n\n    return Slider;\n});\n\n",
    "define('components/adapt-contrib-text/js/adapt-contrib-text',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var Text = ComponentView.extend({\n\n        preRender: function() {\n            // Checks to see if the text should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.setReadyStatus();\n\n            // Check if instruction or title or body is set, otherwise force completion\n            var cssSelector = this.$('.component-instruction').length > 0\n                ? '.component-instruction'\n                : (this.$('.component-title').length > 0 \n                ? '.component-title' \n                : (this.$('.component-body').length > 0 \n                ? '.component-body' \n                : null));\n\n            if (!cssSelector) {\n                this.setCompletionStatus();\n            } else {\n                this.model.set('cssSelector', cssSelector);\n                this.$(cssSelector).on('inview', _.bind(this.inview, this));\n            }\n        },\n\n        // Used to check if the text should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n        },\n\n        inview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$(this.model.get('cssSelector')).off('inview');\n                    this.setCompletionStatus();\n                }\n            }\n        }\n\n    });\n\n    Adapt.register('text', Text);\n\n    return Text;\n\n});\n\n",
    "define('components/adapt-contrib-textInput/js/adapt-contrib-textInput',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var genericAnswerIndexOffset = 65536;\n\n    var TextInput = QuestionView.extend({\n        events: {\n            \"focus input\":\"clearValidationError\"\n        },\n\n        resetQuestionOnRevisit: function() {\n            this.setAllItemsEnabled(false);\n            this.resetQuestion();\n        },\n\n        setupQuestion: function() {\n            this.model.set( '_genericAnswerIndexOffset', genericAnswerIndexOffset );\n            this.setupItemIndexes();\n            this.restoreUserAnswer();\n\n            this.setupRandomisation();\n        },\n\n        setupRandomisation: function() {\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                this.model.set(\"_items\", _.shuffle(this.model.get(\"_items\")));\n            }\n        },\n\n        setupItemIndexes: function() {\n            \n            _.each(this.model.get('_items'), function(item, index) {\n\n                if (item._index === undefined) item._index = index;\n                if (item._answerIndex === undefined) item._answerIndex = -1;\n\n            });\n\n        },\n\n        restoreUserAnswer: function() {\n            if (!this.model.get(\"_isSubmitted\")) return;\n\n            var userAnswer = this.model.get(\"_userAnswer\");\n            var genericAnswers = this.model.get(\"_answers\");\n            _.each(this.model.get(\"_items\"), function(item) {\n                var answerIndex = userAnswer[item._index];\n                if (answerIndex >= genericAnswerIndexOffset) {\n                    item.userAnswer = genericAnswers[answerIndex - genericAnswerIndexOffset];\n                    item._answerIndex = answerIndex;\n                } else if (answerIndex > -1) {\n                    item.userAnswer = item._answers[answerIndex];\n                    item._answerIndex = answerIndex;\n                } else {\n                    if (item.userAnswer === undefined) item.userAnswer = \"******\";\n                    item._answerIndex = -1;\n                }\n                if (item.userAnswer instanceof Array) item.userAnswer = item.userAnswer[0];\n            });\n\n            this.setQuestionAsSubmitted();\n            this.markQuestion();\n            this.setScore();\n            this.showMarking();\n            this.setupFeedback();\n        },  \n\n        disableQuestion: function() {\n            this.setAllItemsEnabled(false);\n        },\n\n        enableQuestion: function() {\n            this.setAllItemsEnabled(true);\n        },\n\n        setAllItemsEnabled: function(isEnabled) {\n            _.each(this.model.get('_items'), function(item, index) {\n                var $itemInput = this.$('input').eq(index);\n\n                if (isEnabled) {\n                    $itemInput.prop('disabled', false);\n                } else {\n                    $itemInput.prop('disabled', true);\n                }\n            }, this);\n        },\n\n        onQuestionRendered: function() {\n            this.setReadyStatus();\n        },\n\n        clearValidationError: function() {\n            this.$(\".textinput-item-textbox\").removeClass(\"textinput-validation-error\");\n        },\n\n        // Use to check if the user is allowed to submit the question\n        canSubmit: function() {\n            var canSubmit = true;\n            this.$(\".textinput-item-textbox\").each(function() {\n                if ($(this).val() == \"\") {\n                    canSubmit = false;\n                }\n            });\n            return canSubmit;\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {\n            this.showValidationError();\n        },\n\n        showValidationError: function() {\n            this.$(\".textinput-item-textbox\").addClass(\"textinput-validation-error\");\n        },\n\n        //This preserve the state of the users answers for returning or showing the users answer\n        storeUserAnswer: function() {\n            var items = this.model.get('_items');\n            _.each(items, function(item, index) {\n                item.userAnswer = this.$('.textinput-item-textbox').eq(index).val();\n            }, this);\n\n            this.isCorrect();\n\n            var userAnswer = new Array( items.length );\n            _.each(items, function(item, index) {\n                userAnswer[ item._index ] = item._answerIndex;\n            });\n            this.model.set(\"_userAnswer\", userAnswer);\n        },\n\n        isCorrect: function() {\n            if(this.model.get('_answers')) this.markGenericAnswers();\n            else this.markSpecificAnswers();\n            // do we have any _isCorrect == false?\n            return !_.contains(_.pluck(this.model.get(\"_items\"),\"_isCorrect\"), false);\n        },\n\n        // Allows the learner to give answers into any input, ignoring the order.\n        // (this excludes any inputs which have their own specific answers).\n        markGenericAnswers: function() {\n            var numberOfCorrectAnswers = 0;\n            var correctAnswers = this.model.get('_answers').slice();\n            var usedAnswerIndexes = [];\n            _.each(this.model.get('_items'), function(item, itemIndex) {\n                _.each(correctAnswers, function(answerGroup, answerIndex) {\n                    if(this.checkAnswerIsCorrect(answerGroup, item.userAnswer)) {\n                        if (_.indexOf(usedAnswerIndexes, answerIndex) > -1) return;\n                        usedAnswerIndexes.push(answerIndex);\n                        item._isCorrect = true;\n                        item._answerIndex = answerIndex + genericAnswerIndexOffset;\n                        numberOfCorrectAnswers++;\n                        this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n                        this.model.set('_isAtLeastOneCorrectSelection', true);\n                    }\n                }, this);\n                if(!item._isCorrect) item._isCorrect = false;\n            }, this);\n        },\n\n        // Marks any items which have answers specific to it\n        // (i.e. item has a _answers array)\n        markSpecificAnswers: function() {\n            var numberOfCorrectAnswers = 0;\n            var numberOfSpecificAnswers = 0;\n            _.each(this.model.get('_items'), function(item, index) {\n                if(!item._answers) return;\n                var userAnswer = item.userAnswer || \"\"; \n                if (this.checkAnswerIsCorrect(item[\"_answers\"], userAnswer)) {\n                    numberOfCorrectAnswers++;\n                    item._isCorrect = true;\n                    item._answerIndex = _.indexOf(item[\"_answers\"], this.cleanupUserAnswer(userAnswer));\n                    this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n                    this.model.set('_isAtLeastOneCorrectSelection', true);\n                } else {\n                    item._isCorrect = false;\n                    item._answerIndex = -1;\n                }\n                numberOfSpecificAnswers++;\n            }, this);\n        },\n\n        checkAnswerIsCorrect: function(possibleAnswers, userAnswer) {\n            var uAnswer = this.cleanupUserAnswer(userAnswer);\n            var matched = _.filter(possibleAnswers, function(cAnswer){\n                return this.cleanupUserAnswer(cAnswer) == uAnswer;\n            }, this);\n            \n            var answerIsCorrect = matched && matched.length > 0;\n            if (answerIsCorrect) this.model.set('_hasAtLeastOneCorrectSelection', true);\n            return answerIsCorrect;\n        },\n\n        cleanupUserAnswer: function(userAnswer) {\n            if (this.model.get('_allowsAnyCase')) {\n                userAnswer = userAnswer.toLowerCase();\n            }\n            if (this.model.get('_allowsPunctuation')) {\n                userAnswer = userAnswer.replace(/[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\");\n                //remove any orphan double spaces and replace with single space (B & Q)->(B  Q)->(B Q)\n                userAnswer = userAnswer.replace(/(  +)+/g, \" \");\n            }\n            // removes whitespace from beginning/end (leave any in the middle)\n            return $.trim(userAnswer);\n        },\n\n        // Used to set the score based upon the _questionWeight\n        setScore: function() {\n            var numberOfCorrectAnswers = this.model.get('_numberOfCorrectAnswers');\n            var questionWeight = this.model.get(\"_questionWeight\");\n            var itemLength = this.model.get('_items').length;\n\n            var score = questionWeight * numberOfCorrectAnswers / itemLength;\n\n            this.model.set('_score', score);\n        },\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {\n            _.each(this.model.get('_items'), function(item, i) {\n                var $item = this.$('.textinput-item').eq(i);\n                $item.removeClass('correct incorrect').addClass(item._isCorrect ? 'correct' : 'incorrect');\n            }, this);\n        },\n\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        resetUserAnswer: function() {\n            _.each(this.model.get('_items'), function(item) {\n                item[\"_isCorrect\"] = false;\n                item[\"userAnswer\"] = \"\";\n            }, this);\n        },\n\n        // Used by the question view to reset the look and feel of the component.\n        resetQuestion: function() {\n            this.$('.textinput-item-textbox').prop('disabled', !this.model.get('_isEnabled')).val('');\n\n            this.model.set({\n                _isAtLeastOneCorrectSelection: false,\n                _isCorrect: undefined\n            });\n        },\n\n        showCorrectAnswer: function() {\n            \n            if(this.model.get('_answers'))  {\n                \n                var correctAnswers = this.model.get('_answers');\n                _.each(this.model.get('_items'), function(item, index) {\n                    this.$(\".textinput-item-textbox\").eq(index).val(correctAnswers[index][0]);\n                }, this);\n                \n            } else {\n                _.each(this.model.get('_items'), function(item, index) {\n                    this.$(\".textinput-item-textbox\").eq(index).val(item._answers[0]);\n                }, this);\n            }\n            \n        },\n\n        hideCorrectAnswer: function() {\n            _.each(this.model.get('_items'), function(item, index) {\n                this.$(\".textinput-item-textbox\").eq(index).val(item.userAnswer);\n            }, this);\n        },\n\n        /**\n        * used by adapt-contrib-spoor to get the user's answers in the format required by the cmi.interactions.n.student_response data field\n        * returns the user's answers as a string in the format \"answer1[,]answer2[,]answer3\"\n        * the use of [,] as an answer delimiter is from the SCORM 2004 specification for the fill-in interaction type\n        */\n        getResponse: function() {\n            return _.pluck(this.model.get('_items'), 'userAnswer').join('[,]');\n        },\n\n        /**\n        * used by adapt-contrib-spoor to get the type of this question in the format required by the cmi.interactions.n.type data field\n        */\n        getResponseType: function() {\n            return \"fill-in\";\n        }\n    });\n\n    Adapt.register(\"textinput\", TextInput);\n\n    return TextInput;\n});\n\n",
    "/*\n * adapt-dragAndDrop\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-dragAndDrop/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-dragAndDrop/js/adapt-dragAndDrop',[\n  'coreJS/adapt',\n  'coreViews/questionView'\n], function(Adapt, QuestionView) {\n\n    var DragAndDrop = QuestionView.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_isVisible', this.toggleVisibility);\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.preRender();\n            if (Adapt.device.screenSize == 'large') {\n                this.render();\n            } else {\n                this.reRender();\n            }\n        },\n\n        events: function() {\n            if (Modernizr.touch) {\n                return {\n                    'click .draggable-item': 'onClickDragItem',\n                    'touchstart .draggable-item': 'onTouchStartItem'\n                };\n            } else {\n                return {\n                    'click .draggable-item': 'onClickDragItem',\n                    'mousedown .draggable-item': 'onMouseDownDragItem'\n                };\n            }\n        },\n\n        resetQuestionOnRevisit: function() {\n            this.resetQuestion();\n        },\n\n        setupQuestion: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n\n            if(this.model.get(\"_shouldScale\")) {\n                this.listenTo(Adapt, 'device:resize', this.resizeItems, 200);\n            }\n\n            this.setupRandomisation();\n        },\n\n         setupRandomisation: function() {\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                this.model.set('_draggableItems', _.shuffle(this.model.get('_draggableItems')));\n            }\n\n            if (!this.model.get('_isSubmitted')) {\n                this.model.set('_droppableItems', _.shuffle(this.model.get('_droppableItems')));\n            }\n        },\n\n        onQuestionRendered: function() {\n            if (this.$('.dragAndDrop-widget').find('img').length !== 0) {\n                this.$('.dragAndDrop-widget').imageready(_.bind(function() {\n                    this.setReadyStatus();\n                }, this));\n            } else {\n                this.setReadyStatus();\n            }\n\n            if(this.model.get(\"_shouldScale\")) {\n                this.resizeItems();\n            }\n\n            this.model.set('_initialDragAndDropWidgetView', this.$('.dragAndDrop-widget').html());\n        },\n\n        reRender: function() {\n            if (Adapt.device.screenSize != 'large') {\n                this.replaceWithObjectMatching();\n            }\n        },\n\n        replaceWithObjectMatching: function() {\n            if (!Adapt.componentStore.objectMatching) throw \"Object Matching not included in build\";\n            var ObjectMatching = Adapt.componentStore.objectMatching;\n\n            var model = this.prepareObjectMatchingModel();\n            var newObjectMatching = new ObjectMatching({model: model});\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n\n            newObjectMatching.reRender();\n            if (model.get('_initialObjectMatchingWidgetView')) {\n                newObjectMatching.$el.find('.objectMatching-widget').html(model.get('_initialObjectMatchingWidgetView'));\n            }\n            if(model.get('_isSubmitted')) {\n                newObjectMatching.showMarking();\n            }\n\n            newObjectMatching.setupObjectMatching();\n            $container.append(newObjectMatching.$el);\n\n            Adapt.trigger('device:resize');\n            _.defer(_.bind(function () {\n                this.remove();\n            }, this));\n        },\n\n        prepareObjectMatchingModel: function() {\n            var model = this.model;\n            model.set('_component', 'objectMatching');\n            model.set('_wasDragAndDrop', true);\n            return model;\n        },\n\n        resizeItems: function() {\n            if(this.model.get(\"_shouldScale\")) {\n                var totalItems = this.model.get('_draggableItems').length;\n                var draggableItemWidth = this.$('.draggable-item-container').width();\n                var draggableItemHeight = this.$('.draggable-item-container').height();\n                var width = this.$('.dragAndDrop-inner').width() / totalItems;\n                var scale = width / draggableItemWidth;\n\n                if(scale > 1) {\n                    scale = 1;\n                }\n\n                var $dragContainers = this.$('.draggables-container, .droppables-container');\n                $dragContainers.css({\n                    '-ms-transform': 'scale(' + scale + ')',\n                    '-moz-transform': 'scale(' + scale + ')',\n                    '-webkit-transform': 'scale(' + scale + ')',\n                    '-webkit-transform-style': 'preserve-3d',\n                    '-webkit-transform': 'scale3d(' + scale + ',' + scale + ',' + scale + ')',\n                    'transform': 'scale(' + scale + ')'\n                });\n                $dragContainers.height(draggableItemHeight * scale);\n\n                this.$('.dragAndDrop-widget').width(draggableItemWidth * totalItems);\n\n                this.scale = scale;\n            }\n        },\n\n        onClickDragItem: function(event) {\n            event && event.preventDefault();\n        },\n\n        // Mouse Events\n        onMouseDownDragItem: function(event) {\n            if (!this.model.get('_isEnabled')) {\n                event && event.preventDefault();\n                return false;\n            }\n\n            if ($('html').hasClass('ie8')) {\n                $(document).on('mouseup', _.bind(this.onMouseUpDragItem, this));\n            } else {\n                $(window).on('mouseup', _.bind(this.onMouseUpDragItem, this));\n            }\n            $('body').on('mousemove', _.bind(this.onMouseMoveDragItem, this));\n\n            var $currentItem = this.$(event.currentTarget);\n            var currentDragedItemId = $currentItem.attr('data-id');\n            if (currentDragedItemId) {\n                this.model.set('_currentDragedItemId', currentDragedItemId);\n                this.model.set('_currentWidth', $currentItem.parent('div').width());\n\n                this.$('.dragAndDrop-dummy')\n                    .width(this.model.get('_currentWidth'))\n                    .html(this.$('[data-id=' + currentDragedItemId + ']').html());\n            }\n\n            return false;\n        },\n\n        onMouseMoveDragItem: function(event) {\n            if (!this.model.get('_isEnabled')) {\n                return false;\n            }\n\n            var posx = 0,\n                posy = 0;\n            if (!event) event = window.event;\n\n            if (event.clientX || event.clientY) {\n                posx = event.clientX;\n                posy = event.clientY;\n            }\n\n            posx -= (this.model.get('_currentWidth') / 2);\n            posy -= (this.model.get('_defaultHeight') / 2);\n\n            var $dragAndDropDummy = this.$('.dragAndDrop-dummy');\n            if ($dragAndDropDummy.hasClass('display-none')) {\n                $dragAndDropDummy.removeClass('display-none');\n            }\n\n            $dragAndDropDummy.css({\n                top: posy,\n                left: posx\n            });\n        },\n\n        onMouseUpDragItem: function(event) {\n            if (!this.model.get('_isEnabled')) {\n                event && event.preventDefault();\n                return false;\n            }\n\n            this.$('.dragAndDrop-dummy').html('').addClass('display-none');\n            if ($('html').hasClass('ie8')) {\n                $(document).off('mouseup');\n            } else {\n                $(window).off('mouseup');\n            }\n            $('body').off('mousemove');\n\n            var currentDragedItemId = this.model.get('_currentDragedItemId');\n            var droppableItemId = this.getDropedItemIdForCoordinate(event.pageY, event.pageX);\n\n            if (currentDragedItemId && droppableItemId) {\n                this.putDraggableItem(this.model.get('_currentDragedItemId'), droppableItemId);\n            }\n\n            this.model.set('_currentDragedItemId', '');\n        },\n\n        // Touch Events\n        onTouchStartItem: function(event) {\n            if (!this.model.get('_isEnabled')) {\n                event && event.preventDefault();\n                return false;\n            }\n\n            this.$('.dragAndDrop-widget')\n                .on('touchmove', _.bind(this.onTouchMoveItem, this))\n                .on('touchend', _.bind(this.onTouchEndItem, this))\n                .on('touchcancel', _.bind(this.onTouchCancelItem, this));\n\n            var $currentItem = this.$(event.currentTarget);\n            var currentDragedItemId = $currentItem.attr('data-id');\n            if (currentDragedItemId) {\n                this.model.set('_currentDragedItemId', currentDragedItemId);\n                this.model.set('_currentWidth', $currentItem.parent('div').width());\n\n                this.$('.dragAndDrop-dummy')\n                    .width(this.model.get('_currentWidth'))\n                    .html(this.$('[data-id=' + currentDragedItemId + ']').html());\n            }\n\n            return false;\n        },\n\n        onTouchMoveItem: function(event) {\n            if (!this.model.get('_isEnabled') || !this.model.get('_currentDragedItemId')) {\n                return false;\n            }\n\n            var posx = event.originalEvent.touches[0].clientX;\n            var posy = event.originalEvent.touches[0].clientY;\n\n            this.model.set({\n                '_lastTop': event.originalEvent.touches[0].pageY,\n                '_lastLeft': event.originalEvent.touches[0].pageX\n            })\n\n            posx = posx - (this.model.get('_currentWidth') / 2);\n            posy = posy - (this.model.get('_defaultHeight') / 2);\n\n            var $dragAndDropDummy = this.$('.dragAndDrop-dummy');\n            if ($dragAndDropDummy.hasClass('display-none')) {\n                $dragAndDropDummy.removeClass('display-none');\n            }\n\n            $dragAndDropDummy.css({\n                top: posy,\n                left: posx\n            });\n        },\n\n        onTouchEndItem: function(event) {\n            var currentDragedItemId = this.model.get('_currentDragedItemId');\n            var lastTop = this.model.get('_lastTop');\n            var lastLeft = this.model.get('_lastLeft');\n            if (!this.model.get('_isEnabled') || !currentDragedItemId || !lastTop || !lastLeft) {\n                event && event.preventDefault();\n                return false;\n            }\n\n            this.$('.dragAndDrop-dummy').html('').addClass('display-none');\n\n            var droppableItemId = this.getDropedItemIdForCoordinate(lastTop, lastLeft);\n            if (currentDragedItemId && droppableItemId) {\n                this.putDraggableItem(this.model.get('_currentDragedItemId'), droppableItemId);\n            }\n\n            this.model.set('_currentDragedItemId', '');\n            this.model.unset('_lastTop');\n            this.model.unset('_lastLeft');\n\n            this.$('.dragAndDrop-widget').off('touchmove touchend touchcancel');\n        },\n\n        onTouchCancelItem: function(event) {\n            this.$('.dragAndDrop-dummy').html('').addClass('display-none');\n            this.model.set('_currentDragedItemId', '');\n            this.model.unset('_lastTop');\n            this.model.unset('_lastLeft');\n            this.$('.dragAndDrop-widget').off('touchmove touchend touchcancel');\n        },\n\n        getDropedItemIdForCoordinate: function(top, left) {\n            var defaultWidth = this.model.get('_currentWidth');\n            var defaultHeight = this.model.get('_defaultHeight');\n            var droppedItemId;\n\n            _.each(this.$('.droppable-item '), function(item, index) {\n                var $item =$(item);\n                var itemTop = $item.offset().top;\n                var itemLeft = $item.offset().left;\n                var itemBottom = itemTop + defaultHeight;\n                var itemRight = itemLeft + defaultWidth;\n\n                if ((top > itemTop && top < itemBottom) && (left > itemLeft && left < itemRight)) {\n                    droppedItemId = $item.attr('data-id');\n                }\n            });\n\n            return droppedItemId;\n        },\n\n        putDraggableItem: function(currentDragedItemId, droppableItemId) {\n            if (!this.model.get('_isEnabled') || !currentDragedItemId || !droppableItemId) {\n                return false;\n            }\n\n            var $currentDropContainer = this.$('[data-id=' + droppableItemId + ']');\n            var $currentDragedItem = this.$('[data-id=' + currentDragedItemId + ']');\n            var $currentDragedItemContainer = $currentDragedItem.closest('div');\n            var $existingDragItem = $currentDropContainer.find('.draggable-item');\n            var existingDragItemId = $existingDragItem.attr('data-id');\n\n            if (currentDragedItemId == existingDragItemId) return;\n\n            var currentDropIndex = $currentDropContainer.attr('index');\n            var currentDragIndex = $currentDragedItemContainer.attr('index');\n            var droppableItems = this.model.get('_droppableItems');\n\n            if ($existingDragItem.length > 0) {\n                if ($currentDragedItemContainer.hasClass('draggable-item-wrapper')) {\n                    $currentDragedItemContainer.html($existingDragItem);\n                    delete droppableItems[currentDropIndex]['_selectedItemId'];\n                } else if ($currentDragedItemContainer.hasClass('droppable-item')) {\n                    $currentDragedItemContainer.html($existingDragItem);\n                    droppableItems[currentDragIndex]._selectedItemId = existingDragItemId;\n                }\n            } else if ($currentDragedItemContainer.hasClass('droppable-item')) {\n                $currentDragedItemContainer.html(droppableItems[currentDragIndex].body);\n                delete droppableItems[currentDragIndex]['_selectedItemId'];\n            }\n\n            $currentDropContainer.html($currentDragedItem);\n            droppableItems[currentDropIndex]._selectedItemId = currentDragedItemId;\n        },\n\n        canSubmit: function() {\n            var count = 0;\n\n            _.each(this.model.get('_droppableItems'), function(item) {\n                if (item._selectedItemId) {\n                    count++;\n                }\n            });\n            return (count == this.model.get('_droppableItems').length);\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {},\n\n        storeUserAnswer: function() {\n            var userAnswer = [];\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                userAnswer.push(item._selectedItemId);\n            }, this);\n            this.model.set('_userAnswer', userAnswer);\n        },\n\n        isCorrect: function() {\n            var numberOfRequiredAnswers = this.model.get('_droppableItems').length;\n            var numberOfCorrectAnswers = 0;\n            var numberOfIncorrectAnswers = 0;\n\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n\n                // Set item._isSelected to either true or false\n                var isCorrect = item.correctItemId === item._selectedItemId;\n\n                if (isCorrect) {\n                    // If the item is selected adjust correct answer\n                    numberOfCorrectAnswers++;\n                    // Set item to correct - is used for returning to this component\n                    item._isCorrect = true;\n                    // Set that at least one correct answer has been selected\n                    // Used in isPartlyCorrect method below\n                    this.model.set('_isAtLeastOneCorrectSelection', true);\n                }\n\n            }, this);\n\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n\n            // Check if correct answers matches correct items and there are no incorrect selections\n            var answeredCorrectly = (numberOfCorrectAnswers === numberOfRequiredAnswers) && (numberOfIncorrectAnswers === 0);\n            return answeredCorrectly;\n        },\n\n        setScore: function() {\n            var questionWeight = this.model.get(\"_questionWeight\");\n            var answeredCorrectly = this.model.get('_isCorrect');\n            var score = answeredCorrectly ? questionWeight : 0;\n            this.model.set('_score', score);\n        },\n\n        showMarking: function() {\n            _.each(this.model.get('_droppableItems'), function(item, i) {\n\n                var $item = this.$('.droppable-item').eq(i);\n                $item.addClass(item._isCorrect ? 'correct' : 'incorrect');\n\n            }, this);\n        },\n\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        resetUserAnswer: function() {\n            this.model.set('_userAnswer', []);\n        },\n\n        resetQuestion: function() {\n            _.each(this.model.get('_droppableItems'), function(item) {\n                delete item._selectedItemId;\n                item._isCorrect = false;\n            });\n\n            this.$('.dragAndDrop-widget').html(this.model.get('_initialDragAndDropWidgetView'));\n\n            this.model.set({\n                _currentWidth: 0,\n                _currentDragedItemId: '',\n                _isAtLeastOneCorrectSelection: false\n            });\n        },\n\n        showCorrectAnswer: function() {\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                this.setdroppableItems(index, item.correctItemId);\n            }, this);\n        },\n\n        setdroppableItems: function(droppableContainerIndex, draggableItemId) {\n            var $droppableItemContainer = this.$('.droppable-item').eq(droppableContainerIndex);\n            var $draggableItem = this.$('.draggable-item[data-id=' + draggableItemId + ']');\n\n            var $existingDragItem = $droppableItemContainer.find('.draggable-item');\n            if ($existingDragItem.length > 0) {\n                $draggableItem.closest('div').html($existingDragItem);\n            }\n\n            $droppableItemContainer.html($draggableItem);\n        },\n\n        hideCorrectAnswer: function() {\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                this.setdroppableItems(index, this.model.get('_userAnswer')[index]);\n            }, this);\n        }\n\n    });\n\n    Adapt.register('dragAndDrop', DragAndDrop);\n\n    return DragAndDrop;\n\n});\n\n",
    "/*!\n * MediaElement.js\n * HTML5 <video> and <audio> shim and player\n * http://mediaelementjs.com/\n *\n * Creates a JavaScript object that mimics HTML5 MediaElement API\n * for browsers that don't understand HTML5 or can't play the provided codec\n * Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3\n *\n * Copyright 2010-2013, John Dyer (http://j.hn)\n * License: MIT\n *\n */\nvar mejs = mejs || {};\nmejs.version = \"2.13.2\";\nmejs.meIndex = 0;\nmejs.plugins = {silverlight: [\n    {version: [3, 0], types: [\"video/mp4\", \"video/m4v\", \"video/mov\", \"video/wmv\", \"audio/wma\", \"audio/m4a\", \"audio/mp3\", \"audio/wav\", \"audio/mpeg\"]}\n], flash: [\n    {version: [9, 0, 124], types: [\"video/mp4\", \"video/m4v\", \"video/mov\", \"video/flv\", \"video/rtmp\", \"video/x-flv\", \"audio/flv\", \"audio/x-flv\", \"audio/mp3\", \"audio/m4a\", \"audio/mpeg\", \"video/youtube\", \"video/x-youtube\"]}\n], youtube: [\n    {version: null, types: [\"video/youtube\", \"video/x-youtube\", \"audio/youtube\", \"audio/x-youtube\"]}\n], vimeo: [\n    {version: null, types: [\"video/vimeo\",\n        \"video/x-vimeo\"]}\n]};\nmejs.Utility = {encodeUrl: function (a) {\n    return encodeURIComponent(a)\n}, escapeHTML: function (a) {\n    return a.toString().split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split('\"').join(\"&quot;\")\n}, absolutizeUrl: function (a) {\n    var b = document.createElement(\"div\");\n    b.innerHTML = '<a href=\"' + this.escapeHTML(a) + '\">x</a>';\n    return b.firstChild.href\n}, getScriptPath: function (a) {\n    for (var b = 0, c, d = \"\", e = \"\", g, f, h = document.getElementsByTagName(\"script\"), l = h.length, j = a.length; b < l; b++) {\n        g = h[b].src;\n        c = g.lastIndexOf(\"/\");\n        if (c > -1) {\n            f = g.substring(c +\n                1);\n            g = g.substring(0, c + 1)\n        } else {\n            f = g;\n            g = \"\"\n        }\n        for (c = 0; c < j; c++) {\n            e = a[c];\n            e = f.indexOf(e);\n            if (e > -1) {\n                d = g;\n                break\n            }\n        }\n        if (d !== \"\")break\n    }\n    return d\n}, secondsToTimeCode: function (a, b, c, d) {\n    if (typeof c == \"undefined\")c = false; else if (typeof d == \"undefined\")d = 25;\n    var e = Math.floor(a / 3600) % 24, g = Math.floor(a / 60) % 60, f = Math.floor(a % 60);\n    a = Math.floor((a % 1 * d).toFixed(3));\n    return(b || e > 0 ? (e < 10 ? \"0\" + e : e) + \":\" : \"\") + (g < 10 ? \"0\" + g : g) + \":\" + (f < 10 ? \"0\" + f : f) + (c ? \":\" + (a < 10 ? \"0\" + a : a) : \"\")\n}, timeCodeToSeconds: function (a, b, c, d) {\n    if (typeof c == \"undefined\")c = false; else if (typeof d ==\n        \"undefined\")d = 25;\n    a = a.split(\":\");\n    b = parseInt(a[0], 10);\n    var e = parseInt(a[1], 10), g = parseInt(a[2], 10), f = 0, h = 0;\n    if (c)f = parseInt(a[3]) / d;\n    return h = b * 3600 + e * 60 + g + f\n}, convertSMPTEtoSeconds: function (a) {\n    if (typeof a != \"string\")return false;\n    a = a.replace(\",\", \".\");\n    var b = 0, c = a.indexOf(\".\") != -1 ? a.split(\".\")[1].length : 0, d = 1;\n    a = a.split(\":\").reverse();\n    for (var e = 0; e < a.length; e++) {\n        d = 1;\n        if (e > 0)d = Math.pow(60, e);\n        b += Number(a[e]) * d\n    }\n    return Number(b.toFixed(c))\n}, removeSwf: function (a) {\n    var b = document.getElementById(a);\n    if (b && /object|embed/i.test(b.nodeName))if (mejs.MediaFeatures.isIE) {\n        b.style.display =\n            \"none\";\n        (function () {\n            b.readyState == 4 ? mejs.Utility.removeObjectInIE(a) : setTimeout(arguments.callee, 10)\n        })()\n    } else b.parentNode.removeChild(b)\n}, removeObjectInIE: function (a) {\n    if (a = document.getElementById(a)) {\n        for (var b in a)if (typeof a[b] == \"function\")a[b] = null;\n        a.parentNode.removeChild(a)\n    }\n}};\nmejs.PluginDetector = {hasPluginVersion: function (a, b) {\n    var c = this.plugins[a];\n    b[1] = b[1] || 0;\n    b[2] = b[2] || 0;\n    return c[0] > b[0] || c[0] == b[0] && c[1] > b[1] || c[0] == b[0] && c[1] == b[1] && c[2] >= b[2] ? true : false\n}, nav: window.navigator, ua: window.navigator.userAgent.toLowerCase(), plugins: [], addPlugin: function (a, b, c, d, e) {\n    this.plugins[a] = this.detectPlugin(b, c, d, e)\n}, detectPlugin: function (a, b, c, d) {\n    var e = [0, 0, 0], g;\n    if (typeof this.nav.plugins != \"undefined\" && typeof this.nav.plugins[a] == \"object\") {\n        if ((c = this.nav.plugins[a].description) && !(typeof this.nav.mimeTypes != \"undefined\" && this.nav.mimeTypes[b] && !this.nav.mimeTypes[b].enabledPlugin)) {\n            e = c.replace(a, \"\").replace(/^\\s+/, \"\").replace(/\\sr/gi, \".\").split(\".\");\n            for (a = 0; a < e.length; a++)e[a] = parseInt(e[a].match(/\\d+/), 10)\n        }\n    } else if (typeof window.ActiveXObject != \"undefined\")try {\n        if (g = new ActiveXObject(c))e = d(g)\n    } catch (f) {\n    }\n    return e\n}};\nmejs.PluginDetector.addPlugin(\"flash\", \"Shockwave Flash\", \"application/x-shockwave-flash\", \"ShockwaveFlash.ShockwaveFlash\", function (a) {\n    var b = [];\n    if (a = a.GetVariable(\"$version\")) {\n        a = a.split(\" \")[1].split(\",\");\n        b = [parseInt(a[0], 10), parseInt(a[1], 10), parseInt(a[2], 10)]\n    }\n    return b\n});\nmejs.PluginDetector.addPlugin(\"silverlight\", \"Silverlight Plug-In\", \"application/x-silverlight-2\", \"AgControl.AgControl\", function (a) {\n    var b = [0, 0, 0, 0], c = function (d, e, g, f) {\n        for (; d.isVersionSupported(e[0] + \".\" + e[1] + \".\" + e[2] + \".\" + e[3]);)e[g] += f;\n        e[g] -= f\n    };\n    c(a, b, 0, 1);\n    c(a, b, 1, 1);\n    c(a, b, 2, 1E4);\n    c(a, b, 2, 1E3);\n    c(a, b, 2, 100);\n    c(a, b, 2, 10);\n    c(a, b, 2, 1);\n    c(a, b, 3, 1);\n    return b\n});\nmejs.MediaFeatures = {init: function () {\n    var a = this, b = document, c = mejs.PluginDetector.nav, d = mejs.PluginDetector.ua.toLowerCase(), e, g = [\"source\", \"track\", \"audio\", \"video\"];\n    a.isiPad = d.match(/ipad/i) !== null;\n    a.isiPhone = d.match(/iphone/i) !== null;\n    a.isiOS = a.isiPhone || a.isiPad;\n    a.isAndroid = d.match(/android/i) !== null;\n    a.isBustedAndroid = d.match(/android 2\\.[12]/) !== null;\n    a.isBustedNativeHTTPS = location.protocol === \"https:\" && (d.match(/android [12]\\./) !== null || d.match(/macintosh.* version.* safari/) !== null);\n    a.isIE = c.appName.toLowerCase().indexOf(\"microsoft\") != -1 || c.appName.toLowerCase().match(/trident/gi) !== null;\n    a.isChrome = d.match(/chrome/gi) !== null;\n    a.isFirefox = d.match(/firefox/gi) !== null;\n    a.isWebkit = d.match(/webkit/gi) !== null;\n    a.isGecko = d.match(/gecko/gi) !== null && !a.isWebkit && !a.isIE;\n    a.isOpera = d.match(/opera/gi) !== null;\n    a.hasTouch = \"ontouchstart\"in window;\n    a.svg = !!document.createElementNS && !!document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGRect;\n    for (c = 0; c < g.length; c++)e = document.createElement(g[c]);\n    a.supportsMediaTag = typeof e.canPlayType !==\n        \"undefined\" || a.isBustedAndroid;\n    try {\n        e.canPlayType(\"video/mp4\")\n    } catch (f) {\n        a.supportsMediaTag = false\n    }\n    a.hasSemiNativeFullScreen = typeof e.webkitEnterFullscreen !== \"undefined\";\n    a.hasNativeFullscreen = typeof e.requestFullscreen !== \"undefined\";\n    a.hasWebkitNativeFullScreen = typeof e.webkitRequestFullScreen !== \"undefined\";\n    a.hasMozNativeFullScreen = typeof e.mozRequestFullScreen !== \"undefined\";\n    a.hasMsNativeFullScreen = typeof e.msRequestFullscreen !== \"undefined\";\n    a.hasTrueNativeFullScreen = a.hasWebkitNativeFullScreen || a.hasMozNativeFullScreen ||\n        a.hasMsNativeFullScreen;\n    a.nativeFullScreenEnabled = a.hasTrueNativeFullScreen;\n    if (a.hasMozNativeFullScreen)a.nativeFullScreenEnabled = document.mozFullScreenEnabled; else if (a.hasMsNativeFullScreen)a.nativeFullScreenEnabled = document.msFullscreenEnabled;\n    if (a.isChrome)a.hasSemiNativeFullScreen = false;\n    if (a.hasTrueNativeFullScreen) {\n        a.fullScreenEventName = \"\";\n        if (a.hasWebkitNativeFullScreen)a.fullScreenEventName = \"webkitfullscreenchange\"; else if (a.hasMozNativeFullScreen)a.fullScreenEventName = \"mozfullscreenchange\";\n        else if (a.hasMsNativeFullScreen)a.fullScreenEventName = \"MSFullscreenChange\";\n        a.isFullScreen = function () {\n            if (e.mozRequestFullScreen)return b.mozFullScreen; else if (e.webkitRequestFullScreen)return b.webkitIsFullScreen; else if (e.hasMsNativeFullScreen)return b.msFullscreenElement !== null\n        };\n        a.requestFullScreen = function (h) {\n            if (a.hasWebkitNativeFullScreen)h.webkitRequestFullScreen(); else if (a.hasMozNativeFullScreen)h.mozRequestFullScreen(); else a.hasMsNativeFullScreen && h.msRequestFullscreen()\n        };\n        a.cancelFullScreen =\n            function () {\n                if (a.hasWebkitNativeFullScreen)document.webkitCancelFullScreen(); else if (a.hasMozNativeFullScreen)document.mozCancelFullScreen(); else a.hasMsNativeFullScreen && document.msExitFullscreen()\n            }\n    }\n    if (a.hasSemiNativeFullScreen && d.match(/mac os x 10_5/i)) {\n        a.hasNativeFullScreen = false;\n        a.hasSemiNativeFullScreen = false\n    }\n}};\nmejs.MediaFeatures.init();\nmejs.HtmlMediaElement = {pluginType: \"native\", isFullScreen: false, setCurrentTime: function (a) {\n    this.currentTime = a\n}, setMuted: function (a) {\n    this.muted = a\n}, setVolume: function (a) {\n    this.volume = a\n}, stop: function () {\n    this.pause()\n}, setSrc: function (a) {\n    for (var b = this.getElementsByTagName(\"source\"); b.length > 0;)this.removeChild(b[0]);\n    if (typeof a == \"string\")this.src = a; else {\n        var c;\n        for (b = 0; b < a.length; b++) {\n            c = a[b];\n            if (this.canPlayType(c.type)) {\n                this.src = c.src;\n                break\n            }\n        }\n    }\n}, setVideoSize: function (a, b) {\n    this.width = a;\n    this.height = b\n}};\nmejs.PluginMediaElement = function (a, b, c) {\n    this.id = a;\n    this.pluginType = b;\n    this.src = c;\n    this.events = {};\n    this.attributes = {}\n};\nmejs.PluginMediaElement.prototype = {pluginElement: null, pluginType: \"\", isFullScreen: false, playbackRate: -1, defaultPlaybackRate: -1, seekable: [], played: [], paused: true, ended: false, seeking: false, duration: 0, error: null, tagName: \"\", muted: false, volume: 1, currentTime: 0, play: function () {\n    if (this.pluginApi != null) {\n        this.pluginType == \"youtube\" ? this.pluginApi.playVideo() : this.pluginApi.playMedia();\n        this.paused = false\n    }\n}, load: function () {\n    if (this.pluginApi != null) {\n        this.pluginType != \"youtube\" && this.pluginApi.loadMedia();\n        this.paused =\n            false\n    }\n}, pause: function () {\n    if (this.pluginApi != null) {\n        this.pluginType == \"youtube\" ? this.pluginApi.pauseVideo() : this.pluginApi.pauseMedia();\n        this.paused = true\n    }\n}, stop: function () {\n    if (this.pluginApi != null) {\n        this.pluginType == \"youtube\" ? this.pluginApi.stopVideo() : this.pluginApi.stopMedia();\n        this.paused = true\n    }\n}, canPlayType: function (a) {\n    var b, c, d, e = mejs.plugins[this.pluginType];\n    for (b = 0; b < e.length; b++) {\n        d = e[b];\n        if (mejs.PluginDetector.hasPluginVersion(this.pluginType, d.version))for (c = 0; c < d.types.length; c++)if (a == d.types[c])return\"probably\"\n    }\n    return\"\"\n},\n    positionFullscreenButton: function (a, b, c) {\n        this.pluginApi != null && this.pluginApi.positionFullscreenButton && this.pluginApi.positionFullscreenButton(Math.floor(a), Math.floor(b), c)\n    }, hideFullscreenButton: function () {\n        this.pluginApi != null && this.pluginApi.hideFullscreenButton && this.pluginApi.hideFullscreenButton()\n    }, setSrc: function (a) {\n        if (typeof a == \"string\") {\n            this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a));\n            this.src = mejs.Utility.absolutizeUrl(a)\n        } else {\n            var b, c;\n            for (b = 0; b < a.length; b++) {\n                c = a[b];\n                if (this.canPlayType(c.type)) {\n                    this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src));\n                    this.src = mejs.Utility.absolutizeUrl(a);\n                    break\n                }\n            }\n        }\n    }, setCurrentTime: function (a) {\n        if (this.pluginApi != null) {\n            this.pluginType == \"youtube\" ? this.pluginApi.seekTo(a) : this.pluginApi.setCurrentTime(a);\n            this.currentTime = a\n        }\n    }, setVolume: function (a) {\n        if (this.pluginApi != null) {\n            this.pluginType == \"youtube\" ? this.pluginApi.setVolume(a * 100) : this.pluginApi.setVolume(a);\n            this.volume = a\n        }\n    }, setMuted: function (a) {\n        if (this.pluginApi != null) {\n            if (this.pluginType == \"youtube\") {\n                a ? this.pluginApi.mute() : this.pluginApi.unMute();\n                this.muted = a;\n                this.dispatchEvent(\"volumechange\")\n            } else this.pluginApi.setMuted(a);\n            this.muted = a\n        }\n    }, setVideoSize: function (a, b) {\n        if (this.pluginElement.style) {\n            this.pluginElement.style.width = a + \"px\";\n            this.pluginElement.style.height = b + \"px\"\n        }\n        this.pluginApi != null && this.pluginApi.setVideoSize && this.pluginApi.setVideoSize(a, b)\n    }, setFullscreen: function (a) {\n        this.pluginApi != null && this.pluginApi.setFullscreen && this.pluginApi.setFullscreen(a)\n    }, enterFullScreen: function () {\n        this.pluginApi != null && this.pluginApi.setFullscreen && this.setFullscreen(true)\n    }, exitFullScreen: function () {\n        this.pluginApi != null && this.pluginApi.setFullscreen &&\n        this.setFullscreen(false)\n    }, addEventListener: function (a, b) {\n        this.events[a] = this.events[a] || [];\n        this.events[a].push(b)\n    }, removeEventListener: function (a, b) {\n        if (!a) {\n            this.events = {};\n            return true\n        }\n        var c = this.events[a];\n        if (!c)return true;\n        if (!b) {\n            this.events[a] = [];\n            return true\n        }\n        for (i = 0; i < c.length; i++)if (c[i] === b) {\n            this.events[a].splice(i, 1);\n            return true\n        }\n        return false\n    }, dispatchEvent: function (a) {\n        var b, c, d = this.events[a];\n        if (d) {\n            c = Array.prototype.slice.call(arguments, 1);\n            for (b = 0; b < d.length; b++)d[b].apply(null, c)\n        }\n    }, hasAttribute: function (a) {\n        return a in\n            this.attributes\n    }, removeAttribute: function (a) {\n        delete this.attributes[a]\n    }, getAttribute: function (a) {\n        if (this.hasAttribute(a))return this.attributes[a];\n        return\"\"\n    }, setAttribute: function (a, b) {\n        this.attributes[a] = b\n    }, remove: function () {\n        mejs.Utility.removeSwf(this.pluginElement.id);\n        mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)\n    }};\nmejs.MediaPluginBridge = {pluginMediaElements: {}, htmlMediaElements: {}, registerPluginElement: function (a, b, c) {\n    this.pluginMediaElements[a] = b;\n    this.htmlMediaElements[a] = c\n}, unregisterPluginElement: function (a) {\n    delete this.pluginMediaElements[a];\n    delete this.htmlMediaElements[a]\n}, initPlugin: function (a) {\n    var b = this.pluginMediaElements[a], c = this.htmlMediaElements[a];\n    if (b) {\n        switch (b.pluginType) {\n            case \"flash\":\n                b.pluginElement = b.pluginApi = document.getElementById(a);\n                break;\n            case \"silverlight\":\n                b.pluginElement = document.getElementById(b.id);\n                b.pluginApi = b.pluginElement.Content.MediaElementJS\n        }\n        b.pluginApi != null && b.success && b.success(b, c)\n    }\n}, fireEvent: function (a, b, c) {\n    var d, e;\n    if (a = this.pluginMediaElements[a]) {\n        b = {type: b, target: a};\n        for (d in c) {\n            a[d] = c[d];\n            b[d] = c[d]\n        }\n        e = c.bufferedTime || 0;\n        b.target.buffered = b.buffered = {start: function () {\n            return 0\n        }, end: function () {\n            return e\n        }, length: 1};\n        a.dispatchEvent(b.type, b)\n    }\n}};\nmejs.MediaElementDefaults = {mode: \"auto\", plugins: [\"flash\", \"silverlight\", \"youtube\", \"vimeo\"], enablePluginDebug: false, httpsBasicAuthSite: false, type: \"\", pluginPath: mejs.Utility.getScriptPath([\"mediaelement.js\", \"mediaelement.min.js\", \"mediaelement-and-player.js\", \"mediaelement-and-player.min.js\"]), flashName: \"flashmediaelement.swf\", flashStreamer: \"\", enablePluginSmoothing: false, enablePseudoStreaming: false, pseudoStreamingStartQueryParam: \"start\", silverlightName: \"silverlightmediaelement.xap\", defaultVideoWidth: 480,\n    defaultVideoHeight: 270, pluginWidth: -1, pluginHeight: -1, pluginVars: [], timerRate: 250, startVolume: 0.8, success: function () {\n    }, error: function () {\n    }};\nmejs.MediaElement = function (a, b) {\n    return mejs.HtmlMediaElementShim.create(a, b)\n};\nmejs.HtmlMediaElementShim = {create: function (a, b) {\n    var c = mejs.MediaElementDefaults, d = typeof a == \"string\" ? document.getElementById(a) : a, e = d.tagName.toLowerCase(), g = e === \"audio\" || e === \"video\", f = g ? d.getAttribute(\"src\") : d.getAttribute(\"href\");\n    e = d.getAttribute(\"poster\");\n    var h = d.getAttribute(\"autoplay\"), l = d.getAttribute(\"preload\"), j = d.getAttribute(\"controls\"), k;\n    for (k in b)c[k] = b[k];\n    f = typeof f == \"undefined\" || f === null || f == \"\" ? null : f;\n    e = typeof e == \"undefined\" || e === null ? \"\" : e;\n    l = typeof l == \"undefined\" || l === null || l === \"false\" ?\n        \"none\" : l;\n    h = !(typeof h == \"undefined\" || h === null || h === \"false\");\n    j = !(typeof j == \"undefined\" || j === null || j === \"false\");\n    k = this.determinePlayback(d, c, mejs.MediaFeatures.supportsMediaTag, g, f);\n    k.url = k.url !== null ? mejs.Utility.absolutizeUrl(k.url) : \"\";\n    if (k.method == \"native\") {\n        if (mejs.MediaFeatures.isBustedAndroid) {\n            d.src = k.url;\n            d.addEventListener(\"click\", function () {\n                d.play()\n            }, false)\n        }\n        return this.updateNative(k, c, h, l)\n    } else if (k.method !== \"\")return this.createPlugin(k, c, e, h, l, j); else {\n        this.createErrorMessage(k, c, e);\n        return this\n    }\n},\n    determinePlayback: function (a, b, c, d, e) {\n        var g = [], f, h, l, j = {method: \"\", url: \"\", htmlMediaElement: a, isVideo: a.tagName.toLowerCase() != \"audio\"}, k;\n        if (typeof b.type != \"undefined\" && b.type !== \"\")if (typeof b.type == \"string\")g.push({type: b.type, url: e}); else for (f = 0; f < b.type.length; f++)g.push({type: b.type[f], url: e}); else if (e !== null) {\n            l = this.formatType(e, a.getAttribute(\"type\"));\n            g.push({type: l, url: e})\n        } else for (f = 0; f < a.childNodes.length; f++) {\n            h = a.childNodes[f];\n            if (h.nodeType == 1 && h.tagName.toLowerCase() == \"source\") {\n                e = h.getAttribute(\"src\");\n                l = this.formatType(e, h.getAttribute(\"type\"));\n                h = h.getAttribute(\"media\");\n                if (!h || !window.matchMedia || window.matchMedia && window.matchMedia(h).matches)g.push({type: l, url: e})\n            }\n        }\n        if (!d && g.length > 0 && g[0].url !== null && this.getTypeFromFile(g[0].url).indexOf(\"audio\") > -1)j.isVideo = false;\n        if (mejs.MediaFeatures.isBustedAndroid)a.canPlayType = function (m) {\n            return m.match(/video\\/(mp4|m4v)/gi) !== null ? \"maybe\" : \"\"\n        };\n        if (c && (b.mode === \"auto\" || b.mode === \"auto_plugin\" || b.mode === \"native\") && !(mejs.MediaFeatures.isBustedNativeHTTPS &&\n            b.httpsBasicAuthSite === true)) {\n            if (!d) {\n                f = document.createElement(j.isVideo ? \"video\" : \"audio\");\n                a.parentNode.insertBefore(f, a);\n                a.style.display = \"none\";\n                j.htmlMediaElement = a = f\n            }\n            for (f = 0; f < g.length; f++)if (a.canPlayType(g[f].type).replace(/no/, \"\") !== \"\" || a.canPlayType(g[f].type.replace(/mp3/, \"mpeg\")).replace(/no/, \"\") !== \"\") {\n                j.method = \"native\";\n                j.url = g[f].url;\n                break\n            }\n            if (j.method === \"native\") {\n                if (j.url !== null)a.src = j.url;\n                if (b.mode !== \"auto_plugin\")return j\n            }\n        }\n        if (b.mode === \"auto\" || b.mode === \"auto_plugin\" || b.mode === \"shim\")for (f =\n                                                                                        0; f < g.length; f++) {\n            l = g[f].type;\n            for (a = 0; a < b.plugins.length; a++) {\n                e = b.plugins[a];\n                h = mejs.plugins[e];\n                for (c = 0; c < h.length; c++) {\n                    k = h[c];\n                    if (k.version == null || mejs.PluginDetector.hasPluginVersion(e, k.version))for (d = 0; d < k.types.length; d++)if (l == k.types[d]) {\n                        j.method = e;\n                        j.url = g[f].url;\n                        return j\n                    }\n                }\n            }\n        }\n        if (b.mode === \"auto_plugin\" && j.method === \"native\")return j;\n        if (j.method === \"\" && g.length > 0)j.url = g[0].url;\n        return j\n    }, formatType: function (a, b) {\n        return a && !b ? this.getTypeFromFile(a) : b && ~b.indexOf(\";\") ? b.substr(0, b.indexOf(\";\")) : b\n    },\n    getTypeFromFile: function (a) {\n        a = a.split(\"?\")[0];\n        a = a.substring(a.lastIndexOf(\".\") + 1).toLowerCase();\n        return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(a) ? \"video\" : \"audio\") + \"/\" + this.getTypeFromExtension(a)\n    }, getTypeFromExtension: function (a) {\n        switch (a) {\n            case \"mp4\":\n            case \"m4v\":\n                return\"mp4\";\n            case \"webm\":\n            case \"webma\":\n            case \"webmv\":\n                return\"webm\";\n            case \"ogg\":\n            case \"oga\":\n            case \"ogv\":\n                return\"ogg\";\n            default:\n                return a\n        }\n    }, createErrorMessage: function (a, b, c) {\n        var d = a.htmlMediaElement, e = document.createElement(\"div\");\n        e.className =\n            \"me-cannotplay\";\n        try {\n            e.style.width = d.width + \"px\";\n            e.style.height = d.height + \"px\"\n        } catch (g) {\n        }\n        e.innerHTML = b.customError ? b.customError : c !== \"\" ? '<a href=\"' + a.url + '\"><img src=\"' + c + '\" width=\"100%\" height=\"100%\" /></a>' : '<a href=\"' + a.url + '\"><span>' + mejs.i18n.t(\"Download File\") + \"</span></a>\";\n        d.parentNode.insertBefore(e, d);\n        d.style.display = \"none\";\n        b.error(d)\n    }, createPlugin: function (a, b, c, d, e, g) {\n        c = a.htmlMediaElement;\n        var f = 1, h = 1, l = \"me_\" + a.method + \"_\" + mejs.meIndex++, j = new mejs.PluginMediaElement(l, a.method, a.url), k = document.createElement(\"div\"),\n            m;\n        j.tagName = c.tagName;\n        for (m = 0; m < c.attributes.length; m++) {\n            var n = c.attributes[m];\n            n.specified == true && j.setAttribute(n.name, n.value)\n        }\n        for (m = c.parentNode; m !== null && m.tagName.toLowerCase() != \"body\";) {\n            if (m.parentNode.tagName.toLowerCase() == \"p\") {\n                m.parentNode.parentNode.insertBefore(m, m.parentNode);\n                break\n            }\n            m = m.parentNode\n        }\n        if (a.isVideo) {\n            f = b.pluginWidth > 0 ? b.pluginWidth : b.videoWidth > 0 ? b.videoWidth : c.getAttribute(\"width\") !== null ? c.getAttribute(\"width\") : b.defaultVideoWidth;\n            h = b.pluginHeight > 0 ? b.pluginHeight : b.videoHeight >\n                0 ? b.videoHeight : c.getAttribute(\"height\") !== null ? c.getAttribute(\"height\") : b.defaultVideoHeight;\n            f = mejs.Utility.encodeUrl(f);\n            h = mejs.Utility.encodeUrl(h)\n        } else if (b.enablePluginDebug) {\n            f = 320;\n            h = 240\n        }\n        j.success = b.success;\n        mejs.MediaPluginBridge.registerPluginElement(l, j, c);\n        k.className = \"me-plugin\";\n        k.id = l + \"_container\";\n        a.isVideo ? c.parentNode.insertBefore(k, c) : document.body.insertBefore(k, document.body.childNodes[0]);\n        d = [\"id=\" + l, \"isvideo=\" + (a.isVideo ? \"true\" : \"false\"), \"autoplay=\" + (d ? \"true\" : \"false\"), \"preload=\" + e, \"width=\" +\n            f, \"startvolume=\" + b.startVolume, \"timerrate=\" + b.timerRate, \"flashstreamer=\" + b.flashStreamer, \"height=\" + h, \"pseudostreamstart=\" + b.pseudoStreamingStartQueryParam];\n        if (a.url !== null)a.method == \"flash\" ? d.push(\"file=\" + mejs.Utility.encodeUrl(a.url)) : d.push(\"file=\" + a.url);\n        b.enablePluginDebug && d.push(\"debug=true\");\n        b.enablePluginSmoothing && d.push(\"smoothing=true\");\n        b.enablePseudoStreaming && d.push(\"pseudostreaming=true\");\n        g && d.push(\"controls=true\");\n        if (b.pluginVars)d = d.concat(b.pluginVars);\n        switch (a.method) {\n            case \"silverlight\":\n                k.innerHTML =\n                    '<object data=\"data:application/x-silverlight-2,\" type=\"application/x-silverlight-2\" id=\"' + l + '\" name=\"' + l + '\" width=\"' + f + '\" height=\"' + h + '\" class=\"mejs-shim\"><param name=\"initParams\" value=\"' + d.join(\",\") + '\" /><param name=\"windowless\" value=\"true\" /><param name=\"background\" value=\"black\" /><param name=\"minRuntimeVersion\" value=\"3.0.0.0\" /><param name=\"autoUpgrade\" value=\"true\" /><param name=\"source\" value=\"' + b.pluginPath + b.silverlightName + '\" /></object>';\n                break;\n            case \"flash\":\n                if (mejs.MediaFeatures.isIE) {\n                    a =\n                        document.createElement(\"div\");\n                    k.appendChild(a);\n                    a.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"' + l + '\" width=\"' + f + '\" height=\"' + h + '\" class=\"mejs-shim\"><param name=\"movie\" value=\"' + b.pluginPath + b.flashName + \"?x=\" + new Date + '\" /><param name=\"flashvars\" value=\"' + d.join(\"&amp;\") + '\" /><param name=\"quality\" value=\"high\" /><param name=\"bgcolor\" value=\"#000000\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /><param name=\"scale\" value=\"default\" /></object>'\n                } else k.innerHTML =\n                    '<embed id=\"' + l + '\" name=\"' + l + '\" play=\"true\" loop=\"false\" quality=\"high\" bgcolor=\"#000000\" wmode=\"transparent\" allowScriptAccess=\"always\" allowFullScreen=\"true\" type=\"application/x-shockwave-flash\" pluginspage=\"//www.macromedia.com/go/getflashplayer\" src=\"' + b.pluginPath + b.flashName + '\" flashvars=\"' + d.join(\"&\") + '\" width=\"' + f + '\" height=\"' + h + '\" scale=\"default\"class=\"mejs-shim\"></embed>';\n                break;\n            case \"youtube\":\n                b = a.url.substr(a.url.lastIndexOf(\"=\") + 1);\n                youtubeSettings = {container: k, containerId: k.id, pluginMediaElement: j,\n                    pluginId: l, videoId: b, height: h, width: f};\n                mejs.PluginDetector.hasPluginVersion(\"flash\", [10, 0, 0]) ? mejs.YouTubeApi.createFlash(youtubeSettings) : mejs.YouTubeApi.enqueueIframe(youtubeSettings);\n                break;\n            case \"vimeo\":\n                j.vimeoid = a.url.substr(a.url.lastIndexOf(\"/\") + 1);\n                k.innerHTML = '<iframe src=\"http://player.vimeo.com/video/' + j.vimeoid + '?portrait=0&byline=0&title=0\" width=\"' + f + '\" height=\"' + h + '\" frameborder=\"0\" class=\"mejs-shim\"></iframe>'\n        }\n        c.style.display = \"none\";\n        c.removeAttribute(\"autoplay\");\n        return j\n    }, updateNative: function (a, b) {\n        var c = a.htmlMediaElement, d;\n        for (d in mejs.HtmlMediaElement)c[d] = mejs.HtmlMediaElement[d];\n        b.success(c, c);\n        return c\n    }};\nmejs.YouTubeApi = {isIframeStarted: false, isIframeLoaded: false, loadIframeApi: function () {\n    if (!this.isIframeStarted) {\n        var a = document.createElement(\"script\");\n        a.src = \"//www.youtube.com/player_api\";\n        var b = document.getElementsByTagName(\"script\")[0];\n        b.parentNode.insertBefore(a, b);\n        this.isIframeStarted = true\n    }\n}, iframeQueue: [], enqueueIframe: function (a) {\n    if (this.isLoaded)this.createIframe(a); else {\n        this.loadIframeApi();\n        this.iframeQueue.push(a)\n    }\n}, createIframe: function (a) {\n    var b = a.pluginMediaElement, c = new YT.Player(a.containerId,\n        {height: a.height, width: a.width, videoId: a.videoId, playerVars: {controls: 0}, events: {onReady: function () {\n            a.pluginMediaElement.pluginApi = c;\n            mejs.MediaPluginBridge.initPlugin(a.pluginId);\n            setInterval(function () {\n                mejs.YouTubeApi.createEvent(c, b, \"timeupdate\")\n            }, 250)\n        }, onStateChange: function (d) {\n            mejs.YouTubeApi.handleStateChange(d.data, c, b)\n        }}})\n}, createEvent: function (a, b, c) {\n    c = {type: c, target: b};\n    if (a && a.getDuration) {\n        b.currentTime = c.currentTime = a.getCurrentTime();\n        b.duration = c.duration = a.getDuration();\n        c.paused = b.paused;\n        c.ended = b.ended;\n        c.muted = a.isMuted();\n        c.volume = a.getVolume() / 100;\n        c.bytesTotal = a.getVideoBytesTotal();\n        c.bufferedBytes = a.getVideoBytesLoaded();\n        var d = c.bufferedBytes / c.bytesTotal * c.duration;\n        c.target.buffered = c.buffered = {start: function () {\n            return 0\n        }, end: function () {\n            return d\n        }, length: 1}\n    }\n    b.dispatchEvent(c.type, c)\n}, iFrameReady: function () {\n    for (this.isIframeLoaded = this.isLoaded = true; this.iframeQueue.length > 0;)this.createIframe(this.iframeQueue.pop())\n}, flashPlayers: {}, createFlash: function (a) {\n    this.flashPlayers[a.pluginId] =\n        a;\n    var b, c = \"//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=\" + a.pluginId + \"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0\";\n    if (mejs.MediaFeatures.isIE) {\n        b = document.createElement(\"div\");\n        a.container.appendChild(b);\n        b.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"' + a.pluginId + '\" width=\"' + a.width + '\" height=\"' + a.height + '\" class=\"mejs-shim\"><param name=\"movie\" value=\"' +\n            c + '\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /></object>'\n    } else a.container.innerHTML = '<object type=\"application/x-shockwave-flash\" id=\"' + a.pluginId + '\" data=\"' + c + '\" width=\"' + a.width + '\" height=\"' + a.height + '\" style=\"visibility: visible; \" class=\"mejs-shim\"><param name=\"allowScriptAccess\" value=\"always\"><param name=\"wmode\" value=\"transparent\"></object>'\n}, flashReady: function (a) {\n    var b = this.flashPlayers[a], c =\n        document.getElementById(a), d = b.pluginMediaElement;\n    d.pluginApi = d.pluginElement = c;\n    mejs.MediaPluginBridge.initPlugin(a);\n    c.cueVideoById(b.videoId);\n    a = b.containerId + \"_callback\";\n    window[a] = function (e) {\n        mejs.YouTubeApi.handleStateChange(e, c, d)\n    };\n    c.addEventListener(\"onStateChange\", a);\n    setInterval(function () {\n        mejs.YouTubeApi.createEvent(c, d, \"timeupdate\")\n    }, 250)\n}, handleStateChange: function (a, b, c) {\n    switch (a) {\n        case -1:\n            c.paused = true;\n            c.ended = true;\n            mejs.YouTubeApi.createEvent(b, c, \"loadedmetadata\");\n            break;\n        case 0:\n            c.paused = false;\n            c.ended = true;\n            mejs.YouTubeApi.createEvent(b, c, \"ended\");\n            break;\n        case 1:\n            c.paused = false;\n            c.ended = false;\n            mejs.YouTubeApi.createEvent(b, c, \"play\");\n            mejs.YouTubeApi.createEvent(b, c, \"playing\");\n            break;\n        case 2:\n            c.paused = true;\n            c.ended = false;\n            mejs.YouTubeApi.createEvent(b, c, \"pause\");\n            break;\n        case 3:\n            mejs.YouTubeApi.createEvent(b, c, \"progress\")\n    }\n}};\nfunction onYouTubePlayerAPIReady() {\n    mejs.YouTubeApi.iFrameReady()\n}\nfunction onYouTubePlayerReady(a) {\n    mejs.YouTubeApi.flashReady(a)\n}\nwindow.mejs = mejs;\nwindow.MediaElement = mejs.MediaElement;\n(function (a, b) {\n    var c = {locale: {language: \"\", strings: {}}, methods: {}};\n    c.getLanguage = function () {\n        return(c.locale.language || window.navigator.userLanguage || window.navigator.language).substr(0, 2).toLowerCase()\n    };\n    if (typeof mejsL10n != \"undefined\")c.locale.language = mejsL10n.language;\n    c.methods.checkPlain = function (d) {\n        var e, g, f = {\"&\": \"&amp;\", '\"': \"&quot;\", \"<\": \"&lt;\", \">\": \"&gt;\"};\n        d = String(d);\n        for (e in f)if (f.hasOwnProperty(e)) {\n            g = RegExp(e, \"g\");\n            d = d.replace(g, f[e])\n        }\n        return d\n    };\n    c.methods.t = function (d, e) {\n        if (c.locale.strings &&\n            c.locale.strings[e.context] && c.locale.strings[e.context][d])d = c.locale.strings[e.context][d];\n        return c.methods.checkPlain(d)\n    };\n    c.t = function (d, e) {\n        if (typeof d === \"string\" && d.length > 0) {\n            var g = c.getLanguage();\n            e = e || {context: g};\n            return c.methods.t(d, e)\n        } else throw{name: \"InvalidArgumentException\", message: \"First argument is either not a string or empty.\"};\n    };\n    b.i18n = c\n})(document, mejs);\n(function (a) {\n    if (typeof mejsL10n != \"undefined\")a[mejsL10n.language] = mejsL10n.strings\n})(mejs.i18n.locale.strings);\n(function (a) {\n    if (typeof a.de === \"undefined\")a.de = {Fullscreen: \"Vollbild\", \"Go Fullscreen\": \"Vollbild an\", \"Turn off Fullscreen\": \"Vollbild aus\", Close: \"Schlie\\u00dfen\"}\n})(mejs.i18n.locale.strings);\n(function (a) {\n    if (typeof a.zh === \"undefined\")a.zh = {Fullscreen: \"\\u5168\\u87a2\\u5e55\", \"Go Fullscreen\": \"\\u5168\\u5c4f\\u6a21\\u5f0f\", \"Turn off Fullscreen\": \"\\u9000\\u51fa\\u5168\\u5c4f\\u6a21\\u5f0f\", Close: \"\\u95dc\\u9589\"}\n})(mejs.i18n.locale.strings);\n\n/*!\n * MediaElementPlayer\n * http://mediaelementjs.com/\n *\n * Creates a controller bar for HTML5 <video> add <audio> tags\n * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)\n *\n * Copyright 2010-2013, John Dyer (http://j.hn/)\n * License: MIT\n *\n */\nif (typeof jQuery != \"undefined\")mejs.$ = jQuery; else if (typeof ender != \"undefined\")mejs.$ = ender;\n(function (f) {\n    mejs.MepDefaults = {poster: \"\", showPosterWhenEnded: false, defaultVideoWidth: 480, defaultVideoHeight: 270, videoWidth: -1, videoHeight: -1, defaultAudioWidth: 400, defaultAudioHeight: 30, defaultSeekBackwardInterval: function (a) {\n        return a.duration * 0.05\n    }, defaultSeekForwardInterval: function (a) {\n        return a.duration * 0.05\n    }, audioWidth: -1, audioHeight: -1, startVolume: 0.8, loop: false, autoRewind: true, enableAutosize: true, alwaysShowHours: false, showTimecodeFrameCount: false, framesPerSecond: 25, autosizeProgress: true, alwaysShowControls: false,\n        hideVideoControlsOnLoad: false, clickToPlayPause: true, iPadUseNativeControls: true, iPhoneUseNativeControls: true, AndroidUseNativeControls: true, features: [\"playpause\", \"current\", \"progress\", \"duration\", \"tracks\", \"volume\", \"fullscreen\"], isVideo: true, enableKeyboard: true, pauseOtherPlayers: true, keyActions: [\n            {keys: [32, 179], action: function (a, b) {\n                b.paused || b.ended ? a.play() : a.pause()\n            }},\n            {keys: [38], action: function (a, b) {\n                b.setVolume(Math.min(b.volume + 0.1, 1))\n            }},\n            {keys: [40], action: function (a, b) {\n                b.setVolume(Math.max(b.volume -\n                    0.1, 0))\n            }},\n            {keys: [37, 227], action: function (a, b) {\n                if (!isNaN(b.duration) && b.duration > 0) {\n                    if (a.isVideo) {\n                        a.showControls();\n                        a.startControlsTimer()\n                    }\n                    var c = Math.max(b.currentTime - a.options.defaultSeekBackwardInterval(b), 0);\n                    b.setCurrentTime(c)\n                }\n            }},\n            {keys: [39, 228], action: function (a, b) {\n                if (!isNaN(b.duration) && b.duration > 0) {\n                    if (a.isVideo) {\n                        a.showControls();\n                        a.startControlsTimer()\n                    }\n                    var c = Math.min(b.currentTime + a.options.defaultSeekForwardInterval(b), b.duration);\n                    b.setCurrentTime(c)\n                }\n            }},\n            {keys: [70], action: function (a) {\n                if (typeof a.enterFullScreen !=\n                    \"undefined\")a.isFullScreen ? a.exitFullScreen() : a.enterFullScreen()\n            }}\n        ]};\n    mejs.mepIndex = 0;\n    mejs.players = {};\n    mejs.MediaElementPlayer = function (a, b) {\n        if (!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(a, b);\n        this.$media = this.$node = f(a);\n        this.node = this.media = this.$media[0];\n        if (typeof this.node.player != \"undefined\")return this.node.player; else this.node.player = this;\n        if (typeof b == \"undefined\")b = this.$node.data(\"mejsoptions\");\n        this.options = f.extend({}, mejs.MepDefaults, b);\n        this.id = \"mep_\" + mejs.mepIndex++;\n        mejs.players[this.id] = this;\n        this.init();\n        return this\n    };\n    mejs.MediaElementPlayer.prototype = {hasFocus: false, controlsAreVisible: true, init: function () {\n        var a = this, b = mejs.MediaFeatures, c = f.extend(true, {}, a.options, {success: function (d, g) {\n            a.meReady(d, g)\n        }, error: function (d) {\n            a.handleError(d)\n        }}), e = a.media.tagName.toLowerCase();\n        a.isDynamic = e !== \"audio\" && e !== \"video\";\n        a.isVideo = a.isDynamic ? a.options.isVideo : e !== \"audio\" && a.options.isVideo;\n        if (b.isiPad && a.options.iPadUseNativeControls || b.isiPhone && a.options.iPhoneUseNativeControls) {\n            a.$media.attr(\"controls\",\n                \"controls\");\n            b.isiPad && a.media.getAttribute(\"autoplay\") !== null && a.play()\n        } else if (!(b.isAndroid && a.options.AndroidUseNativeControls)) {\n            a.$media.removeAttr(\"controls\");\n            a.container = f('<div id=\"' + a.id + '\" class=\"mejs-container ' + (mejs.MediaFeatures.svg ? \"svg\" : \"no-svg\") + '\"><div class=\"mejs-inner\"><div class=\"mejs-mediaelement\"></div><div class=\"mejs-layers\"></div><div class=\"mejs-controls\"></div><div class=\"mejs-clear\"></div></div></div>').addClass(a.$media[0].className).insertBefore(a.$media);\n            a.container.addClass((b.isAndroid ?\n                \"mejs-android \" : \"\") + (b.isiOS ? \"mejs-ios \" : \"\") + (b.isiPad ? \"mejs-ipad \" : \"\") + (b.isiPhone ? \"mejs-iphone \" : \"\") + (a.isVideo ? \"mejs-video \" : \"mejs-audio \"));\n            if (b.isiOS) {\n                b = a.$media.clone();\n                a.container.find(\".mejs-mediaelement\").append(b);\n                a.$media.remove();\n                a.$node = a.$media = b;\n                a.node = a.media = b[0]\n            } else a.container.find(\".mejs-mediaelement\").append(a.$media);\n            a.controls = a.container.find(\".mejs-controls\");\n            a.layers = a.container.find(\".mejs-layers\");\n            b = a.isVideo ? \"video\" : \"audio\";\n            e = b.substring(0, 1).toUpperCase() + b.substring(1);\n            a.width = a.options[b + \"Width\"] > 0 || a.options[b + \"Width\"].toString().indexOf(\"%\") > -1 ? a.options[b + \"Width\"] : a.media.style.width !== \"\" && a.media.style.width !== null ? a.media.style.width : a.media.getAttribute(\"width\") !== null ? a.$media.attr(\"width\") : a.options[\"default\" + e + \"Width\"];\n            a.height = a.options[b + \"Height\"] > 0 || a.options[b + \"Height\"].toString().indexOf(\"%\") > -1 ? a.options[b + \"Height\"] : a.media.style.height !== \"\" && a.media.style.height !== null ? a.media.style.height : a.$media[0].getAttribute(\"height\") !== null ? a.$media.attr(\"height\") :\n                a.options[\"default\" + e + \"Height\"];\n            a.setPlayerSize(a.width, a.height);\n            c.pluginWidth = a.width;\n            c.pluginHeight = a.height\n        }\n        mejs.MediaElement(a.$media[0], c);\n        typeof a.container != \"undefined\" && a.controlsAreVisible && a.container.trigger(\"controlsshown\")\n    }, showControls: function (a) {\n        var b = this;\n        a = typeof a == \"undefined\" || a;\n        if (!b.controlsAreVisible) {\n            if (a) {\n                b.controls.css(\"visibility\", \"visible\").stop(true, true).fadeIn(200, function () {\n                    b.controlsAreVisible = true;\n                    b.container.trigger(\"controlsshown\")\n                });\n                b.container.find(\".mejs-control\").css(\"visibility\",\n                    \"visible\").stop(true, true).fadeIn(200, function () {\n                        b.controlsAreVisible = true\n                    })\n            } else {\n                b.controls.css(\"visibility\", \"visible\").css(\"display\", \"block\");\n                b.container.find(\".mejs-control\").css(\"visibility\", \"visible\").css(\"display\", \"block\");\n                b.controlsAreVisible = true;\n                b.container.trigger(\"controlsshown\")\n            }\n            b.setControlsSize()\n        }\n    }, hideControls: function (a) {\n        var b = this;\n        a = typeof a == \"undefined\" || a;\n        if (!(!b.controlsAreVisible || b.options.alwaysShowControls))if (a) {\n            b.controls.stop(true, true).fadeOut(200, function () {\n                f(this).css(\"visibility\",\n                    \"hidden\").css(\"display\", \"block\");\n                b.controlsAreVisible = false;\n                b.container.trigger(\"controlshidden\")\n            });\n            b.container.find(\".mejs-control\").stop(true, true).fadeOut(200, function () {\n                f(this).css(\"visibility\", \"hidden\").css(\"display\", \"block\")\n            })\n        } else {\n            b.controls.css(\"visibility\", \"hidden\").css(\"display\", \"block\");\n            b.container.find(\".mejs-control\").css(\"visibility\", \"hidden\").css(\"display\", \"block\");\n            b.controlsAreVisible = false;\n            b.container.trigger(\"controlshidden\")\n        }\n    }, controlsTimer: null, startControlsTimer: function (a) {\n        var b =\n            this;\n        a = typeof a != \"undefined\" ? a : 1500;\n        b.killControlsTimer(\"start\");\n        b.controlsTimer = setTimeout(function () {\n            b.hideControls();\n            b.killControlsTimer(\"hide\")\n        }, a)\n    }, killControlsTimer: function () {\n        if (this.controlsTimer !== null) {\n            clearTimeout(this.controlsTimer);\n            delete this.controlsTimer;\n            this.controlsTimer = null\n        }\n    }, controlsEnabled: true, disableControls: function () {\n        this.killControlsTimer();\n        this.hideControls(false);\n        this.controlsEnabled = false\n    }, enableControls: function () {\n        this.showControls(false);\n        this.controlsEnabled = true\n    },\n        meReady: function (a, b) {\n            var c = this, e = mejs.MediaFeatures, d = b.getAttribute(\"autoplay\");\n            d = !(typeof d == \"undefined\" || d === null || d === \"false\");\n            var g;\n            if (!c.created) {\n                c.created = true;\n                c.media = a;\n                c.domNode = b;\n                if (!(e.isAndroid && c.options.AndroidUseNativeControls) && !(e.isiPad && c.options.iPadUseNativeControls) && !(e.isiPhone && c.options.iPhoneUseNativeControls)) {\n                    c.buildposter(c, c.controls, c.layers, c.media);\n                    c.buildkeyboard(c, c.controls, c.layers, c.media);\n                    c.buildoverlays(c, c.controls, c.layers, c.media);\n                    c.findTracks();\n                    for (g in c.options.features) {\n                        e =\n                            c.options.features[g];\n                        if (c[\"build\" + e])try {\n                            c[\"build\" + e](c, c.controls, c.layers, c.media)\n                        } catch (k) {\n                        }\n                    }\n                    c.container.trigger(\"controlsready\");\n                    c.setPlayerSize(c.width, c.height);\n                    c.setControlsSize();\n                    if (c.isVideo) {\n                        if (mejs.MediaFeatures.hasTouch)c.$media.bind(\"touchstart\", function () {\n                            if (c.controlsAreVisible)c.hideControls(false); else c.controlsEnabled && c.showControls(false)\n                        }); else {\n                            mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback = function () {\n                                if (c.options.clickToPlayPause)c.media.paused ? c.play() : c.pause()\n                            };\n                            c.media.addEventListener(\"click\", c.clickToPlayPauseCallback, false);\n                            c.container.bind(\"mouseenter mouseover\",function () {\n                                if (c.controlsEnabled)if (!c.options.alwaysShowControls) {\n                                    c.killControlsTimer(\"enter\");\n                                    c.showControls();\n                                    c.startControlsTimer(2500)\n                                }\n                            }).bind(\"mousemove\",function () {\n                                if (c.controlsEnabled) {\n                                    c.controlsAreVisible || c.showControls();\n                                    c.options.alwaysShowControls || c.startControlsTimer(2500)\n                                }\n                            }).bind(\"mouseleave\", function () {\n                                c.controlsEnabled && !c.media.paused && !c.options.alwaysShowControls && c.startControlsTimer(1E3)\n                            })\n                        }\n                        c.options.hideVideoControlsOnLoad &&\n                        c.hideControls(false);\n                        d && !c.options.alwaysShowControls && c.hideControls();\n                        c.options.enableAutosize && c.media.addEventListener(\"loadedmetadata\", function (j) {\n                            if (c.options.videoHeight <= 0 && c.domNode.getAttribute(\"height\") === null && !isNaN(j.target.videoHeight)) {\n                                c.setPlayerSize(j.target.videoWidth, j.target.videoHeight);\n                                c.setControlsSize();\n                                c.media.setVideoSize(j.target.videoWidth, j.target.videoHeight)\n                            }\n                        }, false)\n                    }\n                    a.addEventListener(\"play\", function () {\n                        for (var j in mejs.players) {\n                            var m = mejs.players[j];\n                            m.id != c.id &&\n                                c.options.pauseOtherPlayers && !m.paused && !m.ended && m.pause();\n                            m.hasFocus = false\n                        }\n                        c.hasFocus = true\n                    }, false);\n                    c.media.addEventListener(\"ended\", function () {\n                        if (c.options.autoRewind)try {\n                            c.media.setCurrentTime(0)\n                        } catch (j) {\n                        }\n                        c.media.pause();\n                        c.setProgressRail && c.setProgressRail();\n                        c.setCurrentRail && c.setCurrentRail();\n                        if (c.options.loop)c.play(); else!c.options.alwaysShowControls && c.controlsEnabled && c.showControls()\n                    }, false);\n                    c.media.addEventListener(\"loadedmetadata\", function () {\n                        c.updateDuration && c.updateDuration();\n                        c.updateCurrent &&\n                        c.updateCurrent();\n                        if (!c.isFullScreen) {\n                            c.setPlayerSize(c.width, c.height);\n                            c.setControlsSize()\n                        }\n                    }, false);\n                    setTimeout(function () {\n                        c.setPlayerSize(c.width, c.height);\n                        c.setControlsSize()\n                    }, 50);\n                    c.globalBind(\"resize\", function () {\n                        c.isFullScreen || mejs.MediaFeatures.hasTrueNativeFullScreen && document.webkitIsFullScreen || c.setPlayerSize(c.width, c.height);\n                        c.setControlsSize()\n                    });\n                    c.media.pluginType == \"youtube\" && c.container.find(\".mejs-overlay-play\").hide()\n                }\n                d && a.pluginType == \"native\" && c.play();\n                if (c.options.success)typeof c.options.success ==\n                    \"string\" ? window[c.options.success](c.media, c.domNode, c) : c.options.success(c.media, c.domNode, c)\n            }\n        }, handleError: function (a) {\n            this.controls.hide();\n            this.options.error && this.options.error(a)\n        }, setPlayerSize: function (a, b) {\n            if (typeof a != \"undefined\")this.width = a;\n            if (typeof b != \"undefined\")this.height = b;\n            if (this.height.toString().indexOf(\"%\") > 0 || this.$node.css(\"max-width\") === \"100%\" || parseInt(this.$node.css(\"max-width\").replace(/px/, \"\"), 10) / this.$node.offsetParent().width() === 1 || this.$node[0].currentStyle && this.$node[0].currentStyle.maxWidth ===\n                \"100%\") {\n                var c = this.isVideo ? this.media.videoWidth && this.media.videoWidth > 0 ? this.media.videoWidth : this.options.defaultVideoWidth : this.options.defaultAudioWidth, e = this.isVideo ? this.media.videoHeight && this.media.videoHeight > 0 ? this.media.videoHeight : this.options.defaultVideoHeight : this.options.defaultAudioHeight, d = this.container.parent().closest(\":visible\").width();\n                c = this.isVideo || !this.options.autosizeProgress ? parseInt(d * e / c, 10) : e;\n                if (this.container.parent()[0].tagName.toLowerCase() === \"body\") {\n                    d = f(window).width();\n                    c = f(window).height()\n                }\n                if (c != 0 && d != 0) {\n                    this.container.width(d).height(c);\n                    this.$media.add(this.container.find(\".mejs-shim\")).width(\"100%\").height(\"100%\");\n                    this.isVideo && this.media.setVideoSize && this.media.setVideoSize(d, c);\n                    this.layers.children(\".mejs-layer\").width(\"100%\").height(\"100%\")\n                }\n            } else {\n                this.container.width(this.width).height(this.height);\n                this.layers.children(\".mejs-layer\").width(this.width).height(this.height)\n            }\n            d = this.layers.find(\".mejs-overlay-play\");\n            c = d.find(\".mejs-overlay-button\");\n            d.height(this.container.height() -\n                this.controls.height());\n            c.css(\"margin-top\", \"-\" + (c.height() / 2 - this.controls.height() / 2).toString() + \"px\")\n        }, setControlsSize: function () {\n            var a = 0, b = 0, c = this.controls.find(\".mejs-time-rail\"), e = this.controls.find(\".mejs-time-total\");\n            this.controls.find(\".mejs-time-current\");\n            this.controls.find(\".mejs-time-loaded\");\n            var d = c.siblings();\n            if (this.options && !this.options.autosizeProgress)b = parseInt(c.css(\"width\"));\n            if (b === 0 || !b) {\n                d.each(function () {\n                    var g = f(this);\n                    if (g.css(\"position\") != \"absolute\" && g.is(\":visible\"))a += f(this).outerWidth(true)\n                });\n                b = this.controls.width() - a - (c.outerWidth(true) - c.width())\n            }\n            c.width(b);\n            e.width(b - (e.outerWidth(true) - e.width()));\n            this.setProgressRail && this.setProgressRail();\n            this.setCurrentRail && this.setCurrentRail()\n        }, buildposter: function (a, b, c, e) {\n            var d = f('<div class=\"mejs-poster mejs-layer\"></div>').appendTo(c);\n            b = a.$media.attr(\"poster\");\n            if (a.options.poster !== \"\")b = a.options.poster;\n            b !== \"\" && b != null ? this.setPoster(b) : d.hide();\n            e.addEventListener(\"play\", function () {\n                d.hide()\n            }, false);\n            a.options.showPosterWhenEnded && a.options.autoRewind &&\n            e.addEventListener(\"ended\", function () {\n                d.show()\n            }, false)\n        }, setPoster: function (a) {\n            var b = this.container.find(\".mejs-poster\"), c = b.find(\"img\");\n            if (c.length == 0)c = f('<img width=\"100%\" height=\"100%\" />').appendTo(b);\n            c.attr(\"src\", a);\n            b.css({\"background-image\": \"url(\" + a + \")\"})\n        }, buildoverlays: function (a, b, c, e) {\n            var d = this;\n            if (a.isVideo) {\n                var g = f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-loading\"><span></span></div></div>').hide().appendTo(c), k = f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-error\"></div></div>').hide().appendTo(c),\n                    j = f('<div class=\"mejs-overlay mejs-layer mejs-overlay-play\"><div class=\"mejs-overlay-button\"></div></div>').appendTo(c).bind(\"click touchstart\", function () {\n                        d.options.clickToPlayPause && e.paused && d.play()\n                    });\n                e.addEventListener(\"play\", function () {\n                    j.hide();\n                    g.hide();\n                    b.find(\".mejs-time-buffering\").hide();\n                    k.hide()\n                }, false);\n                e.addEventListener(\"playing\", function () {\n                    j.hide();\n                    g.hide();\n                    b.find(\".mejs-time-buffering\").hide();\n                    k.hide()\n                }, false);\n                e.addEventListener(\"seeking\", function () {\n                        g.show();\n                        b.find(\".mejs-time-buffering\").show()\n                    },\n                    false);\n                e.addEventListener(\"seeked\", function () {\n                    g.hide();\n                    b.find(\".mejs-time-buffering\").hide()\n                }, false);\n                e.addEventListener(\"pause\", function () {\n                    mejs.MediaFeatures.isiPhone || j.show()\n                }, false);\n                e.addEventListener(\"waiting\", function () {\n                    g.show();\n                    b.find(\".mejs-time-buffering\").show()\n                }, false);\n                e.addEventListener(\"loadeddata\", function () {\n                    g.show();\n                    b.find(\".mejs-time-buffering\").show()\n                }, false);\n                e.addEventListener(\"canplay\", function () {\n                    g.hide();\n                    b.find(\".mejs-time-buffering\").hide()\n                }, false);\n                e.addEventListener(\"error\", function () {\n                    g.hide();\n                    b.find(\".mejs-time-buffering\").hide();\n                    k.show();\n                    k.find(\"mejs-overlay-error\").html(\"Error loading this resource\")\n                }, false)\n            }\n        }, buildkeyboard: function (a, b, c, e) {\n            this.globalBind(\"keydown\", function (d) {\n                if (a.hasFocus && a.options.enableKeyboard)for (var g = 0, k = a.options.keyActions.length; g < k; g++)for (var j = a.options.keyActions[g], m = 0, q = j.keys.length; m < q; m++)if (d.keyCode == j.keys[m]) {\n                    d.preventDefault();\n                    j.action(a, e, d.keyCode);\n                    return false\n                }\n                return true\n            });\n            this.globalBind(\"click\", function (d) {\n                if (f(d.target).closest(\".mejs-container\").length ==\n                    0)a.hasFocus = false\n            })\n        }, findTracks: function () {\n            var a = this, b = a.$media.find(\"track\");\n            a.tracks = [];\n            b.each(function (c, e) {\n                e = f(e);\n                a.tracks.push({srclang: e.attr(\"srclang\") ? e.attr(\"srclang\").toLowerCase() : \"\", src: e.attr(\"src\"), kind: e.attr(\"kind\"), label: e.attr(\"label\") || \"\", entries: [], isLoaded: false})\n            })\n        }, changeSkin: function (a) {\n            this.container[0].className = \"mejs-container \" + a;\n            this.setPlayerSize(this.width, this.height);\n            this.setControlsSize()\n        }, play: function () {\n            this.load();\n            this.media.play()\n        }, pause: function () {\n            try {\n                this.media.pause()\n            } catch (a) {\n            }\n        },\n        load: function () {\n            this.isLoaded || this.media.load();\n            this.isLoaded = true\n        }, setMuted: function (a) {\n            this.media.setMuted(a)\n        }, setCurrentTime: function (a) {\n            this.media.setCurrentTime(a)\n        }, getCurrentTime: function () {\n            return this.media.currentTime\n        }, setVolume: function (a) {\n            this.media.setVolume(a)\n        }, getVolume: function () {\n            return this.media.volume\n        }, setSrc: function (a) {\n            this.media.setSrc(a)\n        }, remove: function () {\n            var a, b;\n            for (a in this.options.features) {\n                b = this.options.features[a];\n                if (this[\"clean\" + b])try {\n                    this[\"clean\" + b](this)\n                } catch (c) {\n                }\n            }\n            if (this.isDynamic)this.$node.insertBefore(this.container);\n            else {\n                this.$media.prop(\"controls\", true);\n                this.$node.clone().show().insertBefore(this.container);\n                this.$node.remove()\n            }\n            this.media.pluginType !== \"native\" && this.media.remove();\n            delete mejs.players[this.id];\n            this.container.remove();\n            this.globalUnbind();\n            delete this.node.player\n        }};\n    (function () {\n        function a(c, e) {\n            var d = {d: [], w: []};\n            f.each((c || \"\").split(\" \"), function (g, k) {\n                var j = k + \".\" + e;\n                if (j.indexOf(\".\") === 0) {\n                    d.d.push(j);\n                    d.w.push(j)\n                } else d[b.test(k) ? \"w\" : \"d\"].push(j)\n            });\n            d.d = d.d.join(\" \");\n            d.w = d.w.join(\" \");\n            return d\n        }\n\n        var b =\n            /^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\\b/;\n        mejs.MediaElementPlayer.prototype.globalBind = function (c, e, d) {\n            c = a(c, this.id);\n            c.d && f(document).bind(c.d, e, d);\n            c.w && f(window).bind(c.w, e, d)\n        };\n        mejs.MediaElementPlayer.prototype.globalUnbind = function (c, e) {\n            c = a(c, this.id);\n            c.d && f(document).unbind(c.d, e);\n            c.w && f(window).unbind(c.w, e)\n        }\n    })();\n    if (typeof jQuery != \"undefined\")jQuery.fn.mediaelementplayer = function (a) {\n        a === false ? this.each(function () {\n            var b = jQuery(this).data(\"mediaelementplayer\");\n            b && b.remove();\n            jQuery(this).removeData(\"mediaelementplayer\")\n        }) : this.each(function () {\n            jQuery(this).data(\"mediaelementplayer\", new mejs.MediaElementPlayer(this, a))\n        });\n        return this\n    };\n    f(document).ready(function () {\n        f(\".mejs-player\").mediaelementplayer()\n    });\n    window.MediaElementPlayer = mejs.MediaElementPlayer\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {playpauseText: mejs.i18n.t(\"Play/Pause\")});\n    f.extend(MediaElementPlayer.prototype, {buildplaypause: function (a, b, c, e) {\n        var d = f('<div class=\"mejs-button mejs-playpause-button mejs-play\" ><button type=\"button\" aria-controls=\"' + this.id + '\" title=\"' + this.options.playpauseText + '\" aria-label=\"' + this.options.playpauseText + '\"></button></div>').appendTo(b).click(function (g) {\n            g.preventDefault();\n            e.paused ? e.play() : e.pause();\n            return false\n        });\n        e.addEventListener(\"play\", function () {\n                d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")\n            },\n            false);\n        e.addEventListener(\"playing\", function () {\n            d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")\n        }, false);\n        e.addEventListener(\"pause\", function () {\n            d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")\n        }, false);\n        e.addEventListener(\"paused\", function () {\n            d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")\n        }, false)\n    }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {stopText: \"Stop\"});\n    f.extend(MediaElementPlayer.prototype, {buildstop: function (a, b, c, e) {\n        f('<div class=\"mejs-button mejs-stop-button mejs-stop\"><button type=\"button\" aria-controls=\"' + this.id + '\" title=\"' + this.options.stopText + '\" aria-label=\"' + this.options.stopText + '\"></button></div>').appendTo(b).click(function () {\n            e.paused || e.pause();\n            if (e.currentTime > 0) {\n                e.setCurrentTime(0);\n                e.pause();\n                b.find(\".mejs-time-current\").width(\"0px\");\n                b.find(\".mejs-time-handle\").css(\"left\",\n                    \"0px\");\n                b.find(\".mejs-time-float-current\").html(mejs.Utility.secondsToTimeCode(0));\n                b.find(\".mejs-currenttime\").html(mejs.Utility.secondsToTimeCode(0));\n                c.find(\".mejs-poster\").show()\n            }\n        })\n    }})\n})(mejs.$);\n(function (f) {\n    f.extend(MediaElementPlayer.prototype, {buildprogress: function (a, b, c, e) {\n        f('<div class=\"mejs-time-rail\"><span class=\"mejs-time-total\"><span class=\"mejs-time-buffering\"></span><span class=\"mejs-time-loaded\"></span><span class=\"mejs-time-current\"></span><span class=\"mejs-time-handle\"></span><span class=\"mejs-time-float\"><span class=\"mejs-time-float-current\">00:00</span><span class=\"mejs-time-float-corner\"></span></span></span></div>').appendTo(b);\n        b.find(\".mejs-time-buffering\").hide();\n        var d =\n            this, g = b.find(\".mejs-time-total\");\n        c = b.find(\".mejs-time-loaded\");\n        var k = b.find(\".mejs-time-current\"), j = b.find(\".mejs-time-handle\"), m = b.find(\".mejs-time-float\"), q = b.find(\".mejs-time-float-current\"), p = function (h) {\n            h = h.pageX;\n            var l = g.offset(), r = g.outerWidth(true), n = 0, o = n = 0;\n            if (e.duration) {\n                if (h < l.left)h = l.left; else if (h > r + l.left)h = r + l.left;\n                o = h - l.left;\n                n = o / r;\n                n = n <= 0.02 ? 0 : n * e.duration;\n                t && n !== e.currentTime && e.setCurrentTime(n);\n                if (!mejs.MediaFeatures.hasTouch) {\n                    m.css(\"left\", o);\n                    q.html(mejs.Utility.secondsToTimeCode(n));\n                    m.show()\n                }\n            }\n        }, t = false;\n        g.bind(\"mousedown\",function (h) {\n            if (h.which === 1) {\n                t = true;\n                p(h);\n                d.globalBind(\"mousemove.dur\", function (l) {\n                    p(l)\n                });\n                d.globalBind(\"mouseup.dur\", function () {\n                    t = false;\n                    m.hide();\n                    d.globalUnbind(\".dur\")\n                });\n                return false\n            }\n        }).bind(\"mouseenter\",function () {\n            d.globalBind(\"mousemove.dur\", function (h) {\n                p(h)\n            });\n            mejs.MediaFeatures.hasTouch || m.show()\n        }).bind(\"mouseleave\", function () {\n            if (!t) {\n                d.globalUnbind(\".dur\");\n                m.hide()\n            }\n        });\n        e.addEventListener(\"progress\", function (h) {\n            a.setProgressRail(h);\n            a.setCurrentRail(h)\n        }, false);\n        e.addEventListener(\"timeupdate\", function (h) {\n            a.setProgressRail(h);\n            a.setCurrentRail(h)\n        }, false);\n        d.loaded = c;\n        d.total = g;\n        d.current = k;\n        d.handle = j\n    }, setProgressRail: function (a) {\n        var b = a != undefined ? a.target : this.media, c = null;\n        if (b && b.buffered && b.buffered.length > 0 && b.buffered.end && b.duration)c = b.buffered.end(0) / b.duration; else if (b && b.bytesTotal != undefined && b.bytesTotal > 0 && b.bufferedBytes != undefined)c = b.bufferedBytes / b.bytesTotal; else if (a && a.lengthComputable && a.total != 0)c = a.loaded / a.total;\n        if (c !== null) {\n            c = Math.min(1,\n                Math.max(0, c));\n            this.loaded && this.total && this.loaded.width(this.total.width() * c)\n        }\n    }, setCurrentRail: function () {\n        if (this.media.currentTime != undefined && this.media.duration)if (this.total && this.handle) {\n            var a = Math.round(this.total.width() * this.media.currentTime / this.media.duration), b = a - Math.round(this.handle.outerWidth(true) / 2);\n            this.current.width(a);\n            this.handle.css(\"left\", b)\n        }\n    }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {duration: -1, timeAndDurationSeparator: \"<span> | </span>\"});\n    f.extend(MediaElementPlayer.prototype, {buildcurrent: function (a, b, c, e) {\n        f('<div class=\"mejs-time\"><span class=\"mejs-currenttime\">' + (a.options.alwaysShowHours ? \"00:\" : \"\") + (a.options.showTimecodeFrameCount ? \"00:00:00\" : \"00:00\") + \"</span></div>\").appendTo(b);\n        this.currenttime = this.controls.find(\".mejs-currenttime\");\n        e.addEventListener(\"timeupdate\", function () {\n            a.updateCurrent()\n        }, false)\n    }, buildduration: function (a, b, c, e) {\n        if (b.children().last().find(\".mejs-currenttime\").length > 0)f(this.options.timeAndDurationSeparator + '<span class=\"mejs-duration\">' + (this.options.duration > 0 ? mejs.Utility.secondsToTimeCode(this.options.duration, this.options.alwaysShowHours || this.media.duration > 3600, this.options.showTimecodeFrameCount, this.options.framesPerSecond || 25) : (a.options.alwaysShowHours ? \"00:\" : \"\") + (a.options.showTimecodeFrameCount ? \"00:00:00\" : \"00:00\")) + \"</span>\").appendTo(b.find(\".mejs-time\")); else {\n            b.find(\".mejs-currenttime\").parent().addClass(\"mejs-currenttime-container\");\n            f('<div class=\"mejs-time mejs-duration-container\"><span class=\"mejs-duration\">' + (this.options.duration > 0 ? mejs.Utility.secondsToTimeCode(this.options.duration, this.options.alwaysShowHours || this.media.duration > 3600, this.options.showTimecodeFrameCount, this.options.framesPerSecond || 25) : (a.options.alwaysShowHours ? \"00:\" : \"\") + (a.options.showTimecodeFrameCount ? \"00:00:00\" : \"00:00\")) + \"</span></div>\").appendTo(b)\n        }\n        this.durationD = this.controls.find(\".mejs-duration\");\n        e.addEventListener(\"timeupdate\", function () {\n                a.updateDuration()\n            },\n            false)\n    }, updateCurrent: function () {\n        if (this.currenttime)this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime, this.options.alwaysShowHours || this.media.duration > 3600, this.options.showTimecodeFrameCount, this.options.framesPerSecond || 25))\n    }, updateDuration: function () {\n        this.container.toggleClass(\"mejs-long-video\", this.media.duration > 3600);\n        if (this.durationD && (this.options.duration > 0 || this.media.duration))this.durationD.html(mejs.Utility.secondsToTimeCode(this.options.duration > 0 ? this.options.duration :\n            this.media.duration, this.options.alwaysShowHours, this.options.showTimecodeFrameCount, this.options.framesPerSecond || 25))\n    }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {muteText: mejs.i18n.t(\"Mute Toggle\"), hideVolumeOnTouchDevices: true, audioVolume: \"horizontal\", videoVolume: \"vertical\"});\n    f.extend(MediaElementPlayer.prototype, {buildvolume: function (a, b, c, e) {\n        if (!(mejs.MediaFeatures.hasTouch && this.options.hideVolumeOnTouchDevices)) {\n            var d = this, g = d.isVideo ? d.options.videoVolume : d.options.audioVolume, k = g == \"horizontal\" ? f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"' + d.id + '\" title=\"' + d.options.muteText +\n                    '\" aria-label=\"' + d.options.muteText + '\"></button></div><div class=\"mejs-horizontal-volume-slider\"><div class=\"mejs-horizontal-volume-total\"></div><div class=\"mejs-horizontal-volume-current\"></div><div class=\"mejs-horizontal-volume-handle\"></div></div>').appendTo(b) : f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"' + d.id + '\" title=\"' + d.options.muteText + '\" aria-label=\"' + d.options.muteText + '\"></button><div class=\"mejs-volume-slider\"><div class=\"mejs-volume-total\"></div><div class=\"mejs-volume-current\"></div><div class=\"mejs-volume-handle\"></div></div></div>').appendTo(b),\n                j = d.container.find(\".mejs-volume-slider, .mejs-horizontal-volume-slider\"), m = d.container.find(\".mejs-volume-total, .mejs-horizontal-volume-total\"), q = d.container.find(\".mejs-volume-current, .mejs-horizontal-volume-current\"), p = d.container.find(\".mejs-volume-handle, .mejs-horizontal-volume-handle\"), t = function (n, o) {\n                    if (!j.is(\":visible\") && typeof o == \"undefined\") {\n                        j.show();\n                        t(n, true);\n                        j.hide()\n                    } else {\n                        n = Math.max(0, n);\n                        n = Math.min(n, 1);\n                        n == 0 ? k.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\") : k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\");\n                        if (g == \"vertical\") {\n                            var s = m.height(), u = m.position(), v = s - s * n;\n                            p.css(\"top\", Math.round(u.top + v - p.height() / 2));\n                            q.height(s - v);\n                            q.css(\"top\", u.top + v)\n                        } else {\n                            s = m.width();\n                            u = m.position();\n                            s = s * n;\n                            p.css(\"left\", Math.round(u.left + s - p.width() / 2));\n                            q.width(Math.round(s))\n                        }\n                    }\n                }, h = function (n) {\n                    var o = null, s = m.offset();\n                    if (g == \"vertical\") {\n                        o = m.height();\n                        parseInt(m.css(\"top\").replace(/px/, \"\"), 10);\n                        o = (o - (n.pageY - s.top)) / o;\n                        if (s.top == 0 || s.left == 0)return\n                    } else {\n                        o = m.width();\n                        o = (n.pageX - s.left) / o\n                    }\n                    o = Math.max(0, o);\n                    o = Math.min(o, 1);\n                    t(o);\n                    o == 0 ? e.setMuted(true) :\n                        e.setMuted(false);\n                    e.setVolume(o)\n                }, l = false, r = false;\n            k.hover(function () {\n                j.show();\n                r = true\n            }, function () {\n                r = false;\n                !l && g == \"vertical\" && j.hide()\n            });\n            j.bind(\"mouseover\",function () {\n                r = true\n            }).bind(\"mousedown\", function (n) {\n                h(n);\n                d.globalBind(\"mousemove.vol\", function (o) {\n                    h(o)\n                });\n                d.globalBind(\"mouseup.vol\", function () {\n                    l = false;\n                    d.globalUnbind(\".vol\");\n                    !r && g == \"vertical\" && j.hide()\n                });\n                l = true;\n                return false\n            });\n            k.find(\"button\").click(function () {\n                e.setMuted(!e.muted)\n            });\n            e.addEventListener(\"volumechange\", function () {\n                if (!l)if (e.muted) {\n                    t(0);\n                    k.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\")\n                } else {\n                    t(e.volume);\n                    k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\")\n                }\n            }, false);\n            if (d.container.is(\":visible\")) {\n                t(a.options.startVolume);\n                a.options.startVolume === 0 && e.setMuted(true);\n                e.pluginType === \"native\" && e.setVolume(a.options.startVolume)\n            }\n        }\n    }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {usePluginFullScreen: true, newWindowCallback: function () {\n        return\"\"\n    }, fullscreenText: mejs.i18n.t(\"Fullscreen\")});\n    f.extend(MediaElementPlayer.prototype, {isFullScreen: false, isNativeFullScreen: false, isInIframe: false, buildfullscreen: function (a, b, c, e) {\n        if (a.isVideo) {\n            a.isInIframe = window.location != window.parent.location;\n            if (mejs.MediaFeatures.hasTrueNativeFullScreen) {\n                c = function () {\n                    if (a.isFullScreen)if (mejs.MediaFeatures.isFullScreen()) {\n                        a.isNativeFullScreen = true;\n                        a.setControlsSize()\n                    } else {\n                        a.isNativeFullScreen =\n                            false;\n                        a.exitFullScreen()\n                    }\n                };\n                mejs.MediaFeatures.hasMozNativeFullScreen ? a.globalBind(mejs.MediaFeatures.fullScreenEventName, c) : a.container.bind(mejs.MediaFeatures.fullScreenEventName, c)\n            }\n            var d = this, g = f('<div class=\"mejs-button mejs-fullscreen-button\"><button type=\"button\" aria-controls=\"' + d.id + '\" title=\"' + d.options.fullscreenText + '\" aria-label=\"' + d.options.fullscreenText + '\"></button></div>').appendTo(b);\n            if (d.media.pluginType === \"native\" || !d.options.usePluginFullScreen && !mejs.MediaFeatures.isFirefox)g.click(function () {\n                mejs.MediaFeatures.hasTrueNativeFullScreen &&\n                    mejs.MediaFeatures.isFullScreen() || a.isFullScreen ? a.exitFullScreen() : a.enterFullScreen()\n            }); else {\n                var k = null;\n                if (function () {\n                    var h = document.createElement(\"x\"), l = document.documentElement, r = window.getComputedStyle;\n                    if (!(\"pointerEvents\"in h.style))return false;\n                    h.style.pointerEvents = \"auto\";\n                    h.style.pointerEvents = \"x\";\n                    l.appendChild(h);\n                    r = r && r(h, \"\").pointerEvents === \"auto\";\n                    l.removeChild(h);\n                    return!!r\n                }() && !mejs.MediaFeatures.isOpera) {\n                    var j = false, m = function () {\n                        if (j) {\n                            for (var h in q)q[h].hide();\n                            g.css(\"pointer-events\",\n                                \"\");\n                            d.controls.css(\"pointer-events\", \"\");\n                            d.media.removeEventListener(\"click\", d.clickToPlayPauseCallback);\n                            j = false\n                        }\n                    }, q = {};\n                    b = [\"top\", \"left\", \"right\", \"bottom\"];\n                    var p, t = function () {\n                        var h = g.offset().left - d.container.offset().left, l = g.offset().top - d.container.offset().top, r = g.outerWidth(true), n = g.outerHeight(true), o = d.container.width(), s = d.container.height();\n                        for (p in q)q[p].css({position: \"absolute\", top: 0, left: 0});\n                        q.top.width(o).height(l);\n                        q.left.width(h).height(n).css({top: l});\n                        q.right.width(o - h - r).height(n).css({top: l,\n                            left: h + r});\n                        q.bottom.width(o).height(s - n - l).css({top: l + n})\n                    };\n                    d.globalBind(\"resize\", function () {\n                        t()\n                    });\n                    p = 0;\n                    for (c = b.length; p < c; p++)q[b[p]] = f('<div class=\"mejs-fullscreen-hover\" />').appendTo(d.container).mouseover(m).hide();\n                    g.on(\"mouseover\", function () {\n                        if (!d.isFullScreen) {\n                            var h = g.offset(), l = a.container.offset();\n                            e.positionFullscreenButton(h.left - l.left, h.top - l.top, false);\n                            g.css(\"pointer-events\", \"none\");\n                            d.controls.css(\"pointer-events\", \"none\");\n                            d.media.addEventListener(\"click\", d.clickToPlayPauseCallback);\n                            for (p in q)q[p].show();\n                            t();\n                            j = true\n                        }\n                    });\n                    e.addEventListener(\"fullscreenchange\", function () {\n                        d.isFullScreen = !d.isFullScreen;\n                        d.isFullScreen ? d.media.removeEventListener(\"click\", d.clickToPlayPauseCallback) : d.media.addEventListener(\"click\", d.clickToPlayPauseCallback);\n                        m()\n                    });\n                    d.globalBind(\"mousemove\", function (h) {\n                        if (j) {\n                            var l = g.offset();\n                            if (h.pageY < l.top || h.pageY > l.top + g.outerHeight(true) || h.pageX < l.left || h.pageX > l.left + g.outerWidth(true)) {\n                                g.css(\"pointer-events\", \"\");\n                                d.controls.css(\"pointer-events\", \"\");\n                                j = false\n                            }\n                        }\n                    })\n                } else g.on(\"mouseover\",\n                    function () {\n                        if (k !== null) {\n                            clearTimeout(k);\n                            delete k\n                        }\n                        var h = g.offset(), l = a.container.offset();\n                        e.positionFullscreenButton(h.left - l.left, h.top - l.top, true)\n                    }).on(\"mouseout\", function () {\n                        if (k !== null) {\n                            clearTimeout(k);\n                            delete k\n                        }\n                        k = setTimeout(function () {\n                            e.hideFullscreenButton()\n                        }, 1500)\n                    })\n            }\n            a.fullscreenBtn = g;\n            d.globalBind(\"keydown\", function (h) {\n                if ((mejs.MediaFeatures.hasTrueNativeFullScreen && mejs.MediaFeatures.isFullScreen() || d.isFullScreen) && h.keyCode == 27)a.exitFullScreen()\n            })\n        }\n    }, cleanfullscreen: function (a) {\n        a.exitFullScreen()\n    },\n        containerSizeTimeout: null, enterFullScreen: function () {\n            var a = this;\n            if (!(a.media.pluginType !== \"native\" && (mejs.MediaFeatures.isFirefox || a.options.usePluginFullScreen))) {\n                f(document.documentElement).addClass(\"mejs-fullscreen\");\n                normalHeight = a.container.height();\n                normalWidth = a.container.width();\n                if (a.media.pluginType === \"native\")if (mejs.MediaFeatures.hasTrueNativeFullScreen) {\n                    mejs.MediaFeatures.requestFullScreen(a.container[0]);\n                    a.isInIframe && setTimeout(function c() {\n                        if (a.isNativeFullScreen)f(window).width() !==\n                            screen.width ? a.exitFullScreen() : setTimeout(c, 500)\n                    }, 500)\n                } else if (mejs.MediaFeatures.hasSemiNativeFullScreen) {\n                    a.media.webkitEnterFullscreen();\n                    return\n                }\n                if (a.isInIframe) {\n                    var b = a.options.newWindowCallback(this);\n                    if (b !== \"\")if (mejs.MediaFeatures.hasTrueNativeFullScreen)setTimeout(function () {\n                        if (!a.isNativeFullScreen) {\n                            a.pause();\n                            window.open(b, a.id, \"top=0,left=0,width=\" + screen.availWidth + \",height=\" + screen.availHeight + \",resizable=yes,scrollbars=no,status=no,toolbar=no\")\n                        }\n                    }, 250); else {\n                        a.pause();\n                        window.open(b, a.id,\n                            \"top=0,left=0,width=\" + screen.availWidth + \",height=\" + screen.availHeight + \",resizable=yes,scrollbars=no,status=no,toolbar=no\");\n                        return\n                    }\n                }\n                a.container.addClass(\"mejs-container-fullscreen\").width(\"100%\").height(\"100%\");\n                a.containerSizeTimeout = setTimeout(function () {\n                    a.container.css({width: \"100%\", height: \"100%\"});\n                    a.setControlsSize()\n                }, 500);\n                if (a.media.pluginType === \"native\")a.$media.width(\"100%\").height(\"100%\"); else {\n                    a.container.find(\".mejs-shim\").width(\"100%\").height(\"100%\");\n                    a.media.setVideoSize(f(window).width(),\n                        f(window).height())\n                }\n                a.layers.children(\"div\").width(\"100%\").height(\"100%\");\n                a.fullscreenBtn && a.fullscreenBtn.removeClass(\"mejs-fullscreen\").addClass(\"mejs-unfullscreen\");\n                a.setControlsSize();\n                a.isFullScreen = true\n            }\n        }, exitFullScreen: function () {\n            clearTimeout(this.containerSizeTimeout);\n            if (this.media.pluginType !== \"native\" && mejs.MediaFeatures.isFirefox)this.media.setFullscreen(false); else {\n                if (mejs.MediaFeatures.hasTrueNativeFullScreen && (mejs.MediaFeatures.isFullScreen() || this.isFullScreen))mejs.MediaFeatures.cancelFullScreen();\n                f(document.documentElement).removeClass(\"mejs-fullscreen\");\n                this.container.removeClass(\"mejs-container-fullscreen\").width(normalWidth).height(normalHeight);\n                if (this.media.pluginType === \"native\")this.$media.width(normalWidth).height(normalHeight); else {\n                    this.container.find(\".mejs-shim\").width(normalWidth).height(normalHeight);\n                    this.media.setVideoSize(normalWidth, normalHeight)\n                }\n                this.layers.children(\"div\").width(normalWidth).height(normalHeight);\n                this.fullscreenBtn.removeClass(\"mejs-unfullscreen\").addClass(\"mejs-fullscreen\");\n                this.setControlsSize();\n                this.isFullScreen = false\n            }\n        }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {startLanguage: \"\", tracksText: mejs.i18n.t(\"Captions/Subtitles\"), hideCaptionsButtonWhenEmpty: true, toggleCaptionsButtonWhenOnlyOne: false, slidesSelector: \"\"});\n    f.extend(MediaElementPlayer.prototype, {hasChapters: false, buildtracks: function (a, b, c, e) {\n        if (a.tracks.length != 0) {\n            var d;\n            if (this.domNode.textTracks)for (d = this.domNode.textTracks.length - 1; d >= 0; d--)this.domNode.textTracks[d].mode = \"hidden\";\n            a.chapters = f('<div class=\"mejs-chapters mejs-layer\"></div>').prependTo(c).hide();\n            a.captions =\n                f('<div class=\"mejs-captions-layer mejs-layer\"><div class=\"mejs-captions-position mejs-captions-position-hover\"><span class=\"mejs-captions-text\"></span></div></div>').prependTo(c).hide();\n            a.captionsText = a.captions.find(\".mejs-captions-text\");\n            a.captionsButton = f('<div class=\"mejs-button mejs-captions-button\"><button type=\"button\" aria-controls=\"' + this.id + '\" title=\"' + this.options.tracksText + '\" aria-label=\"' + this.options.tracksText + '\"></button><div class=\"mejs-captions-selector\"><ul><li><input type=\"radio\" name=\"' +\n                a.id + '_captions\" id=\"' + a.id + '_captions_none\" value=\"none\" checked=\"checked\" /><label for=\"' + a.id + '_captions_none\">' + mejs.i18n.t(\"None\") + \"</label></li></ul></div></div>\").appendTo(b);\n            for (d = b = 0; d < a.tracks.length; d++)a.tracks[d].kind == \"subtitles\" && b++;\n            this.options.toggleCaptionsButtonWhenOnlyOne && b == 1 ? a.captionsButton.on(\"click\", function () {\n                a.setTrack(a.selectedTrack == null ? a.tracks[0].srclang : \"none\")\n            }) : a.captionsButton.hover(function () {\n                    f(this).find(\".mejs-captions-selector\").css(\"visibility\", \"visible\")\n                },\n                function () {\n                    f(this).find(\".mejs-captions-selector\").css(\"visibility\", \"hidden\")\n                }).on(\"click\", \"input[type=radio]\", function () {\n                    lang = this.value;\n                    a.setTrack(lang)\n                });\n            a.options.alwaysShowControls ? a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\") : a.container.bind(\"controlsshown\",function () {\n                a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\")\n            }).bind(\"controlshidden\", function () {\n                e.paused || a.container.find(\".mejs-captions-position\").removeClass(\"mejs-captions-position-hover\")\n            });\n            a.trackToLoad = -1;\n            a.selectedTrack = null;\n            a.isLoadingTrack = false;\n            for (d = 0; d < a.tracks.length; d++)a.tracks[d].kind == \"subtitles\" && a.addTrackButton(a.tracks[d].srclang, a.tracks[d].label);\n            a.loadNextTrack();\n            e.addEventListener(\"timeupdate\", function () {\n                a.displayCaptions()\n            }, false);\n            if (a.options.slidesSelector != \"\") {\n                a.slidesContainer = f(a.options.slidesSelector);\n                e.addEventListener(\"timeupdate\", function () {\n                    a.displaySlides()\n                }, false)\n            }\n            e.addEventListener(\"loadedmetadata\", function () {\n                a.displayChapters()\n            }, false);\n            a.container.hover(function () {\n                if (a.hasChapters) {\n                    a.chapters.css(\"visibility\",\n                        \"visible\");\n                    a.chapters.fadeIn(200).height(a.chapters.find(\".mejs-chapter\").outerHeight())\n                }\n            }, function () {\n                a.hasChapters && !e.paused && a.chapters.fadeOut(200, function () {\n                    f(this).css(\"visibility\", \"hidden\");\n                    f(this).css(\"display\", \"block\")\n                })\n            });\n            a.node.getAttribute(\"autoplay\") !== null && a.chapters.css(\"visibility\", \"hidden\")\n        }\n    }, setTrack: function (a) {\n        var b;\n        if (a == \"none\") {\n            this.selectedTrack = null;\n            this.captionsButton.removeClass(\"mejs-captions-enabled\")\n        } else for (b = 0; b < this.tracks.length; b++)if (this.tracks[b].srclang == a) {\n            this.selectedTrack ==\n                null && this.captionsButton.addClass(\"mejs-captions-enabled\");\n            this.selectedTrack = this.tracks[b];\n            this.captions.attr(\"lang\", this.selectedTrack.srclang);\n            this.displayCaptions();\n            break\n        }\n    }, loadNextTrack: function () {\n        this.trackToLoad++;\n        if (this.trackToLoad < this.tracks.length) {\n            this.isLoadingTrack = true;\n            this.loadTrack(this.trackToLoad)\n        } else {\n            this.isLoadingTrack = false;\n            this.checkForTracks()\n        }\n    }, loadTrack: function (a) {\n        var b = this, c = b.tracks[a];\n        f.ajax({url: c.src, dataType: \"text\", success: function (e) {\n            c.entries = typeof e == \"string\" &&\n                /<tt\\s+xml/ig.exec(e) ? mejs.TrackFormatParser.dfxp.parse(e) : mejs.TrackFormatParser.webvvt.parse(e);\n            c.isLoaded = true;\n            b.enableTrackButton(c.srclang, c.label);\n            b.loadNextTrack();\n            c.kind == \"chapters\" && b.media.addEventListener(\"play\", function () {\n                b.media.duration > 0 && b.displayChapters(c)\n            }, false);\n            c.kind == \"slides\" && b.setupSlides(c)\n        }, error: function () {\n            b.loadNextTrack()\n        }})\n    }, enableTrackButton: function (a, b) {\n        if (b === \"\")b = mejs.language.codes[a] || a;\n        this.captionsButton.find(\"input[value=\" + a + \"]\").prop(\"disabled\", false).siblings(\"label\").html(b);\n        this.options.startLanguage == a && f(\"#\" + this.id + \"_captions_\" + a).click();\n        this.adjustLanguageBox()\n    }, addTrackButton: function (a, b) {\n        if (b === \"\")b = mejs.language.codes[a] || a;\n        this.captionsButton.find(\"ul\").append(f('<li><input type=\"radio\" name=\"' + this.id + '_captions\" id=\"' + this.id + \"_captions_\" + a + '\" value=\"' + a + '\" disabled=\"disabled\" /><label for=\"' + this.id + \"_captions_\" + a + '\">' + b + \" (loading)</label></li>\"));\n        this.adjustLanguageBox();\n        this.container.find(\".mejs-captions-translations option[value=\" + a + \"]\").remove()\n    },\n        adjustLanguageBox: function () {\n            this.captionsButton.find(\".mejs-captions-selector\").height(this.captionsButton.find(\".mejs-captions-selector ul\").outerHeight(true) + this.captionsButton.find(\".mejs-captions-translations\").outerHeight(true))\n        }, checkForTracks: function () {\n            var a = false;\n            if (this.options.hideCaptionsButtonWhenEmpty) {\n                for (i = 0; i < this.tracks.length; i++)if (this.tracks[i].kind == \"subtitles\") {\n                    a = true;\n                    break\n                }\n                if (!a) {\n                    this.captionsButton.hide();\n                    this.setControlsSize()\n                }\n            }\n        }, displayCaptions: function () {\n            if (typeof this.tracks !=\n                \"undefined\") {\n                var a, b = this.selectedTrack;\n                if (b != null && b.isLoaded)for (a = 0; a < b.entries.times.length; a++)if (this.media.currentTime >= b.entries.times[a].start && this.media.currentTime <= b.entries.times[a].stop) {\n                    this.captionsText.html(b.entries.text[a]);\n                    this.captions.show().height(0);\n                    return\n                }\n                this.captions.hide()\n            }\n        }, setupSlides: function (a) {\n            this.slides = a;\n            this.slides.entries.imgs = [this.slides.entries.text.length];\n            this.showSlide(0)\n        }, showSlide: function (a) {\n            if (!(typeof this.tracks == \"undefined\" || typeof this.slidesContainer ==\n                \"undefined\")) {\n                var b = this, c = b.slides.entries.text[a], e = b.slides.entries.imgs[a];\n                if (typeof e == \"undefined\" || typeof e.fadeIn == \"undefined\")b.slides.entries.imgs[a] = e = f('<img src=\"' + c + '\">').on(\"load\", function () {\n                    e.appendTo(b.slidesContainer).hide().fadeIn().siblings(\":visible\").fadeOut()\n                }); else!e.is(\":visible\") && !e.is(\":animated\") && e.fadeIn().siblings(\":visible\").fadeOut()\n            }\n        }, displaySlides: function () {\n            if (typeof this.slides != \"undefined\") {\n                var a = this.slides, b;\n                for (b = 0; b < a.entries.times.length; b++)if (this.media.currentTime >=\n                    a.entries.times[b].start && this.media.currentTime <= a.entries.times[b].stop) {\n                    this.showSlide(b);\n                    break\n                }\n            }\n        }, displayChapters: function () {\n            var a;\n            for (a = 0; a < this.tracks.length; a++)if (this.tracks[a].kind == \"chapters\" && this.tracks[a].isLoaded) {\n                this.drawChapters(this.tracks[a]);\n                this.hasChapters = true;\n                break\n            }\n        }, drawChapters: function (a) {\n            var b = this, c, e, d = e = 0;\n            b.chapters.empty();\n            for (c = 0; c < a.entries.times.length; c++) {\n                e = a.entries.times[c].stop - a.entries.times[c].start;\n                e = Math.floor(e / b.media.duration * 100);\n                if (e + d > 100 || c == a.entries.times.length -\n                    1 && e + d < 100)e = 100 - d;\n                b.chapters.append(f('<div class=\"mejs-chapter\" rel=\"' + a.entries.times[c].start + '\" style=\"left: ' + d.toString() + \"%;width: \" + e.toString() + '%;\"><div class=\"mejs-chapter-block' + (c == a.entries.times.length - 1 ? \" mejs-chapter-block-last\" : \"\") + '\"><span class=\"ch-title\">' + a.entries.text[c] + '</span><span class=\"ch-time\">' + mejs.Utility.secondsToTimeCode(a.entries.times[c].start) + \"&ndash;\" + mejs.Utility.secondsToTimeCode(a.entries.times[c].stop) + \"</span></div></div>\"));\n                d += e\n            }\n            b.chapters.find(\"div.mejs-chapter\").click(function () {\n                b.media.setCurrentTime(parseFloat(f(this).attr(\"rel\")));\n                b.media.paused && b.media.play()\n            });\n            b.chapters.show()\n        }});\n    mejs.language = {codes: {af: \"Afrikaans\", sq: \"Albanian\", ar: \"Arabic\", be: \"Belarusian\", bg: \"Bulgarian\", ca: \"Catalan\", zh: \"Chinese\", \"zh-cn\": \"Chinese Simplified\", \"zh-tw\": \"Chinese Traditional\", hr: \"Croatian\", cs: \"Czech\", da: \"Danish\", nl: \"Dutch\", en: \"English\", et: \"Estonian\", tl: \"Filipino\", fi: \"Finnish\", fr: \"French\", gl: \"Galician\", de: \"German\", el: \"Greek\", ht: \"Haitian Creole\", iw: \"Hebrew\", hi: \"Hindi\", hu: \"Hungarian\", is: \"Icelandic\", id: \"Indonesian\", ga: \"Irish\", it: \"Italian\", ja: \"Japanese\",\n        ko: \"Korean\", lv: \"Latvian\", lt: \"Lithuanian\", mk: \"Macedonian\", ms: \"Malay\", mt: \"Maltese\", no: \"Norwegian\", fa: \"Persian\", pl: \"Polish\", pt: \"Portuguese\", ro: \"Romanian\", ru: \"Russian\", sr: \"Serbian\", sk: \"Slovak\", sl: \"Slovenian\", es: \"Spanish\", sw: \"Swahili\", sv: \"Swedish\", tl: \"Tagalog\", th: \"Thai\", tr: \"Turkish\", uk: \"Ukrainian\", vi: \"Vietnamese\", cy: \"Welsh\", yi: \"Yiddish\"}};\n    mejs.TrackFormatParser = {webvvt: {pattern_identifier: /^([a-zA-z]+-)?[0-9]+$/, pattern_timecode: /^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,\n        parse: function (a) {\n            var b = 0;\n            a = mejs.TrackFormatParser.split2(a, /\\r?\\n/);\n            for (var c = {text: [], times: []}, e, d; b < a.length; b++)if (this.pattern_identifier.exec(a[b])) {\n                b++;\n                if ((e = this.pattern_timecode.exec(a[b])) && b < a.length) {\n                    b++;\n                    d = a[b];\n                    for (b++; a[b] !== \"\" && b < a.length;) {\n                        d = d + \"\\n\" + a[b];\n                        b++\n                    }\n                    d = f.trim(d).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig, \"<a href='$1' target='_blank'>$1</a>\");\n                    c.text.push(d);\n                    c.times.push({start: mejs.Utility.convertSMPTEtoSeconds(e[1]) == 0 ? 0.2 : mejs.Utility.convertSMPTEtoSeconds(e[1]),\n                        stop: mejs.Utility.convertSMPTEtoSeconds(e[3]), settings: e[5]})\n                }\n            }\n            return c\n        }}, dfxp: {parse: function (a) {\n        a = f(a).filter(\"tt\");\n        var b = 0;\n        b = a.children(\"div\").eq(0);\n        var c = b.find(\"p\");\n        b = a.find(\"#\" + b.attr(\"style\"));\n        var e, d;\n        a = {text: [], times: []};\n        if (b.length) {\n            d = b.removeAttr(\"id\").get(0).attributes;\n            if (d.length) {\n                e = {};\n                for (b = 0; b < d.length; b++)e[d[b].name.split(\":\")[1]] = d[b].value\n            }\n        }\n        for (b = 0; b < c.length; b++) {\n            var g;\n            d = {start: null, stop: null, style: null};\n            if (c.eq(b).attr(\"begin\"))d.start = mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"begin\"));\n            if (!d.start && c.eq(b - 1).attr(\"end\"))d.start = mejs.Utility.convertSMPTEtoSeconds(c.eq(b - 1).attr(\"end\"));\n            if (c.eq(b).attr(\"end\"))d.stop = mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"end\"));\n            if (!d.stop && c.eq(b + 1).attr(\"begin\"))d.stop = mejs.Utility.convertSMPTEtoSeconds(c.eq(b + 1).attr(\"begin\"));\n            if (e) {\n                g = \"\";\n                for (var k in e)g += k + \":\" + e[k] + \";\"\n            }\n            if (g)d.style = g;\n            if (d.start == 0)d.start = 0.2;\n            a.times.push(d);\n            d = f.trim(c.eq(b).html()).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\n                \"<a href='$1' target='_blank'>$1</a>\");\n            a.text.push(d);\n            if (a.times.start == 0)a.times.start = 2\n        }\n        return a\n    }}, split2: function (a, b) {\n        return a.split(b)\n    }};\n    if (\"x\\n\\ny\".split(/\\n/gi).length != 3)mejs.TrackFormatParser.split2 = function (a, b) {\n        var c = [], e = \"\", d;\n        for (d = 0; d < a.length; d++) {\n            e += a.substring(d, d + 1);\n            if (b.test(e)) {\n                c.push(e.replace(b, \"\"));\n                e = \"\"\n            }\n        }\n        c.push(e);\n        return c\n    }\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {contextMenuItems: [\n        {render: function (a) {\n            if (typeof a.enterFullScreen == \"undefined\")return null;\n            return a.isFullScreen ? mejs.i18n.t(\"Turn off Fullscreen\") : mejs.i18n.t(\"Go Fullscreen\")\n        }, click: function (a) {\n            a.isFullScreen ? a.exitFullScreen() : a.enterFullScreen()\n        }},\n        {render: function (a) {\n            return a.media.muted ? mejs.i18n.t(\"Unmute\") : mejs.i18n.t(\"Mute\")\n        }, click: function (a) {\n            a.media.muted ? a.setMuted(false) : a.setMuted(true)\n        }},\n        {isSeparator: true},\n        {render: function () {\n            return mejs.i18n.t(\"Download Video\")\n        },\n            click: function (a) {\n                window.location.href = a.media.currentSrc\n            }}\n    ]});\n    f.extend(MediaElementPlayer.prototype, {buildcontextmenu: function (a) {\n        a.contextMenu = f('<div class=\"mejs-contextmenu\"></div>').appendTo(f(\"body\")).hide();\n        a.container.bind(\"contextmenu\", function (b) {\n            if (a.isContextMenuEnabled) {\n                b.preventDefault();\n                a.renderContextMenu(b.clientX - 1, b.clientY - 1);\n                return false\n            }\n        });\n        a.container.bind(\"click\", function () {\n            a.contextMenu.hide()\n        });\n        a.contextMenu.bind(\"mouseleave\", function () {\n            a.startContextMenuTimer()\n        })\n    }, cleancontextmenu: function (a) {\n        a.contextMenu.remove()\n    },\n        isContextMenuEnabled: true, enableContextMenu: function () {\n            this.isContextMenuEnabled = true\n        }, disableContextMenu: function () {\n            this.isContextMenuEnabled = false\n        }, contextMenuTimeout: null, startContextMenuTimer: function () {\n            var a = this;\n            a.killContextMenuTimer();\n            a.contextMenuTimer = setTimeout(function () {\n                a.hideContextMenu();\n                a.killContextMenuTimer()\n            }, 750)\n        }, killContextMenuTimer: function () {\n            var a = this.contextMenuTimer;\n            if (a != null) {\n                clearTimeout(a);\n                delete a\n            }\n        }, hideContextMenu: function () {\n            this.contextMenu.hide()\n        }, renderContextMenu: function (a, b) {\n            for (var c = this, e = \"\", d = c.options.contextMenuItems, g = 0, k = d.length; g < k; g++)if (d[g].isSeparator)e += '<div class=\"mejs-contextmenu-separator\"></div>'; else {\n                var j = d[g].render(c);\n                if (j != null)e += '<div class=\"mejs-contextmenu-item\" data-itemindex=\"' + g + '\" id=\"element-' + Math.random() * 1E6 + '\">' + j + \"</div>\"\n            }\n            c.contextMenu.empty().append(f(e)).css({top: b, left: a}).show();\n            c.contextMenu.find(\".mejs-contextmenu-item\").each(function () {\n                var m = f(this), q = parseInt(m.data(\"itemindex\"), 10), p = c.options.contextMenuItems[q];\n                typeof p.show !=\n                    \"undefined\" && p.show(m, c);\n                m.click(function () {\n                    typeof p.click != \"undefined\" && p.click(c);\n                    c.contextMenu.hide()\n                })\n            });\n            setTimeout(function () {\n                c.killControlsTimer(\"rev3\")\n            }, 100)\n        }})\n})(mejs.$);\n(function (f) {\n    f.extend(mejs.MepDefaults, {postrollCloseText: mejs.i18n.t(\"Close\")});\n    f.extend(MediaElementPlayer.prototype, {buildpostroll: function (a, b, c) {\n        var e = this.container.find('link[rel=\"postroll\"]').attr(\"href\");\n        if (typeof e !== \"undefined\") {\n            a.postroll = f('<div class=\"mejs-postroll-layer mejs-layer\"><a class=\"mejs-postroll-close\" onclick=\"$(this).parent().hide();return false;\">' + this.options.postrollCloseText + '</a><div class=\"mejs-postroll-layer-content\"></div></div>').prependTo(c).hide();\n            this.media.addEventListener(\"ended\",\n                function () {\n                    f.ajax({dataType: \"html\", url: e, success: function (d) {\n                        c.find(\".mejs-postroll-layer-content\").html(d)\n                    }});\n                    a.postroll.show()\n                }, false)\n        }\n    }})\n})(mejs.$);\n\n\ndefine(\"components/adapt-embeddedLink/js/mediaelement-and-player.min\", function(){});\n\n",
    "/**\n * Shows a element as a modal dialog\n * \n * Usage: $('#selector').modal({settings:value});\n *\n * Options:\n * - closeButton string          Css selector to be used to close the dialog. Defaults to '.close'\n * - escClose    boolean         Whether the dialog should be closed when pressing the ESC key. Defaults to true.\n * - onCloseFn   function        Callback function when the dialog has been closed\n * - onOpenFn    function        Callback function when the dialog has been opened\n * - modal       boolean         Whether or not this is a modal dialog. Defaults to true.\n * - effect      string          The effect to use when opening a modal: scale, slide-right, slide-right, slide-bottom, newspaper, fall, slide-fall, sticky-top, flip-horizontal, flip-vertical, sign, super-scaled, just-me, slit\n * - title       string          The title of the dialog. Defaults to an empty string\n * - callback    function        Callback function when the options.doneButton has been clicked. Form fields will be supplied as data argument, as well as the modal itself. Callback returns true when the modal should be closed, null or false when it shoudl stay open.\n */\n$.fn.modal = function(options) {\n    var defaults = {\n      closeButton : '.close,.cancel',\n      escClose    : true,\n      onCloseFn   : null,\n      onOpenFn    : null,\n      modal       : true,\n      immutable   : false,\n      effect      : null,\n      title       : '',\n      callback    : null,\n      doneButton  : '.done,.ok'\n    };\n    options = $.extend(defaults, options);\n\n    return this.each(function() {\n      var o = options,\n      modal = o.immutable ? $(this) : decorate($(this), o);\n      o.id = createGUID(); // GUID for identifying modal & event handlers\n    \n      // immutable\n      if (o.immutable){\n       $(this).addClass(\"immutable\"); \n      }\n\n      // show overlay\n      if ( $('.modal-overlay').length < 1){\n        modal.parent().append($(\"<div class='modal-overlay'></div>\"));\n      }\n\n      // add close event handler to overlay\n      $(\".modal-overlay\").click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o);\n      });\n\n      // add close event handler to close buttons\n      $(o.closeButton).click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o)\n      });\n      \n      if (o.escClose){\n        // add close event handler to ESC key. Event is namespaced, so we can remove it after we've closed the modal\n        $(window).on('keydown.'+o.id, function(event) {\n            if (event.which === 27){\n                closeModal(modal, o);\n            }\n        });\n      };\n\n      $(o.doneButton, modal).on('click.callback', function(e){\n        e.preventDefault();\n        if (typeof o.callback === \"function\"){\n          var data = {};\n          $(\":input\", modal ).each(function(i, element){\n            data[$(element).attr('name')] = $(element).val();\n          });\n          var result = o.callback( data, modal );\n          if (result === true){\n            closeModal(modal, o);\n          }\n        }\n      });\n\n      if (typeof o.effect === 'string'){\n        modal.addClass(o.effect, modal);\n      }\n\n      // start with a delay to allow the effect to kick in\n      setTimeout(function(){modal.addClass('modal-show');}, 150);\n      \n      // initialize\n      if (typeof o.onOpenFn === 'function'){\n        o.onOpenFn(modal);\n      }\n\n    });\n\n    /**\n     * Decorate the modal provided. When only supplying the modal body, decorate it with additional modal elements (content, head, titile, close button)\n     *\n     * @param jquery the modal element\n     * @param object options the modal options\n     */\n    function decorate(modal, options){\n      if (modal.find('.body').length === 0){\n        var body =  $('<div class=\"body\"></div>'), footer, content;\n\n        modal.children().each(function(i,e){\n          if ($(e).is(\".footer\")){\n            footer = $(e);\n          }else{\n            body.append(e);\n          }\n        });\n\n        content = $('<div class=\"content\"></div>');\n        content.append(\n            '<div class=\"head\">\\\n               <a class=\"close\" href=\"#\">&times;</a>\\\n             </div>');\n        content.append(body);\n        content.append(footer);\n        modal.append(content);\n\n        // add the title from options\n        //content.find('.title').html(options.title);\n      }\n      return modal;\n    }\n\n    function createGUID(){\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        });\n      }\n    \n    /*\n     * Close the model\n     */\n    function closeModal(modal, options) {\n      modal.removeClass('modal-show');\n\n      //Remove the existing overlay on close click\n      $('.modal-overlay').remove();\n\n      //Pause all the videos\n      var videoPause=$(\"video\");\n      for(var i=0;i<videoPause.length;i++){\n        videoPause[i].pause();\n      }\n\n        $(\".embeddedLink-lightBox-iframe-parent\").css({'overflow':'hidden' , '-webkit-overflow-scrolling':'none'})\n      // clean up effect\n      if (typeof options.effect === 'string'){\n        setTimeout(function(){\n          modal.removeClass(options.effect);\n        }, 500);\n      }\n\n      if (typeof options.onCloseFn === 'function'){\n        options.onCloseFn(modal);\n      }\n      \n      // immutable\n      if (options.immutable){\n       $(modal).removeClass(\"immutable\"); \n      }\n\n      // remove event handlers\n      $(window).off('keydown.'+options.id);\n\n      if (typeof options.callback === \"function\"){\n        $(options.doneButton, modal).off('click.callback');\n      }\n    }\n\n  };\ndefine(\"components/adapt-embeddedLink/js/jquery.jsmodal\", function(){});\n\n",
    "/*\n * adapt-embeddedLink\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-embeddedLink/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-embeddedLink/js/adapt-embeddedLink',['require','coreViews/componentView','coreJS/adapt','components/adapt-embeddedLink/js/mediaelement-and-player.min','components/adapt-embeddedLink/js/jquery.jsmodal'],function(require) {\n\n    var ComponentView = require(\"coreViews/componentView\");\n    var Adapt = require(\"coreJS/adapt\");\n    var mep = require('components/adapt-embeddedLink/js/mediaelement-and-player.min');\n    var lightBox = require('components/adapt-embeddedLink/js/jquery.jsmodal');\n\n    var EmbeddedLink = ComponentView.extend({\n\n        events: {\n            'click .embeddedLink-zoomin-button': 'onClickZoomInButton',\n            'click .embeddedLink-graphic-pin': 'onClickAudioButton',\n            'click .embeddedLink-image': 'onClickImage',\n            'click .back': 'onClickBack',\n            'click .next': 'onClickNext'\n        },\n\n        preRender: function() {\n            this.initialSetUp();\n        },\n\n        initialSetUp: function() {\n            this.widthChange = 0;\n            var videoExtensionsList = [\"mp4\", \"ogv\", \"ogg\"];\n            var imageExtensionsList = [\"jpg\", \"png\", \"jpeg\", \"svg\", \"gif\", \"bmp\"];\n            var extension = this.model.get(\"_source\").split(\".\")[1];\n\n            _.each(videoExtensionsList, function(videoExtension, index) {\n                if (extension == videoExtension) {\n                    this.model.set(\"_isVideo\", true);\n                }\n            }, this);\n            _.each(imageExtensionsList, function(imageExtension, index) {\n                if (extension == imageExtension) {\n                    this.model.set(\"_isImage\", true);\n                }\n            }, this);\n            if (this.model.get(\"_isVideo\") == undefined && this.model.get(\"_isImage\") == undefined) {\n                this.model.set(\"_isDocument\", true);\n            };\n\n            this.model.set('_hasPagination', this.model.get('_page').instructionSteps != undefined);\n        },\n\n        postRender: function() {\n\n            var instructionSteps = [];\n            if (this.model.get('_page').instructionSteps) {\n                instructionSteps = this.model.get('_page').instructionSteps;\n            } else if (this.model.get('_page').body) {\n                instructionSteps = [this.model.get('_page').body];\n            }\n\n            this.listenTo(Adapt, 'device:changed', this.resizeDevice, this);\n            this.widthChange = Adapt.device.screenWidth;\n            this.listenTo(Adapt, 'device:resize', function(e) {\n                if (this.widthChange != Adapt.device.screenWidth) {\n                    if (this.model.get('_hasPagination') != undefined && this.model.get('_hasPagination')) {\n                        this.settingForPagination(instructionSteps);\n                    }\n                }\n\n            }, this);\n\n            if(!this.model.get(\"_setContentCompletion\") || !(this.model.get('_isComplete'))){\n                this.$('.embeddedLink-zoomin-button').addClass('embeddedLink-zoomin-button-disable');\n            }\n\n            this.bindInviewEvents();\n            this.checkReadyStatus();\n            this.settingsForAudio();\n            this.resizeDevice();\n\n            if (this.model.get(\"_isDocument\") != undefined) {\n                this.$(\".page-body\").addClass(\"isDocument\");\n            }\n            if (instructionSteps.length == 0) {\n                this.$('.embeddedLink-description-container').hide();\n            }\n\n            if (this.model.get('_hasPagination') != undefined && this.model.get('_hasPagination')) {\n                this.settingForPagination(instructionSteps);\n            }\n        },\n\n        bindInviewEvents: function() {\n            if (!this.model.get('_setContentCompletion')) {\n                var self = this;\n                this.$('.embeddedLink-iframe-holder').find('iframe').load(function() {\n                    self.$('.embeddedLink-iframe-holder').find('iframe').on('completion:status', function(evt, complationStatus) {\n                        if (complationStatus) {\n                            self.checkCompletionStatus();\n                            this.$(\".embeddedLink-zoomin-button\").removeClass(\"embeddedLink-zoomin-button-disable\");\n                        }\n                    });\n                });\n\n            } else {\n                if (Adapt.device.screenSize != 'large') {\n                    this.$('.embeddedLink-iframe-holder').on('inview', _.bind(this.inviewMobile, this));\n                }\n                this.$('.embeddedLink-iframe-holder').on('inview', _.bind(this.inviewDesktop, this));\n            }\n        },\n\n        settingsForAudio: function() {\n            if ($('html').hasClass('ie8')) {\n                var audioObject = new MediaElementPlayer(this.$('audio')[0]);\n                this.model.set('_audioObjectForIE', audioObject);\n            }\n            this.$('.mejs-container').addClass('display-none');\n            this.$('audio').on('ended', _.bind(this.onAudioEnded, this));\n        },\n\n        checkReadyStatus: function() {\n\n            if (this.model.get(\"_isImage\")) {\n                this.$('.embeddedLink-image').imageready(_.bind(function() {\n                    this.setReadyStatus();\n                }, this));\n            } else if (this.model.get(\"_isVideo\")) {\n                if (this.model.get('_source') != \"\") {\n                    this.setReadyStatus();\n                }\n            } else {\n                if (Adapt.device.screenSize != 'large') {\n                    this.$('.embeddedLink-iframe-posterImage').imageready(_.bind(function() {\n                        this.setReadyStatus();\n                    }, this));\n                } else {\n                    this.$('.embeddedLink-iframe').ready(_.bind(function() {\n                        this.setReadyStatus();\n                    }, this));\n                }\n            }\n        },\n\n        inviewDesktop: function(event, visible, visiblePartX, visiblePartY) {\n            var addedMute = this.$('.embeddedLink-graphic-pin-icon').hasClass('icon-sound-mute');\n            this.stopCurrentAudio();\n            this.stopAudio();\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n                if (!addedMute) {\n                    var audioElement;\n                    if ($('html').hasClass('ie8')) {\n                        audioElement = this.model.get('_audioObjectForIE');\n                    } else {\n                        audioElement = this.$(\"audio\")[0];\n                    }\n                }\n                this.playAudioForElement(audioElement);\n                if (Adapt.device.screenSize == 'large') {\n                    if (this.model.get(\"_setContentCompletion\") == true) {\n                        if (this._isVisibleTop && this._isVisibleBottom) {\n                            if (this.model.get(\"_isImage\")) {\n                                this.checkCompletionStatus();\n                            }\n                            if (this.model.get(\"_isDocument\")) {\n                                this.checkCompletionStatus();\n                            }\n                            if (this.model.get(\"_isVideo\")) {\n                                var self = this;\n                                this.$(\"video\")[0].addEventListener('ended', function(e) {\n                                    self.checkCompletionStatus();\n                                });\n                            }\n                        }\n                    }\n                }\n            } else {\n                this.stopCurrentAudio();\n                this.stopAudio();\n            }\n        },\n\n        inviewMobile: function(event, visible) {\n\n            if (visible) {\n                this.checkCompletionStatus();\n            }\n        },\n\n        settingForPagination: function(instructionSteps) {\n            var $pagebody = this.$(\".page-body\");\n            var i = 0;\n            this.initialPaginationSetting($pagebody);\n\n            for (i = 1; i <= instructionSteps.length; ++i) {\n                this.createDiv(i);\n\n                this.$('.pageText-' + i).append(instructionSteps[i - 1]);\n            }\n\n            if (i == 0) {\n                this.$(\".embeddedLink-pagination-controls\").hide();\n            } else {\n                this.$(\".embeddedLink-pagination-controls\").show();\n            }\n            var totalLength = this.$(\".page-body\").length;\n            this.$(\".total\").html(totalLength);\n            this.$(\".paginated-div\").hide();\n            this.widthChange = Adapt.device.screenWidth;\n\n            if (this.$(\".icon-shrink\").hasClass(\"icon\")) {\n                this.$(\".page-body\").show();\n                this.$(\".embeddedLink-pagination-controls\").hide();\n            }\n        },\n\n        initialPaginationSetting: function(pagebody) {\n            pagebody.html(\"\");\n            var length = pagebody.length;\n            $(pagebody[0]).show();\n            if (length > 1) {\n                for (var j = 1; j <= length; j++) {\n                    $(pagebody[j]).remove();\n                }\n            }\n            this.$(\".current\").html(\"1\");\n            this.$(\".total\").html(\"1\");\n            this.$(\".back\").hide();\n            this.$(\".next\").show();\n        },\n\n        createDiv: function(count) {\n            if (this.$(\".pageText-\" + count).html() == undefined) {\n                var div = $(\"<div class='paginated-div isDocument page-body pageText-\" + count + \"'></div>\")\n                this.$(\".embeddedLink-description\").append(div);\n            }\n        },\n\n        resizeDevice: function() {\n            var posterSrc = this.model.get(\"_posterImage\");\n            var source = this.model.get(\"_source\");\n\n            if (Adapt.device.screenSize != 'large') {\n                this.settingsForMobileDevice(posterSrc);\n                this.$('.embeddedLink-iframe-holder').on('inview', _.bind(this.inviewMobile, this));\n            } else {\n                this.settingsForDesktop(source);\n            }\n        },\n\n        settingsForMobileDevice: function(posterSrc) {\n\n            if (this.model.get(\"_isImage\")) {\n                this.$(\".embeddedLink-image\").attr('src', posterSrc);\n                this.$(\".embeddedLink-image\").css('cursor', 'default');\n                this.$(\".embeddedLink-description-container\").hide();\n            } else {\n                if (!this.model.get('_isVideo')) {\n                    this.$('.embeddedLink-iframe').hide();\n                    this.$('.embeddedLink-iframe-posterImage').show();\n                    this.$(\".embeddedLink-description-container\").hide();\n                }\n                this.$('.embeddedLink-zoomin-button').hide();\n            }\n        },\n\n        settingsForDesktop: function(source) {\n\n            if (this.model.get(\"_isImage\")) {\n                this.$(\".embeddedLink-image\").attr('src', source);\n                this.$(\".embeddedLink-image\").css('cursor', 'pointer');\n                this.$(\".embeddedLink-description-container\").show();\n            } else {\n                if (!this.model.get('_isVideo')) {\n                    this.$('.embeddedLink-iframe-posterImage').hide();\n                    this.$('.embeddedLink-iframe').show();\n                    this.$(\".embeddedLink-description-container\").show();\n                }\n                this.$('.embeddedLink-zoomin-button').show();\n            }\n        },\n\n        stopAudio: function() {\n            var audioObject = this.model.get('_audioObjectForIE');\n\n            if (audioObject) {\n                audioObject.setCurrentTime(0);\n                audioObject.pause();\n                this.model.set(\"_audioObjectForIE\", '');\n                this.$('.embeddedLink-graphic-pin-icon').addClass('icon-sound-mute');\n            }\n        },\n\n        stopCurrentAudio: function() {\n            var audioElement = this.model.get(\"_currentAudioElement\");\n\n            if (audioElement) {\n                if (!audioElement.paused && audioElement.pause) {\n                    audioElement.pause();\n                }\n                if (audioElement.currentTime != 0) {\n                    audioElement.currentTime = 0.0;\n                }\n                this.model.set(\"_currentAudioElement\", '');\n                this.$('.embeddedLink-graphic-pin-icon').addClass('icon-sound-mute');\n            }\n        },\n\n        playAudioForElement: function(audioElement) {\n\n            if (audioElement) {\n                if (!$('html').hasClass('ie8')) {\n                    this.stopCurrentAudio();\n                    this.model.set(\"_currentAudioElement\", audioElement);\n                }\n                if (audioElement.play) audioElement.play();\n            }\n        },\n\n        onAudioEnded: function(event) {\n\n            if ($('html').hasClass('ie8')) {\n                this.stopAudio();\n            } else {\n                this.model.get(\"_currentAudioElement\").currentTime = 0.0;\n                this.model.set(\"_currentAudioElement\", '');\n            }\n            this.$('.embeddedLink-graphic-pin-icon').addClass('icon-sound-mute');\n        },\n\n        onClickAudioButton: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n\n            var audioElement;\n            var isIE8 = $('html').hasClass('ie8');\n\n            if (isIE8) {\n                audioElement = this.model.get(\"_audioObjectForIE\");\n            } else {\n                audioElement = this.model.get(\"_currentAudioElement\");\n            }\n            if (audioElement == '' || typeof audioElement == \"undefined\") {\n                if (isIE8) {\n                    audioElement = new MediaElementPlayer(this.$('.embeddedLink-item-audio audio')[0]);\n                } else {\n                    audioElement = this.$('.embeddedLink-item-audio audio')[0];\n                }\n                this.playAudioForElement(audioElement);\n                this.$('.embeddedLink-graphic-pin-icon').removeClass('icon-sound-mute');\n            } else {\n                if (isIE8) {\n                    this.stopAudio();\n                } else {\n                    this.stopCurrentAudio();\n                }\n                this.$('.embeddedLink-graphic-pin-icon').addClass('icon-sound-mute');\n            }\n        },\n\n        onClickZoomInButton: function(event) {\n            event.preventDefault();\n            var browser = Adapt.device.browser;\n            var isLightBox = this.model.get(\"_isLightBox\");\n            var source = this.model.get(\"_source\");\n\n            if (this.model.get(\"_setContentCompletion\") && (this.model.get('_isComplete')) ||\n                    !this.model.get(\"_setContentCompletion\") && (this.model.get('_isComplete'))) {\n                if (browser == 'ipad') {\n                    this.$(\".embeddedLink-lightBox-iframe-parent\").css({\n                        'overflow': 'auto',\n                        '-webkit-overflow-scrolling': 'touch'\n                    });\n                }\n\n                this.videoSettingOnZoomIn();\n\n                this.lightBoxSettingOnZoomIn(isLightBox, source, event);\n\n                if (this.model.get(\"_isDocument\") != undefined && this.model.get(\"_isDocument\")) {\n                    this.documentSettingForZoomIn(event);\n                }\n           }\n        },\n\n        videoSettingOnZoomIn: function() {\n            //Pause all the videos on popout button clicked\n            var videoPause = this.$(\"video\");\n            for (var i = 0; i < videoPause.length; i++) {\n                videoPause[i].pause();\n            }\n        },\n\n        lightBoxSettingOnZoomIn: function(isLightBox, source, event) {\n            var $zoomInButtonRef = $(event.currentTarget);\n            var zoomIcon = $zoomInButtonRef.find('.icon');\n\n            if (!zoomIcon.hasClass('icon-shrink')) {\n                if (isLightBox) {\n                    this.$('.embeddedLink-lightBox-popup-container').modal();\n                    this.checkCompletionStatus();\n\n                } else {\n                    window.open(source, '_blank', 'width=1024,height=768,left=100,top=100');\n                    this.checkCompletionStatus();\n                }\n            }\n        },\n\n        documentSettingForZoomIn: function(event) {\n            var $zoomInButtonRef = $(event.currentTarget);\n            var zoomIcon = $zoomInButtonRef.find('.icon');\n\n            if (zoomIcon.hasClass('icon-expand')) {\n                zoomIcon.removeClass('icon-expand');\n                zoomIcon.addClass('icon-shrink');\n                this.$(\".embeddedLink-iframe\").hide();\n                this.$(\".paginated-div\").addClass(\"showAllText\");\n                this.$(\".pagination-controller-bar\").addClass(\"hidePagination\");\n                this.$(\".page-body\").show();\n                this.$(\".embeddedLink-pagination-controls\").hide();\n            } else {\n                zoomIcon.removeClass('icon-shrink');\n                zoomIcon.addClass('icon-expand');\n                var totalLength = this.$(\".page-body\").length;\n                this.$(\".pagination-controller-bar\").removeClass(\"hidePagination\");\n                this.$(\".embeddedLink-iframe\").show();\n                this.$(\".paginated-div\").removeClass(\"showAllText\");\n                this.$(\".paginated-div\").hide();\n                if (totalLength != 1) {\n                    this.$(\".embeddedLink-pagination-controls\").show();\n                }\n                this.$(\".total\").html(totalLength);\n                this.$(\".current\").html(\"1\");\n                this.$(\".back\").hide();\n                this.$(\".next\").show();\n            }\n        },\n\n        onClickImage: function(event) {\n            event.preventDefault();\n            if (Adapt.device.screenSize != 'large') return;\n\n            var imageSource = this.model.get(\"_imageSource\");\n            window.open(imageSource, '_blank', 'width=1024,height=768,left=100,top=100');\n            this.checkCompletionStatus();\n        },\n\n        onClickBack: function(event) {\n            event.preventDefault();\n            var $back = $(event.currentTarget);\n            var $currentPageNo = $back.parent().siblings(\".embeddedLink-popup-count\").find(\".current\");\n            var textNo = $currentPageNo.text();\n\n            this.$(\".pageText-\" + textNo).hide();\n            $currentPageNo.html(--textNo);\n            this.$(\".pageText-\" + textNo).show();\n            if (textNo == 1) {\n                $back.hide();\n            }\n            this.$(\".next\").show();\n        },\n\n        onClickNext: function(event) {\n            event.preventDefault();\n            var $next = $(event.currentTarget);\n            var $currentPageNo = $next.parent().siblings(\".embeddedLink-popup-count\").find(\".current\");\n            var textNo = $currentPageNo.text();\n\n            this.$(\".pageText-\" + textNo).hide();\n            $currentPageNo.html(++textNo);\n            this.$(\".pageText-\" + textNo).show();\n            this.$(\".back\").show();\n            var total = this.$(\".page-body\").length;\n\n            if (textNo == total) {\n                $next.hide();\n            }\n        },\n\n        checkCompletionStatus: function() {\n\n            if (!this.model.get('_isComplete')) {\n                this.setCompletionStatus();\n                this.$(\".embeddedLink-zoomin-button\").removeClass(\"embeddedLink-zoomin-button-disable\");\n            }\n        }\n\n    });\n\n    Adapt.register(\"embeddedLink\", EmbeddedLink);\n\n    return EmbeddedLink;\n\n});\n\n",
    "/*\n * adapt-focalpointGenerator\n */\ndefine('components/adapt-focalpointGenerator/js/adapt-focalpointGenerator',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n\n    var FocalpointGenerator = ComponentView.extend({\n\n        events: function() {\n\n            if (Modernizr.touch) {\n\n                return {\n                    'click .focalpointGenerator-controls': 'onNavigationClicked',\n                    'click .focalpointGenerator-button': 'openButtonGraphic',\n                    'click .focalpointGenerator-graphic-pin': 'openHighlightGraphic',\n                    'click .focalpointGenerator-strapline-title': 'openPopup',\n                    'click .focalpointGenerator-popup-close': 'closePopup',\n                    'click .focalpointGenerator-highlight-body': 'onClickDragItem',\n                    'touchstart .focalpointGenerator-highlight-body': 'onTouchStartItem'\n                }\n\n            } else {\n                return {\n                    'click .focalpointGenerator-controls': 'onNavigationClicked',\n                    'click .focalpointGenerator-button': 'openButtonGraphic',\n                    'click .focalpointGenerator-graphic-pin': 'openHighlightGraphic',\n                    'click .focalpointGenerator-strapline-title': 'openPopup',\n                    'click .focalpointGenerator-popup-close': 'closePopup',\n                    'click .focalpointGenerator-highlight-body': 'onClickDragItem',\n                    'mousedown .focalpointGenerator-highlight-body': 'onMouseDownDragItem'\n                }\n            }\n            \n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.listenTo(Adapt, 'device:resize', this.resizeControl, this);\n            this.listenTo(Adapt, 'notify:closed', this.closeNotify, this);\n            this.setDeviceSize();\n            // Checks to see if the focalpointGenerator should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.renderState();\n            this.setReadyStatus();\n            this.$('.focalpointGenerator-highlight').hide().removeClass('active');\n            _.defer(_.bind(function() {\n                this.setDeviceSize();\n                this.setupNarrative();\n            }, this));\n        },\n\n        setDeviceSize: function() {\n            if (Adapt.device.screenSize === 'large') {\n                this.$el.addClass('desktop').removeClass('mobile');\n                this.model.set('_isDesktop', true);\n                this.$('.focalpointGenerator-popup-done').css({\n                    'display': 'none'\n                });\n                this.$('.focalpointGenerator-button-container').css({\n                    'display': 'block'\n                });\n                var ImgConWidth = this.$('.focalpointGenerator-background-image').width();\n                var ImgConHeight = this.$('.focalpointGenerator-background-image').height();\n                this.$('.focalpointGenerator-item-graphic-inner img').css({\n                    'width': ImgConWidth + 'px',\n                    'max-width': ImgConWidth + 'px',\n                    'height': ImgConHeight + 'px'\n                });\n\n                var childIndex = 0;\n                for (var i = 0; i < this.model.get('_items').length; i++) {\n                    for (var j = 0; j < this.model.get('_items')[i]._graphic.length; j++) {\n                        var _itemTop = this.model.get('_items')[i]._graphic[j]._highlightTop;\n                        var _itemLeft = this.model.get('_items')[i]._graphic[j]._highlightLeft;\n                        var curItem = this.$('.focalpointGenerator-highlight').eq(i).find(this.$('.focalpointGenerator-item-graphic-inner img').eq(childIndex));\n                        childIndex++;\n                        curItem.css({\n                            'left': -(ImgConWidth * _itemLeft / 100) + 'px'\n                        });\n                        curItem.css({\n                            'top': -(ImgConHeight * _itemTop / 100) + 'px'\n                        });\n                    }\n                }\n\n\n                if (this.model.get(\"_layout\") !== 'full') {\n                    this.$('.focalpointGenerator-item-graphic-inner img').css({\n                        'width': '583px'\n                    });\n                    this.$('.focalpointGenerator-image-container').css({\n                        'width': '100%'\n                    })\n                    this.$('.focalpointGenerator-button-container').css({\n                        'width': '100%',\n                        'position': 'relative'\n                    })\n                    this.$('.focalpointGenerator-highlight').css({\n                        'width': 'inherit'\n                    })\n                    this.$('.focalpointGenerator-button-icon').css({\n                        'width': '44%',\n                        'float': 'left',\n                        'max-width': '290px'\n                    });\n                }\n\n            } else {\n                this.$el.addClass('mobile').removeClass('desktop').removeClass('half_view');\n                this.model.set('_isDesktop', false);\n                this.$('.focalpointGenerator-popup-done').css({\n                    'display': 'block'\n                });\n                this.$('.focalpointGenerator-highlight').hide().removeClass('active');\n                this.$('.highlight-shadow').fadeOut('fast');\n                this.$('.focalpointGenerator-button-icon').removeClass('selected');\n\n                if (this.model.get(\"_layout\") === 'full') {\n                    this.$('.focalpointGenerator-slide-container').css({\n                        'display': 'none'\n                    });\n                    this.$('.focalpointGenerator-button-container').css({\n                        'display': 'none'\n                    })\n                    this.$('.focalpointGenerator-highlight').hide().removeClass('active');\n                    this.$('.focalpointGenerator-strapline').css({\n                        'float': 'left'\n                    });\n                } else {\n                    this.$('.focalpointGenerator-slide-container').css({\n                        'display': 'none'\n                    });\n                    this.$('.focalpointGenerator-strapline').css({\n                        'display': 'none'\n                    });\n                    this.$('.focalpointGenerator-graphic-pin ').css({\n                        'display': 'none'\n                    });\n                    this.$('.focalpointGenerator-image-container').css({\n                        'width': '100%'\n                    })\n                    this.$('.focalpointGenerator-button-container').css({\n                        'width': '100%',\n                        'position': 'relative',\n                        'float': 'left'\n                    })\n                    this.$('.focalpointGenerator-highlight').css({\n                        'width': 'inherit'\n                    });\n                }\n\n            }\n\n            if (this.model.get(\"_layout\") !== 'full') {\n                //this.$('.focalpointGenerator-item-body-inner').css({'font-size':'16px'});\n            }\n\n        },\n\n        openButtonGraphic: function(event) {\n\n            event.preventDefault();\n\n            var currentHotSpot = $(event.currentTarget).data('id');\n            var curIndex = $(event.currentTarget).index();\n\n            this.$('.focalpointGenerator-button-icon').removeClass('selected');\n\n            this.setVisited(curIndex);\n\n\n            if (this.$('.' + currentHotSpot).hasClass('active')) {\n                this.$('.focalpointGenerator-highlight').hide().removeClass('active').removeClass('selected');;\n                this.$('.highlight-shadow').fadeOut('fast');\n            } else {\n                this.$('.focalpointGenerator-highlight').hide().removeClass('active');\n                this.$('.' + currentHotSpot).show().addClass('active');\n                this.$('.highlight-shadow').fadeIn('fast');\n                this.$('.focalpointGenerator-button-icon').eq(curIndex).addClass('selected');\n            }\n\n            //update _narrativegraphic\n            this.setStage(curIndex);\n            this.$('.focalpointGenerator-graphic-pin').removeClass('selected');\n            this.$('.focalpointGenerator-graphic-pin').eq(curIndex).addClass('selected');\n\n            this.alignTextbox();\n\n        },\n\n        // Used to check if the focalpointGenerator should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n                this.model.set({\n                    _stage: 0\n                });\n\n                _.each(this.model.get('_items'), function(item) {\n                    item.visited = false;\n                });\n            }\n        },\n\n        setupNarrative: function() {\n            _.bindAll(this, 'onTouchMove', 'onTouchEnd');\n            this.setDeviceSize();\n            this.model.set('_marginDir', 'left');\n            if (Adapt.config.get('_defaultDirection') == 'rtl') {\n                this.model.set('_marginDir', 'right');\n            }\n            this.model.set('_itemCount', this.model.get('_items').length);\n\n            this.model.set('_active', true);\n\n            if (this.model.get('_stage')) {\n                this.setStage(this.model.get('_stage'), true);\n            } else {\n                this.setStage(0, true);\n            }\n            this.calculateWidths();\n\n            if (Adapt.device.screenSize !== 'large' && !this.model.get('_wasHotgraphic')) {\n                this.replaceInstructions();\n            }\n        },\n\n        calculateWidths: function() {\n            var slideWidth = this.$('.focalpointGenerator-slide-container').width();\n            var slideCount = this.model.get('_itemCount');\n            var marginRight = this.$('.focalpointGenerator-slider-graphic').css('margin-right');\n            var extraMargin = marginRight === '' ? 0 : parseInt(marginRight);\n            var fullSlideWidth = (slideWidth + extraMargin) * slideCount;\n\n            this.$('.focalpointGenerator-slider-graphic').width(slideWidth);\n            this.$('.focalpointGenerator-strapline-header').width(slideWidth);\n            this.$('.focalpointGenerator-strapline-title').width(slideWidth);\n\n            this.$('.focalpointGenerator-slider').width(fullSlideWidth);\n            this.$('.focalpointGenerator-strapline-header-inner').width(fullSlideWidth);\n\n            var stage = this.model.get('_stage');\n            var margin = -(stage * slideWidth);\n\n            this.$('.focalpointGenerator-slider').css(('margin-' + this.model.get('_marginDir')), margin);\n            this.$('.focalpointGenerator-strapline-header-inner').css(('margin-' + this.model.get('_marginDir')), margin);\n\n            this.model.set('_finalItemLeft', fullSlideWidth - slideWidth);\n        },\n\n        resizeControl: function() {\n            this.alignTextbox();\n            this.setDeviceSize();\n            this.replaceInstructions();\n            this.calculateWidths();\n            this.evaluateNavigation();\n        },\n\n        alignTextbox: function() {\n            if (Adapt.device.screenSize == 'large' && this.model.get(\"_layout\") === 'full') {\n                var currentStage = this.model.get('_stage');\n                if (this.model.get('_items')[currentStage].body) {\n                    var setTop = this.model.get('_items')[currentStage].body._top;\n                    if ($(window).width() < 1200 && $(window).width() > 960) {\n                        $('.focalpointGenerator-highlight-body').eq(currentStage).css('top', setTop - 6 + '%');\n                    } else if ($(window).width() < 960) {\n                        $('.focalpointGenerator-highlight-body').eq(currentStage).css('top', setTop - 13 + '%');\n                    } else {\n                        $('.focalpointGenerator-highlight-body').eq(currentStage).css('top', setTop + '%');\n                    }\n                };\n            }\n        },\n\n        reRender: function() {\n\n        },\n\n        closeNotify: function() {\n            this.evaluateCompletion()\n        },\n\n        replaceInstructions: function() {\n\n            if (Adapt.device.screenSize === 'large') {\n                this.$('.focalpointGenerator-instruction-inner').children('span').html(this.model.get('instruction'));\n            } else if (this.model.get('mobileInstruction') && !this.model.get('_wasHotgraphic')) {\n                this.$('.focalpointGenerator-instruction-inner').children('span').html(this.model.get('mobileInstruction'));\n            }\n        },\n\n\n        moveSliderToIndex: function(itemIndex, animate, callback) {\n            var extraMargin = parseInt(this.$('.focalpointGenerator-slider-graphic').css('margin-right'));\n            var movementSize = this.$('.focalpointGenerator-slide-container').width() + extraMargin;\n            var marginDir = {};\n            if (animate) {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.focalpointGenerator-slider').velocity(\"stop\", true).velocity(marginDir);\n                this.$('.focalpointGenerator-strapline-header-inner').velocity(\"stop\", true).velocity(marginDir, {\n                    complete: callback\n                });\n            } else {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.focalpointGenerator-slider').css(marginDir);\n                this.$('.focalpointGenerator-strapline-header-inner').css(marginDir);\n                callback();\n            }\n        },\n\n        setStage: function(stage, initial) {\n\n            this.model.set('_stage', stage);\n\n            if (this.model.get('_isDesktop')) {\n                // Set the visited attribute for large screen devices\n                var currentItem = this.getCurrentItem(stage);\n                currentItem.visited = true;\n            }\n            this.$('.focalpointGenerator-slider-graphic').children('.controls').a11y_cntrl_enabled(false);\n            this.$('.focalpointGenerator-slider-graphic').eq(stage).children('.controls').a11y_cntrl_enabled(true);\n            this.$('.focalpointGenerator-strapline-title').a11y_cntrl_enabled(false).eq(stage).a11y_cntrl_enabled(true);\n\n            this.evaluateNavigation();\n            this.evaluateCompletion();\n\n            this.moveSliderToIndex(stage, !initial, _.bind(function() {\n                if (this.model.get('_isDesktop')) {\n                    //if (!initial) this.$('.focalpointGenerator-content-item').eq(stage).a11y_focus();\n                } else {\n                    if (!initial) this.$('.focalpointGenerator-popup-open').a11y_focus();\n                }\n            }, this));\n        },\n\n        constrainStage: function(stage) {\n            if (stage > this.model.get('_items').length - 1) {\n                stage = this.model.get('_items').length - 1;\n            } else if (stage < 0) {\n                stage = 0;\n            }\n            return stage;\n        },\n\n        constrainXPosition: function(previousLeft, newLeft, deltaX) {\n            if (newLeft > 0 && deltaX > 0) {\n                newLeft = previousLeft + (deltaX / (newLeft * 0.1));\n            }\n            var finalItemLeft = this.model.get('_finalItemLeft');\n            if (newLeft < -finalItemLeft && deltaX < 0) {\n                var distance = Math.abs(newLeft + finalItemLeft);\n                newLeft = previousLeft + (deltaX / (distance * 0.1));\n            }\n            return newLeft;\n        },\n\n        evaluateNavigation: function() {\n            var currentStage = this.model.get('_stage');\n            var itemCount = this.model.get('_itemCount');\n            if (currentStage == 0) {\n                this.$('.focalpointGenerator-control-left').addClass('focalpointGenerator-hidden');\n\n                if (itemCount > 1) {\n                    this.$('.focalpointGenerator-control-right').removeClass('focalpointGenerator-hidden');\n                }\n            } else {\n                this.$('.focalpointGenerator-control-left').removeClass('focalpointGenerator-hidden');\n\n                if (currentStage == itemCount - 1) {\n                    this.$('.focalpointGenerator-control-right').addClass('focalpointGenerator-hidden');\n                } else {\n                    this.$('.focalpointGenerator-control-right').removeClass('focalpointGenerator-hidden');\n                }\n            }\n\n        },\n\n        openHighlightGraphic: function(event) {\n            event.preventDefault();\n            var currentHotSpot = $(event.currentTarget).data('id');\n            this.setStage(currentHotSpot);\n            this.setVisited(currentHotSpot);\n            this.$('.focalpointGenerator-graphic-pin').removeClass('selected');\n            this.$('.focalpointGenerator-graphic-pin').eq(currentHotSpot).addClass('selected');\n\n        },\n\n        getNearestItemIndex: function() {\n            var currentPosition = parseInt(this.$('.focalpointGenerator-slider').css('margin-left'));\n            var graphicWidth = this.$('.focalpointGenerator-slider-graphic').width();\n            var absolutePosition = currentPosition / graphicWidth;\n            var stage = this.model.get('_stage');\n            var relativePosition = stage - Math.abs(absolutePosition);\n\n            if (relativePosition < -0.3) {\n                stage++;\n            } else if (relativePosition > 0.3) {\n                stage--;\n            }\n\n            return this.constrainStage(stage);\n        },\n\n        getCurrentItem: function(index) {\n            return this.model.get('_items')[index];\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item.visited;\n            });\n        },\n\n        evaluateCompletion: function() {\n            if (this.getVisitedItems().length === this.model.get('_items').length) {\n                this.setCompletionStatus();\n            }\n        },\n\n        moveElement: function($element, deltaX) {\n            var previousLeft = parseInt($element.css('margin-left'));\n            var newLeft = previousLeft + deltaX;\n\n            newLeft = this.constrainXPosition(previousLeft, newLeft, deltaX);\n            $element.css(('margin-' + this.model.get('_marginDir')), newLeft + 'px');\n        },\n\n        openPopup: function(event) {\n            event.preventDefault();\n\n            var currentStage = this.model.get('_stage');\n\n            var currentItem = this.getCurrentItem(currentStage);\n            currentItem.visited = true;\n\n            if (this.model.get('_items')[currentStage].body) {\n\n                var currItem = this.model.get('_items')[currentStage].body;\n                var popupObject = {\n                    body: currItem.title,\n                    body: currItem.description\n                };\n                Adapt.trigger('notify:popup', popupObject);\n            };\n        },\n\n        closePopup: function(event) {\n            event.preventDefault();\n            this.evaluateCompletion();\n            Adapt.trigger('popup:closed');\n        },\n\n        onNavigationClicked: function(event) {\n            event.preventDefault();\n\n            if (!this.model.get('_active')) return;\n\n            var stage = this.model.get('_stage');\n            var numberOfItems = this.model.get('_itemCount');\n\n            if ($(event.currentTarget).hasClass('focalpointGenerator-control-right')) {\n                stage++;\n            } else if ($(event.currentTarget).hasClass('focalpointGenerator-control-left')) {\n                stage--;\n            }\n            stage = (stage + numberOfItems) % numberOfItems;\n            this.setVisited(stage);\n            this.setStage(stage);\n            this.$('.focalpointGenerator-graphic-pin').removeClass('selected');\n            this.$('.focalpointGenerator-graphic-pin').eq(stage).addClass('selected');\n\n        },\n\n        onTouchEnd: function(event) {\n            var nextItemIndex = this.getNearestItemIndex();\n            this.setStage(nextItemIndex);\n\n            this.$('.focalpointGenerator-slider').off('touchmove', this.onTouchMove);\n        },\n\n\n        setVisited: function(index) {\n            var item = this.model.get('_items')[index];\n            item._isVisited = true;\n            this.$('.focalpointGenerator-graphic-pin').eq(index).addClass('visited').attr('aria-label', \"Item visited.\");\n            $.a11y_alert(\"visited\");\n            this.checkCompletionStatus();\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item._isVisited;\n            });\n        },\n\n        checkCompletionStatus: function() {\n            if (!this.model.get('_isComplete')) {\n                if (this.getVisitedItems().length == this.model.get('_items').length) {\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        onTouchMove: function(event) {\n            var currentX = event.originalEvent.touches[0]['pageX'];\n            var previousX = this.model.get('_currentX');\n            var deltaX = currentX - previousX;\n\n            Adapt.trigger('popup:closed');\n\n            this.moveElement(this.$('.focalpointGenerator-slider'), deltaX);\n            this.moveElement(this.$('.focalpointGenerator-strapline-header-inner'), deltaX);\n\n            this.model.set('_currentX', currentX);\n        },\n\n        onClickDragItem: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n        },\n\n        // Mouse Events\n        onMouseDownDragItem: function(event) {\n\n            if ($('html').hasClass('ie8')) {\n                $(document).on('mouseup', _.bind(this.onMouseUpDragItem, this));\n            } else {\n                $(window).on('mouseup', _.bind(this.onMouseUpDragItem, this));\n            }\n\n            $('body').on('mousemove', _.bind(this.onMouseMoveDragItem, this));\n\n            $currentItem = this.$(event.currentTarget);\n            var currentDragedItemId = $currentItem.attr('data-id');\n\n            mouseOffsetX = event.clientX - $currentItem[0].offsetLeft;\n            mouseOffsetY = event.clientY - $currentItem[0].offsetTop;\n\n\n            if (currentDragedItemId) {\n                this.model.set('_currentDragedItemId', currentDragedItemId);\n                this.model.set('_currentWidth', $currentItem.parent('div').width());\n\n            }\n\n            return false;\n        },\n\n        onMouseMoveDragItem: function(event) {\n            var posx = 0,\n                posy = 0;\n            if (!event) event = window.event;\n\n            if (event.clientX || event.clientY) {\n                posx = event.clientX - mouseOffsetX;\n                posy = event.clientY - mouseOffsetY;\n            }\n\n            var currentDragedItemId = $currentItem.attr('data-id');\n\n            $currentItem.addClass('dragItem');\n            if (posy < 0) {\n                posy = 0;\n            } else if (posy > ($currentItem.parent('div').height() - $currentItem.height())) {\n                posy = ($currentItem.parent('div').height() - $currentItem.height());\n            } \n\n            if (posx > ($currentItem.parent('div').width() - $currentItem.width())) {\n                posx = ($currentItem.parent('div').width() - $currentItem.width());\n                \n            }else if (posx < 0) {\n                posx = 0;\n            }\n            $currentItem.css({\n                top: posy,\n                left: posx\n            });\n        },\n\n        onMouseUpDragItem: function(event) {\n            if (!this.model.get('_isEnabled')) {\n                if (event && event.preventDefault) event.preventDefault();\n                return false;\n            }\n\n            $currentItem.removeClass('dragItem');\n            if ($('html').hasClass('ie8')) {\n                $(document).off('mouseup');\n            } else {\n                $(window).off('mouseup');\n            }\n            $('body').off('mousemove');\n\n            var currentDragedItemId = this.model.get('_currentDragedItemId');\n\n\n            this.model.set('_currentDragedItemId', '');\n        },\n        // Touch Events\n        onTouchStartItem: function(event) {\n            $('.focalpointGenerator-highlight-body')\n                .on('touchmove', _.bind(this.onTouchMoveItem, this))\n                .on('touchend', _.bind(this.onTouchEndItem, this))\n                .on('touchcancel', _.bind(this.onTouchCancelItem, this));\n\n            var $currentItem = this.$(event.currentTarget);\n            var currentDragedItemId = $currentItem.attr('data-id');\n\n            mouseOffsetX = event.originalEvent.touches[0].clientX - $currentItem[0].offsetLeft;\n            mouseOffsetY = event.originalEvent.touches[0].clientY - $currentItem[0].offsetTop;\n\n            if (currentDragedItemId) {\n                this.model.set('_currentDragedItemId', currentDragedItemId);\n                this.model.set('_currentWidth', $currentItem.parent('div').width());\n            }\n\n            return false;\n        },\n\n        onTouchMoveItem: function(event) {\n\n            var posx = event.originalEvent.touches[0].clientX - mouseOffsetX;\n            var posy = event.originalEvent.touches[0].clientY - mouseOffsetY;\n\n            this.model.set({\n                '_lastTop': event.originalEvent.touches[0].pageY,\n                '_lastLeft': event.originalEvent.touches[0].pageX\n            })\n\n\n\n            var $currentItem = this.$(event.currentTarget);\n\n            var $dragAndDropDummy = $currentItem.attr('data-id');\n           if (posy < 0) {\n                posy = 0;\n            } else if (posy > ($currentItem.parent('div').height() - $currentItem.height())) {\n                posy = ($currentItem.parent('div').height() - $currentItem.height());\n            } \n\n            if (posx > ($currentItem.parent('div').width() - $currentItem.width())) {\n                posx = ($currentItem.parent('div').width() - $currentItem.width());\n                \n            }else if (posx < 0) {\n                posx = 0;\n            }\n\n            $currentItem.addClass('dragItem');\n            $currentItem.css({\n                top: posy,\n                left: posx\n            });\n        },\n\n        onTouchEndItem: function(event) {\n            var currentDragedItemId = this.model.get('_currentDragedItemId');\n            var lastTop = this.model.get('_lastTop');\n            var lastLeft = this.model.get('_lastLeft');\n            if (!this.model.get('_isEnabled') || !currentDragedItemId || !lastTop || !lastLeft) {\n                if (event && event.preventDefault) event.preventDefault();\n                return false;\n            }\n\n            this.model.set('_currentDragedItemId', '');\n\n            this.model.unset('_lastTop');\n            this.model.unset('_lastLeft');\n\n            $currentItem.remove('dragItem');\n            $('.focalpointGenerator-highlight-body').off('touchmove touchend touchcancel');\n        },\n\n        onTouchCancelItem: function(event) {\n\n            this.model.set('_currentDragedItemId', '');\n            this.model.unset('_lastTop');\n            this.model.unset('_lastLeft');\n            $('.focalpointGenerator-highlight-body').off('touchmove touchend touchcancel');\n        }\n\n    });\n\n    Adapt.register('focalpointGenerator', FocalpointGenerator);\n\n    return FocalpointGenerator;\n\n});\n\n",
    "/*\n * adapt-hotSpot\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-hotSpot/blob/master/LICENSE\n * \n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-hotSpot/js/adapt-hotSpot',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var HotSpot = QuestionView.extend({\n\n        initialize:function() {\n\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_isVisible', this.toggleVisibility);\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.preRender();\n            if (Adapt.device.screenSize == 'large') {\n                this.render();\n            }\n            else{\n                this.reRender();\n            }\n        },\n\n        events: {\n            \"click .hotSpot-item\": 'onItemSelected'\n        },\n\n        // should be used instead of preRender\n        setupQuestion: function() {\n\n            this.model.set(\"_isRadio\", ( this.model.get('_selectable') === 1) );\n            this.model.set('_selectedItems', []);\n\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.setupRandomisation();\n        },\n\n         // Check if items need to be randomised\n        setupRandomisation: function() {\n\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                this.model.set(\"_items\", _.shuffle(this.model.get(\"_items\")));\n            }\n        },\n\n        // used just like postRender is for presentational components\n        onQuestionRendered: function() {\n            //Check if image is loaded\n            this.$('.hotSpot-background-image').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n        },\n\n        // Used by question to disable the question during submit and complete stages\n        disableQuestion: function() {\n             this.setAllItemsEnabled(false);\n        },\n\n        // Used by question to enable the question during interactions\n        enableQuestion: function() {\n             this.setAllItemsEnabled(true);\n        },\n\n        setAllItemsEnabled: function(isEnabled) {\n\n            _.each(this.model.get('_items'), function(item, index){\n                var $itemLabel = this.$('label').eq(index);\n                var $itemInput = this.$('input').eq(index);\n\n                if (isEnabled) {\n                    $itemLabel.removeClass('disabled');\n                    $itemInput.prop('disabled', false);\n                } else {\n                    $itemLabel.addClass('disabled');\n                    $itemInput.prop('disabled', true);\n                }\n            }, this);\n        },\n\n        // Used by the question to reset the question when revisiting the component\n        resetQuestionOnRevisit: function() {\n            this.setAllItemsEnabled(true);\n            this.resetQuestion();\n        },\n\n        onItemSelected: function(event) {\n\n            if(event && event.preventDefault) event.preventDefault();\n\n            if (this.model.get('_isEnabled') && !this.model.get('_isSubmitted')) {\n                var selectedItems = this.model.get('_selectedItems');\n                var $hotSpotItem = $(event.currentTarget);\n                var hotSpotItemIndex = $hotSpotItem.index();\n                var isHotSpotItemSelected = $hotSpotItem.hasClass('selected');\n                var selectedHotSpotItem = this.model.get('_items')[hotSpotItemIndex - 1];\n\n                if(isHotSpotItemSelected) {\n                    $hotSpotItem.removeClass('selected');\n                    selectedHotSpotItem._isSelected = false;\n                } else {\n                    if (this.model.get('_selectable') === 1) {\n                        this.$('.hotSpot-item').removeClass('selected');\n                        this.deselectAllItems();\n                    }\n\n                    $hotSpotItem.addClass('selected');\n                    selectedHotSpotItem._isSelected = true;\n                }\n            }\n        },\n\n        // Used by the question view to reset the look and feel of the component.\n        // This could also include resetting item data\n        resetQuestion: function() {\n            this.deselectAllItems();\n            this.resetItems();\n        },\n\n        deselectAllItems: function() {\n\n            _.each(this.model.get('_items'), function(item) {\n                item._isSelected = false;\n                item._isCorrect = false;\n            });\n        },\n\n        resetItems: function() {\n\n            this.$('.hotSpot-widget').addClass('before-submit');\n            this.$('.hotSpot-item').removeClass('selected not-selected correct incorrect');\n\n            this.model.set({\n                _isAtLeastOneCorrectSelection: false\n            });\n        },\n\n        // Use to check if the user is allowed to submit the question\n        // Should return a boolean\n        canSubmit: function() {\n            var count = 0;\n\n            _.each(this.model.get('_items'), function(item) {\n                if (item._isSelected) {\n                    count++;\n                }\n            }, this);\n\n            var canSubmit = count > 0;\n\n            if(canSubmit) {\n                this.$('.hotSpot-widget').removeClass('before-submit');\n            }\n\n            return canSubmit;\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {},\n\n        // This is important for returning or showing the users answer\n        // This should preserve the state of the users answers\n        storeUserAnswer: function() {\n        },\n\n        // Should return a boolean based upon whether to question is correct or not\n        isCorrect: function() {\n            var numberOfRequiredAnswers = 0;\n            var numberOfCorrectAnswers = 0;\n            var numberOfIncorrectAnswers = 0;\n            _.each(this.model.get('_items'), function(item, index) {\n                // Set item._isSelected to either true or false\n                var itemSelected = (item._isSelected || false);\n                if (item._shouldBeSelected) {\n                    // Adjust number of correct items\n                    numberOfRequiredAnswers++;\n                    if (itemSelected) {\n                        // If the item is selected adjust correct answer\n                        numberOfCorrectAnswers++;\n                        // Set item to correct - is used for returning to this component\n                        item._isCorrect = true;\n                        // Set that at least one correct answer has been selected\n                        // Used in isPartlyCorrect method below\n                        this.model.set('_isAtLeastOneCorrectSelection', true);\n                    }\n                } else if (!item._shouldBeSelected && itemSelected) {\n                    // If an item shouldn't be selected and is selected\n                    // Adjust incorrect answers\n                    numberOfIncorrectAnswers++;\n                }\n            }, this);\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n            this.model.set('_numberOfRequiredAnswers', numberOfRequiredAnswers);\n            // Check if correct answers matches correct items and there are no incorrect selections\n            var answeredCorrectly = (numberOfCorrectAnswers === numberOfRequiredAnswers) && (numberOfIncorrectAnswers === 0);\n            return answeredCorrectly;\n        },\n\n        // Used to set the score based upon the _questionWeight\n        setScore: function() {\n            var questionWeight = this.model.get(\"_questionWeight\");\n            var answeredCorrectly = this.model.get('_isCorrect');\n            var score = answeredCorrectly ? questionWeight : 0;\n            this.model.set('_score', score);\n        },\n\n        // This is important and should give the user feedback on how they answered the question\n        // Normally done through ticks and crosses by adding classes\n        showMarking: function() {\n\n            _.each(this.model.get('_items'), function(item, i) {\n                var $item = this.$('.component-item').eq(i);\n                $item.addClass(item._isCorrect ? 'correct' : 'incorrect');\n\n                if(!item._isSelected) {\n                    $item.addClass('not-selected');\n                }\n            }, this);\n        },\n\n        // Used by the question to determine if the question is incorrect or partly correct\n        // Should return a boolean\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        // Used by the question view to reset the stored user answer\n        resetUserAnswer: function() {\n        },\n\n        // Used by the question to display the correct answer to the user\n        showCorrectAnswer: function() {\n\n            _.each(this.model.get('_items'), function(item, index) {\n                this.setOptionSelected(index, item._shouldBeSelected);\n            }, this);\n        },\n\n        setOptionSelected: function(index, selected, isNotSelected) {\n            var $hotSpotItem = this.$('.hotSpot-item').eq(index);\n            if(isNotSelected) {\n                $hotSpotItem.addClass('not-selected');\n            }\n\n            if (selected) {\n                $hotSpotItem.removeClass('incorrect').addClass('correct');\n            } else {\n                $hotSpotItem.removeClass('correct').addClass('incorrect');\n            }\n        },\n\n        // Used by the question to display the users answer and\n        // hide the correct answer\n        // Should use the values stored in storeUserAnswer\n        hideCorrectAnswer: function() {\n            _.each(this.model.get('_items'), function(item, index) {\n                this.setOptionSelected(index, item._isCorrect, !item._isSelected);\n            }, this);\n        },\n\n        reRender: function() {\n            if (Adapt.device.screenSize != 'large') {\n                this.replaceWithGmcq();\n            }\n        },\n\n        replaceWithGmcq:function() {\n            if (!Adapt.componentStore.gMcq) throw \"GMcq not included in build\";\n            var Gmcq = Adapt.componentStore.gMcq;\n\n            var model = this.prepareGmcqModel();\n            var newGmcq = new Gmcq({model: model, $parent: this.options.$parent});\n            newGmcq.reRender();\n            //newGmcq.setupNarrative();\n            this.options.$parent.append(newGmcq.$el);\n            Adapt.trigger('device:resize');\n            this.remove();\n\n        },\n\n        prepareGmcqModel:function(){\n            var model = this.model;\n            console.log(model.get('_items'))\n            model.set('_component', 'gMcq');\n            model.set('_wasHotSpot', true);\n            model.set('body', model.get('body'));\n            model.set('instruction', model.get('instruction'));\n\n            return model;\n        }\n    });\n\n    Adapt.register(\"hotSpot\", HotSpot);\n\n    return HotSpot;\n\n});\n\n",
    "/*\n * adapt-iframewithedgeAnimate\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-iframewithedgeAnimate/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-iframewithedgeAnimate/js/adapt-iframewithedgeAnimate',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var IframewithedgeAnimate = ComponentView.extend({\n\n        events: {\n            'click .iframewithedgeAnimate-playpause': 'playEdgeAnimation',\n            'click .iframewithedgeAnimate-timetrail': 'onClickTimeTrailBar',\n            'touchstart .iframewithedgeAnimate-handle':'onHandlePressed',\n            'mousedown .iframewithedgeAnimate-handle': 'onHandlePressed'\n        },\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(this.model, 'change:_isVisible', this.toggleVisibility);\n            this.model.set('_globals', Adapt.course.get('_globals'));\n            this.preRender();\n            if (Adapt.device.screenSize === 'large') {\n                this.render();\n            } else {\n                this.reRender();\n            }\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.listenTo(Adapt, 'device:resize', this.resizeControl, 200);\n            // Checks to see if the iframewithedgeAnimate should be reset on revisit\n            this.checkIfResetOnRevisit();\n        },\n\n        postRender: function() {\n            this.$('.iframewithedgeAnimate-iframe').load(_.bind(function() {\n                this.resizeControl();\n\n                var AdobeEdge = this.$('iframe[name=edge-frame]')[0].contentWindow.AdobeEdge;\n\n                if(AdobeEdge) {\n                    this.model.set(\"AdobeEdge\", AdobeEdge);\n                    window.AdobeEdge = AdobeEdge;\n                    AdobeEdge.bootstrapCallback(_.bind(function(compId) {\n                        if(compId && compId.length > 0)\n                        this.onEdgeAnimationLoaded(compId);\n                    }, this));\n                }\n            }, this));\n            this.$('.component-inner').on('inview', _.bind(this.onInview, this));\n        },\n\n        // Used to check if the iframewithedgeAnimate should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n            }\n        },\n\n        reRender: function() {\n            if (Adapt.device.screenSize !== 'large') {\n                this.replaceWithEdgeAnimateMobile();\n            }\n        },\n\n        remove: function() {\n            this.stopTicker();\n            this.$('.component-inner').off('inview');\n            ComponentView.prototype.remove.apply(this, arguments);\n        },\n\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    if(!this.model.get('_isComplete') && (this.model.get('_edge')._setCompletionOn === 'inview')) {\n                        this.setCompletionStatus();\n                    }\n                }\n            } else {\n                this.stopEdgeAnimation();\n            }\n        },\n\n        replaceWithEdgeAnimateMobile: function() {\n            if (!Adapt.componentStore.edgeAnimateMobile) throw \"EdgeAnimateMobile not included in build\";\n            var EdgeAnimateMobile = Adapt.componentStore.edgeAnimateMobile;\n\n            var model = this.prepareEdgeAnimateMobileModel();\n            var newEdgeAnimateMobile = new EdgeAnimateMobile({model: model, $parent: this.options.$parent});\n            newEdgeAnimateMobile.reRender();\n            newEdgeAnimateMobile.setupEdgeAnimateMobile();\n            this.options.$parent.append(newEdgeAnimateMobile.$el);\n            Adapt.trigger('device:resize');\n            this.remove();\n        },\n\n        prepareEdgeAnimateMobileModel: function() {\n            var model = this.model;\n            model.set('_component', 'edgeAnimateMobile');\n            model.set('_wasIframewithedgeAnimate', true);\n            model.set('originalBody', model.get('body'));\n            model.set('originalInstruction', model.get('instruction'));\n            if (model.get('mobileBody')) {\n                model.set('body', model.get('mobileBody'));\n            }\n            if (model.get('mobileInstruction')) {\n                model.set('instruction', model.get('mobileInstruction'));\n            }\n\n            return model;\n        },\n\n        resizeControl: function() {\n            if(Adapt.device.screenSize !== 'large') return;\n\n            var width = this.$('.iframewithedgeAnimate-widget').width();\n            this.$('.iframewithedgeAnimate-timetrail').width(width - 35);\n            this.$('.iframewithedgeAnimate-bar').width(width - 55);\n\n            if(this.model.get('_edge')._shouldScale) {\n                var scale = width / this.model.get('_edge')._width;\n                this.$('iframe').css({\n                    '-ms-transform': 'scale(' + scale + ')',\n                    '-moz-transform': 'scale(' + scale + ')',\n                    '-webkit-transform': 'scale(' + scale + ')',\n                    '-webkit-transform-style': 'preserve-3d',\n                    '-webkit-transform': 'scale3d(' + scale + ',' + scale + ',' + scale + ')',\n                    'transform': 'scale(' + scale + ')'\n                });\n\n                _.defer(_.bind(function() {\n                    this.$('.iframewithedgeAnimate-iframe-holder').height(this.model.get('_edge')._height * scale);\n                }, this));\n            }\n        },\n\n        injectEdgeObject: function() {\n            var AdobeEdge = this.model.get(\"AdobeEdge\");\n            if(AdobeEdge && (!AdobeEdge.compositions[this.model.get(\"edgeCompositionId\")])) {\n                window.AdobeEdge = AdobeEdge;\n            }\n        },\n\n        onEdgeAnimationLoaded: function(compId) {\n            this.setReadyStatus();\n\n            this.model.set(\"edgeCompositionId\", compId);\n            var AdobeEdge = this.model.get(\"AdobeEdge\");\n            var compositionStage = AdobeEdge.getComposition(compId).getStage();\n            this.model.set('edgeCompositionStage', compositionStage);\n        },\n\n        startTicker: function() {\n            this.stopTicker();\n\n            var that = this;\n            var intervalId = setInterval(function() {\n                that.updateSeekbar();\n            }, 25);\n\n            this.model.set('intervalId', intervalId);\n        },\n\n        stopTicker: function() {\n            clearInterval(this.model.get('intervalId'));\n        },\n\n        updateSeekbar: function(percentage) {\n            var composition = this.model.get('edgeCompositionStage');\n            if(composition) {\n                var duration = composition.getDuration();\n                if(percentage) {\n                    var currentPosition = (duration * percentage) / 100;\n                    if(composition.isPlaying()) {\n                        this.playEdgeAnimationAtTime(currentPosition);\n                    } else {\n                        this.stopEdgeAnimation(currentPosition);\n                    }\n                } else {\n                    var currentPosition = composition.getPosition();\n                    percentage = (currentPosition * 100 / duration) || 0;\n                }\n                this.$('.iframewithedgeAnimate-current').width(percentage + '%');\n                this.$('.iframewithedgeAnimate-handle').css('left', (percentage - 1) + '%');\n\n                if(percentage === 100) {\n                    if(!this.model.get('_isComplete') && (this.model.get('_edge')._setCompletionOn === 'end')) {\n                        this.setCompletionStatus();\n                    }\n\n                    this.stopTicker();\n                    this.$('.iframewithedgeAnimate-playpause div').removeClass('fa-pause').addClass('fa-play');\n                }\n            }\n        },\n\n        onClickTimeTrailBar: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n\n            var offsetLeft = this.$('.iframewithedgeAnimate-bar').offset().left;\n            var width = this.$('.iframewithedgeAnimate-bar').width();\n            var left = (event.pageX || event.originalEvent.touches[0].pageX) - offsetLeft;\n\n            left = Math.max(Math.min(left, width), 0);\n            var percentage = (left * 100) / width;\n            this.updateSeekbar(percentage);\n        },\n\n        onHandlePressed: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n\n            var eventData = {\n                width: this.$('.iframewithedgeAnimate-bar').width(),\n                offsetLeft: this.$('.iframewithedgeAnimate-bar').offset().left\n            };\n\n            $(document).on('mousemove touchmove', eventData, _.bind(this.onHandleDragged, this));\n            $(document).one('mouseup touchend', eventData, _.bind(this.onDragReleased, this));\n        },\n\n        onHandleDragged: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n\n            var left = (event.pageX || (event.originalEvent.touches ? event.originalEvent.touches[0].pageX : 0)) - event.data.offsetLeft;\n            left = Math.max(Math.min(left, event.data.width), 0);\n\n            var width = this.$('.iframewithedgeAnimate-bar').width();\n            var percentage = (left * 100) / width;\n\n            this.updateSeekbar(percentage);\n        },\n\n        onDragReleased: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n\n            $(document).off('mousemove touchmove');\n        },\n\n        playEdgeAnimation: function() {\n            if(!this.model.get('_isComplete') && (!_.contains(['inview', 'end'], this.model.get('_edge')._setCompletionOn))) {\n                this.setCompletionStatus();\n            }\n\n            var composition = this.model.get('edgeCompositionStage');\n            if(composition) {\n                this.injectEdgeObject();\n\n                if(composition.isPlaying()) {\n                    this.$('.iframewithedgeAnimate-playpause div').removeClass('fa-pause').addClass('fa-play');\n                    composition.stop();\n                    this.stopTicker();\n                } else {\n                    this.$('.iframewithedgeAnimate-playpause div').removeClass('fa-play').addClass('fa-pause');\n                    if(composition.getPosition() === composition.getDuration()) {\n                        composition.stop(0);\n                    }\n                    composition.play();\n                    this.startTicker();\n                }\n            }\n        },\n\n        playEdgeAnimationAtTime: function(time) {\n            var composition = this.model.get('edgeCompositionStage');\n            time = parseFloat(time) || 0;\n            if(composition && (time >= 0 && time <= composition.getDuration())) {\n                this.injectEdgeObject();\n\n                this.$('.iframewithedgeAnimate-playpause div').removeClass('fa-play').addClass('fa-pause');\n                composition.play(time);\n                this.startTicker();\n            }\n        },\n\n        stopEdgeAnimation: function(time) {\n            var composition = this.model.get('edgeCompositionStage');\n            if(composition) {\n                this.injectEdgeObject();\n\n                this.$('.iframewithedgeAnimate-playpause div').removeClass('fa-pause').addClass('fa-play');\n                time === undefined ? composition.stop() : composition.stop(parseFloat(time) || 0);\n                this.stopTicker();\n            }\n        }\n\n    });\n\n    Adapt.register('iframewithedgeAnimate', IframewithedgeAnimate);\n\n    return IframewithedgeAnimate;\n\n});\n\n",
    "/*\n * adapt-labelGenerator\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-labelGenerator/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-labelGenerator/js/adapt-labelGenerator',['require','jquery','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var $ = require('jquery');\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var LabelGenerator = ComponentView.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.preRender(Adapt.device.screenSize);\n\n            this.mouseOffset = {\n                x: 0,\n                y: 0\n            };\n            if (Adapt.device.screenSize == 'large') {\n                this.render();\n            } else {\n                this.reRender();\n            }\n        },\n\n        events: {\n            \"click .showHideAll\": \"toggleAllLabel\",\n            \"click .popup-open\": \"showMoreDescription\",\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            _.each(this.model.get('_items'),function(item) {\n                var lineWidth = item.width;\n                if(lineWidth == undefined || lineWidth < 50) lineWidth = 50;\n                    else if(lineWidth >400) lineWidth = 400;\n                item.width = lineWidth;\n                item.popupContainerWidth = lineWidth + 350;\n            });\n        },\n\n        postRender: function() {\n            this.$('.labelGenerator-widget').imageready(_.bind(function() {\n                this.setReadyStatus();\n                this.bindEvents();\n\t\t\t\tthis.fixPopupLayout();\n                this.$('.labelGenerator-widget').on('inview', _.bind(this.onInview, this));\n            }, this));\n        },\n\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    this.$('.labelGenerator-widget').off('inview');\n                    this.updateCompletionStatus();\n                }\n\n            }\n        },\n\n\t\tfixPopupLayout: function() {\n\t\t\tvar items = this.model.get('_items');\n\n\t\t\tfor (var i = items.length; i--;) {\n\t\t\t\tswitch(items[i]['_popupPosition']) {\n\t\t\t\t\tcase 'top':\n\t\t\t\t\t\tthis.processTopPopup(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'top-left':\n                        this.processTopLeft(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'top-right':\n                        this.processTopRight(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\tthis.processBottomPopup(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bottom-left':\n                        this.processBottomLeft(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bottom-right':\n                        this.processBottomRight(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tthis.processLeftPopup(items[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tprocessTopPopup: function(item) {\n\t\t\tvar itemDOM = this.$('#item-'+item.id);\n\t\t\tvar popup = itemDOM.find('.popup-open');\n\t\t\tvar cercle = itemDOM.find('.labelGenerator-graphic-pin');\n\t\t\tvar line = itemDOM.find('.popup-line');\n\t\t\tvar lineLength = item.width;\n\n\t\t\tline\n\t\t\t.css({\n\t\t\t\ttransform: \"rotate(90deg)\"\n\t\t\t})\n\t\t\t.offset({\n\t\t\t\ttop: cercle.offset().top - lineLength,\n\t\t\t\tleft: cercle.offset().left + (cercle.width() / 2)\n\t\t\t});\n\n\t\t\tpopup.offset({\n\t\t\t\ttop: cercle.offset().top - lineLength - popup.outerHeight(),\n\t\t\t\tleft: cercle.offset().left - (popup.outerWidth() / 2)\n\t\t\t})\n\t\t},\n\n\t\tprocessBottomPopup: function(item) {\n\t\t\tvar itemDOM = this.$('#item-'+item.id);\n\t\t\tvar popup = itemDOM.find('.popup-open');\n\t\t\tvar cercle = itemDOM.find('.labelGenerator-graphic-pin');\n\t\t\tvar line = itemDOM.find('.popup-line');\n\t\t\tvar lineLength = item.width;\n\n\t\t\tline\n\t\t\t.css({\n\t\t\t\ttransform: \"rotate(-90deg)\"\n\t\t\t})\n\t\t\t.offset({\n\t\t\t\ttop: cercle.offset().top + cercle.height(),\n\t\t\t\tleft: cercle.offset().left + (cercle.width() / 2)\n\t\t\t});\n\n\t\t\tpopup.offset({\n\t\t\t\ttop: cercle.offset().top + lineLength + cercle.height() - 1,\n\t\t\t\tleft: cercle.offset().left - (popup.width() / 2)\n\t\t\t})\n\t\t},\n\n        processTopLeft: function(item) {\n            var itemDOM = this.$('#item-'+item.id);\n            var popup = itemDOM.find('.popup-open');\n            var cercle = itemDOM.find('.labelGenerator-graphic-pin');\n            var line = itemDOM.find('.popup-line');\n            var lineLength = item.width / 1.4142;\n\n            line\n            .css({\n                'transform-origin': 'left',\n                transform: \"rotate(-135deg)\"\n            });\n\n            popup.offset({\n                top: cercle.offset().top - lineLength - popup.height(),\n                left: cercle.offset().left - lineLength - popup.width()\n            })\n        },\n\n        processTopRight: function(item) {\n            var itemDOM = this.$('#item-'+item.id);\n            var popup = itemDOM.find('.popup-open');\n            var cercle = itemDOM.find('.labelGenerator-graphic-pin');\n            var line = itemDOM.find('.popup-line');\n            var lineLength = item.width / 1.4142;\n\n            line\n            .css({\n                'transform-origin': 'left',\n                transform: \"rotate(-45deg)\"\n            });\n\n            popup.offset({\n                top: cercle.offset().top - lineLength - popup.height() - 4,\n                left: cercle.offset().left + lineLength\n            })\n        },\n\n        processBottomLeft: function(item) {\n            var itemDOM = this.$('#item-'+item.id);\n            var popup = itemDOM.find('.popup-open');\n            var cercle = itemDOM.find('.labelGenerator-graphic-pin');\n            var line = itemDOM.find('.popup-line');\n            var lineLength = item.width / 1.4142;\n\n            line\n            .css({\n                'transform-origin': 'left',\n                'transform': \"rotate(135deg)\"\n            });\n\n            popup.offset({\n                top: cercle.offset().top + lineLength,\n                left: cercle.offset().left - lineLength - popup.width() - 4\n            });\n        },\n\n        processBottomRight: function(item) {\n            var itemDOM = this.$('#item-'+item.id);\n            var popup = itemDOM.find('.popup-open');\n            var cercle = itemDOM.find('.labelGenerator-graphic-pin');\n            var line = itemDOM.find('.popup-line');\n            var lineLength = item.width / 1.4142;\n\n            line\n            .css({\n                'transform-origin': 'left',\n                'transform': \"rotate(45deg)\"\n            });\n\n            popup.offset({\n                top: cercle.offset().top + lineLength,\n                left: cercle.offset().left + lineLength\n            });\n        },\n\n\t\tprocessLeftPopup: function(item) {\n\t\t\tvar itemDOM = this.$('#item-'+item.id);\n\t\t\tvar popup = itemDOM.find('.popup-open');\n\t\t\tvar cercle = itemDOM.find('.labelGenerator-graphic-pin');\n\t\t\tvar line = itemDOM.find('.popup-line');\n\t\t\tvar lineLength = item.width;\n\n\t\t\tline.offset({\n\t\t\t\tleft: cercle.offset().left - lineLength\n\t\t\t});\n\n\t\t\tpopup.offset({\n\t\t\t\tleft: cercle.offset().left - lineLength  - popup.outerWidth()\n\t\t\t})\n\t\t},\n\n        remove: function() {\n            $(document).off('touchstart click');\n            this.unbindEventsForDragging();\n\n            Backbone.View.prototype.remove.call(this);\n        },\n\n        bindEvents: function() {\n            this.$(\".moreDescription-container-close\").on(\"click\", this.closeClicked);\n            this.$(\".moreDescription-container-close\").on(\"touchstart\", this.closeClicked);\n            this.$(\".popup-with-add-sign-open\").on(\"mousedown\", _.bind(this.onMouseDownBullets, this));\n            this.$(\".popup-with-add-sign-open\").on(\"touchstart\", _.bind(this.onTouchStartBullets, this));\n        },\n\n        bindChangeEvent: function(articleHasVerticleBlock) {\n            if (articleHasVerticleBlock.length == 0) return;\n            if (articleHasVerticleBlock.length == 1) {\n                this.listenTo(articleHasVerticleBlock[0], 'change:_stage', this.onBlockChange, this);\n            }\n        },\n\n        bindMouseEvents: function() {\n            $(window).on('mouseup', _.bind(this.onMouseUpBullets, this));\n            $(\".popup-with-add-sign-open\").on('mousemove', _.bind(this.onMouseMoveBullets, this));\n        },\n\n        unbindMouseEvents: function() {\n            $(window).off('mouseup');\n            $(\".popup-with-add-sign-open\").off('mousemove');\n        },\n\n        bindTouchEvents: function() {\n            $(document).on('touchend', _.bind(this.onTouchEndBullets, this));\n            $(\".popup-with-add-sign-open\").on('touchcancel', _.bind(this.onTouchCancelBullets, this));\n            $(\".popup-with-add-sign-open\").on('touchmove', _.bind(this.onTouchMoveBullets, this));\n        },\n\n        unbindTouchEvents: function() {\n            $(document).off('touchend');\n            $(\".popup-with-add-sign-open\").off('touchmove');\n            $(\".popup-with-add-sign-open\").off('touchcancel');\n        },\n\n        unbindEventsForDragging: function() {\n            $(\".block-content-items-bullets\").css(\"left\", \"10px\");\n            $(\".block-content-items-bullets\").css(\"top\", \"0px\");\n            this.unbindMouseEvents();\n            this.unbindTouchEvents();\n        },\n\n        stopPropagation: function(event) {\n            event = event || window.event;\n            if (event.stopPropagation) event.stopPropagation();\n            event.cancelBubble = true;\n        },\n\n        preventDefault: function(event) {\n            event = event || window.event;\n            if (event.preventDefault) event.preventDefault();\n            event.returnValue = false;\n        },\n\n        onMouseDownBullets: function(event) {//console.log(\"onMouseDownBullets \",event.target);\n            if($(event.target).hasClass('moreDescription-container-close')) return;\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.mouseOffset.x = event.clientX - $(event.currentTarget)[0].offsetLeft;\n            this.mouseOffset.y = event.clientY - $(event.currentTarget)[0].offsetTop;\n\n            this.bindMouseEvents();\n        },\n\n        onMouseUpBullets: function(event) {\n            this.unbindMouseEvents();\n        },\n\n        onMouseMoveBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.clientX - this.mouseOffset.x;\n            var top = event.clientY - this.mouseOffset.y;\n            var $currentTarget = $(event.currentTarget);\n            var currentTargetWidth = $currentTarget.width();\n            var right = $('.highlight-moreDescription-container').width() - $currentTarget[0].offsetWidth;\n            var blockTop = $currentTarget.closest('.block').height() - $($(this)[0].el).height() - 40;\n            var bottom = $currentTarget.closest('.block').height() - $currentTarget.height() - blockTop;\n            if (top < -20) top = -20;\n            if (top > bottom) top = bottom;\n            if (left < 0) left = 0;\n            if (left > right) left = right;\n            $currentTarget.css({\n                'left': left + 'px',\n                'top': top + 'px'\n            });\n        },\n\n        onTouchStartBullets: function(event) {\n            if($(event.target).hasClass('moreDescription-container-close')) return;\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.mouseOffset.x = event.originalEvent.touches[0].clientX - $(event.currentTarget)[0].offsetLeft;\n            this.mouseOffset.y = event.originalEvent.touches[0].clientY - $(event.currentTarget)[0].offsetTop;\n\n            this.bindTouchEvents();\n        },\n\n        onTouchEndBullets: function(event) {\n            this.unbindTouchEvents();\n        },\n\n        onTouchCancelBullets: function(event) {\n            this.unbindTouchEvents();\n        },\n\n        onTouchMoveBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.originalEvent.touches[0].clientX - this.mouseOffset.x;\n            var top = event.originalEvent.touches[0].clientY - this.mouseOffset.y;\n            var $currentTarget = $(event.currentTarget);\n            var currentTargetWidth = $currentTarget.width();\n            var right = $('.highlight-moreDescription-container').width() - $currentTarget[0].offsetWidth;\n            var blockTop = $currentTarget.closest('.block').height() - $($(this)[0].el).height() - 40;\n            var bottom = $currentTarget.closest('.block').height() - $currentTarget.height() - blockTop;\n            if (top < -20) top = -20;\n            if (top > bottom) top = bottom;\n            if (left < 0) left = 0;\n            if (left > right) left = right;\n            $currentTarget.css({\n                'left': left + 'px',\n                'top': top + 'px'\n            });\n        },\n\n        closeClicked: function(event) {//console.log(\"closeClicked\");\n            var currentElement = event.currentTarget;\n            var $blockContentItemsBullets = $(currentElement).closest(\".popup-with-add-sign-open\");\n            $blockContentItemsBullets.addClass(\"hideMoreDescription\");\n        },\n\n        toggleAllLabel: function(event) {\n            var $showHideButton = $(event.currentTarget);\n            var showPopupText = this.model.get(\"_showPopupText\");\n            var hidePopupText = this.model.get(\"_hidePopupText\");\n            var flag = $showHideButton.hasClass(\"show\");\n            var item = this.model.get(\"_items\");\n            var hasHighlights = this.model.get(\"_isHighlightEnable\");\n            var similarItem, id, counter = 0;\n\n            if (flag) {\n                for (var i = 0; i < item.length; i++) {\n                    var currentItemId = item[i].id;\n                    similarItem = item[i]._similarItemId;\n                    var $popup=this.$(\"#item-\" + currentItemId);\n\n                    if (similarItem != undefined && similarItem.length != 0) {\n                        for (var j = 0; j < similarItem.length; j++) {\n                            id = similarItem[j];\n                            var similarItemIdForPopup = item[i]._similarItemIdForPopup;\n                            if (similarItemIdForPopup != 0) {\n                                $popup.removeClass(\"hideDescription\");\n                            }\n                            else {\n                                $popup.addClass(\"hideDescription\");\n                            }\n                        }\n                    }\n                    else {\n                        $popup.removeClass(\"hideDescription\");\n                        this.$(\".popup-with-add-sign-open\").addClass(\"hideMoreDescription\");\n\n                    }\n                }\n                $showHideButton.removeClass(\"show\").html(hidePopupText);\n                if (hasHighlights) {\n                    this.$(\".labelGenerator-highlight\").removeClass(\"hideHighlight\");\n                }\n                //this.setAllVisited();\n            }\n            else {\n                this.$(\".labelGenerator-item\").addClass(\"hideDescription\");\n                this.$(\".popup-with-add-sign-open\").addClass(\"hideMoreDescription\");\n                if (hasHighlights) {\n                    this.$(\".labelGenerator-highlight\").addClass(\"hideHighlight\");\n                }\n                $showHideButton.addClass(\"show\").html(showPopupText);\n            }\n        },\n\n        popupTextLength:function($popup){\n            var popupText = $popup.find(\".popup-text\").text();\n            var words = popupText.split(\" \");\n            $popup.css(\"width\",words.length*100+\"px\");\n        },\n\n        setPopupPosition:function($popup,index){\n            var position = this.model.get(\"_items\")[index]._popupPosition;\n            var $popupOpen = $popup.find(\".popup-open\");\n            var popupWidth=$popupOpen.outerWidth();\n\n            if(position == \"left\"){\n                $popupOpen.css({marginLeft:-(popupWidth),marginTop:17});\n            }\n        },\n\n        setVisited: function(index){\n            var item = this.model.get('_items')[index-1];\n            item._isVisited = true;\n            this.checkCompletionStatus();\n        },\n\n        showMoreDescription: function(event) {\n            var $moreDescription = $(event.currentTarget);\n            var moreDescriptionId=$moreDescription.parent().parent().attr('id').split('-')[1];\n            var $openPopup = this.$(\"#moreDesc-\"+(moreDescriptionId-1));\n\n            if( $openPopup.hasClass(\"hideMoreDescription\")){\n                this.$(\".popup-with-add-sign-open\").addClass(\"hideMoreDescription\");\n                $openPopup.removeClass(\"hideMoreDescription\");\n            }\n            else{\n                $openPopup.addClass(\"hideMoreDescription\");\n            }\n            this.setVisited(moreDescriptionId);\n        },\n\n        hideMoreDescription : function(event) {\n            var $moreDescription = $(event.target);\n            if(!$moreDescription.hasClass(\"popup-with-add-sign-open\") && !$moreDescription.hasClass(\"popup-more-image\")){\n                $moreDescription= $moreDescription.parent();\n            }\n            else if($moreDescription.hasClass(\"popup-more-image\")){\n                $moreDescription= $moreDescription.parent().parent();\n            }\n            $moreDescription.addClass(\"hideMoreDescription\");\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item._isVisited;\n            });\n        },\n\n        setAllVisited: function(){\n            _.each(this.model.get('_items'), function(item) {\n                item._isVisited = true;\n            });\n            this.checkCompletionStatus();\n        },\n\n        checkCompletionStatus:function(){\n            if (!this.model.get('_isComplete')) {\n                if (this.getVisitedItems().length == this.model.get('_items').length) {\n                    this.setCompletionStatus();\n                }\n            }\n        },\n\n        updateCompletionStatus: function() {\n            _.each(this.model.get('_items'), function(item) {\n                if(!item._hasExtraDescription) {\n                    item._isVisited = true;\n                }\n            });\n            this.checkCompletionStatus();\n        },\n\n        reRender: function() {\n            if (Adapt.device.screenSize != 'large') {\n            }\n        },\n\n        replaceWithNarrative:function(){\n            if (!Adapt.componentStore.labelGeneratorMobile) throw \"Narrative not included in build\";\n            var LabelGeneratorMobile = Adapt.componentStore.labelGeneratorMobile;\n\n            var model = this.prepareNarrativeModel();\n            var newNarrative = new LabelGeneratorMobile({model: model, $parent: this.options.$parent});\n            newNarrative.reRender();\n            newNarrative.setupNarrative();\n            this.options.$parent.append(newNarrative.$el);\n            Adapt.trigger('device:resize');\n            this.remove();\n        },\n\n        prepareNarrativeModel:function(){\n            var model = this.model;\n            model.set('_component', 'labelGeneratorMobile');\n            model.set('_wasLabelGenerator', true);\n            model.set('body', model.get('body'));\n            model.set('instruction', model.get('instruction'));\n\n            return model;\n        }\n\n    });\n\n    Adapt.register('labelGenerator', LabelGenerator);\n\n    return LabelGenerator;\n\n});\n\n",
    "/*\n * adapt-narrativeWithEdgeAnimation\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-narrativeWithEdgeAnimation/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-narrativeWithEdgeAnimation/js/adapt-narrativeWithEdgeAnimation',['require','coreViews/componentView','coreJS/adapt'],function(require) {\n\n    var ComponentView = require('coreViews/componentView');\n    var Adapt = require('coreJS/adapt');\n\n    var NarrativeWithEdgeAnimation = ComponentView.extend({\n\n        events: {\n            'click .narrative-strapline-title': 'openPopup',\n            'click .narrative-controls': 'onNavigationClicked',\n            'click .narrative-indicators .narrative-progress': 'onProgressClicked'\n        },\n\n        preRender: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.listenTo(Adapt, 'device:resize', this.resizeControl, this);\n            this.listenTo(Adapt, 'notify:closed', this.closeNotify, this);\n            this.setDeviceSize();\n\n            // Checks to see if the narrative should be reset on revisit\n            this.checkIfResetOnRevisit();\n\n            this.model.set({\n                'AdobeEdges': [],\n                'edgeCompositionIds': [],\n                'edgeCompositionStages': []\n            });\n        },\n\n        setDeviceSize: function() {\n            if (Adapt.device.screenSize === 'large') {\n                this.$el.addClass('desktop').removeClass('mobile');\n                this.model.set('_isDesktop', true);\n            } else {\n                this.$el.addClass('mobile').removeClass('desktop');\n                this.model.set('_isDesktop', false)\n            }\n        },\n\n        postRender: function() {\n            this.renderState();\n            this.$('.narrative-slider').imageready(_.bind(function() {\n                this.setReadyStatus();\n            }, this));\n            this.setupNarrative();\n\n            var AdobeEdges = this.model.get('AdobeEdges');\n            var $narrativeSliderGraphic = this.$('.narrative-slider-graphic');\n            var that = this;\n            _.each(this.model.get('_items'), function(item, index) {\n                if (item._iframe && item._iframe.src) {\n                    var $iframe = $narrativeSliderGraphic.eq(index).find('iframe');\n                    $iframe.load(function() {\n                        AdobeEdges[index] = $iframe.get(0).contentWindow.AdobeEdge;\n\n                        if (AdobeEdges.length > 0) {\n                            window.AdobeEdge = AdobeEdges[index];\n                            AdobeEdges[index].bootstrapCallback(function(compId) {\n                                if (compId && compId.length > 0) {\n                                    that.onEdgeAnimationLoaded(index, compId);\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n        },\n\n        // Used to check if the narrative should reset on revisit\n        checkIfResetOnRevisit: function() {\n            var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n            // If reset is enabled set defaults\n            if (isResetOnRevisit) {\n                this.model.reset(isResetOnRevisit);\n                this.model.set({ _stage: 0 });\n\n                _.each(this.model.get('_items'), function(item) {\n                    item.visited = false;\n                });\n            }\n        },\n\n        setupNarrative: function() {\n            this.setDeviceSize();\n            this.model.set('_marginDir', 'left');\n            if (Adapt.config.get('_defaultDirection') == 'rtl') {\n                this.model.set('_marginDir', 'right');\n            }\n\n            this.model.set('_itemCount', this.model.get('_items').length);\n            //_sourcedItems used for storing all the iframe source in an array\n            var items = this.model.get('_items');\n\n            this.model.set('_active', true);\n\n            if (this.model.get('_stage')) {\n                this.setStage(this.model.get('_stage'), true);\n            } else {\n                this.setStage(0, true);\n            }\n            this.calculateWidths();\n\n            if (Adapt.device.screenSize !== 'large' && !this.model.get('_wasHotgraphic')) {\n                this.replaceInstructions();\n            }\n\n            // if hasNavigationInTextArea set margin left\n            var hasNavigationInTextArea = this.model.get('_hasNavigationInTextArea');\n            if (hasNavigationInTextArea == true) {\n                var indicatorWidth = this.$('.narrative-indicators').width();\n                var marginLeft = indicatorWidth / 2;\n\n                this.$('.narrative-indicators').css({\n                    marginLeft: '-' + marginLeft + 'px'\n                });\n            }\n\n            this.setupEventListeners();\n        },\n\n        injectEdgeObject: function(index) {\n            var AdobeEdges = this.model.get(\"AdobeEdges\");\n            if (AdobeEdges[index] && (!AdobeEdges[index].compositions[this.model.get(\"edgeCompositionIds\")[index]])) {\n                window.AdobeEdge = AdobeEdges[index];\n            }\n        },\n\n        onEdgeAnimationLoaded: function(index, compId) {\n            this.setReadyStatus();\n            this.model.get(\"edgeCompositionIds\")[index] = compId;\n            var AdobeEdges = this.model.get(\"AdobeEdges\");\n            var compositionStage = AdobeEdges[index].getComposition(compId).getStage();\n            this.model.get('edgeCompositionStages')[index] = compositionStage;\n        },\n\n        playEdgeAnimation: function(index) {\n            var composition = this.model.get('edgeCompositionStages')[index];\n            if (composition) {\n                this.injectEdgeObject(index);\n                composition.stop(0);\n                composition.play();\n            }\n        },\n\n        stopEdgeAnimation: function(index) {\n            var composition = this.model.get('edgeCompositionStages')[index];\n            if (composition) {\n                this.injectEdgeObject(index);\n                composition.stop(0);\n            }\n        },\n\n        calculateWidths: function() {\n            var slideWidth = this.$('.narrative-slide-container').width();\n            var slideCount = this.model.get('_itemCount');\n            var marginRight = this.$('.narrative-slider-graphic').css('margin-right');\n            var extraMargin = marginRight === '' ? 0 : parseInt(marginRight);\n            var fullSlideWidth = (slideWidth + extraMargin) * slideCount;\n            var iconWidth = this.$('.narrative-popup-open').outerWidth();\n\n            this.$('.narrative-slider-graphic').width(slideWidth);\n            this.$('.narrative-strapline-header').width(slideWidth);\n            this.$('.narrative-strapline-title').width(slideWidth);\n\n            this.$('.narrative-slider').width(fullSlideWidth);\n            this.$('.narrative-strapline-header-inner').width(fullSlideWidth);\n\n            var stage = this.model.get('_stage');\n            var margin = -(stage * slideWidth);\n\n            this.$('.narrative-slider').css(('margin-' + this.model.get('_marginDir')), margin);\n            this.$('.narrative-strapline-header-inner').css(('margin-' + this.model.get('_marginDir')), margin);\n            this.model.set('_finalItemLeft', fullSlideWidth - slideWidth);\n\n            if (this.model.get(\"_shouldScale\")) {\n\n                _.each(this.model.get('_items'), function(item, index) {\n\n                    if (item._iframe && item._iframe.src) {\n                        var scale = slideWidth / item._iframe._width;\n                        this.$('iframe').css({\n                            '-ms-transform': 'scale(' + scale + ')',\n                            '-moz-transform': 'scale(' + scale + ')',\n                            '-webkit-transform': 'scale(' + scale + ')',\n                            '-webkit-transform-style': 'preserve-3d',\n                            '-webkit-transform': 'scale3d(' + scale + ',' + scale + ',' + scale + ')',\n                            'transform': 'scale(' + scale + ')'\n                        });\n\n                        _.defer(_.bind(function() {\n                            this.$('.narrative-slider-graphic').eq(index).height(item._iframe._height * scale);\n                        }, this));\n                    }\n                });\n            }\n        },\n\n        resizeControl: function() {\n            this.setDeviceSize();\n            this.replaceInstructions();\n            this.calculateWidths();\n            this.evaluateNavigation();\n        },\n\n        reRender: function() {\n            if (this.model.get('_wasHotgraphic') && Adapt.device.screenSize == 'large') {\n                this.replaceWithHotgraphic();\n            } else {\n                this.resizeControl();\n            }\n        },\n\n        closeNotify: function() {\n            this.evaluateCompletion();\n        },\n\n        replaceInstructions: function() {\n            if (Adapt.device.screenSize === 'large') {\n                this.$('.narrative-instruction-inner').html(this.model.get('instruction')).a11y_text();\n            } else if (this.model.get('mobileInstruction') && !this.model.get('_wasHotgraphic')) {\n                this.$('.narrative-instruction-inner').html(this.model.get('mobileInstruction')).a11y_text();\n            }\n        },\n\n        replaceWithHotgraphic: function() {\n            if (!Adapt.componentStore.hotgraphic) throw \"Hotgraphic not included in build\";\n            var Hotgraphic = Adapt.componentStore.hotgraphic;\n            var model = this.prepareHotgraphicModel();\n            var newHotgraphic = new Hotgraphic({ model: model });\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n\n            $container.append(newHotgraphic.$el);\n            this.remove();\n            _.defer(function() {\n                Adapt.trigger('device:resize');\n            });\n        },\n\n        prepareHotgraphicModel: function() {\n            var model = this.model;\n            model.set('_component', 'hotgraphic');\n            model.set('body', model.get('originalBody'));\n            model.set('instruction', model.get('originalInstruction'));\n            return model;\n        },\n\n        moveSliderToIndex: function(itemIndex, animate, callback) {\n            var extraMargin = parseInt(this.$('.narrative-slider-graphic').css('margin-right'));\n            var movementSize = this.$('.narrative-slide-container').width() + extraMargin;\n            var marginDir = {};\n            if (animate && !Adapt.config.get('_disableAnimation')) {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.narrative-slider').velocity(\"stop\", true).velocity(marginDir);\n                this.$('.narrative-strapline-header-inner').velocity(\"stop\", true).velocity(marginDir, { complete: callback });\n            } else {\n                marginDir['margin-' + this.model.get('_marginDir')] = -(movementSize * itemIndex);\n                this.$('.narrative-slider').css(marginDir);\n                this.$('.narrative-strapline-header-inner').css(marginDir);\n                callback();\n            }\n        },\n\n        setStage: function(stage, initial) {\n            this.model.set('_stage', stage);\n            if (this.model.get('_isDesktop')) {\n                // Set the visited attribute for large screen devices\n                var currentItem = this.getCurrentItem(stage);\n                currentItem.visited = true;\n            }\n\n            this.$('.narrative-progress:visible').removeClass('selected').eq(stage).addClass('selected');\n            this.$('.narrative-slider-graphic').children('.controls').a11y_cntrl_enabled(false);\n            this.$('.narrative-slider-graphic').eq(stage).children('.controls').a11y_cntrl_enabled(true);\n            this.$('.narrative-content-item').addClass('narrative-hidden').a11y_on(false).eq(stage).removeClass('narrative-hidden').a11y_on(true);\n            this.$('.narrative-strapline-title').a11y_cntrl_enabled(false).eq(stage).a11y_cntrl_enabled(true);\n\n            this.evaluateNavigation();\n            this.evaluateCompletion();\n\n            this.moveSliderToIndex(stage, !initial, _.bind(function() {\n                if (this.model.get('_isDesktop')) {\n                    if (!initial) this.$('.narrative-content-item').eq(stage).a11y_focus();\n                } else {\n                    if (!initial) this.$('.narrative-popup-open').a11y_focus();\n                }\n            }, this));\n        },\n\n        constrainStage: function(stage) {\n            if (stage > this.model.get('_items').length - 1) {\n                stage = this.model.get('_items').length - 1;\n            } else if (stage < 0) {\n                stage = 0;\n            }\n            return stage;\n        },\n\n        constrainXPosition: function(previousLeft, newLeft, deltaX) {\n            if (newLeft > 0 && deltaX > 0) {\n                newLeft = previousLeft + (deltaX / (newLeft * 0.1));\n            }\n            var finalItemLeft = this.model.get('_finalItemLeft');\n            if (newLeft < -finalItemLeft && deltaX < 0) {\n                var distance = Math.abs(newLeft + finalItemLeft);\n                newLeft = previousLeft + (deltaX / (distance * 0.1));\n            }\n            return newLeft;\n        },\n\n        evaluateNavigation: function() {\n            var currentStage = this.model.get('_stage');\n            var itemCount = this.model.get('_itemCount');\n            if (currentStage == 0) {\n                this.$('.narrative-control-left').addClass('narrative-hidden');\n\n                if (itemCount > 1) {\n                    this.$('.narrative-control-right').removeClass('narrative-hidden');\n                }\n            } else {\n                this.$('.narrative-control-left').removeClass('narrative-hidden');\n\n                if (currentStage == itemCount - 1) {\n                    this.$('.narrative-control-right').addClass('narrative-hidden');\n                } else {\n                    this.$('.narrative-control-right').removeClass('narrative-hidden');\n                }\n            }\n\n        },\n\n        getNearestItemIndex: function() {\n            var currentPosition = parseInt(this.$('.narrative-slider').css('margin-left'));\n            var graphicWidth = this.$('.narrative-slider-graphic').width();\n            var absolutePosition = currentPosition / graphicWidth;\n            var stage = this.model.get('_stage');\n            var relativePosition = stage - Math.abs(absolutePosition);\n\n            if (relativePosition < -0.3) {\n                stage++;\n            } else if (relativePosition > 0.3) {\n                stage--;\n            }\n\n            return this.constrainStage(stage);\n        },\n\n        getCurrentItem: function(index) {\n            return this.model.get('_items')[index];\n        },\n\n        getVisitedItems: function() {\n            return _.filter(this.model.get('_items'), function(item) {\n                return item.visited;\n            });\n        },\n\n        evaluateCompletion: function() {\n            if (this.getVisitedItems().length === this.model.get('_items').length) {\n                this.trigger('allItems');\n            }\n        },\n\n        moveElement: function($element, deltaX) {\n            var previousLeft = parseInt($element.css('margin-left'));\n            var newLeft = previousLeft + deltaX;\n\n            newLeft = this.constrainXPosition(previousLeft, newLeft, deltaX);\n            $element.css(('margin-' + this.model.get('_marginDir')), newLeft + 'px');\n        },\n\n        openPopup: function(event) {\n            event.preventDefault();\n            var currentItem = this.getCurrentItem(this.model.get('_stage'));\n            var popupObject = {\n                title: currentItem.title,\n                body: currentItem.body\n            };\n            // Set the visited attribute for small and medium screen devices\n            currentItem.visited = true;\n\n            Adapt.trigger('notify:popup', popupObject);\n        },\n\n        onNavigationClicked: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            if (!this.model.get('_active')) return;\n\n            var stage = this.model.get('_stage');\n            var numberOfItems = this.model.get('_itemCount');\n\n            if ($(event.currentTarget).hasClass('narrative-control-right')) {\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.stopEdgeAnimation(stage);\n                }\n                stage++;\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.playEdgeAnimation(stage);\n                }\n            } else if ($(event.currentTarget).hasClass('narrative-control-left')) {\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.stopEdgeAnimation(stage);\n                }\n                stage--;\n                if (this.model.get('_items')[stage]._iframe) {\n                    this.playEdgeAnimation(stage);\n                }\n            }\n            stage = (stage + numberOfItems) % numberOfItems;\n            this.setStage(stage);\n        },\n\n        onProgressClicked: function(event) {\n            event.preventDefault();\n            var clickedIndex = $(event.target).index();\n            this.setStage(clickedIndex);\n        },\n\n        onInview: function(event, visible, visiblePartX, visiblePartY) {\n            if (visible) {\n                if (visiblePartY === 'top') {\n                    this._isVisibleTop = true;\n                } else if (visiblePartY === 'bottom') {\n                    this._isVisibleBottom = true;\n                } else {\n                    this._isVisibleTop = true;\n                    this._isVisibleBottom = true;\n                }\n                if (this._isVisibleTop && this._isVisibleBottom) {\n                    //this.$('.component-inner').off('inview');\n                    if(this.completionEvent === 'inview' && this.model.get('_items').length <= 1) {\n                        this.setCompletionStatus();\n                    }\n                    this.playEdgeAnimation(this.model.get('_stage'));\n                }\n            } else {\n                this.stopEdgeAnimation(this.model.get('_stage'));\n            }\n        },\n\n        onCompletion: function() {\n            this.setCompletionStatus();\n            if (this.completionEvent && this.completionEvent != 'inview') {\n                this.off(this.completionEvent, this);\n            }\n        },\n\n        setupEventListeners: function() {\n            this.completionEvent = (!this.model.get('_setCompletionOn')) ? 'allItems' : this.model.get('_setCompletionOn');\n            if (this.completionEvent !== 'inview' && this.model.get('_items').length > 1) {\n                this.on(this.completionEvent, _.bind(this.onCompletion, this));\n            }\n            this.$('.component-widget').on('inview', _.bind(this.onInview, this));\n        }\n\n    });\n\n    Adapt.register('narrativeWithEdgeAnimation', NarrativeWithEdgeAnimation);\n\n    return NarrativeWithEdgeAnimation;\n\n});\n\n",
    "/*\n * adapt-objectMatching\n * Copyright (C) 2015 Bombardier Inc. (www.batraining.com)\n * https://github.com/BATraining/adapt-objectMatching/blob/master/LICENSE\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\ndefine('components/adapt-objectMatching/js/adapt-objectMatching',['require','coreViews/questionView','coreJS/adapt'],function(require) {\n\n    var QuestionView = require('coreViews/questionView');\n    var Adapt = require('coreJS/adapt');\n\n    var ObjectMatching = QuestionView.extend({\n\n        events: {\n            'click .draggable-item': 'onClickDragItem',\n            'click .droppable-item': 'onClickDropItem'\n        },\n\n        resetQuestionOnRevisit: function() {\n            this.resetQuestion();\n        },\n\n        setupQuestion: function() {\n            this.listenTo(Adapt, 'device:changed', this.reRender, this);\n            this.model.set('_currentlySelectedItemId', '');\n\n            this.setupRandomisation();\n\n            _.each(this.model.get(\"_draggableItems\"), function(item, index) {\n                item._index = item._index || (index + 1);\n            });\n        },\n\n        setupRandomisation: function() {\n            if (this.model.get('_isRandom') && this.model.get('_isEnabled')) {\n                this.model.set('_draggableItems', _.shuffle(this.model.get('_draggableItems')));\n            }\n\n            if (!this.model.get('_isSubmitted')) {\n                this.model.set('_droppableItems', _.shuffle(this.model.get('_droppableItems')));\n            }\n        },\n\n        onQuestionRendered: function() {\n            if (this.$('.objectMatching-widget').find('img').length > 0) {\n                this.$('.objectMatching-widget').imageready(_.bind(function() {\n                    this.setReadyStatus();\n                }, this));\n            } else {\n                this.setReadyStatus();\n            }\n\n            this.model.set('_initialObjectMatchingWidgetView', this.$('.objectMatching-widget').html());\n        },\n\n        setupObjectMatching: function() {\n            var draggableItems = this.model.get('_draggableItems');\n            _.each(this.$('.draggable-item-index'), function(item, index) {\n                $(item).html(draggableItems[index]._index);\n            });\n\n            if(this.model.get('_isSubmitted')) {\n                this.showMarking();\n            }\n        },\n\n        reRender: function() {\n            if (this.model.get('_wasDragAndDrop') && Adapt.device.screenSize == 'large') {\n                this.replaceWithDragAndDrop();\n            }\n        },\n\n        replaceWithDragAndDrop: function() {\n            if (!Adapt.componentStore.dragAndDrop) throw \"Drag And Drop not included in build\";\n\n            var DragAndDrop = Adapt.componentStore.dragAndDrop;\n            var model = this.prepareDragAndDropModel();\n            var newDragAndDrop = new DragAndDrop({model: model});\n            var $container = $(\".component-container\", $(\".\" + this.model.get(\"_parentId\")));\n\n            if(model.get('_initialDragAndDropWidgetView')) {\n                newDragAndDrop.$el.find('.dragAndDrop-widget').html(model.get('_initialDragAndDropWidgetView'));\n            }\n            if(model.get('_isSubmitted')) {\n                newDragAndDrop.showMarking();\n            }\n\n            $container.append(newDragAndDrop.$el);\n            this.remove();\n            _.defer(function() {\n                Adapt.trigger('device:resize');\n            });\n        },\n\n        prepareDragAndDropModel: function() {\n            var model = this.model;\n            model.set('_component', 'dragAndDrop');\n            return model;\n        },\n\n        onClickDragItem: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n\n            if (!this.model.get('_isEnabled')) {\n                return false;\n            }\n\n            var $selectedElement = this.$(event.currentTarget);\n            var $selectedElementContainer = $selectedElement.closest('.objectMatching-item-wrapper');\n            var currentlySelectedItemId = $selectedElement.attr('data-id');\n            var currentlySelectedItem = _.where(this.model.get('_draggableItems'), {id: currentlySelectedItemId})[0];\n\n            if (currentlySelectedItemId == this.model.get('_currentlySelectedItemId')) {\n                $selectedElementContainer.removeClass('selected');\n                this.$('.droppable-item').removeClass('cursor-pointer');\n                this.model.set('_currentlySelectedItemId', '');\n            } else {\n                $selectedElementContainer\n                    .addClass('selected')\n                    .siblings('div')\n                    .removeClass('selected');\n                this.$('.droppable-item').addClass('cursor-pointer');\n                this.model.set('_currentlySelectedItemId', currentlySelectedItem.id);\n            }\n        },\n\n        onClickDropItem: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n\n            var currentlySelectedItemId = this.model.get('_currentlySelectedItemId');\n            if (!this.model.get('_isEnabled') || !currentlySelectedItemId) return false;\n\n            var $selectedElement = this.$(event.currentTarget);\n            var $selectedElementContainer = this.$(event.currentTarget).closest('.objectMatching-item-wrapper');\n\n            var selectedElementId = $selectedElement.attr('data-id');\n\n            var draggableItems = this.model.get('_draggableItems');\n            var droppableItems = this.model.get('_droppableItems');\n            var selectedItem = _.where(droppableItems, {id: selectedElementId})[0];\n\n            if(selectedItem._selectedItemId && selectedItem._selectedItemId == currentlySelectedItemId) {\n                $selectedElementContainer.find('.droppable-item-index').html('');\n                $selectedElementContainer.removeClass(\"selected\");\n                selectedItem._selectedItemId = null;\n            } else {\n                var existingSelectedItem = _.where(droppableItems, {_selectedItemId: currentlySelectedItemId})[0];\n\n                if(existingSelectedItem) {\n                    this.$('[data-id=' + existingSelectedItem.id + ']')\n                        .find('.droppable-item-index').html('');\n                    $selectedElementContainer.removeClass(\"selected\");\n                    existingSelectedItem._selectedItemId = null;\n                }\n                $selectedElementContainer\n                    .addClass('selected')\n                    .siblings('div')\n                    .removeClass('selected');\n                $selectedElementContainer\n                    .find('.droppable-item-index')\n                    .html(_.where(draggableItems, {id: currentlySelectedItemId})[0]._index);\n\n                selectedItem._selectedItemId = currentlySelectedItemId;\n            }\n        },\n\n        canSubmit: function() {\n            var count = 0;\n\n            _.each(this.model.get('_droppableItems'), function(item) {\n                if (item._selectedItemId) {\n                    count++;\n                }\n            });\n\n            var canSubmit = (count == this.model.get('_droppableItems').length);\n\n            if(canSubmit) {\n                this.$('.objectMatching-item-wrapper').removeClass('selected');\n                this.$('.droppable-item').removeClass(\"selected\");\n            }\n\n            return canSubmit;\n        },\n\n        // Blank method for question to fill out when the question cannot be submitted\n        onCannotSubmit: function() {},\n\n        storeUserAnswer: function() {\n            var userAnswer = [];\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                userAnswer.push(item._selectedItemId);\n            }, this);\n            this.model.set('_userAnswer', userAnswer);\n        },\n\n        isCorrect: function() {\n            var numberOfRequiredAnswers = this.model.get('_droppableItems').length;\n            var numberOfCorrectAnswers = 0;\n            var numberOfIncorrectAnswers = 0;\n\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n\n                // Set item._isSelected to either true or false\n                var isCorrect = item.correctItemId === item._selectedItemId;\n\n                if (isCorrect) {\n                    // If the item is selected adjust correct answer\n                    numberOfCorrectAnswers++;\n                    // Set item to correct - is used for returning to this component\n                    item._isCorrect = true;\n                    // Set that at least one correct answer has been selected\n                    // Used in isPartlyCorrect method below\n                    this.model.set('_isAtLeastOneCorrectSelection', true);\n                }\n\n            }, this);\n\n            this.model.set('_numberOfCorrectAnswers', numberOfCorrectAnswers);\n\n            // Check if correct answers matches correct items and there are no incorrect selections\n            var answeredCorrectly = (numberOfCorrectAnswers === numberOfRequiredAnswers) && (numberOfIncorrectAnswers === 0);\n            return answeredCorrectly;\n        },\n\n        setScore: function() {\n            var questionWeight = this.model.get('_questionWeight');\n            var answeredCorrectly = this.model.get('_isCorrect');\n            var score = answeredCorrectly ? questionWeight : 0;\n            this.model.set('_score', score);\n        },\n\n        showMarking: function() {\n            _.each(this.model.get('_droppableItems'), function(item, i) {\n\n                var $item = this.$('.droppable-item-wrapper').eq(i);\n                $item.addClass(item._isCorrect ? 'correct' : 'incorrect');\n\n            }, this);\n        },\n\n        isPartlyCorrect: function() {\n            return this.model.get('_isAtLeastOneCorrectSelection');\n        },\n\n        resetUserAnswer: function() {\n            this.model.set('_userAnswer', []);\n        },\n\n        resetQuestion: function() {\n            _.each(this.model.get('_droppableItems'), function(item) {\n                delete item._selectedItemId;\n            });\n\n            this.$('.objectMatching-widget').html(this.model.get('_initialObjectMatchingWidgetView'));\n\n            this.model.set({\n                _currentlySelectedItemId: '',\n                _isAtLeastOneCorrectSelection: false\n            });\n        },\n\n        showCorrectAnswer: function() {\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                this.setdroppableItems(index, item.correctItemId);\n            }, this);\n        },\n\n        setdroppableItems: function(droppableContainerIndex, draggableItemId) {\n\n            var $droppableItemContainer = this.$('.droppable-item').eq(droppableContainerIndex);\n            var draggableItem = _.where(this.model.get('_draggableItems'), {id: draggableItemId})[0];\n\n            $droppableItemContainer\n\n                .find('.droppable-item-index')\n                .html(this.$('.draggable-item').index(this.$('[data-id=' + draggableItem.id + ']')) + 1);\n        },\n\n        hideCorrectAnswer: function() {\n            _.each(this.model.get('_droppableItems'), function(item, index) {\n                this.setdroppableItems(index, this.model.get('_userAnswer')[index]);\n            }, this);\n        }\n\n    });\n\n    Adapt.register('objectMatching', ObjectMatching);\n\n    return ObjectMatching;\n\n});\n\n",
    "define('extensions/adapt-EOM-pageLevelProgress/js/blockNumericProgressView',['require','coreJS/adapt','backbone'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n\n    var BlockNumericProgressView = Backbone.View.extend({\n\n        className: 'page-level-progress-navigation-completion',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(Adapt.blocks, 'change:_isComplete', this.blockChangedAttribute);\n            this.render();\n            this.count=0;\n            this.checkForTOC();\n            this.setBlockIDs();\n            this.updateBlocksCompletedOutOF();\n        },\n        events: {\n            //'click .top-navigator-arrow': 'scrollToPageToTop'\n        },\n        onPageRender: function() {\n            this.render();\n        },\n        checkForTOC: function() {\n            var article = this.model.get('_children').models[0];\n            this.model.set('tocEnabled', false);\n            this.model.set('totalBlocks',this.getTotalBlocks().length);\n            if (article.get('_TOC') && article.get('_TOC')._isEnabled) {\n                this.model.set('tocEnabled', true);\n                this.setupBlocksLink();\n            }\n            return;\n        },\n        blockChangedAttribute: function(model) {\n            if (_.contains(this.model.get('blockIDs'), model.get('_id'))) {\n                this.updateBlocksCompletedOutOF(model);\n            }\n        },\n        setupBlocksLink: function() {\n            var blocks = this.getTotalBlocks();\n            var countsBlockHasDispTitleEmpty=0;\n            if (blocks[0].get('displayTitle') === \"\") {\n                throw \"First block must have displayTitle\";\n            }\n            //Set linkedBlockIds to all block which have linked to each other.\n            for (var i = 0, length = blocks.length; i < length;i++) {\n                for (var j = i + 1; j <length; j++) {\n                    if(blocks[i].get('displayTitle') === \"\"){\n                        blocks[i].set('linkedBlockId',blocks[i-1].get('linkedBlockId'));\n                        countsBlockHasDispTitleEmpty++;\n                        break;\n                    }\n                    if (blocks[j].get('displayTitle') === \"\") {\n                        var ar=blocks[i].get('linkedBlockId')||[blocks[i].get('_id')];\n                        ar.push(blocks[j].get('_id'));\n                        blocks[i].set('linkedBlockId',ar);\n                    }else{\n                        break;\n                    }\n                }\n            }\n            //don't count block which having empty displayTitle\n            this.model.set('totalBlocks',blocks.length-countsBlockHasDispTitleEmpty);\n        },\n        updateBlocksCompletedOutOF: function(model) {\n            var noOfBlocks = this.model.get('totalBlocks'); //this.getTotalBlocks().length;\n            var completedBlocks = this.getTotalCompletionBlocks(model); //this.model.get(\"blockComplate\");\n            var complateOutOfTotal = this.getPadded(completedBlocks) + '/' + this.getPadded(noOfBlocks);\n            this.$('.page-level-progress-numericCount-bar').html(complateOutOfTotal);\n            this.$('.page-level-progress-numericCount-bar-mask').html(complateOutOfTotal);\n        },\n        getPadded: function(num) {\n            return num > 9 ? num : '0' + num;\n        },\n        setBlockIDs: function() {\n            var blocksId = [];\n            _.each(this.getTotalBlocks(), function(obj) {\n                blocksId.push(obj.get('_id'));\n            });\n            this.model.set('blockIDs', blocksId);\n            //return blocksName;\n        },\n        getTotalBlocks: function() {\n            return this.model.findDescendants('blocks').where({\n                '_isAvailable': true\n            });\n        },\n        getTotalCompletionBlocks: function(currentCompleteBlock) {\n            if(currentCompleteBlock==undefined) return 0;\n            if(currentCompleteBlock.get('linkedBlockId')){\n                if(this.isLinkedBlocksCompleted(currentCompleteBlock.get('linkedBlockId'))){\n                   this.count++;\n                }\n            }else{\n                this.count++;\n            }\n           return this.count;\n        },\n        isLinkedBlocksCompleted: function(linkedBlockIds) {\n            var blocks = this.getTotalBlocks();\n            var booleanArray=[];\n             for(i=0;i<linkedBlockIds.length;i++){\n                for(j=0;j<blocks.length;j++){\n                    if(blocks[j].get(\"_id\")===linkedBlockIds[i]){\n                        if(blocks[j].get('_isComplete')){\n                            booleanArray.push(true);\n                        }else{\n                            booleanArray.push(false);\n                        }\n                        break;\n                    }\n                }\n             }\n            return !(_.contains(booleanArray,false));\n        },\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[\"blockNumericProgress\"];\n            var _eomPageLevelProgress = Adapt.course.get('_eomPageLevelProgress');\n            if (_eomPageLevelProgress && _eomPageLevelProgress._isEnabled) {\n                this.$el.html(template(data));\n            }\n            return this;\n        }\n    });\n\n    return BlockNumericProgressView;\n\n});\n",
    "define('extensions/adapt-EOM-pageLevelProgress/js/adapt-EOM-pageLevelProgress',['require','coreJS/adapt','backbone','extensions/adapt-EOM-pageLevelProgress/js/blockNumericProgressView'],function(require) {\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var BlockNumericProgressView = require('extensions/adapt-EOM-pageLevelProgress/js/blockNumericProgressView');\n\n    function setupBlockStatusView(page) {\n        $('.page-level-progress-navigation-completion').replaceWith(new BlockNumericProgressView({model: page.model}).$el);\n    }\n\n    Adapt.on('pageView:preRender', function(page) {\n        if (!Adapt.course.get('_eomPageLevelProgress') || !Adapt.course.get('_eomPageLevelProgress')._isEnabled) {\n            return;\n        }\n        if(!Adapt.course.get('_pageLevelProgress')|| !Adapt.course.get('_pageLevelProgress')._isEnabled)\n           return;\n         setupBlockStatusView(page);\n    });\n\n});\n",
    "/**\n * Shows a element as a modal dialog\n * \n * Usage: $('#selector').modal({settings:value});\n *\n * Options:\n * - closeButton string          Css selector to be used to close the dialog. Defaults to '.close'\n * - escClose    boolean         Whether the dialog should be closed when pressing the ESC key. Defaults to true.\n * - onCloseFn   function        Callback function when the dialog has been closed\n * - onOpenFn    function        Callback function when the dialog has been opened\n * - modal       boolean         Whether or not this is a modal dialog. Defaults to true.\n * - effect      string          The effect to use when opening a modal: scale, slide-right, slide-right, slide-bottom, newspaper, fall, slide-fall, sticky-top, flip-horizontal, flip-vertical, sign, super-scaled, just-me, slit\n * - title       string          The title of the dialog. Defaults to an empty string\n * - callback    function        Callback function when the options.doneButton has been clicked. Form fields will be supplied as data argument, as well as the modal itself. Callback returns true when the modal should be closed, null or false when it shoudl stay open.\n */\n$.fn.modal = function(options) {\n    var defaults = {\n      closeButton : '.close,.cancel',\n      escClose    : true,\n      onCloseFn   : null,\n      onOpenFn    : null,\n      modal       : true,\n      immutable   : false,\n      effect      : null,\n      title       : '',\n      callback    : null,\n      doneButton  : '.done,.ok'\n    };\n    options = $.extend(defaults, options);\n\n    return this.each(function() {\n      var o = options,\n      modal = o.immutable ? $(this) : decorate($(this), o);\n      o.id = createGUID(); // GUID for identifying modal & event handlers\n    \n      // immutable\n      if (o.immutable){\n       $(this).addClass(\"immutable\"); \n      }\n\n      // show overlay\n      if ( $('.modal-overlay').length < 1){\n        modal.parent().append($(\"<div class='modal-overlay'></div>\"));\n      }\n\n      // add close event handler to overlay\n      $(\".modal-overlay\").click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o);\n      });\n\n      // add close event handler to close buttons\n      $(o.closeButton).click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o)\n      });\n      \n      if (o.escClose){\n        // add close event handler to ESC key. Event is namespaced, so we can remove it after we've closed the modal\n        $(window).on('keydown.'+o.id, function(event) {\n            if (event.which === 27){\n                closeModal(modal, o);\n            }\n        });\n      };\n\n      $(o.doneButton, modal).on('click.callback', function(e){\n        e.preventDefault();\n        if (typeof o.callback === \"function\"){\n          var data = {};\n          $(\":input\", modal ).each(function(i, element){\n            data[$(element).attr('name')] = $(element).val();\n          });\n          var result = o.callback( data, modal );\n          if (result === true){\n            closeModal(modal, o);\n          }\n        }\n      });\n\n      if (typeof o.effect === 'string'){\n        modal.addClass(o.effect, modal);\n      }\n\n      // start with a delay to allow the effect to kick in\n      setTimeout(function(){modal.addClass('modal-show');}, 150);\n      \n      // initialize\n      if (typeof o.onOpenFn === 'function'){\n        o.onOpenFn(modal);\n      }\n\n    });\n\n    /**\n     * Decorate the modal provided. When only supplying the modal body, decorate it with additional modal elements (content, head, titile, close button)\n     *\n     * @param jquery the modal element\n     * @param object options the modal options\n     */\n    function decorate(modal, options){\n      if (modal.find('.body').length === 0){\n        var body =  $('<div class=\"body\"></div>'), footer, content;\n\n        modal.children().each(function(i,e){\n          if ($(e).is(\".footer\")){\n            footer = $(e);\n          }else{\n            body.append(e);\n          }\n        });\n        \n        content = $('<div class=\"content\"></div>');\n        content.append(\n            '<div class=\"head\">\\\n               <a class=\"close\" href=\"#\">&times;</a>\\\n             </div>');\n        content.append(body);\n        content.append(footer);\n        modal.append(content);\n\n        // add the title from options\n        //content.find('.title').html(options.title);\n      }\n      return modal;\n    }\n\n    function createGUID(){\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        });\n      }\n    \n    /*\n     * Close the model\n     */\n    function closeModal(modal, options) {\n      modal.removeClass('modal-show');\n      \n      //Remove the existing overlay on close click\n      $('.modal-overlay').remove();\n\n      //Pause all the videos\n      var videoPause=$(\"video\");\n      for(var i=0;i<videoPause.length;i++){\n        videoPause[i].pause();\n      }\n\n        $(\".embeddedLink-lightBox-iframe-parent\").css({'overflow':'hidden' , '-webkit-overflow-scrolling':'none'})\n      // clean up effect\n      if (typeof options.effect === 'string'){\n        setTimeout(function(){\n          modal.removeClass(options.effect);\n        }, 500);\n      }\n\n      if (typeof options.onCloseFn === 'function'){\n        options.onCloseFn(modal);\n      }\n      \n      // immutable\n      if (options.immutable){\n       $(modal).removeClass(\"immutable\"); \n      }\n\n      // remove event handlers\n      $(window).off('keydown.'+options.id);\n\n      if (typeof options.callback === \"function\"){\n        $(options.doneButton, modal).off('click.callback');\n      }\n    }\n\n  }\n;\ndefine(\"extensions/adapt-TOC/js/jquery.jsmodal\", function(){});\n\n",
    "define('extensions/adapt-TOC/js/TOCView',[\n\t'backbone',\n\t'coreJS/adapt'\n], function(Backbone, Adapt) {\n\n\tvar TOCView = Backbone.View.extend({\n\t\tclassName: 'TOC-container',\n\n\t\ttemplate: 'TOCView',\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(Adapt, 'remove', this.remove);\n\t\t\tthis.listenTo(Adapt, 'TOC:TOCButtonClicked', this.TOCButtonClicked);\n\t\t\tthis.render();\n\t\t\tthis.listenTo(Adapt, 'device:resize', this.resizeContents, this);\n\t\t\tthis.blocksCollection = [];\n\t\t\tthis.emptyPrevBlocks = [];\n\t\t\tthis.blocksTop = [];\n\t\t\tthis.currentVisibleBlock = \"\";\n\t\t\tthis.currentVisibleOriginalBlock = \"\";\n\t\t\tthis.getBlocks(this.model.getChildren());\n\t\t\tthis.bindEvent();\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar template = Handlebars.templates[this.template];\n\t\t\t$('#wrapper').append(template(this.model));\n\t\t\treturn this;\n\t\t},\n\n\t\tinitialWidth: function() {\n\t\t\tvar bwidth = window.innerWidth;\n\t\t\tif (bwidth <= 768) {\n\t\t\t\t$(\".TOC-container\").find(\".content\").addClass(\"not-large\");\n\t\t\t} else {\n\t\t\t\t$(\".TOC-container\").find(\".content\").removeClass(\"not-large\");\n\t\t\t}\n\t\t},\n\n\t\tresizeContents: function() {\n\t\t\tif (Adapt.device.screenWidth <= 768) {\n\t\t\t\t$(\".TOC-container\").find(\".content\").addClass(\"not-large\");\n\t\t\t} else {\n\t\t\t\t$(\".TOC-container\").find(\".content\").removeClass(\"not-large\");\n\t\t\t}\n\t\t},\n\n\t\tgetBlocks: function(blocks) {\n\t\t\tvar emptyTitle = this.checkIfBlockHasTitle(blocks);\n\n\t\t\tif (emptyTitle.length !== 0) {\n\t\t\t\tthis.emptyPrevBlocks = this.getPrevBlockTitle(emptyTitle, blocks);\n\t\t\t}\n\t\t\t$(\".TOC-container\").find(\".title\").append(\"<h3>\" + this.model.get(\"_TOC\").title + \"</h3>\");\n\t\t\t_.each(blocks.models, function(block, index) {\n\t\t\t\tthis.blocksCollection[index] = block;\n\t\t\t\tthis.createBlockPositionList(block);\n\t\t\t\tthis.createList(block, this.emptyPrevBlocks);\n\t\t\t}, this);\n\t\t\tthis.makeSubTitle();\n\t\t},\n\n\t\tcreateBlockPositionList: function(block) {\n\t\t\tvar blockId = block.get(\"_id\");\n\t\t\tvar pos = $(\".\" + blockId).position();\n\t\t\tthis.blocksTop.push(Math.round(pos.top) + 168);\n\t\t},\n\n\t\tmakeSubTitle: function() {\n\t\t\tvar subTitleBlocksId = this.model.get(\"_TOC\").subTitleBlockList;\n\n\t\t\t_.each(subTitleBlocksId, function(blockId, index) {\n\t\t\t\tvar $currentTOCDrawer = $(\".TOCDrawer-\" + blockId);\n\t\t\t\t$currentTOCDrawer.css(\"margin-left\", \"40px\");\n\t\t\t\tif ($currentTOCDrawer.hasClass('has-identifier')) {\n\t\t\t\t\t$currentTOCDrawer.find(\".TOC-identifier-container\").css(\"margin-left\", \"0px\");\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tcreateList: function(block, emptyPrevBlocks) {\n\t\t\tvar blockId = block.get(\"_id\");\n\t\t\tvar blockTitle = block.get(\"displayTitle\");\n\t\t\t_.each(emptyPrevBlocks, function(item, index) {\n\t\t\t\tvar nonEmptyBlock = item.previousNonEmptyBlock;\n\t\t\t\tvar blockId = nonEmptyBlock.get(\"_id\");\n\t\t\t\t$(\".\" + blockId).find(\".block-inner\").css(\"border\", \"none\");\n\t\t\t}, this);\n\t\t\tif (blockTitle != \"Linked\") {\n\t\t\t\tvar blockIdentifier = block.get(\"_blockIdentifier\");\n\t\t\t\tvar blockIdentifierTrackingId = block.get(\"_trackingId\");\n\t\t\t\tvar TOCDrawerInner = \"<div class='TOCDrawer-inner TOCDrawer-\" + blockId + \"'></div>\";\n\t\t\t\t$(\".TOC-drawer\").append(TOCDrawerInner);\n\t\t\t\tvar TOCDrawerInner = $(\".TOCDrawer-\" + blockId);\n\t\t\t\tvar isVisited = \"<div class='TOC-progress TOC-progress-\" + blockId + \"'><i class='TOC-progress-icon'></i><div>\";\n\t\t\t\tvar blockTitle = \"<div class='TOC-title' id='\" + blockId + \"'>\" + blockTitle + \"</div>\";\n\t\t\t\tTOCDrawerInner.append(isVisited);\n\t\t\t\tTOCDrawerInner.append(blockTitle);\n\t\t\t\tif (blockIdentifier != undefined && blockIdentifier._isEnabled) {\n\t\t\t\t\tvar addBlockIdentifierImage = \"<div class='TOC-identifier-graphic'><img src='\" + blockIdentifier._graphicSrc + \"'></div>\";\n\t\t\t\t\tvar addBlockIdentifierText = \"<div class='TOC-identifier-text'></div>\"\n\t\t\t\t\tvar identifierContainer = \"<div class='TOC-identifier-container TOC-identifier-id-\" + blockIdentifierTrackingId + \"'></div>\";\n\t\t\t\t\tTOCDrawerInner.append(identifierContainer);\n\t\t\t\t\tTOCDrawerInner.addClass(\"has-identifier\");\n\t\t\t\t\t$(\".TOC-identifier-id-\" + blockIdentifierTrackingId).append(addBlockIdentifierImage);\n\t\t\t\t\t$(\".TOC-identifier-id-\" + blockIdentifierTrackingId).append(addBlockIdentifierText);\n\t\t\t\t}\n\t\t\t\tthis.checkIfBlockIsCompleted(block, emptyPrevBlocks);\n\t\t\t} else {\n\t\t\t\t$(\".\" + blockId).find(\".block-title-inner\").addClass(\"display-none\");\n\t\t\t\t$(\".\" + blockId).find(\".block-title\").css({\n\t\t\t\t\t\"padding\":\"20px 0 0 0\",\n\t\t\t\t\t\"border-bottom\": \"none\",\n\t\t\t\t\t\"width\": \"0px\"\n\t\t\t\t});\n\t\t\t\t$(\".\" + blockId).css(\"top\", \"0px\");\n\t\t\t}\n\t\t},\n\n\t\tcheckIfBlockHasTitle: function(blocks) {\n\t\t\tvar blockWithNoTitle = _.filter(blocks.models, function(item, index) {\n\t\t\t\tif (item.get(\"displayTitle\") == \"Linked\") {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\treturn blockWithNoTitle;\n\t\t},\n\n\t\tgetPrevBlockTitle: function(emptyTitle, blocks) {\n\t\t\tvar emptyPrevBlock = [];\n\t\t\tvar blockId, emptyTitleBlock;\n\t\t\t_.each(blocks.models, function(block, index) {\n\t\t\t\tvar temp = index;\n\t\t\t\tif (index + 1 == blocks.models.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (index + 1 != blocks.models.length && block.get(\"displayTitle\") != \"Linked\") {\n\t\t\t\t\tif (blocks.models[index + 1].get(\"displayTitle\") == \"Linked\") {\n\t\t\t\t\t\temptyTitleBlock = this.addLinkedBlocks(index + 1, blocks);\n\t\t\t\t\t\temptyPrevBlock.push({\n\t\t\t\t\t\t\tpreviousNonEmptyBlock: block,\n\t\t\t\t\t\t\temptyTitleBlock: emptyTitleBlock\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\treturn emptyPrevBlock;\n\t\t},\n\n\t\taddLinkedBlocks: function(index, blocks) {\n\t\t\tvar emptyTitleBlock = [];\n\t\t\twhile (blocks.models[index].get(\"displayTitle\") == \"Linked\") {\n\t\t\t\temptyTitleBlock.push(blocks.models[index]);\n\t\t\t\tindex++;\n\t\t\t\tif(blocks.models.length === index){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn emptyTitleBlock;\n\t\t},\n\n\t\tcheckIfBlockIsCompleted: function(block, emptyPrevBlocks) {\n\t\t\tvar blockId = block.get(\"_id\");\n\t\t\tvar nonEmptyBlock, emptyBlock;\n\t\t\tvar isLinkedBlocks = false;\n\t\t\t_.each(emptyPrevBlocks, function(item, index) {\n\t\t\t\tnonEmptyBlock = item.previousNonEmptyBlock;\n\t\t\t\temptyBlock = item.emptyTitleBlock;\n\t\t\t\tif (blockId == nonEmptyBlock.get(\"_id\")) {\n\t\t\t\t\tisLinkedBlocks = true;\n\t\t\t\t}\n\t\t\t\t_.each(emptyBlock, function(emptyTitleBlock) {\n\t\t\t\t\tif (blockId == emptyTitleBlock.get(\"_id\")) {\n\t\t\t\t\t\tisLinkedBlocks = true;\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}, this);\n\t\t\tif (isLinkedBlocks) {\n\t\t\t\tthis.checkIfLinkedBlocksCompleted(emptyPrevBlocks);\n\t\t\t} else {\n\t\t\t\tvar isCompleted = block.get(\"_isComplete\");\n\t\t\t\tvar $progressIcon = $(\".TOC-progress-\" + blockId).find('.TOC-progress-icon');\n\t\t\t\tif (isCompleted) {\n\t\t\t\t\tif (!$progressIcon.hasClass('visited')) {\n\t\t\t\t\t\t$progressIcon.addClass(\"visited\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcheckIfLinkedBlocksCompleted: function(emptyPrevBlocks) {\n\t\t\tvar nonEmptyBlock, emptyBlock;\n\t\t\t_.each(emptyPrevBlocks, function(item, index) {\n\t\t\t\tnonEmptyBlock = item.previousNonEmptyBlock;\n\t\t\t\temptyBlock = item.emptyTitleBlock;\n\t\t\t\tif (nonEmptyBlock.get(\"_isComplete\") == true) {\n\t\t\t\t\tvar emptyCompletedBlocks = _.filter(emptyBlock, function(emptyTitleBlock) {\n\t\t\t\t\t\tif (emptyTitleBlock.get(\"_isComplete\") == true) {\n\t\t\t\t\t\t\treturn emptyTitleBlock;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\tif (emptyCompletedBlocks.length == emptyBlock.length) {\n\t\t\t\t\t\tvar $progressIcon = $(\".TOC-progress-\" + nonEmptyBlock.get(\"_id\")).find('.TOC-progress-icon');\n\t\t\t\t\t\tif (!$progressIcon.hasClass('visited')) {\n\t\t\t\t\t\t\t$progressIcon.addClass(\"visited\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tTOCButtonClicked: function() {\n\t\t\tvar blockId;\n\t\t\t_.each(this.blocksCollection, function(block, index) {\n\t\t\t\tblockId = block.get(\"_id\");\n\t\t\t\tthis.addBlockIdentifierText(block);\n\t\t\t\tthis.checkIfBlockIsCompleted(block, this.emptyPrevBlocks);\n\t\t\t}, this);\n\t\t\tthis.initialWidth();\n\t\t\tvar $close = $(\".TOC-container\").find(\".close\");\n\t\t\t$close.on(\"click\", _.bind(this.modalClosed, this));\n\t\t\t$(\".TOC-container\").on(\"click\", _.bind(this.modalOverlayClicked, this));\n\t\t\tthis.currentBlockHighlighted();\n\t\t\t_.delay(this.addSlideEffect, 200);\n\t\t},\n\n\t\taddSlideEffect: function() {\n\t\t\t$(\".TOC-container\").find(\".content\").css(\"right\", \"0px\");\n\t\t},\n\n\t\tmodalClosed: function() {\n\t\t\t$(\".TOC-container\").find(\".content\").css(\"right\", \"-650px\");\n\t\t\t$(\".TOC-container\").find(\".close\").off(\"click\");\n\t\t\tAdapt.trigger('TOC:TOCCloseClicked');\n\t\t},\n\n\t\tmodalOverlayClicked:function(){\n            console.log(\"In overlay clicked\");\n            var $currentElement = $(event.currentTarget);\n            var $blockTOC = $currentElement.closest(\".TOC-container\");\n            $blockTOC.removeClass(\"modal-show\");\n            $('.modal-overlay').remove();\n            this.modalClosed();\n        },\n\n\t\tbindEvent: function() {\n\t\t\tvar blockId;\n\t\t\t_.each(this.blocksCollection, function(block, index) {\n\t\t\t\tblockId = block.get(\"_id\");\n\t\t\t\tthis.bindInview(blockId);\n\t\t\t}, this);\n\t\t\t$(\".TOCDrawer-inner\").on(\"click\", _.bind(this.TOCTitleClicked, this));\n\t\t},\n\n\t\tbindInview: function(blockId) {\n\t\t\t$(window).on('scroll', _.bind(this.onScroll, this));\n\t\t},\n\n\t\tonScroll: function(event) {\n\t\t\tvar currentScrollHeight = event.currentTarget.scrollY;\n\t\t\tvar currentScreenHeight = ((window.screen.availHeight) / 2);\n\t\t\tvar temp = 0;\n\t\t\tvar blockIndex;\n\t\t\t_.each(this.blocksTop, function(item, index) {\n\t\t\t\tvar difference = Math.abs(currentScrollHeight - item);\n\n\t\t\t\tif (temp == 0 || temp > difference) {\n\t\t\t\t\ttemp = difference;\n\t\t\t\t\tblockIndex = index;\n\t\t\t\t}\n\t\t\t}, this);;\n\t\t\tvar currentBlockModel = this.blocksCollection[blockIndex];\n\t\t\tvar currentBlockId = currentBlockModel.get(\"_id\");\n\t\t\tthis.currentVisibleBlock = $(\".\" + currentBlockId);\n\t\t},\n\n\t\tTOCTitleClicked: function(event) {\n\t\t\tvar $currentElement = $(event.currentTarget);\n\t\t\tvar $blockTOC = $currentElement.closest(\".TOC-container\");\n\t\t\tvar $currentTitle = $currentElement.find(\".TOC-title\");\n\t\t\tvar currentBlockSelector = '.' + $currentTitle.attr('id');\n\t\t\tvar $currentBlock = $(currentBlockSelector);\n\t\t\tthis.currentVisibleOriginalBlock = $currentBlock;\n\t\t\tthis.isItemClicked = true;\n\t\t\t$blockTOC.removeClass(\"modal-show\");\n\t\t\t$('.modal-overlay').remove();\n\t\t\tthis.modalClosed();\n\t\t\tAdapt.scrollTo($currentBlock, {\n\t\t\t\tduration: 100\n\t\t\t});\n\t\t},\n\n\t\tcurrentBlockHighlighted: function() {\n\t\t\tvar blockId, blockClass;\n\t\t\tif (this.isItemClicked == true) {\n\t\t\t\tvar visibleBlockId = _.filter(this.blocksCollection, function(block, index) {\n\t\t\t\t\tblockId = block.get(\"_id\");\n\t\t\t\t\tif ($(this.currentVisibleOriginalBlock).hasClass(blockId)) {\n\t\t\t\t\t\treturn blockId;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t} else {\n\t\t\t\tvar visibleBlockId = _.filter(this.blocksCollection, function(block, index) {\n\t\t\t\t\tblockId = block.get(\"_id\");\n\t\t\t\t\tif ($(this.currentVisibleBlock).hasClass(blockId)) {\n\t\t\t\t\t\treturn blockId;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t\tthis.highlightCurrentBlock(visibleBlockId);\n\t\t\tthis.isItemClicked = false;\n\t\t},\n\n\t\thighlightCurrentBlock: function(visibleBlockId) {\n\t\t\tif (visibleBlockId[0] != undefined) {\n\t\t\t\tvar visibleId = visibleBlockId[0].get(\"_id\");\n\t\t\t\tvar hasDisplayTitle = visibleBlockId[0].get(\"displayTitle\");\n\t\t\t\tif (hasDisplayTitle == \"Linked\") {\n\t\t\t\t\tvar currentPrevBlock = _.filter(this.emptyPrevBlocks, function(blocks, index) {\n\t\t\t\t\t\treturn _.filter(blocks.emptyTitleBlock, function(emptyTitle) {\n\t\t\t\t\t\t\tif (visibleId == emptyTitle.get(\"_id\")) {\n\t\t\t\t\t\t\t\treturn blocks.previousNonEmptyBlock.get(\"_id\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t}, this);\n\t\t\t\t\tvar prevBlockId = currentPrevBlock[0].previousNonEmptyBlock.get(\"_id\");\n\t\t\t\t\t$(\".TOCDrawer-inner\").removeClass('highlight-current-block');\n\t\t\t\t\t$(\".TOCDrawer-\" + prevBlockId).addClass('highlight-current-block');\n\t\t\t\t} else {\n\t\t\t\t\t$(\".TOCDrawer-inner\").removeClass('highlight-current-block');\n\t\t\t\t\t$(\".TOCDrawer-\" + visibleId).addClass('highlight-current-block');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\taddBlockIdentifierText: function(block) {\n\t\t\tvar blockIdentifier = block.get(\"_blockIdentifier\");\n\t\t\tif (blockIdentifier != undefined && blockIdentifier._isEnabled) {\n\t\t\t\tvar blockIdentifierTrackingId = block.get(\"_trackingId\");\n\t\t\t\t$(\".TOC-identifier-id-\" + blockIdentifierTrackingId)\n\t\t\t\t.find(\".TOC-identifier-text\")\n\t\t\t\t.html(blockIdentifier._identifier);\n\t\t\t}\n\t\t}\n\t});\n\treturn TOCView;\n});\n\n",
    "define('extensions/adapt-TOC/js/TOCNavigationView',[\n    'backbone',\n    'coreJS/adapt',\n    './jquery.jsmodal',\n    './TOCView'\n], function(Backbone, Adapt, LightBox, TOCView) {\n\n    var TOCNavigationView = Backbone.View.extend({\n\n        className: 'TOC-navigation-icon',\n\n        template: 'TOCNavigationView',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(Adapt, 'TOC:TOCCloseClicked', this.enableScroll);\n            this.render();\n            this.TOCRendered = \"\";\n            this.bindEvents();\n            this.renderTOCView();\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $('.navigation').find('.page-level-progress-navigation').before(template(this.model));\n            return this;\n        },\n\n        bindEvents: function() {\n            $('.TOC-navigation-icon').on('click', _.bind(this.toggleTOCOnClicked, this));\n        },\n\n        renderTOCView: function() {\n            new TOCView({\n                model: this.model\n            });\n            this.TOCRendered = true;\n        },\n\n        toggleTOCOnClicked: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            this.disableScroll();\n            if (this.TOCRendered == true) {\n                if (!$(\".TOC-container\").hasClass(\"modal\")) {\n                    $(\".TOC-container\").addClass(\"modal\");\n                }\n                $(\".TOC-container\").modal();\n            }\n            Adapt.trigger('TOC:TOCButtonClicked');\n        },\n\n        disableScroll: function() {\n            $('body').scrollDisable();\n        },\n\n        enableScroll: function() {\n            $('body').scrollEnable();\n        }\n\n    });\n    return TOCNavigationView;\n});\n\n",
    "define('extensions/adapt-TOC/js/adapt-TOC',[\n    'backbone',\n    'coreJS/adapt',\n    './TOCNavigationView'\n], function(Backbone, Adapt, TOCNavigationView) {\n\n    function initialize() {\n        this.listenTo(Adapt, 'remove', this.remove);\n    }\n\n    function onDataReady() {\n        Adapt.on('articleView:postRender', onArticleViewPostRender);\n    }\n\n    function onArticleViewPostRender(article) {\n        var articleModel = article.model;\n        if (articleModel.get('_verticalBlockSlider') != undefined) {\n            if (articleModel.get('_verticalBlockSlider')._isEnabled == true) return;\n        }\n        if (articleModel.get('_blockContentItems') != undefined) {\n            if (articleModel.get('_blockContentItems')._isEnabled == true) return;\n        }\n        if (article.model.get('_TOC') != undefined) {\n            if (article.model.get('_TOC')._isEnabled) {\n                setUpTOC(article);\n            }\n        }\n    }\n\n    function setUpTOC(article) {\n        var TOC = Backbone.View.extend({\n            initialize: function() {\n                this.listenTo(Adapt, 'remove', this.remove, this);\n                this.listenTo(Adapt, 'pageView:ready', this.onPageViewReady, this);\n            },\n\n            onPageViewReady: function() {\n                this.setUpPage();\n            },\n\n            setUpPage: function() {\n\n                new TOCNavigationView({\n                    model: article.model\n                });\n                $('.block-level-progress-drawer-toggle-button').remove();\n                $('.page-level-progress-navigation').css(\"cursor\", \"default\");\n                $('.page-level-progress-navigation').off('click');\n            }\n        });\n        new TOC({\n            model: article.model\n        });\n    }\n\n    Adapt.once('app:dataReady', onDataReady);\n\n    Adapt.on('menuView:postRender', function(view) {\n        if (view.model.get('_id') == Adapt.location._currentId) {\n            $('.TOC-navigation-icon').remove();\n            $('.TOC-container').remove();\n            return;\n        }\n        var viewType = view.model.get('_type');\n        // Progress bar should not render for course viewType\n        if (viewType == 'course') return;\n    });\n});\n\n",
    "/*!\n* MediaElement.js\n* HTML5 <video> and <audio> shim and player\n* http://mediaelementjs.com/\n*\n* Creates a JavaScript object that mimics HTML5 MediaElement API\n* for browsers that don't understand HTML5 or can't play the provided codec\n* Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3\n*\n* Copyright 2010-2013, John Dyer (http://j.hn)\n* License: MIT\n*\n*/var mejs=mejs||{};mejs.version=\"2.13.2\";mejs.meIndex=0;\nmejs.plugins={silverlight:[{version:[3,0],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/wmv\",\"audio/wma\",\"audio/m4a\",\"audio/mp3\",\"audio/wav\",\"audio/mpeg\"]}],flash:[{version:[9,0,124],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/flv\",\"video/rtmp\",\"video/x-flv\",\"audio/flv\",\"audio/x-flv\",\"audio/mp3\",\"audio/m4a\",\"audio/mpeg\",\"video/youtube\",\"video/x-youtube\"]}],youtube:[{version:null,types:[\"video/youtube\",\"video/x-youtube\",\"audio/youtube\",\"audio/x-youtube\"]}],vimeo:[{version:null,types:[\"video/vimeo\",\n\"video/x-vimeo\"]}]};\nmejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.toString().split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split('\"').join(\"&quot;\")},absolutizeUrl:function(a){var b=document.createElement(\"div\");b.innerHTML='<a href=\"'+this.escapeHTML(a)+'\">x</a>';return b.firstChild.href},getScriptPath:function(a){for(var b=0,c,d=\"\",e=\"\",g,f,h=document.getElementsByTagName(\"script\"),l=h.length,j=a.length;b<l;b++){g=h[b].src;c=g.lastIndexOf(\"/\");if(c>-1){f=g.substring(c+\n1);g=g.substring(0,c+1)}else{f=g;g=\"\"}for(c=0;c<j;c++){e=a[c];e=f.indexOf(e);if(e>-1){d=g;break}}if(d!==\"\")break}return d},secondsToTimeCode:function(a,b,c,d){if(typeof c==\"undefined\")c=false;else if(typeof d==\"undefined\")d=25;var e=Math.floor(a/3600)%24,g=Math.floor(a/60)%60,f=Math.floor(a%60);a=Math.floor((a%1*d).toFixed(3));return(b||e>0?(e<10?\"0\"+e:e)+\":\":\"\")+(g<10?\"0\"+g:g)+\":\"+(f<10?\"0\"+f:f)+(c?\":\"+(a<10?\"0\"+a:a):\"\")},timeCodeToSeconds:function(a,b,c,d){if(typeof c==\"undefined\")c=false;else if(typeof d==\n\"undefined\")d=25;a=a.split(\":\");b=parseInt(a[0],10);var e=parseInt(a[1],10),g=parseInt(a[2],10),f=0,h=0;if(c)f=parseInt(a[3])/d;return h=b*3600+e*60+g+f},convertSMPTEtoSeconds:function(a){if(typeof a!=\"string\")return false;a=a.replace(\",\",\".\");var b=0,c=a.indexOf(\".\")!=-1?a.split(\".\")[1].length:0,d=1;a=a.split(\":\").reverse();for(var e=0;e<a.length;e++){d=1;if(e>0)d=Math.pow(60,e);b+=Number(a[e])*d}return Number(b.toFixed(c))},removeSwf:function(a){var b=document.getElementById(a);if(b&&/object|embed/i.test(b.nodeName))if(mejs.MediaFeatures.isIE){b.style.display=\n\"none\";(function(){b.readyState==4?mejs.Utility.removeObjectInIE(a):setTimeout(arguments.callee,10)})()}else b.parentNode.removeChild(b)},removeObjectInIE:function(a){if(a=document.getElementById(a)){for(var b in a)if(typeof a[b]==\"function\")a[b]=null;a.parentNode.removeChild(a)}}};\nmejs.PluginDetector={hasPluginVersion:function(a,b){var c=this.plugins[a];b[1]=b[1]||0;b[2]=b[2]||0;return c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?true:false},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(a,b,c,d,e){this.plugins[a]=this.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var e=[0,0,0],g;if(typeof this.nav.plugins!=\"undefined\"&&typeof this.nav.plugins[a]==\"object\"){if((c=this.nav.plugins[a].description)&&\n!(typeof this.nav.mimeTypes!=\"undefined\"&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){e=c.replace(a,\"\").replace(/^\\s+/,\"\").replace(/\\sr/gi,\".\").split(\".\");for(a=0;a<e.length;a++)e[a]=parseInt(e[a].match(/\\d+/),10)}}else if(typeof window.ActiveXObject!=\"undefined\")try{if(g=new ActiveXObject(c))e=d(g)}catch(f){}return e}};\nmejs.PluginDetector.addPlugin(\"flash\",\"Shockwave Flash\",\"application/x-shockwave-flash\",\"ShockwaveFlash.ShockwaveFlash\",function(a){var b=[];if(a=a.GetVariable(\"$version\")){a=a.split(\" \")[1].split(\",\");b=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]}return b});\nmejs.PluginDetector.addPlugin(\"silverlight\",\"Silverlight Plug-In\",\"application/x-silverlight-2\",\"AgControl.AgControl\",function(a){var b=[0,0,0,0],c=function(d,e,g,f){for(;d.isVersionSupported(e[0]+\".\"+e[1]+\".\"+e[2]+\".\"+e[3]);)e[g]+=f;e[g]-=f};c(a,b,0,1);c(a,b,1,1);c(a,b,2,1E4);c(a,b,2,1E3);c(a,b,2,100);c(a,b,2,10);c(a,b,2,1);c(a,b,3,1);return b});\nmejs.MediaFeatures={init:function(){var a=this,b=document,c=mejs.PluginDetector.nav,d=mejs.PluginDetector.ua.toLowerCase(),e,g=[\"source\",\"track\",\"audio\",\"video\"];a.isiPad=d.match(/ipad/i)!==null;a.isiPhone=d.match(/iphone/i)!==null;a.isiOS=a.isiPhone||a.isiPad;a.isAndroid=d.match(/android/i)!==null;a.isBustedAndroid=d.match(/android 2\\.[12]/)!==null;a.isBustedNativeHTTPS=location.protocol===\"https:\"&&(d.match(/android [12]\\./)!==null||d.match(/macintosh.* version.* safari/)!==null);a.isIE=c.appName.toLowerCase().indexOf(\"microsoft\")!=\n-1||c.appName.toLowerCase().match(/trident/gi)!==null;a.isChrome=d.match(/chrome/gi)!==null;a.isFirefox=d.match(/firefox/gi)!==null;a.isWebkit=d.match(/webkit/gi)!==null;a.isGecko=d.match(/gecko/gi)!==null&&!a.isWebkit&&!a.isIE;a.isOpera=d.match(/opera/gi)!==null;a.hasTouch=\"ontouchstart\"in window;a.svg=!!document.createElementNS&&!!document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect;for(c=0;c<g.length;c++)e=document.createElement(g[c]);a.supportsMediaTag=typeof e.canPlayType!==\n\"undefined\"||a.isBustedAndroid;try{e.canPlayType(\"video/mp4\")}catch(f){a.supportsMediaTag=false}a.hasSemiNativeFullScreen=typeof e.webkitEnterFullscreen!==\"undefined\";a.hasNativeFullscreen=typeof e.requestFullscreen!==\"undefined\";a.hasWebkitNativeFullScreen=typeof e.webkitRequestFullScreen!==\"undefined\";a.hasMozNativeFullScreen=typeof e.mozRequestFullScreen!==\"undefined\";a.hasMsNativeFullScreen=typeof e.msRequestFullscreen!==\"undefined\";a.hasTrueNativeFullScreen=a.hasWebkitNativeFullScreen||a.hasMozNativeFullScreen||\na.hasMsNativeFullScreen;a.nativeFullScreenEnabled=a.hasTrueNativeFullScreen;if(a.hasMozNativeFullScreen)a.nativeFullScreenEnabled=document.mozFullScreenEnabled;else if(a.hasMsNativeFullScreen)a.nativeFullScreenEnabled=document.msFullscreenEnabled;if(a.isChrome)a.hasSemiNativeFullScreen=false;if(a.hasTrueNativeFullScreen){a.fullScreenEventName=\"\";if(a.hasWebkitNativeFullScreen)a.fullScreenEventName=\"webkitfullscreenchange\";else if(a.hasMozNativeFullScreen)a.fullScreenEventName=\"mozfullscreenchange\";\nelse if(a.hasMsNativeFullScreen)a.fullScreenEventName=\"MSFullscreenChange\";a.isFullScreen=function(){if(e.mozRequestFullScreen)return b.mozFullScreen;else if(e.webkitRequestFullScreen)return b.webkitIsFullScreen;else if(e.hasMsNativeFullScreen)return b.msFullscreenElement!==null};a.requestFullScreen=function(h){if(a.hasWebkitNativeFullScreen)h.webkitRequestFullScreen();else if(a.hasMozNativeFullScreen)h.mozRequestFullScreen();else a.hasMsNativeFullScreen&&h.msRequestFullscreen()};a.cancelFullScreen=\nfunction(){if(a.hasWebkitNativeFullScreen)document.webkitCancelFullScreen();else if(a.hasMozNativeFullScreen)document.mozCancelFullScreen();else a.hasMsNativeFullScreen&&document.msExitFullscreen()}}if(a.hasSemiNativeFullScreen&&d.match(/mac os x 10_5/i)){a.hasNativeFullScreen=false;a.hasSemiNativeFullScreen=false}}};mejs.MediaFeatures.init();\nmejs.HtmlMediaElement={pluginType:\"native\",isFullScreen:false,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){for(var b=this.getElementsByTagName(\"source\");b.length>0;)this.removeChild(b[0]);if(typeof a==\"string\")this.src=a;else{var c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.src=c.src;break}}}},setVideoSize:function(a,b){this.width=a;this.height=b}};\nmejs.PluginMediaElement=function(a,b,c){this.id=a;this.pluginType=b;this.src=c;this.events={};this.attributes={}};\nmejs.PluginMediaElement.prototype={pluginElement:null,pluginType:\"\",isFullScreen:false,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,error:null,tagName:\"\",muted:false,volume:1,currentTime:0,play:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.playVideo():this.pluginApi.playMedia();this.paused=false}},load:function(){if(this.pluginApi!=null){this.pluginType!=\"youtube\"&&this.pluginApi.loadMedia();this.paused=\nfalse}},pause:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia();this.paused=true}},stop:function(){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.stopVideo():this.pluginApi.stopMedia();this.paused=true}},canPlayType:function(a){var b,c,d,e=mejs.plugins[this.pluginType];for(b=0;b<e.length;b++){d=e[b];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,d.version))for(c=0;c<d.types.length;c++)if(a==d.types[c])return\"probably\"}return\"\"},\npositionFullscreenButton:function(a,b,c){this.pluginApi!=null&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(a),Math.floor(b),c)},hideFullscreenButton:function(){this.pluginApi!=null&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(a){if(typeof a==\"string\"){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a));this.src=mejs.Utility.absolutizeUrl(a)}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src));\nthis.src=mejs.Utility.absolutizeUrl(a);break}}}},setCurrentTime:function(a){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.seekTo(a):this.pluginApi.setCurrentTime(a);this.currentTime=a}},setVolume:function(a){if(this.pluginApi!=null){this.pluginType==\"youtube\"?this.pluginApi.setVolume(a*100):this.pluginApi.setVolume(a);this.volume=a}},setMuted:function(a){if(this.pluginApi!=null){if(this.pluginType==\"youtube\"){a?this.pluginApi.mute():this.pluginApi.unMute();this.muted=a;this.dispatchEvent(\"volumechange\")}else this.pluginApi.setMuted(a);\nthis.muted=a}},setVideoSize:function(a,b){if(this.pluginElement.style){this.pluginElement.style.width=a+\"px\";this.pluginElement.style.height=b+\"px\"}this.pluginApi!=null&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(a,b)},setFullscreen:function(a){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(a)},enterFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(true)},exitFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&\nthis.setFullscreen(false)},addEventListener:function(a,b){this.events[a]=this.events[a]||[];this.events[a].push(b)},removeEventListener:function(a,b){if(!a){this.events={};return true}var c=this.events[a];if(!c)return true;if(!b){this.events[a]=[];return true}for(i=0;i<c.length;i++)if(c[i]===b){this.events[a].splice(i,1);return true}return false},dispatchEvent:function(a){var b,c,d=this.events[a];if(d){c=Array.prototype.slice.call(arguments,1);for(b=0;b<d.length;b++)d[b].apply(null,c)}},hasAttribute:function(a){return a in\nthis.attributes},removeAttribute:function(a){delete this.attributes[a]},getAttribute:function(a){if(this.hasAttribute(a))return this.attributes[a];return\"\"},setAttribute:function(a,b){this.attributes[a]=b},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id);mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}};\nmejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(a,b,c){this.pluginMediaElements[a]=b;this.htmlMediaElements[a]=c},unregisterPluginElement:function(a){delete this.pluginMediaElements[a];delete this.htmlMediaElements[a]},initPlugin:function(a){var b=this.pluginMediaElements[a],c=this.htmlMediaElements[a];if(b){switch(b.pluginType){case \"flash\":b.pluginElement=b.pluginApi=document.getElementById(a);break;case \"silverlight\":b.pluginElement=document.getElementById(b.id);\nb.pluginApi=b.pluginElement.Content.MediaElementJS}b.pluginApi!=null&&b.success&&b.success(b,c)}},fireEvent:function(a,b,c){var d,e;if(a=this.pluginMediaElements[a]){b={type:b,target:a};for(d in c){a[d]=c[d];b[d]=c[d]}e=c.bufferedTime||0;b.target.buffered=b.buffered={start:function(){return 0},end:function(){return e},length:1};a.dispatchEvent(b.type,b)}}};\nmejs.MediaElementDefaults={mode:\"auto\",plugins:[\"flash\",\"silverlight\",\"youtube\",\"vimeo\"],enablePluginDebug:false,httpsBasicAuthSite:false,type:\"\",pluginPath:mejs.Utility.getScriptPath([\"mediaelement.js\",\"mediaelement.min.js\",\"mediaelement-and-player.js\",\"mediaelement-and-player.min.js\"]),flashName:\"flashmediaelement.swf\",flashStreamer:\"\",enablePluginSmoothing:false,enablePseudoStreaming:false,pseudoStreamingStartQueryParam:\"start\",silverlightName:\"silverlightmediaelement.xap\",defaultVideoWidth:480,\ndefaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:0.8,success:function(){},error:function(){}};mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)};\nmejs.HtmlMediaElementShim={create:function(a,b){var c=mejs.MediaElementDefaults,d=typeof a==\"string\"?document.getElementById(a):a,e=d.tagName.toLowerCase(),g=e===\"audio\"||e===\"video\",f=g?d.getAttribute(\"src\"):d.getAttribute(\"href\");e=d.getAttribute(\"poster\");var h=d.getAttribute(\"autoplay\"),l=d.getAttribute(\"preload\"),j=d.getAttribute(\"controls\"),k;for(k in b)c[k]=b[k];f=typeof f==\"undefined\"||f===null||f==\"\"?null:f;e=typeof e==\"undefined\"||e===null?\"\":e;l=typeof l==\"undefined\"||l===null||l===\"false\"?\n\"none\":l;h=!(typeof h==\"undefined\"||h===null||h===\"false\");j=!(typeof j==\"undefined\"||j===null||j===\"false\");k=this.determinePlayback(d,c,mejs.MediaFeatures.supportsMediaTag,g,f);k.url=k.url!==null?mejs.Utility.absolutizeUrl(k.url):\"\";if(k.method==\"native\"){if(mejs.MediaFeatures.isBustedAndroid){d.src=k.url;d.addEventListener(\"click\",function(){d.play()},false)}return this.updateNative(k,c,h,l)}else if(k.method!==\"\")return this.createPlugin(k,c,e,h,l,j);else{this.createErrorMessage(k,c,e);return this}},\ndeterminePlayback:function(a,b,c,d,e){var g=[],f,h,l,j={method:\"\",url:\"\",htmlMediaElement:a,isVideo:a.tagName.toLowerCase()!=\"audio\"},k;if(typeof b.type!=\"undefined\"&&b.type!==\"\")if(typeof b.type==\"string\")g.push({type:b.type,url:e});else for(f=0;f<b.type.length;f++)g.push({type:b.type[f],url:e});else if(e!==null){l=this.formatType(e,a.getAttribute(\"type\"));g.push({type:l,url:e})}else for(f=0;f<a.childNodes.length;f++){h=a.childNodes[f];if(h.nodeType==1&&h.tagName.toLowerCase()==\"source\"){e=h.getAttribute(\"src\");\nl=this.formatType(e,h.getAttribute(\"type\"));h=h.getAttribute(\"media\");if(!h||!window.matchMedia||window.matchMedia&&window.matchMedia(h).matches)g.push({type:l,url:e})}}if(!d&&g.length>0&&g[0].url!==null&&this.getTypeFromFile(g[0].url).indexOf(\"audio\")>-1)j.isVideo=false;if(mejs.MediaFeatures.isBustedAndroid)a.canPlayType=function(m){return m.match(/video\\/(mp4|m4v)/gi)!==null?\"maybe\":\"\"};if(c&&(b.mode===\"auto\"||b.mode===\"auto_plugin\"||b.mode===\"native\")&&!(mejs.MediaFeatures.isBustedNativeHTTPS&&\nb.httpsBasicAuthSite===true)){if(!d){f=document.createElement(j.isVideo?\"video\":\"audio\");a.parentNode.insertBefore(f,a);a.style.display=\"none\";j.htmlMediaElement=a=f}for(f=0;f<g.length;f++)if(a.canPlayType(g[f].type).replace(/no/,\"\")!==\"\"||a.canPlayType(g[f].type.replace(/mp3/,\"mpeg\")).replace(/no/,\"\")!==\"\"){j.method=\"native\";j.url=g[f].url;break}if(j.method===\"native\"){if(j.url!==null)a.src=j.url;if(b.mode!==\"auto_plugin\")return j}}if(b.mode===\"auto\"||b.mode===\"auto_plugin\"||b.mode===\"shim\")for(f=\n0;f<g.length;f++){l=g[f].type;for(a=0;a<b.plugins.length;a++){e=b.plugins[a];h=mejs.plugins[e];for(c=0;c<h.length;c++){k=h[c];if(k.version==null||mejs.PluginDetector.hasPluginVersion(e,k.version))for(d=0;d<k.types.length;d++)if(l==k.types[d]){j.method=e;j.url=g[f].url;return j}}}}if(b.mode===\"auto_plugin\"&&j.method===\"native\")return j;if(j.method===\"\"&&g.length>0)j.url=g[0].url;return j},formatType:function(a,b){return a&&!b?this.getTypeFromFile(a):b&&~b.indexOf(\";\")?b.substr(0,b.indexOf(\";\")):b},\ngetTypeFromFile:function(a){a=a.split(\"?\")[0];a=a.substring(a.lastIndexOf(\".\")+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(a)?\"video\":\"audio\")+\"/\"+this.getTypeFromExtension(a)},getTypeFromExtension:function(a){switch(a){case \"mp4\":case \"m4v\":return\"mp4\";case \"webm\":case \"webma\":case \"webmv\":return\"webm\";case \"ogg\":case \"oga\":case \"ogv\":return\"ogg\";default:return a}},createErrorMessage:function(a,b,c){var d=a.htmlMediaElement,e=document.createElement(\"div\");e.className=\n\"me-cannotplay\";try{e.style.width=d.width+\"px\";e.style.height=d.height+\"px\"}catch(g){}e.innerHTML=b.customError?b.customError:c!==\"\"?'<a href=\"'+a.url+'\"><img src=\"'+c+'\" width=\"100%\" height=\"100%\" /></a>':'<a href=\"'+a.url+'\"><span>'+mejs.i18n.t(\"Download File\")+\"</span></a>\";d.parentNode.insertBefore(e,d);d.style.display=\"none\";b.error(d)},createPlugin:function(a,b,c,d,e,g){c=a.htmlMediaElement;var f=1,h=1,l=\"me_\"+a.method+\"_\"+mejs.meIndex++,j=new mejs.PluginMediaElement(l,a.method,a.url),k=document.createElement(\"div\"),\nm;j.tagName=c.tagName;for(m=0;m<c.attributes.length;m++){var n=c.attributes[m];n.specified==true&&j.setAttribute(n.name,n.value)}for(m=c.parentNode;m!==null&&m.tagName.toLowerCase()!=\"body\";){if(m.parentNode.tagName.toLowerCase()==\"p\"){m.parentNode.parentNode.insertBefore(m,m.parentNode);break}m=m.parentNode}if(a.isVideo){f=b.pluginWidth>0?b.pluginWidth:b.videoWidth>0?b.videoWidth:c.getAttribute(\"width\")!==null?c.getAttribute(\"width\"):b.defaultVideoWidth;h=b.pluginHeight>0?b.pluginHeight:b.videoHeight>\n0?b.videoHeight:c.getAttribute(\"height\")!==null?c.getAttribute(\"height\"):b.defaultVideoHeight;f=mejs.Utility.encodeUrl(f);h=mejs.Utility.encodeUrl(h)}else if(b.enablePluginDebug){f=320;h=240}j.success=b.success;mejs.MediaPluginBridge.registerPluginElement(l,j,c);k.className=\"me-plugin\";k.id=l+\"_container\";a.isVideo?c.parentNode.insertBefore(k,c):document.body.insertBefore(k,document.body.childNodes[0]);d=[\"id=\"+l,\"isvideo=\"+(a.isVideo?\"true\":\"false\"),\"autoplay=\"+(d?\"true\":\"false\"),\"preload=\"+e,\"width=\"+\nf,\"startvolume=\"+b.startVolume,\"timerrate=\"+b.timerRate,\"flashstreamer=\"+b.flashStreamer,\"height=\"+h,\"pseudostreamstart=\"+b.pseudoStreamingStartQueryParam];if(a.url!==null)a.method==\"flash\"?d.push(\"file=\"+mejs.Utility.encodeUrl(a.url)):d.push(\"file=\"+a.url);b.enablePluginDebug&&d.push(\"debug=true\");b.enablePluginSmoothing&&d.push(\"smoothing=true\");b.enablePseudoStreaming&&d.push(\"pseudostreaming=true\");g&&d.push(\"controls=true\");if(b.pluginVars)d=d.concat(b.pluginVars);switch(a.method){case \"silverlight\":k.innerHTML=\n'<object data=\"data:application/x-silverlight-2,\" type=\"application/x-silverlight-2\" id=\"'+l+'\" name=\"'+l+'\" width=\"'+f+'\" height=\"'+h+'\" class=\"mejs-shim\"><param name=\"initParams\" value=\"'+d.join(\",\")+'\" /><param name=\"windowless\" value=\"true\" /><param name=\"background\" value=\"black\" /><param name=\"minRuntimeVersion\" value=\"3.0.0.0\" /><param name=\"autoUpgrade\" value=\"true\" /><param name=\"source\" value=\"'+b.pluginPath+b.silverlightName+'\" /></object>';break;case \"flash\":if(mejs.MediaFeatures.isIE){a=\ndocument.createElement(\"div\");k.appendChild(a);a.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"'+l+'\" width=\"'+f+'\" height=\"'+h+'\" class=\"mejs-shim\"><param name=\"movie\" value=\"'+b.pluginPath+b.flashName+\"?x=\"+new Date+'\" /><param name=\"flashvars\" value=\"'+d.join(\"&amp;\")+'\" /><param name=\"quality\" value=\"high\" /><param name=\"bgcolor\" value=\"#000000\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /><param name=\"scale\" value=\"default\" /></object>'}else k.innerHTML=\n'<embed id=\"'+l+'\" name=\"'+l+'\" play=\"true\" loop=\"false\" quality=\"high\" bgcolor=\"#000000\" wmode=\"transparent\" allowScriptAccess=\"always\" allowFullScreen=\"true\" type=\"application/x-shockwave-flash\" pluginspage=\"//www.macromedia.com/go/getflashplayer\" src=\"'+b.pluginPath+b.flashName+'\" flashvars=\"'+d.join(\"&\")+'\" width=\"'+f+'\" height=\"'+h+'\" scale=\"default\"class=\"mejs-shim\"></embed>';break;case \"youtube\":b=a.url.substr(a.url.lastIndexOf(\"=\")+1);youtubeSettings={container:k,containerId:k.id,pluginMediaElement:j,\npluginId:l,videoId:b,height:h,width:f};mejs.PluginDetector.hasPluginVersion(\"flash\",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case \"vimeo\":j.vimeoid=a.url.substr(a.url.lastIndexOf(\"/\")+1);k.innerHTML='<iframe src=\"http://player.vimeo.com/video/'+j.vimeoid+'?portrait=0&byline=0&title=0\" width=\"'+f+'\" height=\"'+h+'\" frameborder=\"0\" class=\"mejs-shim\"></iframe>'}c.style.display=\"none\";c.removeAttribute(\"autoplay\");return j},updateNative:function(a,\nb){var c=a.htmlMediaElement,d;for(d in mejs.HtmlMediaElement)c[d]=mejs.HtmlMediaElement[d];b.success(c,c);return c}};\nmejs.YouTubeApi={isIframeStarted:false,isIframeLoaded:false,loadIframeApi:function(){if(!this.isIframeStarted){var a=document.createElement(\"script\");a.src=\"//www.youtube.com/player_api\";var b=document.getElementsByTagName(\"script\")[0];b.parentNode.insertBefore(a,b);this.isIframeStarted=true}},iframeQueue:[],enqueueIframe:function(a){if(this.isLoaded)this.createIframe(a);else{this.loadIframeApi();this.iframeQueue.push(a)}},createIframe:function(a){var b=a.pluginMediaElement,c=new YT.Player(a.containerId,\n{height:a.height,width:a.width,videoId:a.videoId,playerVars:{controls:0},events:{onReady:function(){a.pluginMediaElement.pluginApi=c;mejs.MediaPluginBridge.initPlugin(a.pluginId);setInterval(function(){mejs.YouTubeApi.createEvent(c,b,\"timeupdate\")},250)},onStateChange:function(d){mejs.YouTubeApi.handleStateChange(d.data,c,b)}}})},createEvent:function(a,b,c){c={type:c,target:b};if(a&&a.getDuration){b.currentTime=c.currentTime=a.getCurrentTime();b.duration=c.duration=a.getDuration();c.paused=b.paused;\nc.ended=b.ended;c.muted=a.isMuted();c.volume=a.getVolume()/100;c.bytesTotal=a.getVideoBytesTotal();c.bufferedBytes=a.getVideoBytesLoaded();var d=c.bufferedBytes/c.bytesTotal*c.duration;c.target.buffered=c.buffered={start:function(){return 0},end:function(){return d},length:1}}b.dispatchEvent(c.type,c)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=true;this.iframeQueue.length>0;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(a){this.flashPlayers[a.pluginId]=\na;var b,c=\"//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=\"+a.pluginId+\"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0\";if(mejs.MediaFeatures.isIE){b=document.createElement(\"div\");a.container.appendChild(b);b.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"'+a.pluginId+'\" width=\"'+a.width+'\" height=\"'+a.height+'\" class=\"mejs-shim\"><param name=\"movie\" value=\"'+\nc+'\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /></object>'}else a.container.innerHTML='<object type=\"application/x-shockwave-flash\" id=\"'+a.pluginId+'\" data=\"'+c+'\" width=\"'+a.width+'\" height=\"'+a.height+'\" style=\"visibility: visible; \" class=\"mejs-shim\"><param name=\"allowScriptAccess\" value=\"always\"><param name=\"wmode\" value=\"transparent\"></object>'},flashReady:function(a){var b=this.flashPlayers[a],c=\ndocument.getElementById(a),d=b.pluginMediaElement;d.pluginApi=d.pluginElement=c;mejs.MediaPluginBridge.initPlugin(a);c.cueVideoById(b.videoId);a=b.containerId+\"_callback\";window[a]=function(e){mejs.YouTubeApi.handleStateChange(e,c,d)};c.addEventListener(\"onStateChange\",a);setInterval(function(){mejs.YouTubeApi.createEvent(c,d,\"timeupdate\")},250)},handleStateChange:function(a,b,c){switch(a){case -1:c.paused=true;c.ended=true;mejs.YouTubeApi.createEvent(b,c,\"loadedmetadata\");break;case 0:c.paused=false;\nc.ended=true;mejs.YouTubeApi.createEvent(b,c,\"ended\");break;case 1:c.paused=false;c.ended=false;mejs.YouTubeApi.createEvent(b,c,\"play\");mejs.YouTubeApi.createEvent(b,c,\"playing\");break;case 2:c.paused=true;c.ended=false;mejs.YouTubeApi.createEvent(b,c,\"pause\");break;case 3:mejs.YouTubeApi.createEvent(b,c,\"progress\")}}};function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(a){mejs.YouTubeApi.flashReady(a)}window.mejs=mejs;window.MediaElement=mejs.MediaElement;\n(function(a,b){var c={locale:{language:\"\",strings:{}},methods:{}};c.getLanguage=function(){return(c.locale.language||window.navigator.userLanguage||window.navigator.language).substr(0,2).toLowerCase()};if(typeof mejsL10n!=\"undefined\")c.locale.language=mejsL10n.language;c.methods.checkPlain=function(d){var e,g,f={\"&\":\"&amp;\",'\"':\"&quot;\",\"<\":\"&lt;\",\">\":\"&gt;\"};d=String(d);for(e in f)if(f.hasOwnProperty(e)){g=RegExp(e,\"g\");d=d.replace(g,f[e])}return d};c.methods.t=function(d,e){if(c.locale.strings&&\nc.locale.strings[e.context]&&c.locale.strings[e.context][d])d=c.locale.strings[e.context][d];return c.methods.checkPlain(d)};c.t=function(d,e){if(typeof d===\"string\"&&d.length>0){var g=c.getLanguage();e=e||{context:g};return c.methods.t(d,e)}else throw{name:\"InvalidArgumentException\",message:\"First argument is either not a string or empty.\"};};b.i18n=c})(document,mejs);(function(a){if(typeof mejsL10n!=\"undefined\")a[mejsL10n.language]=mejsL10n.strings})(mejs.i18n.locale.strings);\n(function(a){if(typeof a.de===\"undefined\")a.de={Fullscreen:\"Vollbild\",\"Go Fullscreen\":\"Vollbild an\",\"Turn off Fullscreen\":\"Vollbild aus\",Close:\"Schlie\\u00dfen\"}})(mejs.i18n.locale.strings);(function(a){if(typeof a.zh===\"undefined\")a.zh={Fullscreen:\"\\u5168\\u87a2\\u5e55\",\"Go Fullscreen\":\"\\u5168\\u5c4f\\u6a21\\u5f0f\",\"Turn off Fullscreen\":\"\\u9000\\u51fa\\u5168\\u5c4f\\u6a21\\u5f0f\",Close:\"\\u95dc\\u9589\"}})(mejs.i18n.locale.strings);\n\n/*!\n * MediaElementPlayer\n * http://mediaelementjs.com/\n *\n * Creates a controller bar for HTML5 <video> add <audio> tags\n * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)\n *\n * Copyright 2010-2013, John Dyer (http://j.hn/)\n * License: MIT\n *\n */if(typeof jQuery!=\"undefined\")mejs.$=jQuery;else if(typeof ender!=\"undefined\")mejs.$=ender;\n(function(f){mejs.MepDefaults={poster:\"\",showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(a){return a.duration*0.05},defaultSeekForwardInterval:function(a){return a.duration*0.05},audioWidth:-1,audioHeight:-1,startVolume:0.8,loop:false,autoRewind:true,enableAutosize:true,alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,\nhideVideoControlsOnLoad:false,clickToPlayPause:true,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:[\"playpause\",\"current\",\"progress\",\"duration\",\"tracks\",\"volume\",\"fullscreen\"],isVideo:true,enableKeyboard:true,pauseOtherPlayers:true,keyActions:[{keys:[32,179],action:function(a,b){b.paused||b.ended?a.play():a.pause()}},{keys:[38],action:function(a,b){b.setVolume(Math.min(b.volume+0.1,1))}},{keys:[40],action:function(a,b){b.setVolume(Math.max(b.volume-\n0.1,0))}},{keys:[37,227],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){if(a.isVideo){a.showControls();a.startControlsTimer()}var c=Math.max(b.currentTime-a.options.defaultSeekBackwardInterval(b),0);b.setCurrentTime(c)}}},{keys:[39,228],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){if(a.isVideo){a.showControls();a.startControlsTimer()}var c=Math.min(b.currentTime+a.options.defaultSeekForwardInterval(b),b.duration);b.setCurrentTime(c)}}},{keys:[70],action:function(a){if(typeof a.enterFullScreen!=\n\"undefined\")a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(a,b){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(a,b);this.$media=this.$node=f(a);this.node=this.media=this.$media[0];if(typeof this.node.player!=\"undefined\")return this.node.player;else this.node.player=this;if(typeof b==\"undefined\")b=this.$node.data(\"mejsoptions\");this.options=f.extend({},mejs.MepDefaults,b);this.id=\"mep_\"+mejs.mepIndex++;\nmejs.players[this.id]=this;this.init();return this};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,init:function(){var a=this,b=mejs.MediaFeatures,c=f.extend(true,{},a.options,{success:function(d,g){a.meReady(d,g)},error:function(d){a.handleError(d)}}),e=a.media.tagName.toLowerCase();a.isDynamic=e!==\"audio\"&&e!==\"video\";a.isVideo=a.isDynamic?a.options.isVideo:e!==\"audio\"&&a.options.isVideo;if(b.isiPad&&a.options.iPadUseNativeControls||b.isiPhone&&a.options.iPhoneUseNativeControls){a.$media.attr(\"controls\",\n\"controls\");b.isiPad&&a.media.getAttribute(\"autoplay\")!==null&&a.play()}else if(!(b.isAndroid&&a.options.AndroidUseNativeControls)){a.$media.removeAttr(\"controls\");a.container=f('<div id=\"'+a.id+'\" class=\"mejs-container '+(mejs.MediaFeatures.svg?\"svg\":\"no-svg\")+'\"><div class=\"mejs-inner\"><div class=\"mejs-mediaelement\"></div><div class=\"mejs-layers\"></div><div class=\"mejs-controls\"></div><div class=\"mejs-clear\"></div></div></div>').addClass(a.$media[0].className).insertBefore(a.$media);a.container.addClass((b.isAndroid?\n\"mejs-android \":\"\")+(b.isiOS?\"mejs-ios \":\"\")+(b.isiPad?\"mejs-ipad \":\"\")+(b.isiPhone?\"mejs-iphone \":\"\")+(a.isVideo?\"mejs-video \":\"mejs-audio \"));if(b.isiOS){b=a.$media.clone();a.container.find(\".mejs-mediaelement\").append(b);a.$media.remove();a.$node=a.$media=b;a.node=a.media=b[0]}else a.container.find(\".mejs-mediaelement\").append(a.$media);a.controls=a.container.find(\".mejs-controls\");a.layers=a.container.find(\".mejs-layers\");b=a.isVideo?\"video\":\"audio\";e=b.substring(0,1).toUpperCase()+b.substring(1);\na.width=a.options[b+\"Width\"]>0||a.options[b+\"Width\"].toString().indexOf(\"%\")>-1?a.options[b+\"Width\"]:a.media.style.width!==\"\"&&a.media.style.width!==null?a.media.style.width:a.media.getAttribute(\"width\")!==null?a.$media.attr(\"width\"):a.options[\"default\"+e+\"Width\"];a.height=a.options[b+\"Height\"]>0||a.options[b+\"Height\"].toString().indexOf(\"%\")>-1?a.options[b+\"Height\"]:a.media.style.height!==\"\"&&a.media.style.height!==null?a.media.style.height:a.$media[0].getAttribute(\"height\")!==null?a.$media.attr(\"height\"):\na.options[\"default\"+e+\"Height\"];a.setPlayerSize(a.width,a.height);c.pluginWidth=a.width;c.pluginHeight=a.height}mejs.MediaElement(a.$media[0],c);typeof a.container!=\"undefined\"&&a.controlsAreVisible&&a.container.trigger(\"controlsshown\")},showControls:function(a){var b=this;a=typeof a==\"undefined\"||a;if(!b.controlsAreVisible){if(a){b.controls.css(\"visibility\",\"visible\").stop(true,true).fadeIn(200,function(){b.controlsAreVisible=true;b.container.trigger(\"controlsshown\")});b.container.find(\".mejs-control\").css(\"visibility\",\n\"visible\").stop(true,true).fadeIn(200,function(){b.controlsAreVisible=true})}else{b.controls.css(\"visibility\",\"visible\").css(\"display\",\"block\");b.container.find(\".mejs-control\").css(\"visibility\",\"visible\").css(\"display\",\"block\");b.controlsAreVisible=true;b.container.trigger(\"controlsshown\")}b.setControlsSize()}},hideControls:function(a){var b=this;a=typeof a==\"undefined\"||a;if(!(!b.controlsAreVisible||b.options.alwaysShowControls))if(a){b.controls.stop(true,true).fadeOut(200,function(){f(this).css(\"visibility\",\n\"hidden\").css(\"display\",\"block\");b.controlsAreVisible=false;b.container.trigger(\"controlshidden\")});b.container.find(\".mejs-control\").stop(true,true).fadeOut(200,function(){f(this).css(\"visibility\",\"hidden\").css(\"display\",\"block\")})}else{b.controls.css(\"visibility\",\"hidden\").css(\"display\",\"block\");b.container.find(\".mejs-control\").css(\"visibility\",\"hidden\").css(\"display\",\"block\");b.controlsAreVisible=false;b.container.trigger(\"controlshidden\")}},controlsTimer:null,startControlsTimer:function(a){var b=\nthis;a=typeof a!=\"undefined\"?a:1500;b.killControlsTimer(\"start\");b.controlsTimer=setTimeout(function(){b.hideControls();b.killControlsTimer(\"hide\")},a)},killControlsTimer:function(){if(this.controlsTimer!==null){clearTimeout(this.controlsTimer);delete this.controlsTimer;this.controlsTimer=null}},controlsEnabled:true,disableControls:function(){this.killControlsTimer();this.hideControls(false);this.controlsEnabled=false},enableControls:function(){this.showControls(false);this.controlsEnabled=true},\nmeReady:function(a,b){var c=this,e=mejs.MediaFeatures,d=b.getAttribute(\"autoplay\");d=!(typeof d==\"undefined\"||d===null||d===\"false\");var g;if(!c.created){c.created=true;c.media=a;c.domNode=b;if(!(e.isAndroid&&c.options.AndroidUseNativeControls)&&!(e.isiPad&&c.options.iPadUseNativeControls)&&!(e.isiPhone&&c.options.iPhoneUseNativeControls)){c.buildposter(c,c.controls,c.layers,c.media);c.buildkeyboard(c,c.controls,c.layers,c.media);c.buildoverlays(c,c.controls,c.layers,c.media);c.findTracks();for(g in c.options.features){e=\nc.options.features[g];if(c[\"build\"+e])try{c[\"build\"+e](c,c.controls,c.layers,c.media)}catch(k){}}c.container.trigger(\"controlsready\");c.setPlayerSize(c.width,c.height);c.setControlsSize();if(c.isVideo){if(mejs.MediaFeatures.hasTouch)c.$media.bind(\"touchstart\",function(){if(c.controlsAreVisible)c.hideControls(false);else c.controlsEnabled&&c.showControls(false)});else{mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){if(c.options.clickToPlayPause)c.media.paused?c.play():c.pause()};\nc.media.addEventListener(\"click\",c.clickToPlayPauseCallback,false);c.container.bind(\"mouseenter mouseover\",function(){if(c.controlsEnabled)if(!c.options.alwaysShowControls){c.killControlsTimer(\"enter\");c.showControls();c.startControlsTimer(2500)}}).bind(\"mousemove\",function(){if(c.controlsEnabled){c.controlsAreVisible||c.showControls();c.options.alwaysShowControls||c.startControlsTimer(2500)}}).bind(\"mouseleave\",function(){c.controlsEnabled&&!c.media.paused&&!c.options.alwaysShowControls&&c.startControlsTimer(1E3)})}c.options.hideVideoControlsOnLoad&&\nc.hideControls(false);d&&!c.options.alwaysShowControls&&c.hideControls();c.options.enableAutosize&&c.media.addEventListener(\"loadedmetadata\",function(j){if(c.options.videoHeight<=0&&c.domNode.getAttribute(\"height\")===null&&!isNaN(j.target.videoHeight)){c.setPlayerSize(j.target.videoWidth,j.target.videoHeight);c.setControlsSize();c.media.setVideoSize(j.target.videoWidth,j.target.videoHeight)}},false)}a.addEventListener(\"play\",function(){for(var j in mejs.players){var m=mejs.players[j];m.id!=c.id&&\nc.options.pauseOtherPlayers&&!m.paused&&!m.ended&&m.pause();m.hasFocus=false}c.hasFocus=true},false);c.media.addEventListener(\"ended\",function(){if(c.options.autoRewind)try{c.media.setCurrentTime(0)}catch(j){}c.media.pause();c.setProgressRail&&c.setProgressRail();c.setCurrentRail&&c.setCurrentRail();if(c.options.loop)c.play();else!c.options.alwaysShowControls&&c.controlsEnabled&&c.showControls()},false);c.media.addEventListener(\"loadedmetadata\",function(){c.updateDuration&&c.updateDuration();c.updateCurrent&&\nc.updateCurrent();if(!c.isFullScreen){c.setPlayerSize(c.width,c.height);c.setControlsSize()}},false);setTimeout(function(){c.setPlayerSize(c.width,c.height);c.setControlsSize()},50);c.globalBind(\"resize\",function(){c.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||c.setPlayerSize(c.width,c.height);c.setControlsSize()});c.media.pluginType==\"youtube\"&&c.container.find(\".mejs-overlay-play\").hide()}d&&a.pluginType==\"native\"&&c.play();if(c.options.success)typeof c.options.success==\n\"string\"?window[c.options.success](c.media,c.domNode,c):c.options.success(c.media,c.domNode,c)}},handleError:function(a){this.controls.hide();this.options.error&&this.options.error(a)},setPlayerSize:function(a,b){if(typeof a!=\"undefined\")this.width=a;if(typeof b!=\"undefined\")this.height=b;if(this.height.toString().indexOf(\"%\")>0||this.$node.css(\"max-width\")===\"100%\"||parseInt(this.$node.css(\"max-width\").replace(/px/,\"\"),10)/this.$node.offsetParent().width()===1||this.$node[0].currentStyle&&this.$node[0].currentStyle.maxWidth===\n\"100%\"){var c=this.isVideo?this.media.videoWidth&&this.media.videoWidth>0?this.media.videoWidth:this.options.defaultVideoWidth:this.options.defaultAudioWidth,e=this.isVideo?this.media.videoHeight&&this.media.videoHeight>0?this.media.videoHeight:this.options.defaultVideoHeight:this.options.defaultAudioHeight,d=this.container.parent().closest(\":visible\").width();c=this.isVideo||!this.options.autosizeProgress?parseInt(d*e/c,10):e;if(this.container.parent()[0].tagName.toLowerCase()===\"body\"){d=f(window).width();\nc=f(window).height()}if(c!=0&&d!=0){this.container.width(d).height(c);this.$media.add(this.container.find(\".mejs-shim\")).width(\"100%\").height(\"100%\");this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(d,c);this.layers.children(\".mejs-layer\").width(\"100%\").height(\"100%\")}}else{this.container.width(this.width).height(this.height);this.layers.children(\".mejs-layer\").width(this.width).height(this.height)}d=this.layers.find(\".mejs-overlay-play\");c=d.find(\".mejs-overlay-button\");d.height(this.container.height()-\nthis.controls.height());c.css(\"margin-top\",\"-\"+(c.height()/2-this.controls.height()/2).toString()+\"px\")},setControlsSize:function(){var a=0,b=0,c=this.controls.find(\".mejs-time-rail\"),e=this.controls.find(\".mejs-time-total\");this.controls.find(\".mejs-time-current\");this.controls.find(\".mejs-time-loaded\");var d=c.siblings();if(this.options&&!this.options.autosizeProgress)b=parseInt(c.css(\"width\"));if(b===0||!b){d.each(function(){var g=f(this);if(g.css(\"position\")!=\"absolute\"&&g.is(\":visible\"))a+=f(this).outerWidth(true)});\nb=this.controls.width()-a-(c.outerWidth(true)-c.width())}c.width(b);e.width(b-(e.outerWidth(true)-e.width()));this.setProgressRail&&this.setProgressRail();this.setCurrentRail&&this.setCurrentRail()},buildposter:function(a,b,c,e){var d=f('<div class=\"mejs-poster mejs-layer\"></div>').appendTo(c);b=a.$media.attr(\"poster\");if(a.options.poster!==\"\")b=a.options.poster;b!==\"\"&&b!=null?this.setPoster(b):d.hide();e.addEventListener(\"play\",function(){d.hide()},false);a.options.showPosterWhenEnded&&a.options.autoRewind&&\ne.addEventListener(\"ended\",function(){d.show()},false)},setPoster:function(a){var b=this.container.find(\".mejs-poster\"),c=b.find(\"img\");if(c.length==0)c=f('<img width=\"100%\" height=\"100%\" />').appendTo(b);c.attr(\"src\",a);b.css({\"background-image\":\"url(\"+a+\")\"})},buildoverlays:function(a,b,c,e){var d=this;if(a.isVideo){var g=f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-loading\"><span></span></div></div>').hide().appendTo(c),k=f('<div class=\"mejs-overlay mejs-layer\"><div class=\"mejs-overlay-error\"></div></div>').hide().appendTo(c),\nj=f('<div class=\"mejs-overlay mejs-layer mejs-overlay-play\"><div class=\"mejs-overlay-button\"></div></div>').appendTo(c).bind(\"click touchstart\",function(){d.options.clickToPlayPause&&e.paused&&d.play()});e.addEventListener(\"play\",function(){j.hide();g.hide();b.find(\".mejs-time-buffering\").hide();k.hide()},false);e.addEventListener(\"playing\",function(){j.hide();g.hide();b.find(\".mejs-time-buffering\").hide();k.hide()},false);e.addEventListener(\"seeking\",function(){g.show();b.find(\".mejs-time-buffering\").show()},\nfalse);e.addEventListener(\"seeked\",function(){g.hide();b.find(\".mejs-time-buffering\").hide()},false);e.addEventListener(\"pause\",function(){mejs.MediaFeatures.isiPhone||j.show()},false);e.addEventListener(\"waiting\",function(){g.show();b.find(\".mejs-time-buffering\").show()},false);e.addEventListener(\"loadeddata\",function(){g.show();b.find(\".mejs-time-buffering\").show()},false);e.addEventListener(\"canplay\",function(){g.hide();b.find(\".mejs-time-buffering\").hide()},false);e.addEventListener(\"error\",function(){g.hide();\nb.find(\".mejs-time-buffering\").hide();k.show();k.find(\"mejs-overlay-error\").html(\"Error loading this resource\")},false)}},buildkeyboard:function(a,b,c,e){this.globalBind(\"keydown\",function(d){if(a.hasFocus&&a.options.enableKeyboard)for(var g=0,k=a.options.keyActions.length;g<k;g++)for(var j=a.options.keyActions[g],m=0,q=j.keys.length;m<q;m++)if(d.keyCode==j.keys[m]){d.preventDefault();j.action(a,e,d.keyCode);return false}return true});this.globalBind(\"click\",function(d){if(f(d.target).closest(\".mejs-container\").length==\n0)a.hasFocus=false})},findTracks:function(){var a=this,b=a.$media.find(\"track\");a.tracks=[];b.each(function(c,e){e=f(e);a.tracks.push({srclang:e.attr(\"srclang\")?e.attr(\"srclang\").toLowerCase():\"\",src:e.attr(\"src\"),kind:e.attr(\"kind\"),label:e.attr(\"label\")||\"\",entries:[],isLoaded:false})})},changeSkin:function(a){this.container[0].className=\"mejs-container \"+a;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.load();this.media.play()},pause:function(){try{this.media.pause()}catch(a){}},\nload:function(){this.isLoaded||this.media.load();this.isLoaded=true},setMuted:function(a){this.media.setMuted(a)},setCurrentTime:function(a){this.media.setCurrentTime(a)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(a){this.media.setVolume(a)},getVolume:function(){return this.media.volume},setSrc:function(a){this.media.setSrc(a)},remove:function(){var a,b;for(a in this.options.features){b=this.options.features[a];if(this[\"clean\"+b])try{this[\"clean\"+b](this)}catch(c){}}if(this.isDynamic)this.$node.insertBefore(this.container);\nelse{this.$media.prop(\"controls\",true);this.$node.clone().show().insertBefore(this.container);this.$node.remove()}this.media.pluginType!==\"native\"&&this.media.remove();delete mejs.players[this.id];this.container.remove();this.globalUnbind();delete this.node.player}};(function(){function a(c,e){var d={d:[],w:[]};f.each((c||\"\").split(\" \"),function(g,k){var j=k+\".\"+e;if(j.indexOf(\".\")===0){d.d.push(j);d.w.push(j)}else d[b.test(k)?\"w\":\"d\"].push(j)});d.d=d.d.join(\" \");d.w=d.w.join(\" \");return d}var b=\n/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\\b/;mejs.MediaElementPlayer.prototype.globalBind=function(c,e,d){c=a(c,this.id);c.d&&f(document).bind(c.d,e,d);c.w&&f(window).bind(c.w,e,d)};mejs.MediaElementPlayer.prototype.globalUnbind=function(c,e){c=a(c,this.id);c.d&&f(document).unbind(c.d,e);c.w&&f(window).unbind(c.w,e)}})();if(typeof jQuery!=\"undefined\")jQuery.fn.mediaelementplayer=function(a){a===false?this.each(function(){var b=jQuery(this).data(\"mediaelementplayer\");\nb&&b.remove();jQuery(this).removeData(\"mediaelementplayer\")}):this.each(function(){jQuery(this).data(\"mediaelementplayer\",new mejs.MediaElementPlayer(this,a))});return this};f(document).ready(function(){f(\".mejs-player\").mediaelementplayer()});window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{playpauseText:mejs.i18n.t(\"Play/Pause\")});f.extend(MediaElementPlayer.prototype,{buildplaypause:function(a,b,c,e){var d=f('<div class=\"mejs-button mejs-playpause-button mejs-play\" ><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.playpauseText+'\" aria-label=\"'+this.options.playpauseText+'\"></button></div>').appendTo(b).click(function(g){g.preventDefault();e.paused?e.play():e.pause();return false});e.addEventListener(\"play\",function(){d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")},\nfalse);e.addEventListener(\"playing\",function(){d.removeClass(\"mejs-play\").addClass(\"mejs-pause\")},false);e.addEventListener(\"pause\",function(){d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")},false);e.addEventListener(\"paused\",function(){d.removeClass(\"mejs-pause\").addClass(\"mejs-play\")},false)}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{stopText:\"Stop\"});f.extend(MediaElementPlayer.prototype,{buildstop:function(a,b,c,e){f('<div class=\"mejs-button mejs-stop-button mejs-stop\"><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.stopText+'\" aria-label=\"'+this.options.stopText+'\"></button></div>').appendTo(b).click(function(){e.paused||e.pause();if(e.currentTime>0){e.setCurrentTime(0);e.pause();b.find(\".mejs-time-current\").width(\"0px\");b.find(\".mejs-time-handle\").css(\"left\",\n\"0px\");b.find(\".mejs-time-float-current\").html(mejs.Utility.secondsToTimeCode(0));b.find(\".mejs-currenttime\").html(mejs.Utility.secondsToTimeCode(0));c.find(\".mejs-poster\").show()}})}})})(mejs.$);\n(function(f){f.extend(MediaElementPlayer.prototype,{buildprogress:function(a,b,c,e){f('<div class=\"mejs-time-rail\"><span class=\"mejs-time-total\"><span class=\"mejs-time-buffering\"></span><span class=\"mejs-time-loaded\"></span><span class=\"mejs-time-current\"></span><span class=\"mejs-time-handle\"></span><span class=\"mejs-time-float\"><span class=\"mejs-time-float-current\">00:00</span><span class=\"mejs-time-float-corner\"></span></span></span></div>').appendTo(b);b.find(\".mejs-time-buffering\").hide();var d=\nthis,g=b.find(\".mejs-time-total\");c=b.find(\".mejs-time-loaded\");var k=b.find(\".mejs-time-current\"),j=b.find(\".mejs-time-handle\"),m=b.find(\".mejs-time-float\"),q=b.find(\".mejs-time-float-current\"),p=function(h){h=h.pageX;var l=g.offset(),r=g.outerWidth(true),n=0,o=n=0;if(e.duration){if(h<l.left)h=l.left;else if(h>r+l.left)h=r+l.left;o=h-l.left;n=o/r;n=n<=0.02?0:n*e.duration;t&&n!==e.currentTime&&e.setCurrentTime(n);if(!mejs.MediaFeatures.hasTouch){m.css(\"left\",o);q.html(mejs.Utility.secondsToTimeCode(n));\nm.show()}}},t=false;g.bind(\"mousedown\",function(h){if(h.which===1){t=true;p(h);d.globalBind(\"mousemove.dur\",function(l){p(l)});d.globalBind(\"mouseup.dur\",function(){t=false;m.hide();d.globalUnbind(\".dur\")});return false}}).bind(\"mouseenter\",function(){d.globalBind(\"mousemove.dur\",function(h){p(h)});mejs.MediaFeatures.hasTouch||m.show()}).bind(\"mouseleave\",function(){if(!t){d.globalUnbind(\".dur\");m.hide()}});e.addEventListener(\"progress\",function(h){a.setProgressRail(h);a.setCurrentRail(h)},false);\ne.addEventListener(\"timeupdate\",function(h){a.setProgressRail(h);a.setCurrentRail(h)},false);d.loaded=c;d.total=g;d.current=k;d.handle=j},setProgressRail:function(a){var b=a!=undefined?a.target:this.media,c=null;if(b&&b.buffered&&b.buffered.length>0&&b.buffered.end&&b.duration)c=b.buffered.end(0)/b.duration;else if(b&&b.bytesTotal!=undefined&&b.bytesTotal>0&&b.bufferedBytes!=undefined)c=b.bufferedBytes/b.bytesTotal;else if(a&&a.lengthComputable&&a.total!=0)c=a.loaded/a.total;if(c!==null){c=Math.min(1,\nMath.max(0,c));this.loaded&&this.total&&this.loaded.width(this.total.width()*c)}},setCurrentRail:function(){if(this.media.currentTime!=undefined&&this.media.duration)if(this.total&&this.handle){var a=Math.round(this.total.width()*this.media.currentTime/this.media.duration),b=a-Math.round(this.handle.outerWidth(true)/2);this.current.width(a);this.handle.css(\"left\",b)}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:\"<span> | </span>\"});f.extend(MediaElementPlayer.prototype,{buildcurrent:function(a,b,c,e){f('<div class=\"mejs-time\"><span class=\"mejs-currenttime\">'+(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\")+\"</span></div>\").appendTo(b);this.currenttime=this.controls.find(\".mejs-currenttime\");e.addEventListener(\"timeupdate\",function(){a.updateCurrent()},false)},buildduration:function(a,b,\nc,e){if(b.children().last().find(\".mejs-currenttime\").length>0)f(this.options.timeAndDurationSeparator+'<span class=\"mejs-duration\">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\"))+\"</span>\").appendTo(b.find(\".mejs-time\"));else{b.find(\".mejs-currenttime\").parent().addClass(\"mejs-currenttime-container\");\nf('<div class=\"mejs-time mejs-duration-container\"><span class=\"mejs-duration\">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(a.options.alwaysShowHours?\"00:\":\"\")+(a.options.showTimecodeFrameCount?\"00:00:00\":\"00:00\"))+\"</span></div>\").appendTo(b)}this.durationD=this.controls.find(\".mejs-duration\");e.addEventListener(\"timeupdate\",function(){a.updateDuration()},\nfalse)},updateCurrent:function(){if(this.currenttime)this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.container.toggleClass(\"mejs-long-video\",this.media.duration>3600);if(this.durationD&&(this.options.duration>0||this.media.duration))this.durationD.html(mejs.Utility.secondsToTimeCode(this.options.duration>0?this.options.duration:\nthis.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{muteText:mejs.i18n.t(\"Mute Toggle\"),hideVolumeOnTouchDevices:true,audioVolume:\"horizontal\",videoVolume:\"vertical\"});f.extend(MediaElementPlayer.prototype,{buildvolume:function(a,b,c,e){if(!(mejs.MediaFeatures.hasTouch&&this.options.hideVolumeOnTouchDevices)){var d=this,g=d.isVideo?d.options.videoVolume:d.options.audioVolume,k=g==\"horizontal\"?f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.muteText+\n'\" aria-label=\"'+d.options.muteText+'\"></button></div><div class=\"mejs-horizontal-volume-slider\"><div class=\"mejs-horizontal-volume-total\"></div><div class=\"mejs-horizontal-volume-current\"></div><div class=\"mejs-horizontal-volume-handle\"></div></div>').appendTo(b):f('<div class=\"mejs-button mejs-volume-button mejs-mute\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.muteText+'\" aria-label=\"'+d.options.muteText+'\"></button><div class=\"mejs-volume-slider\"><div class=\"mejs-volume-total\"></div><div class=\"mejs-volume-current\"></div><div class=\"mejs-volume-handle\"></div></div></div>').appendTo(b),\nj=d.container.find(\".mejs-volume-slider, .mejs-horizontal-volume-slider\"),m=d.container.find(\".mejs-volume-total, .mejs-horizontal-volume-total\"),q=d.container.find(\".mejs-volume-current, .mejs-horizontal-volume-current\"),p=d.container.find(\".mejs-volume-handle, .mejs-horizontal-volume-handle\"),t=function(n,o){if(!j.is(\":visible\")&&typeof o==\"undefined\"){j.show();t(n,true);j.hide()}else{n=Math.max(0,n);n=Math.min(n,1);n==0?k.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\"):k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\");\nif(g==\"vertical\"){var s=m.height(),u=m.position(),v=s-s*n;p.css(\"top\",Math.round(u.top+v-p.height()/2));q.height(s-v);q.css(\"top\",u.top+v)}else{s=m.width();u=m.position();s=s*n;p.css(\"left\",Math.round(u.left+s-p.width()/2));q.width(Math.round(s))}}},h=function(n){var o=null,s=m.offset();if(g==\"vertical\"){o=m.height();parseInt(m.css(\"top\").replace(/px/,\"\"),10);o=(o-(n.pageY-s.top))/o;if(s.top==0||s.left==0)return}else{o=m.width();o=(n.pageX-s.left)/o}o=Math.max(0,o);o=Math.min(o,1);t(o);o==0?e.setMuted(true):\ne.setMuted(false);e.setVolume(o)},l=false,r=false;k.hover(function(){j.show();r=true},function(){r=false;!l&&g==\"vertical\"&&j.hide()});j.bind(\"mouseover\",function(){r=true}).bind(\"mousedown\",function(n){h(n);d.globalBind(\"mousemove.vol\",function(o){h(o)});d.globalBind(\"mouseup.vol\",function(){l=false;d.globalUnbind(\".vol\");!r&&g==\"vertical\"&&j.hide()});l=true;return false});k.find(\"button\").click(function(){e.setMuted(!e.muted)});e.addEventListener(\"volumechange\",function(){if(!l)if(e.muted){t(0);\nk.removeClass(\"mejs-mute\").addClass(\"mejs-unmute\")}else{t(e.volume);k.removeClass(\"mejs-unmute\").addClass(\"mejs-mute\")}},false);if(d.container.is(\":visible\")){t(a.options.startVolume);a.options.startVolume===0&&e.setMuted(true);e.pluginType===\"native\"&&e.setVolume(a.options.startVolume)}}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{usePluginFullScreen:true,newWindowCallback:function(){return\"\"},fullscreenText:mejs.i18n.t(\"Fullscreen\")});f.extend(MediaElementPlayer.prototype,{isFullScreen:false,isNativeFullScreen:false,isInIframe:false,buildfullscreen:function(a,b,c,e){if(a.isVideo){a.isInIframe=window.location!=window.parent.location;if(mejs.MediaFeatures.hasTrueNativeFullScreen){c=function(){if(a.isFullScreen)if(mejs.MediaFeatures.isFullScreen()){a.isNativeFullScreen=true;a.setControlsSize()}else{a.isNativeFullScreen=\nfalse;a.exitFullScreen()}};mejs.MediaFeatures.hasMozNativeFullScreen?a.globalBind(mejs.MediaFeatures.fullScreenEventName,c):a.container.bind(mejs.MediaFeatures.fullScreenEventName,c)}var d=this,g=f('<div class=\"mejs-button mejs-fullscreen-button\"><button type=\"button\" aria-controls=\"'+d.id+'\" title=\"'+d.options.fullscreenText+'\" aria-label=\"'+d.options.fullscreenText+'\"></button></div>').appendTo(b);if(d.media.pluginType===\"native\"||!d.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)g.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&\nmejs.MediaFeatures.isFullScreen()||a.isFullScreen?a.exitFullScreen():a.enterFullScreen()});else{var k=null;if(function(){var h=document.createElement(\"x\"),l=document.documentElement,r=window.getComputedStyle;if(!(\"pointerEvents\"in h.style))return false;h.style.pointerEvents=\"auto\";h.style.pointerEvents=\"x\";l.appendChild(h);r=r&&r(h,\"\").pointerEvents===\"auto\";l.removeChild(h);return!!r}()&&!mejs.MediaFeatures.isOpera){var j=false,m=function(){if(j){for(var h in q)q[h].hide();g.css(\"pointer-events\",\n\"\");d.controls.css(\"pointer-events\",\"\");d.media.removeEventListener(\"click\",d.clickToPlayPauseCallback);j=false}},q={};b=[\"top\",\"left\",\"right\",\"bottom\"];var p,t=function(){var h=g.offset().left-d.container.offset().left,l=g.offset().top-d.container.offset().top,r=g.outerWidth(true),n=g.outerHeight(true),o=d.container.width(),s=d.container.height();for(p in q)q[p].css({position:\"absolute\",top:0,left:0});q.top.width(o).height(l);q.left.width(h).height(n).css({top:l});q.right.width(o-h-r).height(n).css({top:l,\nleft:h+r});q.bottom.width(o).height(s-n-l).css({top:l+n})};d.globalBind(\"resize\",function(){t()});p=0;for(c=b.length;p<c;p++)q[b[p]]=f('<div class=\"mejs-fullscreen-hover\" />').appendTo(d.container).mouseover(m).hide();g.on(\"mouseover\",function(){if(!d.isFullScreen){var h=g.offset(),l=a.container.offset();e.positionFullscreenButton(h.left-l.left,h.top-l.top,false);g.css(\"pointer-events\",\"none\");d.controls.css(\"pointer-events\",\"none\");d.media.addEventListener(\"click\",d.clickToPlayPauseCallback);for(p in q)q[p].show();\nt();j=true}});e.addEventListener(\"fullscreenchange\",function(){d.isFullScreen=!d.isFullScreen;d.isFullScreen?d.media.removeEventListener(\"click\",d.clickToPlayPauseCallback):d.media.addEventListener(\"click\",d.clickToPlayPauseCallback);m()});d.globalBind(\"mousemove\",function(h){if(j){var l=g.offset();if(h.pageY<l.top||h.pageY>l.top+g.outerHeight(true)||h.pageX<l.left||h.pageX>l.left+g.outerWidth(true)){g.css(\"pointer-events\",\"\");d.controls.css(\"pointer-events\",\"\");j=false}}})}else g.on(\"mouseover\",\nfunction(){if(k!==null){clearTimeout(k);delete k}var h=g.offset(),l=a.container.offset();e.positionFullscreenButton(h.left-l.left,h.top-l.top,true)}).on(\"mouseout\",function(){if(k!==null){clearTimeout(k);delete k}k=setTimeout(function(){e.hideFullscreenButton()},1500)})}a.fullscreenBtn=g;d.globalBind(\"keydown\",function(h){if((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||d.isFullScreen)&&h.keyCode==27)a.exitFullScreen()})}},cleanfullscreen:function(a){a.exitFullScreen()},\ncontainerSizeTimeout:null,enterFullScreen:function(){var a=this;if(!(a.media.pluginType!==\"native\"&&(mejs.MediaFeatures.isFirefox||a.options.usePluginFullScreen))){f(document.documentElement).addClass(\"mejs-fullscreen\");normalHeight=a.container.height();normalWidth=a.container.width();if(a.media.pluginType===\"native\")if(mejs.MediaFeatures.hasTrueNativeFullScreen){mejs.MediaFeatures.requestFullScreen(a.container[0]);a.isInIframe&&setTimeout(function c(){if(a.isNativeFullScreen)f(window).width()!==\nscreen.width?a.exitFullScreen():setTimeout(c,500)},500)}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){a.media.webkitEnterFullscreen();return}if(a.isInIframe){var b=a.options.newWindowCallback(this);if(b!==\"\")if(mejs.MediaFeatures.hasTrueNativeFullScreen)setTimeout(function(){if(!a.isNativeFullScreen){a.pause();window.open(b,a.id,\"top=0,left=0,width=\"+screen.availWidth+\",height=\"+screen.availHeight+\",resizable=yes,scrollbars=no,status=no,toolbar=no\")}},250);else{a.pause();window.open(b,a.id,\n\"top=0,left=0,width=\"+screen.availWidth+\",height=\"+screen.availHeight+\",resizable=yes,scrollbars=no,status=no,toolbar=no\");return}}a.container.addClass(\"mejs-container-fullscreen\").width(\"100%\").height(\"100%\");a.containerSizeTimeout=setTimeout(function(){a.container.css({width:\"100%\",height:\"100%\"});a.setControlsSize()},500);if(a.media.pluginType===\"native\")a.$media.width(\"100%\").height(\"100%\");else{a.container.find(\".mejs-shim\").width(\"100%\").height(\"100%\");a.media.setVideoSize(f(window).width(),\nf(window).height())}a.layers.children(\"div\").width(\"100%\").height(\"100%\");a.fullscreenBtn&&a.fullscreenBtn.removeClass(\"mejs-fullscreen\").addClass(\"mejs-unfullscreen\");a.setControlsSize();a.isFullScreen=true}},exitFullScreen:function(){clearTimeout(this.containerSizeTimeout);if(this.media.pluginType!==\"native\"&&mejs.MediaFeatures.isFirefox)this.media.setFullscreen(false);else{if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen))mejs.MediaFeatures.cancelFullScreen();\nf(document.documentElement).removeClass(\"mejs-fullscreen\");this.container.removeClass(\"mejs-container-fullscreen\").width(normalWidth).height(normalHeight);if(this.media.pluginType===\"native\")this.$media.width(normalWidth).height(normalHeight);else{this.container.find(\".mejs-shim\").width(normalWidth).height(normalHeight);this.media.setVideoSize(normalWidth,normalHeight)}this.layers.children(\"div\").width(normalWidth).height(normalHeight);this.fullscreenBtn.removeClass(\"mejs-unfullscreen\").addClass(\"mejs-fullscreen\");\nthis.setControlsSize();this.isFullScreen=false}}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{startLanguage:\"\",tracksText:mejs.i18n.t(\"Captions/Subtitles\"),hideCaptionsButtonWhenEmpty:true,toggleCaptionsButtonWhenOnlyOne:false,slidesSelector:\"\"});f.extend(MediaElementPlayer.prototype,{hasChapters:false,buildtracks:function(a,b,c,e){if(a.tracks.length!=0){var d;if(this.domNode.textTracks)for(d=this.domNode.textTracks.length-1;d>=0;d--)this.domNode.textTracks[d].mode=\"hidden\";a.chapters=f('<div class=\"mejs-chapters mejs-layer\"></div>').prependTo(c).hide();a.captions=\nf('<div class=\"mejs-captions-layer mejs-layer\"><div class=\"mejs-captions-position mejs-captions-position-hover\"><span class=\"mejs-captions-text\"></span></div></div>').prependTo(c).hide();a.captionsText=a.captions.find(\".mejs-captions-text\");a.captionsButton=f('<div class=\"mejs-button mejs-captions-button\"><button type=\"button\" aria-controls=\"'+this.id+'\" title=\"'+this.options.tracksText+'\" aria-label=\"'+this.options.tracksText+'\"></button><div class=\"mejs-captions-selector\"><ul><li><input type=\"radio\" name=\"'+\na.id+'_captions\" id=\"'+a.id+'_captions_none\" value=\"none\" checked=\"checked\" /><label for=\"'+a.id+'_captions_none\">'+mejs.i18n.t(\"None\")+\"</label></li></ul></div></div>\").appendTo(b);for(d=b=0;d<a.tracks.length;d++)a.tracks[d].kind==\"subtitles\"&&b++;this.options.toggleCaptionsButtonWhenOnlyOne&&b==1?a.captionsButton.on(\"click\",function(){a.setTrack(a.selectedTrack==null?a.tracks[0].srclang:\"none\")}):a.captionsButton.hover(function(){f(this).find(\".mejs-captions-selector\").css(\"visibility\",\"visible\")},\nfunction(){f(this).find(\".mejs-captions-selector\").css(\"visibility\",\"hidden\")}).on(\"click\",\"input[type=radio]\",function(){lang=this.value;a.setTrack(lang)});a.options.alwaysShowControls?a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\"):a.container.bind(\"controlsshown\",function(){a.container.find(\".mejs-captions-position\").addClass(\"mejs-captions-position-hover\")}).bind(\"controlshidden\",function(){e.paused||a.container.find(\".mejs-captions-position\").removeClass(\"mejs-captions-position-hover\")});\na.trackToLoad=-1;a.selectedTrack=null;a.isLoadingTrack=false;for(d=0;d<a.tracks.length;d++)a.tracks[d].kind==\"subtitles\"&&a.addTrackButton(a.tracks[d].srclang,a.tracks[d].label);a.loadNextTrack();e.addEventListener(\"timeupdate\",function(){a.displayCaptions()},false);if(a.options.slidesSelector!=\"\"){a.slidesContainer=f(a.options.slidesSelector);e.addEventListener(\"timeupdate\",function(){a.displaySlides()},false)}e.addEventListener(\"loadedmetadata\",function(){a.displayChapters()},false);a.container.hover(function(){if(a.hasChapters){a.chapters.css(\"visibility\",\n\"visible\");a.chapters.fadeIn(200).height(a.chapters.find(\".mejs-chapter\").outerHeight())}},function(){a.hasChapters&&!e.paused&&a.chapters.fadeOut(200,function(){f(this).css(\"visibility\",\"hidden\");f(this).css(\"display\",\"block\")})});a.node.getAttribute(\"autoplay\")!==null&&a.chapters.css(\"visibility\",\"hidden\")}},setTrack:function(a){var b;if(a==\"none\"){this.selectedTrack=null;this.captionsButton.removeClass(\"mejs-captions-enabled\")}else for(b=0;b<this.tracks.length;b++)if(this.tracks[b].srclang==a){this.selectedTrack==\nnull&&this.captionsButton.addClass(\"mejs-captions-enabled\");this.selectedTrack=this.tracks[b];this.captions.attr(\"lang\",this.selectedTrack.srclang);this.displayCaptions();break}},loadNextTrack:function(){this.trackToLoad++;if(this.trackToLoad<this.tracks.length){this.isLoadingTrack=true;this.loadTrack(this.trackToLoad)}else{this.isLoadingTrack=false;this.checkForTracks()}},loadTrack:function(a){var b=this,c=b.tracks[a];f.ajax({url:c.src,dataType:\"text\",success:function(e){c.entries=typeof e==\"string\"&&\n/<tt\\s+xml/ig.exec(e)?mejs.TrackFormatParser.dfxp.parse(e):mejs.TrackFormatParser.webvvt.parse(e);c.isLoaded=true;b.enableTrackButton(c.srclang,c.label);b.loadNextTrack();c.kind==\"chapters\"&&b.media.addEventListener(\"play\",function(){b.media.duration>0&&b.displayChapters(c)},false);c.kind==\"slides\"&&b.setupSlides(c)},error:function(){b.loadNextTrack()}})},enableTrackButton:function(a,b){if(b===\"\")b=mejs.language.codes[a]||a;this.captionsButton.find(\"input[value=\"+a+\"]\").prop(\"disabled\",false).siblings(\"label\").html(b);\nthis.options.startLanguage==a&&f(\"#\"+this.id+\"_captions_\"+a).click();this.adjustLanguageBox()},addTrackButton:function(a,b){if(b===\"\")b=mejs.language.codes[a]||a;this.captionsButton.find(\"ul\").append(f('<li><input type=\"radio\" name=\"'+this.id+'_captions\" id=\"'+this.id+\"_captions_\"+a+'\" value=\"'+a+'\" disabled=\"disabled\" /><label for=\"'+this.id+\"_captions_\"+a+'\">'+b+\" (loading)</label></li>\"));this.adjustLanguageBox();this.container.find(\".mejs-captions-translations option[value=\"+a+\"]\").remove()},\nadjustLanguageBox:function(){this.captionsButton.find(\".mejs-captions-selector\").height(this.captionsButton.find(\".mejs-captions-selector ul\").outerHeight(true)+this.captionsButton.find(\".mejs-captions-translations\").outerHeight(true))},checkForTracks:function(){var a=false;if(this.options.hideCaptionsButtonWhenEmpty){for(i=0;i<this.tracks.length;i++)if(this.tracks[i].kind==\"subtitles\"){a=true;break}if(!a){this.captionsButton.hide();this.setControlsSize()}}},displayCaptions:function(){if(typeof this.tracks!=\n\"undefined\"){var a,b=this.selectedTrack;if(b!=null&&b.isLoaded)for(a=0;a<b.entries.times.length;a++)if(this.media.currentTime>=b.entries.times[a].start&&this.media.currentTime<=b.entries.times[a].stop){this.captionsText.html(b.entries.text[a]);this.captions.show().height(0);return}this.captions.hide()}},setupSlides:function(a){this.slides=a;this.slides.entries.imgs=[this.slides.entries.text.length];this.showSlide(0)},showSlide:function(a){if(!(typeof this.tracks==\"undefined\"||typeof this.slidesContainer==\n\"undefined\")){var b=this,c=b.slides.entries.text[a],e=b.slides.entries.imgs[a];if(typeof e==\"undefined\"||typeof e.fadeIn==\"undefined\")b.slides.entries.imgs[a]=e=f('<img src=\"'+c+'\">').on(\"load\",function(){e.appendTo(b.slidesContainer).hide().fadeIn().siblings(\":visible\").fadeOut()});else!e.is(\":visible\")&&!e.is(\":animated\")&&e.fadeIn().siblings(\":visible\").fadeOut()}},displaySlides:function(){if(typeof this.slides!=\"undefined\"){var a=this.slides,b;for(b=0;b<a.entries.times.length;b++)if(this.media.currentTime>=\na.entries.times[b].start&&this.media.currentTime<=a.entries.times[b].stop){this.showSlide(b);break}}},displayChapters:function(){var a;for(a=0;a<this.tracks.length;a++)if(this.tracks[a].kind==\"chapters\"&&this.tracks[a].isLoaded){this.drawChapters(this.tracks[a]);this.hasChapters=true;break}},drawChapters:function(a){var b=this,c,e,d=e=0;b.chapters.empty();for(c=0;c<a.entries.times.length;c++){e=a.entries.times[c].stop-a.entries.times[c].start;e=Math.floor(e/b.media.duration*100);if(e+d>100||c==a.entries.times.length-\n1&&e+d<100)e=100-d;b.chapters.append(f('<div class=\"mejs-chapter\" rel=\"'+a.entries.times[c].start+'\" style=\"left: '+d.toString()+\"%;width: \"+e.toString()+'%;\"><div class=\"mejs-chapter-block'+(c==a.entries.times.length-1?\" mejs-chapter-block-last\":\"\")+'\"><span class=\"ch-title\">'+a.entries.text[c]+'</span><span class=\"ch-time\">'+mejs.Utility.secondsToTimeCode(a.entries.times[c].start)+\"&ndash;\"+mejs.Utility.secondsToTimeCode(a.entries.times[c].stop)+\"</span></div></div>\"));d+=e}b.chapters.find(\"div.mejs-chapter\").click(function(){b.media.setCurrentTime(parseFloat(f(this).attr(\"rel\")));\nb.media.paused&&b.media.play()});b.chapters.show()}});mejs.language={codes:{af:\"Afrikaans\",sq:\"Albanian\",ar:\"Arabic\",be:\"Belarusian\",bg:\"Bulgarian\",ca:\"Catalan\",zh:\"Chinese\",\"zh-cn\":\"Chinese Simplified\",\"zh-tw\":\"Chinese Traditional\",hr:\"Croatian\",cs:\"Czech\",da:\"Danish\",nl:\"Dutch\",en:\"English\",et:\"Estonian\",tl:\"Filipino\",fi:\"Finnish\",fr:\"French\",gl:\"Galician\",de:\"German\",el:\"Greek\",ht:\"Haitian Creole\",iw:\"Hebrew\",hi:\"Hindi\",hu:\"Hungarian\",is:\"Icelandic\",id:\"Indonesian\",ga:\"Irish\",it:\"Italian\",ja:\"Japanese\",\nko:\"Korean\",lv:\"Latvian\",lt:\"Lithuanian\",mk:\"Macedonian\",ms:\"Malay\",mt:\"Maltese\",no:\"Norwegian\",fa:\"Persian\",pl:\"Polish\",pt:\"Portuguese\",ro:\"Romanian\",ru:\"Russian\",sr:\"Serbian\",sk:\"Slovak\",sl:\"Slovenian\",es:\"Spanish\",sw:\"Swahili\",sv:\"Swedish\",tl:\"Tagalog\",th:\"Thai\",tr:\"Turkish\",uk:\"Ukrainian\",vi:\"Vietnamese\",cy:\"Welsh\",yi:\"Yiddish\"}};mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,\nparse:function(a){var b=0;a=mejs.TrackFormatParser.split2(a,/\\r?\\n/);for(var c={text:[],times:[]},e,d;b<a.length;b++)if(this.pattern_identifier.exec(a[b])){b++;if((e=this.pattern_timecode.exec(a[b]))&&b<a.length){b++;d=a[b];for(b++;a[b]!==\"\"&&b<a.length;){d=d+\"\\n\"+a[b];b++}d=f.trim(d).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\"<a href='$1' target='_blank'>$1</a>\");c.text.push(d);c.times.push({start:mejs.Utility.convertSMPTEtoSeconds(e[1])==0?0.2:mejs.Utility.convertSMPTEtoSeconds(e[1]),\nstop:mejs.Utility.convertSMPTEtoSeconds(e[3]),settings:e[5]})}}return c}},dfxp:{parse:function(a){a=f(a).filter(\"tt\");var b=0;b=a.children(\"div\").eq(0);var c=b.find(\"p\");b=a.find(\"#\"+b.attr(\"style\"));var e,d;a={text:[],times:[]};if(b.length){d=b.removeAttr(\"id\").get(0).attributes;if(d.length){e={};for(b=0;b<d.length;b++)e[d[b].name.split(\":\")[1]]=d[b].value}}for(b=0;b<c.length;b++){var g;d={start:null,stop:null,style:null};if(c.eq(b).attr(\"begin\"))d.start=mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"begin\"));\nif(!d.start&&c.eq(b-1).attr(\"end\"))d.start=mejs.Utility.convertSMPTEtoSeconds(c.eq(b-1).attr(\"end\"));if(c.eq(b).attr(\"end\"))d.stop=mejs.Utility.convertSMPTEtoSeconds(c.eq(b).attr(\"end\"));if(!d.stop&&c.eq(b+1).attr(\"begin\"))d.stop=mejs.Utility.convertSMPTEtoSeconds(c.eq(b+1).attr(\"begin\"));if(e){g=\"\";for(var k in e)g+=k+\":\"+e[k]+\";\"}if(g)d.style=g;if(d.start==0)d.start=0.2;a.times.push(d);d=f.trim(c.eq(b).html()).replace(/(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\n\"<a href='$1' target='_blank'>$1</a>\");a.text.push(d);if(a.times.start==0)a.times.start=2}return a}},split2:function(a,b){return a.split(b)}};if(\"x\\n\\ny\".split(/\\n/gi).length!=3)mejs.TrackFormatParser.split2=function(a,b){var c=[],e=\"\",d;for(d=0;d<a.length;d++){e+=a.substring(d,d+1);if(b.test(e)){c.push(e.replace(b,\"\"));e=\"\"}}c.push(e);return c}})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(a){if(typeof a.enterFullScreen==\"undefined\")return null;return a.isFullScreen?mejs.i18n.t(\"Turn off Fullscreen\"):mejs.i18n.t(\"Go Fullscreen\")},click:function(a){a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}},{render:function(a){return a.media.muted?mejs.i18n.t(\"Unmute\"):mejs.i18n.t(\"Mute\")},click:function(a){a.media.muted?a.setMuted(false):a.setMuted(true)}},{isSeparator:true},{render:function(){return mejs.i18n.t(\"Download Video\")},\nclick:function(a){window.location.href=a.media.currentSrc}}]});f.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(a){a.contextMenu=f('<div class=\"mejs-contextmenu\"></div>').appendTo(f(\"body\")).hide();a.container.bind(\"contextmenu\",function(b){if(a.isContextMenuEnabled){b.preventDefault();a.renderContextMenu(b.clientX-1,b.clientY-1);return false}});a.container.bind(\"click\",function(){a.contextMenu.hide()});a.contextMenu.bind(\"mouseleave\",function(){a.startContextMenuTimer()})},cleancontextmenu:function(a){a.contextMenu.remove()},\nisContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true},disableContextMenu:function(){this.isContextMenuEnabled=false},contextMenuTimeout:null,startContextMenuTimer:function(){var a=this;a.killContextMenuTimer();a.contextMenuTimer=setTimeout(function(){a.hideContextMenu();a.killContextMenuTimer()},750)},killContextMenuTimer:function(){var a=this.contextMenuTimer;if(a!=null){clearTimeout(a);delete a}},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(a,\nb){for(var c=this,e=\"\",d=c.options.contextMenuItems,g=0,k=d.length;g<k;g++)if(d[g].isSeparator)e+='<div class=\"mejs-contextmenu-separator\"></div>';else{var j=d[g].render(c);if(j!=null)e+='<div class=\"mejs-contextmenu-item\" data-itemindex=\"'+g+'\" id=\"element-'+Math.random()*1E6+'\">'+j+\"</div>\"}c.contextMenu.empty().append(f(e)).css({top:b,left:a}).show();c.contextMenu.find(\".mejs-contextmenu-item\").each(function(){var m=f(this),q=parseInt(m.data(\"itemindex\"),10),p=c.options.contextMenuItems[q];typeof p.show!=\n\"undefined\"&&p.show(m,c);m.click(function(){typeof p.click!=\"undefined\"&&p.click(c);c.contextMenu.hide()})});setTimeout(function(){c.killControlsTimer(\"rev3\")},100)}})})(mejs.$);\n(function(f){f.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t(\"Close\")});f.extend(MediaElementPlayer.prototype,{buildpostroll:function(a,b,c){var e=this.container.find('link[rel=\"postroll\"]').attr(\"href\");if(typeof e!==\"undefined\"){a.postroll=f('<div class=\"mejs-postroll-layer mejs-layer\"><a class=\"mejs-postroll-close\" onclick=\"$(this).parent().hide();return false;\">'+this.options.postrollCloseText+'</a><div class=\"mejs-postroll-layer-content\"></div></div>').prependTo(c).hide();this.media.addEventListener(\"ended\",\nfunction(){f.ajax({dataType:\"html\",url:e,success:function(d){c.find(\".mejs-postroll-layer-content\").html(d)}});a.postroll.show()},false)}}})})(mejs.$);\n\n\ndefine(\"extensions/adapt-wcn/js/mediaelement-and-player.min\", function(){});\n\n",
    "define('extensions/adapt-WCN/js/adapt-wcnContainerView',[\n    'backbone',\n    'coreJS/adapt',\n    'extensions/adapt-wcn/js/mediaelement-and-player.min'\n], function(Backbone, Adapt, mep) {\n\n    var wcnContainerView = Backbone.View.extend({\n\n        template: \"wcn-container\",\n\n        events: {\n            'click .wcn-audio': 'onClickAudioButton'\n        },\n\n        initialize: function(options) {\n\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n            this.$('audio').on('ended', _.bind(this.onAudioEnded, this));\n            this.model.set(\"_currentAudioElement\", '');\n\n            if (this.model.get('_componentLayout') === true) {\n                this.$('.wcn-bodyText').css('padding', '8px 200px');\n            } else {\n                this.$('.wcn-bodyText').css('padding', '8px 50px');\n            }\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[\"wcn\"];\n            this.$el.html(template(data));\n            return this;\n        },\n\n        onClickAudioButton: function(event) { \n            if (event && event.preventDefault) event.preventDefault();\n            var audioElement = this.model.get(\"_currentAudioElement\");\n            var $currentSelected = $(event.currentTarget);\n            if (audioElement === '' && !$currentSelected.hasClass('selected')) {\n                var audioElement = this.$('.wcn-item-audio audio')[0];\n                this.playAudioForElement(audioElement);\n                this.$('.wcn-audio').addClass('selected');\n                this.$('.wcnWithAudio-sound').removeClass('icon-sound-mute');\n                this.$('.wcnWithAudio-sound').addClass('icon-sound');\n            } else {\n                this.stopCurrentAudio();\n                this.$('.wcn-audio').removeClass('selected');\n                this.$('.wcnWithAudio-sound').removeClass('icon-sound');\n                this.$('.wcnWithAudio-sound').addClass('icon-sound-mute');\n            }\n        },\n\n        playAudioForElement: function(audioElement) {\n            if (audioElement) {\n                this.stopCurrentAudio();\n                this.model.set(\"_currentAudioElement\", audioElement);\n                if (audioElement.play) audioElement.play();\n            }\n        },\n\n        onAudioEnded: function(event) {\n            this.$('.wcn-audio').removeClass('selected');\n            this.$('.wcnWithAudio-sound').removeClass('icon-sound').addClass('icon-sound-mute');\n            this.model.get(\"_currentAudioElement\").currentTime = 0.0;\n            this.model.set(\"_currentAudioElement\", '');\n        },\n\n        stopCurrentAudio: function() {\n            var audioElement = this.model.get(\"_currentAudioElement\");\n            if (audioElement) {\n                if (!audioElement.paused && audioElement.pause) {\n                    audioElement.pause();\n                }\n                if (audioElement.currentTime !== 0) {\n                    audioElement.currentTime = 0.0;\n                }\n                this.model.set(\"_currentAudioElement\", '');\n            }\n        }\n    });\n    return wcnContainerView;\n});\n\n\n",
    "define('extensions/adapt-WCN/js/adapt-wcn',[\n    'backbone',\n    'coreJS/adapt',\n    './adapt-wcnContainerView'\n], function(Backbone, Adapt,wcnContainerView) {\n\n      function onComponentViewPostRender (wcnComponentView) {\n\n            var wcnComponentData = wcnComponentView.model.get('_wcn') || {};\n            if(wcnComponentData._isEnabled !== true) return ;\n\n                if(wcnComponentView.model.get('_layout') === 'full') {\n                    wcnComponentData._componentLayout=true;\n                } else {\n                    wcnComponentData._componentLayout=false;\n                }\n                var $wcnView = new wcnContainerView({model: new Backbone.Model(wcnComponentData)}).$el;\n                var $componentBody = wcnComponentView.$el.find('.component-body');\n                $wcnView.insertAfter($componentBody);\n      }\n\n        Adapt.on('componentView:postRender', function(wcnComponentView) {\n              wcnCourseData=Adapt.course.get('_wcn');\n              if(!wcnCourseData || !wcnCourseData._isEnabled) {\n                return console.log(\"sorry, no wcn object is set on the course.json file\");\n              }\n              onComponentViewPostRender(wcnComponentView);\n        });\n});\n\n\n",
    "/*\n* blockAutoPlay\n* Maintainers - Jerome Lam\n*/\n\n/* jQuery.fracs 0.15.1 - http://larsjung.de/jquery-fracs/ */\n!function(){\"use strict\";function t(t,n){return typeof t===n}function n(t,n){return t instanceof n}function i(t){return t&&t.nodeType}function e(t){return i(t)?t:n(t,m)?t[0]:void 0}function o(t,n,i){return m.each(t,function(t,e){i=n.call(e,i,t,e)}),i}function r(t,n,i){var e,o,r;if(t===n)return!0;if(!t||!n||t.constructor!==n.constructor)return!1;for(e=0,o=i.length;o>e;e+=1){if(r=i[e],t[r]&&k(t[r].equals)&&!t[r].equals(n[r]))return!1;if(t[r]!==n[r])return!1}return!0}function s(t,n,i,e){this.left=x(t),this.top=x(n),this.width=x(i),this.height=x(e),this.right=this.left+this.width,this.bottom=this.top+this.height}function h(t,n,i,e){this.visible=t||0,this.viewport=n||0,this.possible=i||0,this.rects=e&&y({},e)||null}function l(t,n){this.els=t,this.viewport=n}function c(t,n,i){var e;return m.inArray(i,S)>=0?e=s.ofElement(t):m.inArray(i,C)>=0&&(e=h.of(t,n)),e?e[i]:0}function u(t,n){return t.val-n.val}function a(t,n){return n.val-t.val}function f(t){var n=s.ofContent(t,!0),i=s.ofViewport(t,!0),e=n.width-i.width,o=n.height-i.height;this.content=n,this.viewport=i,this.width=0>=e?null:i.left/e,this.height=0>=o?null:i.top/o,this.left=i.left,this.top=i.top,this.right=n.right-i.right,this.bottom=n.bottom-i.bottom}function p(t){this.el=t||window}function d(t,n){this.context=t,this.viewport=n,this.init()}function v(t,n,i,e){this.context=new l(t,n),this.property=i,this.descending=e,this.init()}function w(t){t&&t!==window&&t!==document?(this.context=t,this.$autoTarget=m(t)):this.context=window,this.init()}function g(t,n){function i(n,i,e,o){return e=h(e)?e.apply(n,i):e,h(o[e])?o[e].apply(n,i):void r.error('Method \"'+e+'\" does not exist on jQuery.'+t)}function e(t){t&&(s(c,t.statics),s(u,t.methods)),c.modplug=e}var o=[].slice,r=jQuery,s=r.extend,h=r.isFunction,l=s({},n),c=function a(){return i(this,o.call(arguments),l.defaultStatic,a)},u=function f(t){return h(f[t])?f[t].apply(this,o.call(arguments,1)):i(this,o.call(arguments),l.defaultMethod,f)};e.prev={statics:r[t],methods:r.fn[t]},e(n),r[t]=c,r.fn[t]=u}var m=jQuery,b=m(window),T=m(document),y=m.extend,k=m.isFunction,V=Math.max,E=Math.min,x=Math.round,q=function(){var t={},n=1;return function(i){return i?(t[i]||(t[i]=n,n+=1),t[i]):0}}();y(s.prototype,{equals:function(t){return r(this,t,[\"left\",\"top\",\"width\",\"height\"])},area:function(){return this.width*this.height},relativeTo:function(t){return new s(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!n(t,s))return null;var i=V(this.left,t.left),e=E(this.right,t.right),o=V(this.top,t.top),r=E(this.bottom,t.bottom),h=e-i,l=r-o;return h>=0&&l>=0?new s(i,o,h,l):null},envelope:function(t){if(!n(t,s))return this;var i=E(this.left,t.left),e=V(this.right,t.right),o=E(this.top,t.top),r=V(this.bottom,t.bottom),h=e-i,l=r-o;return new s(i,o,h,l)}}),y(s,{ofContent:function(t,n){return t&&t!==document&&t!==window?n?new s(0,0,t.scrollWidth,t.scrollHeight):new s(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop,t.scrollWidth,t.scrollHeight):new s(0,0,T.width(),T.height())},ofViewport:function(t,n){return t&&t!==document&&t!==window?n?new s(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight):new s(t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight):new s(b.scrollLeft(),b.scrollTop(),b.width(),b.height())},ofElement:function(t){var n=m(t);if(!n.is(\":visible\"))return null;var i=n.offset();return new s(i.left,i.top,n.outerWidth(),n.outerHeight())}}),y(h.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return r(this,t,[\"visible\",\"viewport\",\"possible\"])},rectsEqual:function(t){return r(this.rects,t.rects,[\"document\",\"element\",\"viewport\"])}}),y(h,{of:function(t,n){var e,o,r;return t=i(t)&&s.ofElement(t)||t,n=i(n)&&s.ofViewport(n)||n||s.ofViewport(),t instanceof s&&(e=t.intersection(n))?(o=e.area(),r=E(t.width,n.width)*E(t.height,n.height),new h(o/t.area(),o/n.area(),o/r,{document:e,element:e.relativeTo(t),viewport:e.relativeTo(n)})):new h}});var S=[\"width\",\"height\",\"left\",\"right\",\"top\",\"bottom\"],C=[\"possible\",\"visible\",\"viewport\"];y(l.prototype,{sorted:function(t,n){var i=this.viewport;return m.map(this.els,function(n){return{el:n,val:c(n,i,t)}}).sort(n?a:u)},best:function(t,n){return this.els.length?this.sorted(t,n)[0]:null}}),y(f.prototype,{equals:function(t){return r(this,t,[\"width\",\"height\",\"left\",\"top\",\"right\",\"bottom\",\"content\",\"viewport\"])}}),y(p.prototype,{equals:function(t){return r(this,t,[\"el\"])},scrollState:function(){return new f(this.el)},scrollTo:function(t,n,i){var e=m(this.el===window?\"html,body\":this.el);t=t||0,n=n||0,i=isNaN(i)?1e3:i,e.stop(!0).animate({scrollLeft:t,scrollTop:n},i)},scroll:function(t,n,i){var e=this.el===window?b:m(this.el);t=t||0,n=n||0,this.scrollTo(e.scrollLeft()+t,e.scrollTop()+n,i)},scrollToRect:function(t,n,i,e){n=n||0,i=i||0,this.scrollTo(t.left-n,t.top-i,e)},scrollToElement:function(t,n,i,e){var o=s.ofElement(t).relativeTo(s.ofContent(this.el));this.scrollToRect(o,n,i,e)}});var L={init:function(){this.callbacks=m.Callbacks(\"memory unique\"),this.currVal=null,this.prevVal=null,this.checkProxy=m.proxy(this.check,this),this.autoCheck()},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},trigger:function(){this.callbacks.fireWith(this.context,[this.currVal,this.prevVal])},check:function(t){var n=this.updatedValue(t);return void 0===n?!1:(this.prevVal=this.currVal,this.currVal=n,this.trigger(),!0)},$autoTarget:b,autoEvents:\"load resize scroll\",autoCheck:function(t){this.$autoTarget[t===!1?\"off\":\"on\"](this.autoEvents,this.checkProxy)}};y(d.prototype,L,{updatedValue:function(){var t=h.of(this.context,this.viewport);return this.currVal&&this.currVal.equals(t)?void 0:t}}),y(v.prototype,L,{updatedValue:function(){var t=this.context.best(this.property,this.descending);return t&&(t=t.val>0?t.el:null,this.currVal!==t)?t:void 0}}),y(w.prototype,L,{updatedValue:function(){var t=new f(this.context);return this.currVal&&this.currVal.equals(t)?void 0:t}});var M=\"fracs\";g(M,{statics:{version:\"0.15.1\",Rect:s,Fractions:h,Group:l,ScrollState:f,Viewport:p,FracsCallbacks:d,GroupCallbacks:v,ScrollStateCallbacks:w,fracs:function(t,n){return h.of(t,n)}},methods:{content:function(t){return this.length?s.ofContent(this[0],t):null},envelope:function(){return o(this,function(t){var n=s.ofElement(this);return t?t.envelope(n):n})},fracs:function(n,i,o){t(n,\"string\")||(o=i,i=n,n=null),k(i)||(o=i,i=null),o=e(o);var r=M+\".fracs.\"+q(o);return\"unbind\"===n?this.each(function(){var t=m(this).data(r);t&&t.unbind(i)}):\"check\"===n?this.each(function(){var t=m(this).data(r);t&&t.check()}):k(i)?this.each(function(){var t=m(this),n=t.data(r);n||(n=new d(this,o),t.data(r,n)),n.bind(i)}):this.length?h.of(this[0],o):null},intersection:function(){return o(this,function(t){var n=s.ofElement(this);return t?t.intersection(n):n})},max:function(t,n,i){return k(n)||(i=n,n=null),i=e(i),n?(new v(this,i,t,!0).bind(n),this):this.pushStack(new l(this,i).best(t,!0).el)},min:function(t,n,i){return k(n)||(i=n,n=null),i=e(i),n?(new v(this,i,t).bind(n),this):this.pushStack(new l(this,i).best(t).el)},rect:function(){return this.length?s.ofElement(this[0]):null},scrollState:function(n,i){var e=M+\".scrollState\";return t(n,\"string\")||(i=n,n=null),\"unbind\"===n?this.each(function(){var t=m(this).data(e);t&&t.unbind(i)}):\"check\"===n?this.each(function(){var t=m(this).data(e);t&&t.check()}):k(i)?this.each(function(){var t=m(this),n=t.data(e);n||(n=new w(this),t.data(e,n)),n.bind(i)}):this.length?new f(this[0]):null},scroll:function(t,n,i){return this.each(function(){new p(this).scroll(t,n,i)})},scrollTo:function(t,n,i,o){return m.isNumeric(t)&&(o=i,i=n,n=t,t=null),t=e(t),this.each(function(){t?new p(this).scrollToElement(t,n,i,o):new p(this).scrollTo(n,i,o)})},scrollToThis:function(t,n,i,o){return o=new p(e(o)),o.scrollToElement(this[0],t,n,i),this},softLink:function(t,n,i,o){return o=new p(e(o)),this.filter(\"a[href^=#]\").each(function(){var e=m(this);e.on(\"click\",function(){o.scrollToElement(m(e.attr(\"href\"))[0],t,n,i)})})},sort:function(n,i,o){return t(i,\"boolean\")||(o=i,i=null),o=e(o),this.pushStack(m.map(new l(this,o).sorted(n,!i),function(t){return t.el}))},viewport:function(t){return this.length?s.ofViewport(this[0],t):null}},defaultStatic:\"fracs\",defaultMethod:\"fracs\"})}();\n\ndefine('extensions/adapt-blockAutoPlay/js/adapt-blockAutoPlay',['require','coreJS/adapt','backbone'],function(require) {\n\n\tvar Adapt = require(\"coreJS/adapt\");\n\tvar Backbone = require(\"backbone\");\n\n\tvar blockAutoPlayView = Backbone.View.extend({\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(Adapt, \"remove\", this.remove);\n\t\t\tthis.listenTo(Adapt, \"blockAutoPlay:ended\", this.stopAudio);\n\t\t\tthis.render();\n\t\t},\n\n\t\tevents: {\n\t\t\t\"click .volume-control\": \"triggerAudio\",\n\t\t\t\"start\": \"startAudio\",\n\t\t\t\"stop\": \"stopAudio\"\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar template = Handlebars.templates[\"blockAutoPlay\"];\n\t\t\tvar data = this.model.toJSON();\n\n\t\t\tthis.$el.find('.block-title').append(template(data));\n\n\t\t\tthis.$('.volume-control .volume-control-on').hide();\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn this;\n\t\t},\n\n\t\ttriggerAudio: function() {\n\t\t\tvar that = this;\n\n\t\t\tif (!that.isPlaying) {\n\t\t\t\t$(window).scrollTo(this.$el, {offset:{top:-$('.navigation').height()}});\n\t\t\t}\n\n\t\t\tthat.$('.block-audio').each(function() {\n\t\t\t\tswitch ($(this).prop('tagName').toLowerCase()) {\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\tif (!that.isPlaying) {\n\t\t\t\t\t\t\tthis.play();\n\t\t\t\t\t\t\tthis.removeEventListener('ended', that.ended);\n\t\t\t\t\t\t\tthis.addEventListener('ended', that.ended);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthat.$('.volume-control .volume-control-on, .volume-control .volume-control-off').toggle();\n\t\t\tthat.isPlaying = !that.isPlaying;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tstartAudio: function() {\n\t\t\tvar that = this;\n\n\t\t\tthat.$('.block-audio').each(function() {\n\t\t\t\tswitch ($(this).prop('tagName').toLowerCase()) {\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\tthis.play();\n\t\t\t\t\t\tthis.addEventListener('ended', that.ended);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthat.$('.volume-control .volume-control-on').show();\n\t\t\tthat.$('.volume-control .volume-control-off').hide();\n\t\t\tthat.isPlaying = true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tstopAudio: function() {\n\t\t\tvar that = this;\n\n\t\t\tthat.$('.block-audio').each(function() {\n\t\t\t\tswitch ($(this).prop('tagName').toLowerCase()) {\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\tthis.removeEventListener('ended', that.ended);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthat.$('.volume-control .volume-control-on').hide();\n\t\t\tthat.$('.volume-control .volume-control-off').show();\n\t\t\tthat.isPlaying = false;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tended: function(event) {\n\t\t\tAdapt.trigger('blockAutoPlay:ended');\n\t\t}\n\n\t});\n\t\n\tfunction extractDomain(url) {\n\t\t\tvar domain;\n\t\t\t//find & remove protocol (http, ftp, etc.) and get domain\n\t\t\tif (url.indexOf(\"://\") > -1) {\n\t\t\t\t\tdomain = url.split('/')[2];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\tdomain = url.split('/')[0];\n\t\t\t}\n\n\t\t\t//find & remove port number\n\t\t\tdomain = domain.split(':')[0];\n\n\t\t\treturn domain;\n\t}\n\t\n\tfunction compare_domain(domain1, domain2){\n\t\tif(domain1 == domain2)\n\t\t\treturn true;\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tAdapt.on(\"blockView:postRender\", function(currentView) {\n\t\tif (currentView.model.get('_blockAutoPlay') && currentView.model.get('_blockAutoPlay')._isEnabled) {\n\t\t\tnew blockAutoPlayView({ el: currentView.$el, model: currentView.model });\n\t\t}\n\t});\n\n\tAdapt.on('pageView:ready', function(currentView) {\n\t\t$('.block-audio').on('mediaStop', function() {\n\t\t\tvar volumeControl = $(this).closest('.block').find('.volume-control');\n\t\t\tif (volumeControl.length) {\n\t\t\t\tvolumeControl.trigger('stop');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tswitch ($(this).prop('tagName').toLowerCase()) {\n\t\t\t\t\tcase 'video':\n\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\t//this.muted = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* REACTIVATE FOR DESKTOP AUTOPLAY ON INVIEW\n\t\tif (!$('.blockslider-container').length && !Adapt.device.touch) {\n\t\t\t// Handle play and stop events for media.\n\t\t\t$('audio, video, iframe').on('mediaPlay', function() {\n\t\t\t\tvar volumeControl = $(this).closest('.block').find('.volume-control');\n\t\t\t\tif (volumeControl.length) {\n\t\t\t\t\tvolumeControl.trigger('start');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tswitch ($(this).prop('tagName').toLowerCase()) {\n\t\t\t\t\t\tcase 'iframe':\n\t\t\t\t\t\t\t$(this).contents().find('audio').each(function() {\n\t\t\t\t\t\t\t\t//this.muted = false;\n\t\t\t\t\t\t\t\tthis.play();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'video':\n\t\t\t\t\t\tcase 'audio':\n\t\t\t\t\t\t\t//this.muted = false;\n\t\t\t\t\t\t\tthis.play();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t*/\n\n\t\tvar viewportSize, viewportOffset,\n\t\t\t\td = document, w = window, documentElement = d.documentElement;\n\n\t\tfunction getViewportSize() {\n\t\t\tvar mode, domObject, size = { height: w.innerHeight, width: w.innerWidth };\n\n\t\t\t// if this is correct then return it. iPad has compat Mode, so will\n\t\t\t// go into check clientHeight/clientWidth (which has the wrong value).\n\t\t\tif (!size.height) {\n\t\t\t\tmode = d.compatMode;\n\t\t\t\tif (mode || !$.support.boxModel) { // IE, Gecko\n\t\t\t\t\tdomObject = mode === 'CSS1Compat' ?\n\t\t\t\t\t\tdocumentElement : // Standards\n\t\t\t\t\t\td.body; // Quirks\n\t\t\t\t\tsize = {\n\t\t\t\t\t\theight: domObject.clientHeight,\n\t\t\t\t\t\twidth:  domObject.clientWidth\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn size;\n\t\t}\n\n\t\tfunction getViewportOffset() {\n\t\t\treturn {\n\t\t\t\ttop:  w.pageYOffset || documentElement.scrollTop   || d.body.scrollTop,\n\t\t\t\tleft: w.pageXOffset || documentElement.scrollLeft  || d.body.scrollLeft\n\t\t\t};\n\t\t}\n\n\t\tvar autoPlayMedia = function() {\n\t\t\tvar navigationOffset = $('.navigation').height();\n\t\t\tvar $elements = $('.block'), elementsLength, i = 0;\n\n\t\t\telementsLength = $elements.length;\n\t\t\tif (elementsLength) {\n\t\t\t\tviewportSize = viewportOffset = null;\n\n\t\t\t\tviewportSize   = viewportSize   || getViewportSize();\n\t\t\t\tviewportOffset = viewportOffset || getViewportOffset();\n\n\t\t\t\tfor (; i<elementsLength; i++) {\n\t\t\t\t\t// Ignore elements that are not in the DOM tree\n\t\t\t\t\tif (!$.contains(documentElement, $elements[i])) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $element      = $($elements[i]),\n\t\t\t\t\t\t\telementSize   = { height: $element.height(), width: $element.width() },\n\t\t\t\t\t\t\telementOffset = $element.offset();\n\n\t\t\t\t\t// Don't ask me why because I haven't figured out yet:\n\t\t\t\t\t// viewportOffset and viewportSize are sometimes suddenly null in Firefox 5.\n\t\t\t\t\t// Even though it sounds weird:\n\t\t\t\t\t// It seems that the execution of this function is interferred by the onresize/onscroll event\n\t\t\t\t\t// where viewportOffset and viewportSize are unset\n\t\t\t\t\tif (!viewportOffset || !viewportSize) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Use jQuery fracs plugin to determine whether the element is in view.\n\t\t\t\t\t// TODO: Make it aware of navigation bars.\n\t\t\t\t\tvar fracs = $element.fracs();\n\t\t\t\t\tif (fracs.visible > 0.55) {\n\t\t\t\t\t\t$element.find('.block-audio').trigger('mediaPlay');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$element.trigger('allAudioStopWithinBlock', [ fracs.visible ]);\n\t\t\t\t\t\t$element.find('.block-audio').trigger('mediaStop');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$(window).on('scroll resize', _.bind(\n\t\t\t_.throttle(autoPlayMedia, 200), this\n\t\t));\n\t\tautoPlayMedia();\n\t});\n});\n\n",
    "define('extensions/adapt-blockBullets/js/utils/utils',[\n    'coreJS/adapt'\n], function(Adapt) {\n\n    var Utils = {\n\n        getCurrentPage: function() {\n            var currentUrl = window.location.href;\n            var temp = currentUrl.split(\"/\");\n            var currentPageId = temp[temp.length - 1];\n            return currentPageId;\n        },\n\n        getArticleModel: function(currentPageId) {\n            var articleModel = [];\n            var contentObjectModel = Adapt.course.getChildren().models;\n\n            _.each(contentObjectModel, function(item) {\n                if (currentPageId == item.get(\"_id\")) {\n                    articleModel.push(item.getChildren().models);\n                }\n            });\n            return articleModel;\n        },\n        \n        getCurrentBlock:function(event,articleModel) {\n            var $currentTarget = $(event.currentTarget);\n            var $currentBlock = $currentTarget.closest(\".block\");\n            var allBlocks = articleModel.getChildren().models;\n            var visibleBlock = _.filter(allBlocks, function(block, index) {\n                blockId = block.get(\"_id\");\n                if ($currentBlock.hasClass(blockId)) {\n                    return blockId;\n                }\n            }, this);\n            return visibleBlock;\n        }\n    }\n    return Utils;\n});\n\n",
    "define('extensions/adapt-blockBullets/js/bulletsView',[\n    'backbone',\n    'coreJS/adapt',\n    './utils/utils'\n], function(Backbone, Adapt, Utils) {\n    var BulletsView = Backbone.View.extend({\n\n        template: \"bulletsView\",\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n            this.init();\n        },\n\n        init: function() {\n            this.mouseOffset = {\n                x: 0,\n                y: 0\n            };\n            this.resizeOriginalOffset = {\n                x: 0,\n                y: 0\n            };\n            this.resizeCurrentOffset = {\n                x: 0,\n                y: 0\n            };\n            var articleHasBlockBullets = this.getArticleWithBlockBullets();\n            var currentBlockId = this.getCurrentBlock(articleHasBlockBullets);\n            var currentBlockText = this.getCurrentBlockText(articleHasBlockBullets, currentBlockId);\n            if (currentBlockText != undefined) {\n                this.showBulletText(currentBlockText, currentBlockId);\n            }\n            this.bindEvents();\n        },\n\n        getBlockBulletsItemRef: function(event) {\n            var block = Utils.getCurrentBlock(event, this.model);\n            var blockBulletsRef = block[0].get(\"_blockBullets\");\n            return blockBulletsRef;\n        },\n\n        unsetGraphicals: function($currentTarget) {\n            if ($currentTarget.hasClass('bullet-text-save')) {\n                $currentTarget.siblings('.bullet-text-resize').addClass('display-none');\n                $currentTarget.closest('.bullet-text').siblings('.close-minimize-bar').addClass('display-none');\n                $currentTarget.addClass('display-none');\n            } else {\n                $currentTarget.closest('.close-minimize-bar').siblings('.bullet-text').find('.bullet-text-save').addClass('display-none');\n                $currentTarget.closest('.close-minimize-bar').siblings('.bullet-text').find('.bullet-text-resize').addClass('display-none');\n                $currentTarget.closest('.close-minimize-bar').addClass('display-none');\n            }\n            $currentTarget.closest('.block-content-items-bullets').addClass('no-text-area');\n        },\n\n        enableTextArea: function(event) {\n            var $currentTarget = $(event.currentTarget);\n            if (!$currentTarget.closest('.block-content-items-bullets').hasClass('no-text-area')) return;\n            $currentTarget.siblings('.bullet-text-save').removeClass('display-none');\n            $currentTarget.siblings('.bullet-text-resize').removeClass('display-none');\n            $currentTarget.closest('.bullet-text').siblings('.close-minimize-bar').removeClass('display-none');\n            $currentTarget.closest('.block-content-items-bullets').removeClass('no-text-area');\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $(\".block-title\").after(template(this.model));\n        },\n\n        remove: function() {\n            $(document).off('touchstart click');\n            this.unbindEventsForDragging();\n            this.enableScroll();\n            Backbone.View.prototype.remove.call(this);\n        },\n\n        bindEvents: function() {\n            $(\".bullet-text-inner\").on(\"dblclick\", _.bind(this.enableTextArea, this));\n            $(\".bullet-text-close\").on(\"click\", _.bind(this.closeClicked, this));\n            $(\".block-content-items-bullets\").on(\"mousedown\", _.bind(this.onMouseDownBullets, this));\n            $(\".block-content-items-bullets\").on(\"touchstart\", _.bind(this.onTouchStartBullets, this));\n            $(\".bullet-text-resize\").on(\"mousedown\", _.bind(this.onMouseDownBulletsResize, this));\n            $(\".bullet-text-resize\").on(\"touchstart\", _.bind(this.onTouchStartBulletsResize, this));\n            $(\".bullet-text-save\").on(\"click\", _.bind(this.onSaveClicked, this));\n        },\n\n        bindMouseEvents: function() {\n            $(window).on('mouseup', _.bind(this.onMouseUpBullets, this));\n            $(\".block\").on('mousemove', _.bind(this.onMouseMoveBullets, this));\n        },\n\n        unbindMouseEvents: function() {\n            $(window).off('mouseup');\n            $(\".block\").off('mousemove');\n        },\n\n        bindTouchEvents: function() {\n            $(document).on('touchend', _.bind(this.onTouchEndBullets, this));\n            $(\".block\").on('touchcancel', _.bind(this.onTouchCancelBullets, this));\n            $(\".block\").on('touchmove', _.bind(this.onTouchMoveBullets, this));\n        },\n\n        unbindTouchEvents: function() {\n            $(document).off('touchend');\n            $(\".block\").off('touchmove');\n            $(\".block\").off('touchcancel');\n        },\n\n        unbindEventsForDragging: function() {\n            $(\".block-content-items-bullets\").css(\"left\", \"10px\");\n            $(\".block-content-items-bullets\").css(\"top\", \"0px\");\n            this.unbindMouseEvents();\n            this.unbindTouchEvents();\n        },\n\n        disableScroll: function() {\n            if (window.addEventListener) // older FF\n                window.addEventListener('DOMMouseScroll', this.preventDefault, false);\n            window.onwheel = this.preventDefault; // modern standard\n            window.onmousewheel = document.onmousewheel = this.preventDefault; // older browsers, IE\n            window.ontouchmove = this.preventDefault;\n        },\n\n        enableScroll: function() {\n            if (window.removeEventListener)\n                window.removeEventListener('DOMMouseScroll', this.preventDefault, false);\n            window.onmousewheel = document.onmousewheel = null;\n            window.onwheel = null;\n            window.ontouchmove = null;\n        },\n\n        stopPropagation: function(event) {\n            event = event || window.event;\n            if (event.stopPropagation) event.stopPropagation();\n            event.cancelBubble = true;\n        },\n\n        preventDefault: function(event) {\n            event = event || window.event;\n            if (event.preventDefault) event.preventDefault();\n            event.returnValue = false;\n        },\n\n        onSaveClicked: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var blockBulletsRef = this.getBlockBulletsItemRef(event);\n            blockBulletsRef.widthForBulletText = this.resizeCurrentWidth || blockBulletsRef.widthForBulletText;\n            blockBulletsRef.heightForBulletText = this.resizeCurrentHeight || blockBulletsRef.heightForBulletText;\n            var $bulletTextContainer = $(event.currentTarget).closest(\".block-content-items-bullets\");\n            var bulletTextCurrentPos = blockBulletsRef.positionOfBulletText;\n            bulletTextCurrentPos.top = $bulletTextContainer.css(\"top\");;\n            bulletTextCurrentPos.left = $bulletTextContainer.css(\"left\");;\n            this.unsetGraphicals($(event.currentTarget));\n            Adapt.trigger('blockBullets::save', blockBulletsRef);\n        },\n\n        onMouseDownBulletsResize: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var $currentTarget = $(event.currentTarget);\n            this.$bulletTextContainer = $currentTarget.closest(\".block-content-items-bullets\");\n            this.originalWidth = this.$bulletTextContainer.width();\n            this.originalHeight = this.$bulletTextContainer.height();\n            $(\".block-content-items-bullets\").off(\"mousedown\");\n            $(\".block-content-items-bullets\").off(\"touchstart\");\n            this.unbindTouchEvents();\n            this.resizeOriginalOffset.x = event.clientX;\n            this.resizeOriginalOffset.y = event.clientY;\n            $(window).on('mouseup', _.bind(this.onMouseUpBulletsResize, this));\n            $(\".block\").on('mousemove', _.bind(this.onMouseMoveBulletsResize, this));\n        },\n\n        onTouchStartBulletsResize: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var $currentTarget = $(event.currentTarget);\n            this.$bulletTextContainer = $currentTarget.closest(\".block-content-items-bullets\");\n            this.originalWidth = this.$bulletTextContainer.width();\n            this.originalHeight = this.$bulletTextContainer.height();\n            $(\".block-content-items-bullets\").off(\"touchstart\");\n            this.unbindTouchEvents();\n            this.resizeOriginalOffset.x = event.originalEvent.touches[0].clientX;\n            this.resizeOriginalOffset.y = event.originalEvent.touches[0].clientY;\n            $(window).on('touchend', _.bind(this.onTouchEndBulletsResize, this));\n            $(\".block\").on('touchmove', _.bind(this.onTouchMoveBulletsResize, this));\n        },\n\n        onMouseMoveBulletsResize: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.resizeCurrentOffset.x = event.clientX;\n            this.resizeCurrentOffset.y = event.clientY;\n            this.resizeCurrentWidth = (this.resizeCurrentOffset.x - this.resizeOriginalOffset.x) + this.originalWidth;\n            this.resizeCurrentHeight = (this.resizeCurrentOffset.y - this.resizeOriginalOffset.y) + this.originalHeight;\n            this.$bulletTextContainer.width(this.resizeCurrentWidth);\n            this.$bulletTextContainer.height(this.resizeCurrentHeight);\n        },\n\n        onTouchMoveBulletsResize: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.resizeCurrentOffset.x = event.originalEvent.touches[0].clientX;\n            this.resizeCurrentOffset.y = event.originalEvent.touches[0].clientX;\n            this.resizeCurrentWidth = (this.resizeCurrentOffset.x - this.resizeOriginalOffset.x) + this.originalWidth;\n            this.resizeCurrentHeight = (this.resizeCurrentOffset.y - this.resizeOriginalOffset.y) + this.originalHeight;\n            this.$bulletTextContainer.width(this.resizeCurrentWidth);\n            this.$bulletTextContainer.height(this.resizeCurrentHeight);\n        },\n\n        onMouseUpBulletsResize: function() {\n            this.unbindMouseEvents();\n            $(\".block-content-items-bullets\").on(\"mousedown\", _.bind(this.onMouseDownBullets, this));\n        },\n\n        onTouchEndBulletsResize: function(event) {\n            this.unbindTouchEvents();\n            $(\".block-content-items-bullets\").on(\"touchstart\", _.bind(this.onTouchStartBullets, this));\n        },\n\n        onMouseDownBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var $currentTarget = $(event.currentTarget);\n            $bulletTextContainer = $currentTarget.closest(\".block-content-items-bullets\");\n            if ($bulletTextContainer.hasClass('no-text-area')) return;\n            this.mouseOffset.x = event.clientX - $(event.currentTarget)[0].offsetLeft;\n            this.mouseOffset.y = event.clientY - $(event.currentTarget)[0].offsetTop;\n            this.bindMouseEvents();\n            this.disableScroll();\n        },\n\n        onMouseUpBullets: function(event) {\n            this.unbindMouseEvents();\n            this.enableScroll();\n        },\n\n        onMouseMoveBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.clientX - this.mouseOffset.x;\n            var top = event.clientY - this.mouseOffset.y;\n            if (top < 0) top = 0;\n            var $currentBlockContentItem = $(event.currentTarget).find('.block-content-items-bullets');\n            $currentBlockContentItem.css({\n                'left': left + 'px',\n                'top': top + 'px'\n            });\n        },\n\n        onTouchStartBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.mouseOffset.x = event.originalEvent.touches[0].clientX - $(event.currentTarget)[0].offsetLeft;\n            this.mouseOffset.y = event.originalEvent.touches[0].clientY - $(event.currentTarget)[0].offsetTop;\n\n            this.bindTouchEvents();\n            this.disableScroll();\n        },\n\n        onTouchEndBullets: function(event) {\n            this.unbindTouchEvents();\n            this.enableScroll();\n        },\n\n        onTouchCancelBullets: function(event) {\n            this.unbindTouchEvents();\n            this.enableScroll();\n        },\n\n        onTouchMoveBullets: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.originalEvent.touches[0].clientX - this.mouseOffset.x;\n            var top = event.originalEvent.touches[0].clientY - this.mouseOffset.y;\n            if (top < 0) top = 0;\n            var $currentBlockContentItem = $(event.currentTarget).find('.block-content-items-bullets');\n            $currentBlockContentItem.css({\n                'left': left + 'px',\n                'top': top + 'px'\n            });\n        },\n\n        getArticleWithBlockBullets: function() {\n            var allArticles = [];\n            var articleHasBlockBullets = [];\n            var currentPageId = Utils.getCurrentPage();\n            var articleModel = Utils.getArticleModel(currentPageId);\n            _.each(articleModel, function(items, index) {\n                _.each(items, function(item) {\n                    allArticles.push(item);\n                });\n            });\n\n            articleHasBlockBullets = _.filter(allArticles, function(item, index) {\n                if (item.get(\"_blockBullets\") != undefined) {\n                    return item;\n                }\n            });\n            return articleHasBlockBullets;\n        },\n\n        getCurrentBlock: function(articleHasBlockBullets) {\n            if (articleHasBlockBullets.length <= 0) return;\n            if (articleHasBlockBullets.length == 1) {\n    \n                var blocksInArticles = articleHasBlockBullets[0].getChildren().models;\n                var currentTab = _.filter(blocksInArticles, function(item, index) {\n                    if (item.get(\"_blockBullets\") != undefined) {\n                        return item;\n                    }\n                });\n                return currentTab[0].get('_id');\n            } else {\n\n            }\n        },\n\n        getCurrentBlockText: function(articleHasBlockBullets, currentBlockId) {\n            if (articleHasBlockBullets.length <= 0) return;\n            if (articleHasBlockBullets.length == 1) {\n\n                var blocksInArticles = articleHasBlockBullets[0].getChildren().models;\n                var currentBlockModel = _.filter(blocksInArticles, function(item, index) {\n                    if (currentBlockId == item.get(\"_id\")) {\n                        return item;\n                    }\n                });\n                var currentBlockBulletsItem = currentBlockModel[0].get(\"_blockBullets\");\n\n                if (currentBlockBulletsItem != undefined) {\n                    this.appendTextToBullet(blocksInArticles);\n                    var currentBlockText = currentBlockBulletsItem.textForBulletIcon;\n                    return currentBlockText;\n                } else {\n                    return currentBlockBulletsItem;\n                }\n            }\n        },\n\n        appendTextToBullet: function(blocksInArticles) {\n            _.each(blocksInArticles, function(item, index) {\n                var blockId = item.get(\"_id\");\n                var bulletIcon = item.get(\"_blockBullets\");\n            if(bulletIcon) {\n                var text = bulletIcon.textForBulletIcon;\n\n                var bulletWidth = bulletIcon.widthForBulletText + \"px\";\n                var bulletHeight = bulletIcon.heightForBulletText + \"px\";\n                var bulletTextPosition = bulletIcon.positionOfBulletText;\n                if (text == undefined || text == \"\") {\n                    var $bulletContainer = $(\".\" + blockId).find(\".block-content-items-bullets\");\n                    $bulletContainer.remove();\n                } else {\n                    var bulletTextInner = \"<div class='bullet-text-inner'>\" + text + \"</div>\"\n                    var $bulletContainer = $(\".\" + blockId).find(\".block-content-items-bullets\");\n\n                    $bulletContainer.css({\n                        \"width\": bulletWidth,\n                        \"height\": bulletHeight,\n                        \"top\": bulletTextPosition.top + \"px\",\n                        \"left\": bulletTextPosition.left + \"px\"\n                    })\n                    var $bulletText = $(\".\" + blockId).find(\".bullet-text\");\n                    $bulletText.prepend(bulletTextInner);\n                }\n             }\n            }, this);\n        },\n\n        showBulletText: function(currentBlockText, currentBlockId) {\n            var $bulletText = $(\".\" + currentBlockId).find(\".bullet-text\");\n            var $blockBulletsItem = $bulletText.closest(\".block-content-items-bullets\");\n            $blockBulletsItem.removeClass(\"display-none\");\n        },\n\n        hideAllOtherBulletText: function() {\n            _.each($(\".block\"), function(item, index) {\n                var $blockBulletsItems = $(item).find(\".block-content-items-bullets\");\n                var $bulletTextPlus = $(item).find(\".bullet-text-plus\");\n                $(item).find(\".block-title-inner\").removeClass('add-float-left');\n                if (!$blockBulletsItems.hasClass('display-none')) {\n                    $blockBulletsItems.addClass('display-none')\n                }\n                if (!$bulletTextPlus.hasClass('display-none')) {\n                    $bulletTextPlus.addClass('display-none')\n                }\n            }, this);\n        },\n\n        closeClicked: function(event) {\n            var currentElement = event.currentTarget;\n            var $blockBulletsItems = $(currentElement).closest(\".block-content-items-bullets\");\n            $blockBulletsItems.addClass(\"display-none\");\n            var blockContentItemRef = this.getBlockBulletsItemRef(event);\n            var bulletTextPosition = blockContentItemRef.positionOfBulletText;\n            $blockBulletsItems.css({\n                \"top\": bulletTextPosition.top + \"px\",\n                \"left\": bulletTextPosition.left + \"px\"\n            });\n            var parentDiv = $blockBulletsItems.parent();\n            var $blockContentItemsBulletsMinus = $blockBulletsItems.parent().find('.bullet-text-minus');\n            this.unsetGraphicals($(currentElement));\n            $blockContentItemsBulletsMinus.addClass('display-none');\n            $blockContentItemsBulletsMinus.siblings('.bullet-text-plus').removeClass('display-none');\n        }\n\n    });\n    return BulletsView;\n});\n\n",
    "define('extensions/adapt-blockBullets/js/bulletsIconView.js',[\n    'backbone',\n    'coreJS/adapt',\n    './bulletsView',\n    './utils/utils'\n], function(Backbone, Adapt, BulletsView, Utils) {\n\n    var BulletsIconView = Backbone.View.extend({\n\n        template: 'bulletsPlusIconView',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n            this.bindEvent();\n            this.openPopup();\n            this.checkBlockHasBullets();\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $('.block-title').append(template(this.model));\n            return this;\n        },\n\n        bindEvent: function() {\n\n            $(\".block-title\").find(\".block-title-inner\").addClass(\"add-float-left\");\n            $('.bullet-text-plus').on('click', _.bind(this.onPlusClicked, this));\n            $('.bullet-text-minus').on('click', _.bind(this.onMinusClicked, this));\n\n        },\n\n        openPopup: function() {\n            new BulletsView({\n                model: this.model\n            });\n        },\n\n        checkBlockHasBullets: function() {\n            var blocks = this.model.getChildren().models;\n            _.each(blocks, function(block, index) {\n                var blockBulletsRef = block.get(\"_blockBullets\");\n                var blockId = block.get(\"_id\");\n                if (blockBulletsRef == undefined) {\n                    $(\".\" + blockId).find(\".bullet-text-minus\").addClass(\"display-none\");\n                    $(\".\" + blockId).find(\".block-title-inner\").removeClass(\"add-float-left\");\n                }\n                if (blockBulletsRef.textForBulletIcon == \"\" || blockBulletsRef.textForBulletIcon == undefined) {\n                    $(\".\" + blockId).find(\".bullet-text-minus\").css({\n                        \"pointer-events\": \"none\",\n                        \"opacity\": \"0.4\"\n                    });\n                } else {\n                    $(\".\" + blockId).find(\".bullet-text-minus\").addClass(\"display-none\");\n                    $(\".\" + blockId).find(\".block-title-inner\").removeClass(\"add-float-left\");\n                }\n            }, this);\n        },\n\n        onPlusClicked: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            var $currentElementPlus = $(event.currentTarget);\n\n            var currentPageId = Utils.getCurrentPage();\n            var articleModel = Utils.getArticleModel(currentPageId);\n            if (articleModel.length == 0) {\n                return;\n            } else if (articleModel.length == 1) {\n                this.enableCurrentBullet(event);\n            }\n            $currentElementPlus.addClass(\"display-none\");\n            var $currentElementMinus = $currentElementPlus.siblings('.bullet-text-minus');\n            $currentElementMinus.removeClass(\"display-none\");\n\n        },\n\n        enableCurrentBullet: function(event) {\n            var visibleBlock = Utils.getCurrentBlock(event, this.model);\n            var currentBlockModel = visibleBlock[0];\n            var currntBlockId = currentBlockModel.get(\"_id\");\n            $currentBullet = $(\".\" + currntBlockId).find(\".block-content-items-bullets\");\n            var bulletIconRef = currentBlockModel.get(\"_blockBullets\");\n            $currentBullet.width(bulletIconRef.widthForBulletText);\n            $currentBullet.height(bulletIconRef.heightForBulletText);\n            $currentBullet.removeClass('display-none');\n        },\n\n        onMinusClicked: function(event) {\n            var $currentElementMinus = $(event.currentTarget);\n            var $blockTitle = $currentElementMinus.closest('.block-title');\n            var $blockBullets = $blockTitle.siblings(\".block-content-items-bullets\");\n            $blockBullets.addClass(\"display-none\");\n            $currentElementMinus.addClass(\"display-none\");\n            var $currentElementPlus = $currentElementMinus.siblings('.bullet-text-plus');\n            $currentElementPlus.removeClass(\"display-none\");\n        }\n    });\n    return BulletsIconView;\n});\n",
    "define('extensions/adapt-blockBullets/js/adapt-blockBullets',[\n    'backbone',\n    'coreJS/adapt',\n    './bulletsIconView.js'\n], function(Backbone, Adapt,BulletsIconView){\n\n    function initialize() {\n        this.listenTo(Adapt, 'remove', this.remove);\n    }\n\n    function onDataReady() {\n        Adapt.on('articleView:postRender', onArticleViewPostRender);\n    }\n\n    function onArticleViewPostRender(article) {\n        if (article.model.get('_blockBullets') && article.model.get('_blockBullets')._isEnabled) {\n            setUpBlockBullet(article);\n        }\n    }\n\n    function setUpBlockBullet(article) {\n\n        var BlockBullets = Backbone.View.extend({\n            initialize: function() {\n                this.listenTo(Adapt, 'remove', this.remove, this);\n                this.listenTo(Adapt, 'pageView:ready', this.onPageViewReady, this);\n            },\n\n            onPageViewReady:function() {\n                this.setUpPage();\n            },\n\n            setUpPage: function() {\n                new BulletsIconView({\n                    model: article.model\n                });\n            }\n\n        });\n        new BlockBullets({\n            model: article.model\n        });\n    }\n\n    Adapt.once('app:dataReady', onDataReady);\n});\n\n",
    "/**\n * Shows a element as a modal dialog\n * \n * Usage: $('#selector').modal({settings:value});\n *\n * Options:\n * - closeButton string          Css selector to be used to close the dialog. Defaults to '.close'\n * - escClose    boolean         Whether the dialog should be closed when pressing the ESC key. Defaults to true.\n * - onCloseFn   function        Callback function when the dialog has been closed\n * - onOpenFn    function        Callback function when the dialog has been opened\n * - modal       boolean         Whether or not this is a modal dialog. Defaults to true.\n * - effect      string          The effect to use when opening a modal: scale, slide-right, slide-right, slide-bottom, newspaper, fall, slide-fall, sticky-top, flip-horizontal, flip-vertical, sign, super-scaled, just-me, slit\n * - title       string          The title of the dialog. Defaults to an empty string\n * - callback    function        Callback function when the options.doneButton has been clicked. Form fields will be supplied as data argument, as well as the modal itself. Callback returns true when the modal should be closed, null or false when it shoudl stay open.\n */\n$.fn.modal = function(options) {\n    var defaults = {\n      closeButton : '.close,.cancel',\n      escClose    : true,\n      onCloseFn   : null,\n      onOpenFn    : null,\n      modal       : true,\n      immutable   : false,\n      effect      : null,\n      title       : '',\n      callback    : null,\n      doneButton  : '.done,.ok'\n    };\n    options = $.extend(defaults, options);\n\n    return this.each(function() {\n      var o = options,\n      modal = o.immutable ? $(this) : decorate($(this), o);\n      o.id = createGUID(); // GUID for identifying modal & event handlers\n    \n      // immutable\n      if (o.immutable){\n       $(this).addClass(\"immutable\"); \n      }\n\n      // show overlay\n      if ( $('.modal-overlay').length < 1){\n        modal.parent().append($(\"<div class='modal-overlay'></div>\"));\n      }\n\n      // add close event handler to overlay\n      $(\".modal-overlay\").click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o);\n      });\n\n      // add close event handler to close buttons\n      $(o.closeButton).click(function(e) {\n        e.preventDefault();\n        closeModal(modal, o)\n      });\n      \n      if (o.escClose){\n        // add close event handler to ESC key. Event is namespaced, so we can remove it after we've closed the modal\n        $(window).on('keydown.'+o.id, function(event) {\n            if (event.which === 27){\n                closeModal(modal, o);\n            }\n        });\n      };\n\n      $(o.doneButton, modal).on('click.callback', function(e){\n        e.preventDefault();\n        if (typeof o.callback === \"function\"){\n          var data = {};\n          $(\":input\", modal ).each(function(i, element){\n            data[$(element).attr('name')] = $(element).val();\n          });\n          var result = o.callback( data, modal );\n          if (result === true){\n            closeModal(modal, o);\n          }\n        }\n      });\n\n      if (typeof o.effect === 'string'){\n        modal.addClass(o.effect, modal);\n      }\n\n      // start with a delay to allow the effect to kick in\n      setTimeout(function(){modal.addClass('modal-show');}, 150);\n      \n      // initialize\n      if (typeof o.onOpenFn === 'function'){\n        o.onOpenFn(modal);\n      }\n\n    });\n\n    /**\n     * Decorate the modal provided. When only supplying the modal body, decorate it with additional modal elements (content, head, titile, close button)\n     *\n     * @param jquery the modal element\n     * @param object options the modal options\n     */\n    function decorate(modal, options){\n      if (modal.find('.body').length === 0){\n        var body =  $('<div class=\"body\"></div>'), footer, content;\n\n        modal.children().each(function(i,e){\n          if ($(e).is(\".footer\")){\n            footer = $(e);\n          }else{\n            body.append(e);\n          }\n        });\n\n        content = $('<div class=\"content\"></div>');\n        content.append(\n            '<div class=\"head\">\\\n               <a class=\"close\" href=\"#\">&times;</a>\\\n             </div>');\n        content.append(body);\n        content.append(footer);\n        modal.append(content);\n\n        // add the title from options\n        //content.find('.title').html(options.title);\n      }\n      return modal;\n    }\n\n    function createGUID(){\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        });\n      }\n    \n    /*\n     * Close the model\n     */\n    function closeModal(modal, options) {\n      modal.removeClass('modal-show');\n\n      //Remove the existing overlay on close click\n      $('.modal-overlay').remove();\n\n      //Pause all the videos\n      var videoPause=$(\"video\");\n      for(var i=0;i<videoPause.length;i++){\n        videoPause[i].pause();\n      }\n\n        $(\".embeddedLink-lightBox-iframe-parent\").css({'overflow':'hidden' , '-webkit-overflow-scrolling':'none'})\n      // clean up effect\n      if (typeof options.effect === 'string'){\n        setTimeout(function(){\n          modal.removeClass(options.effect);\n        }, 500);\n      }\n\n      if (typeof options.onCloseFn === 'function'){\n        options.onCloseFn(modal);\n      }\n      \n      // immutable\n      if (options.immutable){\n       $(modal).removeClass(\"immutable\"); \n      }\n\n      // remove event handlers\n      $(window).off('keydown.'+options.id);\n\n      if (typeof options.callback === \"function\"){\n        $(options.doneButton, modal).off('click.callback');\n      }\n    }\n\n  };\ndefine(\"extensions/adapt-blockContentItems/js/jquery.jsmodal\", function(){});\n\n",
    "define('extensions/adapt-blockContentItems/js/utils/utils',[\n    'coreJS/adapt'\n], function(Adapt) {\n\n    var Utils = {\n\n        getCurrentPage: function() {\n            var currentUrl = window.location.href;\n            var temp = currentUrl.split(\"/\");\n            var currentPageId = temp[temp.length - 1];\n            return currentPageId;\n        },\n\n        getPageTitle: function(currentPageId) {\n            var pages = Adapt.course.getChildren();\n            var pageTitle = _.filter(pages.models, function(item) {\n                if (item.get(\"_id\") == currentPageId) {\n                    return item;\n                }\n            });\n            return pageTitle[0].get(\"displayTitle\");\n        },\n\n        getArticleModel: function(currentPageId) {\n            var articleModel = [];\n            var contentObjectModel = Adapt.course.getChildren().models;\n\n            _.each(contentObjectModel, function(item) {\n                if (currentPageId == item.get(\"_id\")) {\n                    articleModel.push(item.getChildren().models);\n                }\n            });\n            return articleModel;\n        },\n        \n        getCurrentBlock:function(stage,articleModel){\n             var blocks = articleModel.getChildren().models;\n             return blocks[stage];\n        },\n\n        setInitialStageStatus: function(articleModel) {\n            if (articleModel.length == 0) return;\n            if (articleModel.length == 1) {\n                var article = articleModel[0];\n                var blocksInArticle = article[0].getChildren().models;\n                _.each(blocksInArticle, function(item, index) {\n                    var blockId = item.get(\"_id\");\n                    if ($(\".verticalBlockSlider-tab-\" + blockId).hasClass(\"visited\")) {\n                        var $statusToc = $(\".block-content-\" + blockId).find(\".blockContent-progress-icon\");\n                        $statusToc.addClass(\"visited\");\n                    }\n                    if ($(\".verticalBlockSlider-tab-\" + blockId).hasClass(\"active\")) {\n                        var $statusToc = $(\".block-content-\" + blockId).find(\".blockContent-progress-icon\");\n                        $(\".blockContent-progress-icon\").removeClass(\"active\");\n                        $statusToc.addClass(\"active\");\n                        return;\n                    }\n                }, this)\n            }\n        }\n    }\n    return Utils;\n});\n\n",
    "define('extensions/adapt-blockContentItems/js/BlockContentItemsTOCView',[\n    'backbone',\n    'coreJS/adapt',\n    './jquery.jsmodal',\n    './utils/utils'\n], function(Backbone, Adapt, LightBox, Utils) {\n    var BlockContentItemsTOCView = Backbone.View.extend({\n        className:\"block-content-TOC-container\",\n\n        template:\"blockContentItemsTOCView\",\n\n        initialize:function(){\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.blocksCollection = [];\n            this.render();\n            this.getCurrentArticleBlocks();\n            Utils.setInitialStageStatus(this.model);\n        },\n\n        render:function(){\n            var template = Handlebars.templates[this.template];\n            $('#wrapper').append(template(this.model));\n            return this;\n        },\n\n        getCurrentArticleBlocks:function(){\n            var article = this.model;\n            if(article.length == 0)return;\n\n            if(article.length == 1){\n               var articleModel = article[0];\n               currentArticleTitle = articleModel[0].get(\"displayTitle\");\n               this.addBlocksToThumbnail(articleModel,currentArticleTitle);\n            }\n        },\n        \n        addBlocksToThumbnail:function(articleModel,currentArticleTitle){\n            this.$blockTOC = $(\".block-content-TOC-container\");\n            this.$blockTOC.addClass(\"modal\");\n            var articleTitleDiv = \"<div class='articleTitle'><h4>\"+currentArticleTitle+\"</h4></div>\";\n            var blocksView = \"<div class='block-thumbnail-container'></div>\";\n            $('.title').append(articleTitleDiv);\n            this.$blockTOC.append(blocksView);\n            _.each(articleModel[0].getChildren().models,function(item,index){\n                this.blocksCollection[index] = item;\n                this.createThumbnails(item);\n            },this);\n            $(\".toc-img-container\").on('click', _.bind(this.blockThumbnailclicked, this));\n            $('.block-content-TOC-container').modal();\n        },\n\n        createThumbnails:function (block){\n            var blockId = block.get(\"_id\");\n            var blockTitle = block.get(\"displayTitle\");\n            var blockContentItem = block.get(\"_blockContentItems\");\n            if(blockContentItem == undefined)return;\n            var blockThumbnail = blockContentItem.thumbnail;\n            var blockThumbnailImg = \"<img class='block-thumbnail-img' src = '\"+blockThumbnail+\"'></img>\";\n            var isVisited = \"<div class='blockContent-progress progress-\"+blockId+\"'><i class='blockContent-progress-icon fa fa-square-o'></i><div>\";\n            var blockTitleDiv = \"<div class='block-title-TOC'>\" + blockTitle + \"</div>\";\n            var blockContainer = \"<div id =\"+blockId+\" class='toc-img-container block-content-\"+blockId+\"'></div>\";\n\n            $(\".block-thumbnail-container\").append(blockContainer);\n            $(\".block-content-\"+blockId).append(blockThumbnailImg);\n            $(\".block-content-\"+blockId).append(isVisited);\n            $(\".block-content-\"+blockId).append(blockTitleDiv);\n        },\n\n        blockThumbnailclicked:function(event){\n            var currentTarget = event.currentTarget;\n            var blockClicked = $(currentTarget).attr(\"id\");\n            $('.modal-overlay').remove();\n            this.$blockTOC.removeClass(\"modal\");\n            this.$blockTOC.addClass(\"display-none\");\n            _.each(this.blocksCollection,function(item,index){\n                if(item.get(\"_id\") == blockClicked){\n                    this.showCurrentBlock(item,index+1);\n                }\n            },this);\n        },\n\n        showCurrentBlock:function(block,index){\n            var currentBlockId = block.get(\"_id\");\n            $('.verticalBlockSlider-tab').removeClass('active');\n            if($(\"#\"+currentBlockId).hasClass('verticalBlockSlider-tab')){\n                $(\"#\"+currentBlockId).addClass('active');\n            }\n            else if($('.verticalBlockSlider-tab').eq(index-1).hasClass('verticalBlockSlider-tab')){\n                $('.verticalBlockSlider-tab').eq(index-1).addClass('active');\n            }\n            var movementSize = $('.block').height();\n            var currentIndex = $('.verticalBlockSlider-tab.active').index();\n            this.navigateToIndex(currentIndex, movementSize);\n            Adapt.scrollTo(0);\n\n        },\n\n        navigateToIndex: function(stage, movementSize) {\n            if (stage < this.blocksCollection.length && stage >= 0) {\n              $('.verticalBlockSlider').stop().animate({'margin-top': - (movementSize * stage)});\n              $('.verticalBlockSlider-tab .active').addClass('visited');\n              this.setStage(stage);\n            }\n        },\n\n        setStage: function(stage) {\n            this._stage = stage;\n            $('.verticalBlockSlider-tab').removeClass('active');\n            $('.verticalBlockSlider-tab').eq(stage).addClass('active visited');\n            $('.blockContent-progress-icon').removeClass('active');\n            $('.blockContent-progress-icon').eq(stage).addClass('active visited');\n\n            //Set the block to visible when we navigate to it\n            if (!this.blocksCollection[stage].get('_isVisible')) {\n                this.blocksCollection[stage].set('_isVisible', true);\n            }\n\n            var article = this.model;\n            if (article.length == 0) return;\n\n            if (article.length == 1) {\n                var articleModel = article[0];\n                currentArticleTitle = articleModel[0].set(\"_stage\", stage);\n            }\n            this.evaluateNavigation();\n        },\n\n        evaluateNavigation: function() {\n            var currentStage = this._stage;\n            var itemCount = this.blocksCollection.length;\n            currentIndex1=this._stage;\n\n            if (currentStage > 0) {\n                $('.verticalBlockSlider-control-left').removeClass('verticalBlockSlider-hidden');\n            } else {\n                $('.verticalBlockSlider-control-left').addClass('verticalBlockSlider-hidden');\n            }\n            if (itemCount > 1 && currentStage != --itemCount) {\n                $('.verticalBlockSlider-control-right').removeClass('verticalBlockSlider-hidden');\n            } else {\n                $('.verticalBlockSlider-control-right').addClass('verticalBlockSlider-hidden');\n            }\n        }\n\n    });\n    return BlockContentItemsTOCView;\n\n});\n\n",
    "define('extensions/adapt-blockContentItems/js/BlockContentItemsSpearkersNotesView',[\n    'backbone',\n    'coreJS/adapt'\n], function(Backbone, Adapt) {\n    var BlockContentItemsSpearkersNotesView = Backbone.View.extend({\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            var currentArticleBlocks = this.model.getChildren().models;\n            this.openCurrentBlockSpeakersNotes(currentArticleBlocks);\n        },\n\n        openCurrentBlockSpeakersNotes: function(currentArticleBlocks) {\n            var articleModel = this.model;\n            var isSet = articleModel.get(\"speakerNotesSet\");\n            var prevBlockId = articleModel.get(\"_prevStageId\");\n            var that = this;\n\n            _.each(currentArticleBlocks, function(item, index) {\n                var id = item.get(\"_id\");\n                if ($(\".verticalBlockSlider-tab-\" + id).hasClass(\"active\")) {\n                    var blockContentItem = item.get(\"_blockContentItems\");\n                    if (blockContentItem == undefined) {\n                        return false;\n                    }\n                    var blockTitle = item.get(\"title\");\n                    var speakerNotes = blockContentItem.speakersNotesLink;\n                    item.set('speakerNotesOpened', true);\n                    if (speakerNotes == undefined) {\n                        if (isSet != undefined) {\n                            var hasGoogle = that.checkIfGoogleIsPrev();\n                            if (!hasGoogle) {\n                                var prevWindowBody = this.urlWindow.document.body;\n                                that.setPrevBlockPartitionHeight(prevWindowBody);\n                            }\n                            this.urlWindow.location.href = \"about:blank\";\n                        }\n                        return false;\n                    } else {\n                        var isUrl = speakerNotes.split('/');\n                        var len = isUrl.length - 1;\n                        var fileName = isUrl[len] + \"\";\n                    }\n\n                    var hasPartition = that.checkIfSpearkerNotesPartition(speakerNotes);\n                    if (speakerNotes === undefined || speakerNotes === \"\") {\n                        if (this.urlWindow !== undefined) {\n                            this.urlWindow.location.href = blockTitle;\n                        } else {\n                            this.urlWindow = \"\";\n                        }\n                    } else if (speakerNotes.indexOf(\"pdf\") == -1 && (fileName.indexOf(\".\") != -1 || isUrl[0].indexOf(\"http\") != -1)) {\n                        if (isSet == undefined) {\n                            this.urlWindow = window.open(speakerNotes, '_blank', 'width=1024,height=768,left=100,top=100');\n                        } else {\n                            if (this.urlWindow.parent == null) {\n                                this.urlWindow = window.open(speakerNotes, '_blank', 'width=1024,height=768,left=100,top=100');\n                                this.urlWindow.document.title = \"Speaker Notes\";\n                            } else {\n                                this.urlWindow.location.href = speakerNotes;\n                                this.urlWindow.focus();\n                            }\n                        }\n                    } else {\n                        if (speakerNotes.indexOf(\"<partition>\") == -1 && speakerNotes.indexOf(\"pdf\") != -1) {\n                            speakerNotes = that.checkIfPdfHasSpace(speakerNotes, id);\n                        }\n                        if (isSet == undefined) {\n                            var newSpeakerNotes = that.createPartitionedSpeakerNote(speakerNotes);\n                            var htmlContent = that.createHtml(newSpeakerNotes, blockTitle);\n                            this.urlWindow = window.open(\"about:blank\", '_blank', 'width=1024,height=768,left=100,top=100');\n                            if (hasPartition) {\n                                this.urlWindow.document.write(htmlContent);\n                            } else {\n                                if (speakerNotes.indexOf(\"pdf\") != -1) {\n                                    this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='overflow:hidden'><iframe src=\" + speakerNotes + \"  width = '100%' height = '100%' frameborder='0'></iframe></body></html>\");\n                                } else {\n                                    this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='font-size: 24px;font-family: Arial;line-height: 1.5;'>\" + speakerNotes + \"</body></html>\");\n                                }\n                            }\n                        } else {\n                            if (this.urlWindow.parent == null) {\n                                var newSpeakerNotes = that.createPartitionedSpeakerNote(speakerNotes);\n                                var htmlContent = that.createHtml(newSpeakerNotes, blockTitle);\n                                this.urlWindow = window.open(\"about:blank\", '_blank', 'width=1024,height=768,left=100,top=100');\n                                if (hasPartition) {\n                                    _.delay(function() {\n                                        this.urlWindow.document.body.innerHTML = \"\";\n                                        this.urlWindow.document.write(htmlContent);\n                                    }, 100, this);\n                                } else {\n                                    if (speakerNotes.indexOf(\"pdf\") != -1) {\n                                        this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='overflow:hidden'><iframe src=\" + speakerNotes + \"  width = '100%' height = '100%' frameborder='0'></iframe></body></html>\");\n                                    } else {\n                                        this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='font-size: 24px;font-family: Arial;line-height: 1.5;'>\" + speakerNotes + \"</body></html>\");\n                                    }\n                                }\n                            } else {\n                                var hasGoogle = that.checkIfGoogleIsPrev();\n                                if (!hasGoogle) {\n                                    var prevWindowBody = this.urlWindow.document.body;\n                                    that.setPrevBlockPartitionHeight(prevWindowBody);\n                                }\n\n                                if (hasPartition) {\n                                    var newSpeakerNotes = that.createPartitionedSpeakerNote(speakerNotes, item);\n                                    var htmlContent = that.createHtml(newSpeakerNotes, blockTitle, item);\n                                    this.urlWindow.location.href = \"about:blank\";\n                                    _.delay(function() {\n                                        this.urlWindow.document.body.innerHTML = \"\";\n                                        this.urlWindow.document.write(htmlContent);\n                                    }, 100, this);\n                                    this.urlWindow.focus();\n                                } else {\n                                    this.urlWindow.location.href = \"about:blank\";\n                                    _.delay(function() {\n                                        this.urlWindow.document.body.innerHTML = \"\";\n                                        if (speakerNotes.indexOf(\"pdf\") != -1) {\n                                            this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='overflow:hidden'><iframe src=\" + speakerNotes + \" width = '100%' height = '100%' frameborder='0'></iframe></body></html>\");\n                                        } else {\n                                            this.urlWindow.document.write(\"<html><head><title>Speaker Notes</title></head><body style='font-size: 24px;font-family: Arial;line-height: 1.5;'>\" + speakerNotes + \"</body></html>\");\n                                        }\n                                    }, 100, this);\n                                }\n                                this.urlWindow.focus();\n                            }\n                        }\n                    }\n\n                    var timer = setInterval(function() {\n                        if (this.urlWindow.closed) {\n                            clearInterval(timer);\n                            item.set('speakerNotesOpened', false);\n                        }\n                    }, 1000);\n                } else {\n                    currentArticleBlocks[index].set('speakerNotesOpened', false);\n                }\n            });\n        },\n\n        checkIfPdfHasSpace: function(speakerNotes, blockId) {\n            if (speakerNotes.indexOf(\"pdf\") != -1) {\n                var addPath = \"\";\n                var splitPdf = speakerNotes.split(\".pdf\");\n                var splitPdfName = splitPdf[0].split(\"/\");\n                var length = splitPdfName.length;\n                var pdfName = splitPdfName[length - 1];\n                if (pdfName.indexOf(\" \") != -1) {\n                    pdfName = pdfName.replace(/ /g, \"%20\");\n                } else {\n                    return speakerNotes;\n                }\n                _.each(splitPdfName, function(item, index) {\n                    if (index != length - 1) {\n                        addPath = addPath + item + \"/\";\n                    }\n                }, this);\n                addPath = addPath + pdfName + \".pdf\" + splitPdf[1];\n                return addPath;\n            }\n        },\n\n        checkIfGoogleIsPrev: function() {\n            var flag;\n            var prevBlockId = this.model.get(\"_prevStageId\");\n            _.each(this.model.getChildren().models, function(block, index) {\n                var id = block.get(\"_id\");\n                if (id === prevBlockId) {\n                    var blockContentRef = block.get(\"_blockContentItems\");\n                    if (blockContentRef != undefined) {\n                        var speakerNoteLink = blockContentRef.speakersNotesLink;\n                        if (speakerNoteLink != undefined) {\n                            if (speakerNoteLink.indexOf(\"google\") != -1) {\n                                flag = true;\n                            } else {\n                                flag = false;\n                            }\n                        }\n                    }\n                }\n            });\n            return flag;\n        },\n\n        checkIfSpearkerNotesPartition: function(speakerNotes) {\n            if (speakerNotes.indexOf(\"<partition>\") != -1) {\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        setPrevBlockPartitionHeight: function(prevWindowBody) {\n            if ($(prevWindowBody).hasClass(\"ui-layout-container\")) {\n                var northLayoutHeight = $(prevWindowBody).find(\".ui-layout-north\").css(\"height\");\n                var prevBlockId = this.model.get(\"_prevStageId\");\n\n                _.each(this.model.getChildren().models, function(block, index) {\n                    var id = block.get(\"_id\");\n                    if (id === prevBlockId) {\n                        block.set(\"_speakerNotesNorthHeight\", northLayoutHeight);\n                    }\n                });\n            }\n        },\n\n        createPartitionedSpeakerNote: function(speakerNotes, item) {\n            var temp = speakerNotes.split('<partition>');\n            var northDiv;\n            var centerDiv;\n\n            if (temp[0].indexOf(\"pdf\") != -1) {\n                northDiv = \"<div class='ui-layout-north' style='overflow:hidden'>\" + temp[0] + \"</div>\";\n            } else {\n                northDiv = \"<div class='ui-layout-north'>\" + temp[0] + \"</div>\";\n            }\n            if(temp[1] != undefined){\n                if (temp[1].indexOf(\"pdf\") != -1) {\n                    centerDiv = \"<div class='ui-layout-center' style='overflow:hidden'>\" + temp[1] + \"</div>\";\n                } else {\n                    centerDiv = \"<div class='ui-layout-center'>\" + temp[1] + \"</div>\";\n                }\n            }\n            return northDiv + centerDiv;\n        },\n\n        createHtml: function(newSpeakerNotes, blockTitle, item) {\n            if (item != undefined) {\n                var currentHeight = item.get(\"_speakerNotesNorthHeight\");\n                if (currentHeight != undefined) {\n                    var heightNumber = currentHeight.split(\"px\");\n                    var resizerTop = parseInt(heightNumber[0]) + 22;\n                    var centerTop = resizerTop + 6;\n                }\n            }\n            return '<html><head><title>Speaker Notes</title></head><body style=\"font-size: 24px;font-family: Arial;line-height: 1.5;\">' + newSpeakerNotes + '<script src=\"http://layout.jquery-dev.com/lib/js/jquery-latest.js\"></script><script src=\"http://layout.jquery-dev.com/lib/js/jquery-ui-latest.js\"></script><script src=\"http://layout.jquery-dev.com/lib/js/jquery.layout-1.3.0.rc30.78.js\"></script><link type=\"text/css\" rel=\"stylesheet\" href=\"http://layout.jquery-dev.com/lib/css/layout-default-latest.css\"><script>var myLayout;myLayout = $(\"body\").layout({west__showOverflowOnHover: true});  $(\".ui-layout-resizer\").css({\"top\":\"' + resizerTop + 'px\",\"z-index\":\"3000\"}); $(\".ui-layout-north\").css(\"height\",\"' + currentHeight + '\");$(\".ui-layout-center\").css({\"top\":\"' + centerTop + 'px\",\"border\":\"none\"});setTimeout(function(){ $(\"embed\").css({\"height\":\"100%\",\"width\":\"100%\"}); }, 100);  </script></body></html>';\n        }\n    });\n    return BlockContentItemsSpearkersNotesView;\n});\n\n",
    "define('extensions/adapt-blockContentItems/js/BlockContentItemsInfoView',[\n    'backbone',\n    'coreJS/adapt',\n    './utils/utils'\n], function(Backbone, Adapt, Utils) {\n    var BlockContentItemsInfoView = Backbone.View.extend({\n\n        template: 'blockContentItemsInfoView',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n            this.temp = this;\n            this.initialSetting();\n            this.onClassChange();\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $(\".navigation\").after(template(this.model));\n            return this;\n        },\n\n        initialSetting: function() {\n            var currentPageId = Utils.getCurrentPage();\n            var currentPageTitle = Utils.getPageTitle(currentPageId);\n            var currentArticleModel = Utils.getArticleModel(currentPageId)[0][0].attributes;\n            this.setLogo(currentArticleModel);\n            var currentArticleTitle = currentArticleModel.displayTitle;\n            this.appendTextToModule(currentPageTitle, currentArticleTitle);\n            this.hidePageArticleTitle(currentPageId, currentArticleModel._id);\n        },\n\n        onClassChange: function() {\n            if ($('.navigation').find('.navigation-inner').hasClass('navigation-inner-temp')) {\n                $('.expandableNavBar-navigation').on('click', _.bind(this.reRender, this));\n            }\n        },\n        reRender: function() {\n            $(\".block-content-items-info-inner\").removeClass(\"max-info-show max-info-hidden min-info-hidden min-info-show\");\n            this.setUpRender();\n        },\n\n        setUpRender: function() {\n            var navigationWidth = $('.navigation').width();\n            if (navigationWidth < 60)\n                $('.block-content-items-info-inner').removeClass('minimize').addClass('maximize');\n            else\n                $('.block-content-items-info-inner').removeClass('maximize').addClass('minimize');\n        },\n\n        setLogo: function(currentArticleModel) {\n            var logo = currentArticleModel._blockContentItems._logo;\n            var color = currentArticleModel._blockContentItems._color;\n            $(\".block-content-items-info-logo\").attr(\"src\", logo);\n            $(\".block-content-items-info-inner\").css(\"background-color\", color);\n        },\n\n        appendTextToModule: function(currentPageTitle, currentArticleTitle) {\n            $(\".block-content-items-info-title\").html(currentPageTitle + \" | \" + currentArticleTitle);\n        },\n\n        hidePageArticleTitle: function(currentPageId, currentArticleId) {\n            $(\".page-header\").addClass(\"display-none\");\n            $(\".\" + currentArticleId).find('.article-header').addClass(\"display-none\");\n        }\n\n    });\n    return BlockContentItemsInfoView;\n\n});\n\n",
    "define('extensions/adapt-expandableNavBar/js/adapt-expandableNavBar',[\n    'coreJS/adapt',\n    'backbone',\n], function(Adapt, Backbone) {\n\n    var blockCounter = 0;\n\n    function setupExpandableNavBarView(articleModel) {\n        var ExpandableNavBarView = Backbone.View.extend({\n\n            initialize: function(){\n                this.listenTo(Adapt, 'remove', this.remove, this);\n                this.listenTo(Adapt, 'pageView:ready', this.onPageViewReady, this);\n                this._isBarVisible = false;\n            },\n\n            onPageViewReady: function(){\n                if (this.model.get('_expandableNavBar')){\n                    if(this.model.get('_expandableNavBar')._isEnabled){\n                        //$(document).on('scroll',_.bind(this.setUpPage, this));\n                        Adapt.on('page:scroll',_.bind(this.setUpPage, this));\n                        this.setUpPage();\n                    }\n                }\n            },\n\n            toggleClick: function(event){\n                var currentTarget = $(event.currentTarget);\n                var navigation = $(\".navigation\");\n                if(currentTarget.hasClass('left')){\n                    navigation.find('.logo').addClass('display-none');\n                    navigation.addClass('ghosting-effect');\n                    navigation.find('.navigation-drawer-toggle-button').addClass('display-none');\n                    navigation.find('.page-level-progress-navigation-completion').addClass('display-none');\n                    navigation.find('.block-level-progress-drawer-toggle-button').addClass('display-none');\n                    navigation.animate({width: \"40px\"});\n                    currentTarget.addClass('display-none');\n                    currentTarget.siblings().removeClass('display-none');\n                    navigation.find('.block-level-progress-drawer-toggle-button').removeClass('display-none');\n                }\n                else{\n                    navigation.find('.block-level-progress-drawer-toggle-button').addClass('display-none');\n                    currentTarget.addClass('display-none');\n                    currentTarget.siblings().removeClass('display-none');\n                    navigation.animate({width: \"100%\"});\n                    setTimeout(function(){\n                        navigation.find('.logo').removeClass('display-none');\n                        navigation.removeClass('ghosting-effect');\n                        navigation.find('.navigation-drawer-toggle-button').removeClass('display-none');\n                        navigation.find('.page-level-progress-navigation-completion').removeClass('display-none');\n                        navigation.find('.block-level-progress-drawer-toggle-button').removeClass('display-none');\n                    }, 500);\n                }\n            },\n\n            setUpPage: function(){\n                this.setUpBar();\n                /*var id = this.model.get('_id');\n                var $article = $('.'+this.model.get('_id'));\n                var top = $article.offset().top;\n                var height = $article.height();\n                var visibleTop = window.pageYOffset+121 < top;\n                var visibleHeight = window.pageYOffset+121 > (height + top);\n                console.log(window.pageYOffset);\n                console.log(id);\n                console.log($article);\n                console.log(top);\n                console.log(height);\n                if(visibleTop || visibleHeight)\n                    this._isBarVisible = false;\n                else\n                    this._isBarVisible = true;\n                if(this._isBarVisible){\n                    this.setUpBar();\n                }\n                else{\n                    this.removeBar();\n                }*/\n            },\n            setUpBar: function(){\n                if(!$('.navigation').find('.navigation-inner').hasClass('navigation-inner-temp')){\n                    var data = this.model.toJSON();\n                    var template = Handlebars.templates[\"expandableNavBar\"];\n                    $('.navigation').find('.navigation-inner').addClass('navigation-inner-temp');\n                    $('.navigation').find('.navigation-inner').prepend(template(data));\n                    $('.expandableNavBar-navigation').on('click',this.toggleClick);\n                    $('.navigation').change();\n                }\n            },\n            removeBar: function(){\n                if($('.navigation').find('.navigation-inner').hasClass('navigation-inner-temp')){\n                    $('.navigation').find('.navigation-inner').removeClass('navigation-inner-temp');\n                    $('.navigation').find('.expandableNavBar-inner').remove();\n                    $('.navigation').change();\n                }\n            }\n\n        });\n\n        new ExpandableNavBarView({\n            model: articleModel.model\n        });\n    }\n\n    Adapt.on('articleView:postRender', function(articleModel) {\n                setupExpandableNavBarView(articleModel);\n    });\n\n    // This should add/update progress on menuView\n    Adapt.on('menuView:postRender', function(view) {\n        if($('.expandableNavBar-inner')){\n            $('.expandableNavBar-inner').remove();\n            var navigation = $(\".navigation\");\n            navigation.css({width: \"100%\"});\n            Adapt.off('page:scroll');\n            navigation.removeClass('ghosting-effect');\n            navigation.find('.navigation-inner').removeClass('navigation-inner-temp');\n            navigation.find('.logo').removeClass('display-none');\n            navigation.find('.navigation-drawer-toggle-button').removeClass('display-none');\n            navigation.find('.page-level-progress-navigation-completion').removeClass('display-none');\n            navigation.find('.block-level-progress-drawer-toggle-button').removeClass('display-none');\n            navigation.find('.blockContentItems-inner').remove();\n        }\n    });\n});\n\n",
    "define('extensions/adapt-blockContentItems/js/BlockContentItemsNavigationView',[\n    'backbone',\n    'coreJS/adapt',\n    './BlockContentItemsTOCView',\n    './BlockContentItemsSpearkersNotesView',\n    './BlockContentItemsInfoView',\n    './utils/utils',\n    '../../adapt-expandableNavBar/js/adapt-expandableNavBar'\n], function(Backbone, Adapt, BlockContentItemsTOCView, BlockContentItemsSpearkersNotesView, BlockContentItemsInfoView, Utils, ExpandableNavBar) {\n\n    var BlockContentItemsNavigationView = Backbone.View.extend({\n        className: 'navigation-block-content',\n\n        template: 'blockContentItemsNavigationView',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.blockContentTOCActivated = \"\";\n            this.blockContentInfoActivated = \"\";\n            this.blockContentSpeakerNotes = \"\";\n            this.render();\n\n            $('.navigation-TOC-button-expandationNav').on('click', _.bind(this.toggleTOCOnClicked, this));\n            $('.navigation-speaker-note-button').on('click', _.bind(this.toggleSpeakersNotesOnClick, this));\n            $('.navigation-info-button').on('click', _.bind(this.toggleInfoOnClick, this));\n            $('.verticalBlockSlider-tab').on('click', _.bind(this.getPrevBlockId, this));\n            $('.verticalBlockSlider-controls').on('click', _.bind(this.getPrevBlockId, this));\n\n            this.initialSettings();\n            this.listenTo(this.model, 'change:_stage', this.articleChangedAttribute);\n            this.createInfoView();\n            this.onNavChange();\n\n            if ($('.navigation-speaker-note-button').hasClass('disabled')) {\n                $('.navigation-speaker-note-button').off('click', _.bind(this.toggleSpeakersNotesOnClick, this));\n                $('.navigation-speaker-note-button').unbind('click', _.bind(this.toggleSpeakersNotesOnClick, this));\n            }\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $('.navigation').find('.page-level-progress-navigation').after(template(this.model));\n            return this;\n        },\n\n        initialSettings: function() {\n            var blocks = this.model.getChildren().models;\n            this.checkBlockHasSpeakerNotes(blocks[0]);\n        },\n\n        articleChangedAttribute: function() {\n            var stage = this.model.get(\"_stage\");\n            var blocks = this.model.getChildren().models;\n            var currentBlock = _.filter(blocks, function(item, index) {\n                if (index === stage) {\n                    return item;\n                }\n            }, this);\n            this.checkBlockHasSpeakerNotes(currentBlock[0]);\n            this.checkBlockHasSpeakerNotesEnabled();\n        },\n\n        getPrevBlockId: function() {\n            var blocks = this.model.getChildren().models;\n            prevBlock = _.filter(blocks, function(block, index) {\n                var id = block.get(\"_id\");\n                if ($(\".verticalBlockSlider-tab-\" + id).hasClass(\"active\")) {\n                    return block;\n                }\n            }, this)[0];\n            var prevBlockId = prevBlock.get(\"_id\");\n            this.model.set(\"_prevStageId\", prevBlockId);\n        },\n\n        checkBlockHasSpeakerNotes: function(block) {\n            if (block.get('speakerNotesOpened') == undefined)\n                block.set('speakerNotesOpened', false);\n            var blockContentRef = block.get(\"_blockContentItems\");\n            if (blockContentRef != undefined) {\n                if (blockContentRef.speakersNotesLink == undefined || blockContentRef.speakersNotesLink == \"\") {\n                    $('.navigation-speaker-note-button').addClass('disabled');\n                } else {\n                    $('.navigation-speaker-note-button').removeClass('disabled');\n                }\n            }\n        },\n\n        checkBlockHasSpeakerNotesEnabled: function() {\n            var blocks = this.model.getChildren().models;\n            var speakerNotesOpen = _.filter(blocks, function(item, index) {\n                if (item.get('speakerNotesOpened')) {\n                    return item;\n                }\n            }, this);\n            if (speakerNotesOpen.length > 0) {\n                this.toggleSpeakersNotesOnClick();\n            }\n        },\n\n        onNavChange: function() {\n            if ($('.navigation').find('.navigation-inner').hasClass('navigation-inner-temp')) {\n                $('.expandableNavBar-navigation').on('click', _.bind(this.reRender, this));\n            }\n        },\n\n        reRender: function(event) {\n            $currentTarget = $(event.currentTarget);\n            $navTOC = $('.navigation-TOC-button');\n            $expandNavTOC = $('.navigation-TOC-button-expandationNav');\n            $blockContentInner = $('.blockContentItems-inner');\n            if ($navTOC.hasClass('block-content-item-TOC')) {\n                if ($currentTarget.hasClass('left')) {\n                    $navTOC.addClass('display-none');\n                    $expandNavTOC.removeClass('display-none');\n                    $blockContentInner.addClass('settingForExpandNav');\n                } else {\n                    $navTOC.removeClass('display-none');\n                    $expandNavTOC.addClass('display-none');\n                    $blockContentInner.removeClass('settingForExpandNav');\n                }\n            } else {\n                if ($currentTarget.hasClass('left')) {\n                    $('.block-level-progress-drawer-toggle-button').addClass('display-none');\n                    $blockContentInner.addClass('settingForExpandNav');\n                } else {\n                    $('.block-level-progress-drawer-toggle-button').removeClass('display-none');\n                    $blockContentInner.removeClass('settingForExpandNav');\n                }\n\n            }\n        },\n\n        createInfoView: function() {\n            var courseBlockContentModel = Adapt.course;\n            new BlockContentItemsInfoView({\n                model: courseBlockContentModel\n            });\n        },\n\n        showTOCExpand: function(articleModel) {\n            if (!$(\".block-content-TOC-container\").hasClass('modal')) {\n                $(\".block-content-TOC-container\").addClass('modal');\n            }\n            if ($(\".block-content-TOC-container\").hasClass('display-none')) {\n                $(\".block-content-TOC-container\").removeClass('display-none');\n            }\n            Utils.setInitialStageStatus(articleModel);\n            $(\".block-content-TOC-container\").modal();\n        },\n\n        toggleTOCOnClicked: function(event) {\n\n            if (event && event.preventDefault) event.preventDefault();\n            var currentPageId = Utils.getCurrentPage();\n            var articleModel = Utils.getArticleModel(currentPageId);\n            if (this.blockContentTOCActivated == \"\" || this.blockContentTOCActivated == undefined) {\n                if (!$(\".block-content-TOC-container\").hasClass('enabled')) {\n                    new BlockContentItemsTOCView({\n                        model: articleModel\n                    });\n                } else {\n                    this.showTOCExpand(articleModel);\n                }\n                this.blockContentTOCActivated = true;\n            } else if (this.blockContentTOCActivated == true) {\n                this.showTOCExpand(articleModel);\n                this.blockContentTOCActivated = true;\n            }\n        },\n\n        toggleSpeakersNotesOnClick: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            if (!$('.navigation-speaker-note-button').hasClass('disabled') || event == undefined) {\n                var currentPageId = Utils.getCurrentPage();\n                var articleModel = Utils.getArticleModel(currentPageId);\n                if (this.blockContentSpeakerNotes == true) {\n                    this.model.set(\"speakerNotesSet\", true);\n                }\n                new BlockContentItemsSpearkersNotesView({\n                    model: this.model\n                });\n                this.blockContentSpeakerNotes = true;\n            }\n        },\n\n        toggleInfoOnClick: function(event) {\n            if (event && event.preventDefault) event.preventDefault();\n            if (this.blockContentInfoActivated &&\n                !($(\".block-content-items-info-inner\").hasClass('max-info-hidden') ||\n                    $(\".block-content-items-info-inner\").hasClass('min-info-hidden') ||\n                    $(\".block-content-items-info-inner\").hasClass('max-info-show') ||\n                    $(\".block-content-items-info-inner\").hasClass('min-info-show')))\n                this.blockContentInfoActivated = false;\n\n            if (this.blockContentInfoActivated === \"\" || this.blockContentInfoActivated === undefined) {\n                if ($(\".block-content-items-info-inner\").hasClass('maximize'))\n                    $(\".block-content-items-info-inner\").addClass(\"max-info-show\").removeClass(\"max-info-hidden min-info-hidden min-info-show\");\n                else\n                    $(\".block-content-items-info-inner\").addClass(\"min-info-show\").removeClass(\"min-info-hidden max-info-show max-info-hidden\");\n                this.blockContentInfoActivated = true;\n            } else if (this.blockContentInfoActivated === true) {\n                if ($(\".block-content-items-info-inner\").hasClass('maximize'))\n                    $(\".block-content-items-info-inner\").addClass(\"max-info-hidden\").removeClass(\"max-info-show min-info-hidden min-info-show\");\n                else\n                    $(\".block-content-items-info-inner\").addClass(\"min-info-hidden\").removeClass(\"min-info-show max-info-show max-info-hidden\");\n                this.blockContentInfoActivated = false;\n            } else if (this.blockContentInfoActivated === false) {\n                if ($(\".block-content-items-info-inner\").hasClass('maximize'))\n                    $(\".block-content-items-info-inner\").addClass(\"max-info-show\").removeClass(\"max-info-hidden min-info-hidden min-info-show\");\n                else\n                    $(\".block-content-items-info-inner\").addClass(\"min-info-show\").removeClass(\"min-info-hidden max-info-show max-info-hidden\");\n                this.blockContentInfoActivated = true;\n            }\n        }\n\n    });\n    return BlockContentItemsNavigationView;\n\n});\n\n",
    "define('extensions/adapt-blockContentItems/js/BlockContentItemsTOCIconView',[\n    'backbone',\n    'coreJS/adapt',\n    './jquery.jsmodal',\n    './utils/utils'\n], function(Backbone, Adapt, LightBox, Utils) {\n\n    var BlockContentItemsTOCIconView = Backbone.View.extend({\n\n        className: 'navigation-TOC-button',\n\n        template: 'blockContentItemsTOCIconView',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n        },\n\n        render: function() {\n            var template = Handlebars.templates[this.template];\n            $('.navigation').find('.page-level-progress-navigation').before(template(this.model));\n            return this;\n        }\n\n    });\n    return BlockContentItemsTOCIconView;\n});\n\n",
    "define('extensions/adapt-contrib-pageLevelProgress/js/completionCalculations',[],function() {\n    \n    // Calculate completion of a contentObject\n    function calculateCompletion(contentObjectModel) {\n\n        var viewType = contentObjectModel.get('_type'),\n            nonAssessmentComponentsTotal = 0,\n            nonAssessmentComponentsCompleted = 0,\n            assessmentComponentsTotal = 0,\n            assessmentComponentsCompleted = 0,\n            subProgressCompleted = 0,\n            subProgressTotal = 0,\n            isComplete = contentObjectModel.get(\"_isComplete\") ? 1 : 0;\n\n        // If it's a page\n        if (viewType == 'page') {\n            var children = contentObjectModel.findDescendants('components').where({'_isAvailable': true, '_isOptional': false});\n            var components = getPageLevelProgressEnabledModels(children);\n\n            var nonAssessmentComponents = getNonAssessmentComponents(components);\n\n            nonAssessmentComponentsTotal = nonAssessmentComponents.length | 0,\n            nonAssessmentComponentsCompleted = getComponentsCompleted(nonAssessmentComponents).length;\n\n            var assessmentComponents = getAssessmentComponents(components);\n\n            assessmentComponentsTotal = assessmentComponents.length | 0,\n            assessmentComponentsCompleted = getComponentsInteractionCompleted(assessmentComponents).length;\n\n            subProgressCompleted = contentObjectModel.get(\"_subProgressComplete\") || 0;\n            subProgressTotal = contentObjectModel.get(\"_subProgressTotal\") || 0;\n\n            //add one point extra for page completion to eliminate incomplete pages and full progress bars\n            return {\n                \"subProgressCompleted\": subProgressCompleted,\n                \"subProgressTotal\": subProgressTotal,\n                \"nonAssessmentCompleted\": nonAssessmentComponentsCompleted + isComplete,\n                \"nonAssessmentTotal\": nonAssessmentComponentsTotal + 1,\n                \"assessmentCompleted\": assessmentComponentsCompleted + isComplete,\n                \"assessmentTotal\": assessmentComponentsTotal + 1\n            };\n        }\n        // If it's a sub-menu\n        else if (viewType == 'menu') {\n\n            _.each(contentObjectModel.get('_children').models, function(contentObject) {\n                var completionObject = calculateCompletion(contentObject);\n                subProgressCompleted += contentObjectModel.subProgressCompleted || 0;\n                subProgressTotal += contentObjectModel.subProgressTotal || 0;\n                nonAssessmentComponentsTotal += completionObject.nonAssessmentTotal;\n                nonAssessmentComponentsCompleted += completionObject.nonAssessmentCompleted;\n                assessmentComponentsTotal += completionObject.assessmentTotal;\n                assessmentComponentsCompleted += completionObject.assessmentCompleted;\n            });\n\n            return {\n                \"subProgressCompleted\": subProgressCompleted,\n                \"subProgressTotal\" : subProgressTotal,\n                \"nonAssessmentCompleted\": nonAssessmentComponentsCompleted,\n                \"nonAssessmentTotal\": nonAssessmentComponentsTotal,\n                \"assessmentCompleted\": assessmentComponentsCompleted,\n                \"assessmentTotal\": assessmentComponentsTotal,\n            };\n        }\n    }\n\n    function getNonAssessmentComponents(models) {\n        return _.filter(models, function(model) {\n            return !model.get('_isPartOfAssessment');\n        });\n    }\n\n    function getAssessmentComponents(models) {\n        return _.filter(models, function(model) {\n            return model.get('_isPartOfAssessment');\n        });\n    }\n\n    function getComponentsCompleted(models) {\n        return _.filter(models, function(item) {\n            return item.get('_isComplete');\n        });\n    }\n\n    function getComponentsInteractionCompleted(models) {\n        return _.filter(models, function(item) {\n            return item.get('_isInteractionComplete');\n        });\n    }\n\n    //Get only those models who were enabled for pageLevelProgress\n    function getPageLevelProgressEnabledModels(models) {\n        return _.filter(models, function(model) {\n            if (model.get('_pageLevelProgress')) {\n                return model.get('_pageLevelProgress')._isEnabled;\n            }\n        });\n    }\n\n    return {\n    \tcalculateCompletion: calculateCompletion,\n    \tgetPageLevelProgressEnabledModels: getPageLevelProgressEnabledModels\n    };\n\n});\n",
    "define('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView',['require','coreJS/adapt','backbone'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n\n    var PageLevelProgressView = Backbone.View.extend({\n\n        className: 'page-level-progress',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n        },\n\n        events: {\n            'click .page-level-progress-item button': 'scrollToPageElement'\n        },\n\n        scrollToPageElement: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n            var currentComponentSelector = '.' + $(event.currentTarget).attr('data-page-level-progress-id');\n            var $currentComponent = $(currentComponentSelector);\n            Adapt.once('drawer:closed', function() {\n                Adapt.scrollTo($currentComponent, { duration:400 });\n            });\n            Adapt.trigger('drawer:closeDrawer');\n        },\n\n        render: function() {\n            var components = this.collection.toJSON();\n            var data = {\n                components: components,\n                _globals: Adapt.course.get('_globals')\n            };\n            var template = Handlebars.templates['pageLevelProgress'];\n            this.$el.html(template(data));\n            this.$el.a11y_aria_label(true);\n            return this;\n        }\n\n    });\n\n    return PageLevelProgressView;\n\n});\n\n",
    "define('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView',['require','coreJS/adapt','backbone','./completionCalculations','extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var completionCalculations = require('./completionCalculations');\n\n    var PageLevelProgressView = require('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView');\n\n    var PageLevelProgressNavigationView = Backbone.View.extend({\n\n        tagName: 'button',\n\n        className: 'base page-level-progress-navigation',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(Adapt, 'router:location', this.updateProgressBar);\n            this.listenTo(Adapt, 'pageLevelProgress:update', this.refreshProgressBar);\n            this.listenTo(this.collection, 'change:_isInteractionComplete', this.updateProgressBar);\n            this.listenTo(this.model, 'change:_isInteractionComplete', this.updateProgressBar);\n            this.$el.attr('role', 'button');\n            this.ariaText = '';\n            \n            if (Adapt.course.has('_globals') && Adapt.course.get('_globals')._extensions && Adapt.course.get('_globals')._extensions._pageLevelProgress && Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressIndicatorBar) {\n                this.ariaText = Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressIndicatorBar +  ' ';\n            }\n            \n            this.render();\n            \n            _.defer(_.bind(function() {\n                this.updateProgressBar();\n            }, this));\n        },\n\n        events: {\n            'click': 'onProgressClicked'\n        },\n\n        render: function() {\n            var components = this.collection.toJSON();\n            var data = {\n                components: components,\n                _globals: Adapt.course.get('_globals')\n            };            \n\n            var template = Handlebars.templates['pageLevelProgressNavigation'];\n            $('.navigation-drawer-toggle-button').after(this.$el.html(template(data)));\n            return this;\n        },\n        \n        refreshProgressBar: function() {\n            var currentPageComponents = this.model.findDescendants('components').where({'_isAvailable': true});\n            var enabledProgressComponents = completionCalculations.getPageLevelProgressEnabledModels(currentPageComponents);\n            \n            this.collection = new Backbone.Collection(enabledProgressComponents);\n            this.updateProgressBar();\n        },\n\n        updateProgressBar: function() {\n            var completionObject = completionCalculations.calculateCompletion(this.model);\n            \n            //take all assessment, nonassessment and subprogress into percentage\n            //this allows the user to see if assessments have been passed, if assessment components can be retaken, and all other component's completion\n            \n            var completed = completionObject.nonAssessmentCompleted + completionObject.assessmentCompleted + completionObject.subProgressCompleted;\n            var total  = completionObject.nonAssessmentTotal + completionObject.assessmentTotal + completionObject.subProgressTotal;\n\n            var percentageComplete = Math.floor((completed / total)*100);\n\n\n            this.$('.page-level-progress-navigation-bar').css('width', percentageComplete + '%');\n\n            // Add percentage of completed components as an aria label attribute\n            this.$el.attr('aria-label', this.ariaText +  percentageComplete + '%');\n\n            // Set percentage of completed components to model attribute to update progress on MenuView\n            this.model.set('completedChildrenAsPercentage', percentageComplete);\n        },\n\n        onProgressClicked: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n            Adapt.drawer.triggerCustomView(new PageLevelProgressView({collection: this.collection}).$el, false);\n        }\n\n    });\n\n    return PageLevelProgressNavigationView;\n\n});\n\n",
    "/*\n * adapt-blockContentItems\n * License - http://github.com/amruta-thakur\n * Maintainer - Amruta Thakur(amruta.thakur@exultcorp.com)\n                Sarveshwar Gavhane <sarveshwar.gavhane@exultcorp.com>\n */\n\ndefine('extensions/adapt-blockContentItems/js/adapt-blockContentItems',[\n    'backbone',\n    'coreJS/adapt',\n    './BlockContentItemsNavigationView',\n    './BlockContentItemsTOCView',\n    './BlockContentItemsTOCIconView',\n    './utils/utils',\n    '../../adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView'\n], function(Backbone, Adapt, BlockContentItemsNavigationView, BlockContentItemsTOCView, BlockContentItemsTOCIconView, Utils, PageLevelProgressNavigationView) {\n\n    function initialize() {\n        this.listenTo(Adapt, 'remove', this.remove);\n    }\n\n    function onDataReady() {\n        Adapt.on('articleView:postRender', onArticleViewPostRender);\n    }\n\n    function onArticleViewPostRender(article) {\n        if (article.model.get('_blockContentItems') && article.model.get('_blockContentItems')._isEnabled) {\n            setUpBlockContentItems(article);\n            console.log(\"setUpBlockContentItems called\")\n        }\n    }\n\n    function setUpBlockContentItems(article) {\n        var BlockContentItems = Backbone.View.extend({\n\n            initialize: function() {\n                this.listenTo(Adapt, 'remove', this.remove, this);\n                this.listenTo(Adapt, 'pageView:ready', this.onPageViewReady, this);\n                this.blockContentTOCActivated = \"\";\n            },\n\n            onPageViewReady: function() {\n                this.setUpPage();\n            },\n\n            toggleClick: function(event) {\n                if (this.blockContentActivated == true) {\n                    this.blockContentActivated = false;\n                    $(\".navigation-block-content\").addClass(\"display-none\");\n                } else {\n                    this.blockContentActivated = true;\n                    $(\".navigation-block-content\").removeClass(\"display-none\");\n                }\n            },\n\n            toggleTOCOnClicked: function(event) {\n\n                if (event && event.preventDefault) event.preventDefault();\n                var currentPageId = Utils.getCurrentPage();\n                var articleModel = Utils.getArticleModel(currentPageId);\n                if (this.blockContentTOCActivated == \"\" || this.blockContentTOCActivated == undefined) {\n                    if (!$(\".block-content-TOC-container\").hasClass('enabled')) {\n                        new BlockContentItemsTOCView({\n                            model: articleModel\n                        });\n                    } else {\n                        this.showTOC(articleModel);\n                    }\n                    this.blockContentTOCActivated = true;\n                } else if (this.blockContentTOCActivated == true) {\n                    this.showTOC(articleModel);\n                    this.blockContentTOCActivated = true;\n                }\n            },\n\n            showTOC: function(articleModel) {\n                if (!$(\".block-content-TOC-container\").hasClass('modal')) {\n                    $(\".block-content-TOC-container\").addClass('modal');\n                }\n                if ($(\".block-content-TOC-container\").hasClass('display-none')) {\n                    $(\".block-content-TOC-container\").removeClass('display-none');\n                }\n                Utils.setInitialStageStatus(articleModel);\n                $(\".block-content-TOC-container\").modal();\n            },\n\n            setUpPage: function() {\n                new BlockContentItemsNavigationView({\n                    model: article.model\n                });\n                this.blockContentActivated = false;\n                this.doTabSettings();\n                $('.bottomnavigation').addClass(\"display-none\");\n                $('.reply-all').on('click', this.toggleClick);\n                $(\".navigation-block-content\").addClass(\"display-none\");\n            },\n\n            doTabSettings: function() {\n                var blockContentItemsRef = article.model.get(\"_blockContentItems\");\n                if (!blockContentItemsRef._hasToc) {\n                    $('.navigation-TOC-button').addClass('display-none');\n                } else {\n                    var articleBlockItems = article.model.get(\"_blockContentItems\");\n                    var blockItemsModel = new Backbone.Model(articleBlockItems);\n                    new BlockContentItemsTOCIconView({\n                        model: blockItemsModel\n                    });\n                    $('.block-level-progress-drawer-toggle-button').remove();\n                    $('.navigation-TOC-button').on('click', _.bind(this.toggleTOCOnClicked, this));\n                }\n                if (!blockContentItemsRef._hasSpeakerNotes) {\n                    $('.navigation-speaker-note-button').addClass('display-none');\n                }\n                if (!blockContentItemsRef._hasInfo) {\n                    $('.navigation-info-button').addClass('display-none');\n                }\n            }\n\n        });\n\n        new BlockContentItems({\n            model: article.model\n        });\n    }\n\n    Adapt.once('app:dataReady', onDataReady);\n\n    Adapt.on('menuView:postRender', function(view) {\n\n        if (view.model.get('_id') == Adapt.location._currentId) {\n            $('.blockContentItems-inner').remove();\n            $('.block-content-items-info').remove();\n            $('.navigation-TOC-button').remove();\n            $(\".block-content-TOC-container\").removeClass('enabled');\n            return;\n        }\n        var viewType = view.model.get('_type');\n\n        // Progress bar should not render for course viewType\n        if (viewType == 'course') return;\n    })\n});\n\n",
    "define('extensions/adapt-blockIdentifier/js/adapt-blockIdentifier',[\n    'coreJS/adapt',\n    'backbone'\n], function(Adapt, Backbone) {\n\n    var blockCounter = identifier = 0;\n    var blockIdentifierView = BlockIdentifierView = parentId = \"\";\n    var blockIdentifierObjects = [];\n\n    function setupBlockIdentifierView(block) {\n\n        BlockIdentifierView = Backbone.View.extend({\n\n            initialize: function() {\n                this.listenTo(Adapt, 'remove', this.remove, this);\n                this.defaultBlockIdentifier = Adapt.course.get('_blockIdentifier');\n                this.onPageViewReady();\n            },\n\n\n            onPageViewReady: function() {\n                this.setUp(block);\n            },\n\n            setUp: function(block) { //parameter is used if page level is required\n                var blockIdentifier = this.model.get('_blockIdentifier');\n\n                if (blockIdentifier) {\n                    if (blockIdentifier._isEnabled) {\n                        var template = Handlebars.templates[\"blockIdentifier\"];\n                        var id = '.' + this.model.get('_id');\n                        var currentParentId = this.model.get('_parentId');\n                        if(parentId != currentParentId){\n                            identifier = 0;\n                            parentId = currentParentId;\n                        }\n                        if(!blockIdentifier._graphicSrc) {\n                            blockIdentifier._graphicSrc = this.defaultBlockIdentifier._graphicSrc;\n                        }\n                        if (this.model.get(\"_identifier\") == undefined) {\n                            identifier++;\n                            this.model.set(\"_identifier\", identifier);\n                        }\n                        if (blockIdentifier._link) {\n                            if (blockIdentifier._link._isLinked) {\n                                var linkableBlockIds = blockIdentifier._link.linkableBlockIds;\n                                var blocks = Adapt.blocks.models;\n                                var tempBlockIdentifier = {\n                                    \"_isEnabled\":true,\n                                    \"_graphicSrc\":blockIdentifier._graphicSrc\n                                };\n\n                                _.each(linkableBlockIds, function(id) {\n                                    var block = _.filter(blocks, function(block) {\n                                        return block.get('_id') == id;\n                                    });\n                                    block[0].set(\"_identifier\", identifier);\n                                    block[0].set(\"_blockIdentifier\", tempBlockIdentifier);\n                                });\n                            }\n                        }\n                    }\n                }\n                return this;\n            }\n        });\n    }\n\n    Adapt.on('app:dataReady', function() {\n        if (Adapt.course.get('_blockIdentifier')){\n            if (Adapt.course.get('_blockIdentifier')._isEnabled){\n                console.log(\"_blockIdentifier \",Adapt.blocks.models);\n                _.each(Adapt.blocks.models,function(block) {\n                    setupBlockIdentifierView(block);\n                    setUpBlock(block);\n                },this);\n                setUpBlockView();\n            }\n        }\n    });\n\n    function setUpBlock(block) {\n        if (block.get('_blockIdentifier')){\n            if (block.get('_blockIdentifier')._isEnabled) {\n                blockIdentifierObjects.push(new BlockIdentifierView({\n                    model: block\n                }));\n            }\n        }\n    }\n\n    function setUpBlockView() {\n        Adapt.on('blockView:postRender', function(block) {\n            if(block.model.get('_blockIdentifier')) {\n                if (block.model.get('_blockIdentifier')._isEnabled) {\n                    var template = Handlebars.templates[\"blockIdentifier\"];\n                    var id = '.' + block.model.get('_id');\n                    var data = block.model.toJSON();\n                    $(id).find('.block-inner').append(template(data));\n                }\n            }\n        });\n    }\n});\n\n",
    "/*\n* Page Level Progress\n* License - http://github.com/adaptlearning/adapt_framework/LICENSE\n* Maintainers - Daryl Hedley <darylhedley@hotmail.com>\n*/\n\ndefine('extensions/adapt-blockLevelProgress/js/adapt-blockLevelProgress',['require','coreJS/adapt','backbone'],function(require) {\n\n\tvar Adapt = require('coreJS/adapt');\n\tvar Backbone = require('backbone');\n\n\tvar BlockLevelProgressView = Backbone.View.extend({\n\n\t\tclassName: \"block-level-progress\",\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(Adapt, 'remove', this.remove);\n\t\t\tthis.render();\n\t\t},\n\n\t\tevents: {\n\t\t\t'click .sub .content': 'scrollToPageElement',\n\t\t\t'click .block-level-progress-inner .tocItem': 'scrollToPageElement'\n\t\t},\n\n\t\tscrollToPageElement: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar currentBlockSelector = '.' + $(event.currentTarget).attr('data-block-level-progress-id');\n\t\t\tvar $currentBlock = $(currentBlockSelector);\n\t\t\t$(window).scrollTo($currentBlock, {offset:{top:-$('.navigation').height()}});\n\t\t\tAdapt.trigger('page:scrollTo', currentBlockSelector);\n\t\t\tAdapt.trigger('drawer:closeDrawer');\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar data = this.collection.toJSON();\n\t        var template = Handlebars.templates[\"blockLevelProgress\"];\n\t        this.$el.html(template({blocks:data}));\n\t        return this;\n\t\t}\n\n\t});\n\n\tvar BlockLevelProgressNavigationView = Backbone.View.extend({\n\n\t\ttagName: 'a',\n\n\t\tclassName: 'block-level-progress-navigation',\n\n\t\tinitialize: function() {\n\t\t\tthis.listenTo(Adapt, 'remove', this.remove);\n\t\t\tthis.listenTo(this.collection, 'change:_isComplete', this.updateProgressBar);\n\t\t\tthis.$el.attr('href', '#');\n\t\t\tthis.render();\n\t\t\tthis.updateProgressBar();\n\t\t},\n\n\t\tevents: {\n\t\t\t'click': 'onProgressClicked'\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar data = this.collection.toJSON();\n\t        var template = Handlebars.templates[\"blockLevelProgressNavigation\"];\n\t        $('.navigation-drawer-toggle-button').after(this.$el.html(template({blocks:data})));\n\t        return this;\n\t\t},\n\n\t\tupdateProgressBar: function() {\n\t\t\tvar blockCompletionRatio = this.collection.where({_isComplete:true}).length / this.collection.length;\n\t\t\tvar percentageOfCompleteBlocks = blockCompletionRatio*100;\n\n\t\t\tthis.$('.block-level-progress-navigation-bar').css('width', percentageOfCompleteBlocks+'%');\n\n\t\t},\n\n\t\tonProgressClicked: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar that = this;\n\t\t\tsetTimeout(function(){\n\t\t\t\tthat.resizeTOC();\n\t\t\t}, 100);\n\t\t\tAdapt.drawer.triggerCustomView(new BlockLevelProgressView({collection:this.collection}).$el, false);\n\t\t\t$('.nav-container .main ul li i').mousemove(function (event) {\n\t\t\tvar xposition = (event.view.window.innerWidth - event.pageX);\n                    if (xposition > 290 && xposition < 320) {\n                        $('.main').css('width', '64px');\n                        $('.main li a').css('opacity', '0');\n                    }\n                });\n\t\t\t$('.nav-container').mousemove(function (event) {\n\t\t\tvar xposition = (event.view.window.innerWidth - event.pageX);\n\t\t\t\t\tif (xposition >= 340) {\n                        $('.main').css('width', '320px');\n                        $('.main li a').css('opacity', '1');\n                        $('.main li').each(function () {\n                            $(this).removeClass('active');\n                        });\n                    };\n                });\n                $('.main li').mouseover(function (e) {\n                  if(e.target.id != \"\"){\n                    if ($(\"#\"+e.target.id).is(':hover')) {\n                        $.each($('.tocItem'), function(item){\n                          $($(this).data('target')).removeClass('active');\n                          $(this).removeClass('active');     \n                        });\n                        $($(e.target.dataset.target)).addClass('active');\n                        $(\"#\"+e.target.id).addClass('active');\n                    }\n                  }\n                });\n\t\t},\n\t\t\n\t\tresizeTOC: function(){\n        var window_height = $(window).height();\n        sidebar_height = window_height - $('.drawer-toolbar').innerHeight();\n        if(window_height > sidebar_height){\n            $('.main').css({ 'height': sidebar_height });\n        }\n\t\t\t\t\n\t\t\t\t$('.main').on('DOMMouseScroll mousewheel', function(ev) {\n\t\t\t\t\tvar $this = $(this),\n\t\t\t\t\t\t\tscrollTop = this.scrollTop,\n\t\t\t\t\t\t\tscrollHeight = this.scrollHeight,\n\t\t\t\t\t\t\theight = $this.height(),\n\t\t\t\t\t\t\tdelta = (ev.type == 'DOMMouseScroll' ?\n\t\t\t\t\t\t\t\t\tev.originalEvent.detail * -40 :\n\t\t\t\t\t\t\t\t\tev.originalEvent.wheelDelta),\n\t\t\t\t\t\t\tup = delta > 0;\n\n\t\t\t\t\tvar prevent = function() {\n\t\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\tev.returnValue = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!up && -delta > scrollHeight - height - scrollTop) {\n\t\t\t\t\t\t\t// Scrolling down, but this will take us past the bottom.\n\t\t\t\t\t\t\t$this.scrollTop(scrollHeight);\n\t\t\t\t\t\t\treturn prevent();\n\t\t\t\t\t} else if (up && delta > scrollTop) {\n\t\t\t\t\t\t\t// Scrolling up, but this will take us past the top.\n\t\t\t\t\t\t\t$this.scrollTop(0);\n\t\t\t\t\t\t\treturn prevent();\n\t\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t});\n\n\tfunction setupBlockLevelProgress(enabledProgressBlocks) {\n\n\t\tvar blocksCollection = new Backbone.Collection(enabledProgressBlocks);\n\n\t\tnew BlockLevelProgressNavigationView({collection:blocksCollection});\n\n\t}\n\n\tAdapt.on('router:page', function(pageModel) {\n\t\tvar currentPageBlocks = pageModel.findDescendants('blocks').where({'_isAvailable': true});\n\n\t\tvar enabledProgressBlocks = _.filter(currentPageBlocks, function(block) {\n\t\t\tif (block.attributes._blockLevelProgress) {\n\t\t\t\treturn block.attributes._blockLevelProgress._isEnabled;\n\t\t\t}\n\t\t});\n\n\t\tif (enabledProgressBlocks.length > 0) {\n\t\t\tsetupBlockLevelProgress(enabledProgressBlocks);\n\t\t}\n\n\t});\n\n})\n;\n",
    "/*\n* adapt-bottomnavigation\n* License - http://github.com/adaptlearning/adapt_framework/LICENSE\n* Maintainers - Oliver Foster <oliver.foster@kineo.com>\n*/\n\ndefine('extensions/adapt-bottomnavigation/js/adapt-bottomnavigation',['require','coreJS/adapt','backbone'],function(require) {\n\n\tvar Adapt = require('coreJS/adapt');\n\tvar Backbone = require('backbone');\n\n\t//PRIVATE VARIABLES\n\tvar visibility = {\n\t\theight: 0,\n\t\thidden: true\n\t};\n\n\tvar bottomnavigation = new (Backbone.View.extend({\n\n\t\t//DRAWING\n\t\tsetCustomView: function(view) {\n\n\t\t\tif (view === bottomnavigation.model.get(\"_customView\")) return;\n\n\t\t\tview.undelegateEvents();\n\n\t\t\tbottomnavigation.model.set(\"_customView\", view);\n\n\t\t\tif (visibility.hidden) {\n\t\t\t\tview.$el.css(\"display\",\"\");\n\t\t\t\tbottomnavigation.$el.html(\"\").append( view.$el );\n\t\t\t\tview.delegateEvents();\n\t\t\t\tAdapt.trigger(\"bottomnavigation:setCustomView\", view);\n\t\t\t} else {\n\t\t\t\tbottomnavigation.$el.children().fadeOut({\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tview.$el.css(\"display\",\"none\");\n\t\t\t\t\t\tbottomnavigation.$el.html(\"\").append( view.$el );\n\t\t\t\t\t\tview.$el.fadeIn();\n\t\t\t\t\t\tview.delegateEvents();\n\t\t\t\t\t\tAdapt.trigger(\"bottomnavigation:setCustomView\", view);\n\t\t\t\t\t},\n\t\t\t\t\tduration: 200\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\trender: function() {\n\n\t\t\tif (bottomnavigation.model.get(\"_customView\") && typeof bottomnavigation.model.get(\"_customView\").render == \"function\") bottomnavigation.model.get(\"_customView\").render();\n\n\t\t},\n\n\t\t//MAIN\n\t\tshowMobile: function(bool) {\n\t\t\tbottomnavigation.model.set(\"_showOnMobile\", (bool == true) );\n\n\t\t\tif (bool) $(\"html\").removeClass(\"bottomnavigation-hidden-mobile\");\n\t\t\telse $(\"html\").addClass(\"bottomnavigation-hidden-mobile\");\n\t\t},\n\n\t\tshow: function(duration) {\n\t\t\tif (!visibility.hidden) return;\n\n\t\t\tAdapt.trigger(\"popup:opened\");\n\n\t\t\tbottomnavigation.render();\n\n\t\t\tif (typeof duration == \"undefined\") duration = bottomnavigation.model.get(\"_duration\").show;\n\n\t\t\tfunction start() {\n\t\t\t\t$(\"html\").addClass(\"has-bottomnavigation\");\n\t\t\t\tbottomnavigation.$el.css({\n\t\t\t\t\t\"height\": \"0px\",\n\t\t\t\t\t\"display\": \"block\",\n\t\t\t\t\twidth: $(window).width()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction complete() {\n\t\t\t\tvisibility.hidden = false;\n\t\t\t\tbottomnavigation.$el.css({\n\t\t\t\t\theight: \"\",\n\t\t\t\t\tdisplay: \"block\"\n\t\t\t\t});\n\t\t\t\tAdapt.trigger(\"bottomnavigation:opened\");\n\t\t\t}\n\n\t\t\tif (duration > 0 ) {\n\t\t\t\tbottomnavigation.$el.animate({\n\t\t\t\t\theight: visibility.height + \"px\"\n\t\t\t\t}, {\n\t\t\t\t\tduration: duration,\n\t\t\t\t\tstart: start,\n\t\t\t\t\tcomplete: complete\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tstart();\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t},\n\n\t\thide: function(duration) {\n\t\t\tif (visibility.hidden) return;\n\n\t\t\tif (typeof duration == \"undefined\") duration = bottomnavigation.model.get(\"_duration\").hide;\n\n\t\t\tfunction start() {\n\t\t\t\t$(\"html\").removeClass(\"has-bottomnavigation\");\n\t\t\t}\n\n\t\t\tfunction complete() {\n\t\t\t\tvisibility.hidden = true;\n\t\t\t\tAdapt.trigger(\"popup:closed\");\n\t\t\t\tAdapt.trigger(\"bottomnavigation:closed\");\n\t\t\t\tbottomnavigation.$el.hide();\n\t\t\t\tbottomnavigation.$el.css(\"height\", \"\");\n\t\t\t}\n\n\t\t\tif (duration > 0) {\n\t\t\t\tbottomnavigation.$el.animate({\n\t\t\t\t\theight: \"0px\"\n\t\t\t\t}, {\n\t\t\t\t\tduration:duration,\n\t\t\t\t\tstart: start,\n\t\t\t\t\tcomplete: complete\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tstart();\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\t}))();\n\n\tbottomnavigation.$el = $('<div>').addClass(\"bottomnavigation\").appendTo($(\"body\"));\n\n\tAdapt.on(\"bottomnavigation:open\", function() {\n\t\tbottomnavigation.show();\n\t});\n\n\tAdapt.on(\"bottomnavigation:close\", function() {\n\t\tbottomnavigation.hide();\n\t});\n\n\tAdapt.once(\"app:dataReady\", function() {\n\t\tbottomnavigation.model = new Backbone.Model(Adapt.course.get(\"_bottomnavigation\"));\n\n\t\tif (typeof bottomnavigation.model.get(\"_duration\") == \"undefined\") bottomnavigation.model.set(\"_duration\", {\n\t\t\tshow:100,\n\t\t\thide:100\n\t\t});\n\n\t\tif (typeof bottomnavigation.model.get(\"_showOnMobile\") == \"undefined\") bottomnavigation.model.set(\"_showOnMobile\", false);\n\n\t\tif (bottomnavigation.model.get(\"_showOnMobile\")) $(\"html\").addClass(\"bottomnavigation-hidden-mobile\");\n\n\t\t//capture height\n\t\tvisibility.height = parseInt(bottomnavigation.$el.css(\"height\"));\n\n\t\tAdapt.trigger(\"bottomnavigation:initialized\");\n\t});\n\n\t//device resize and navigation drawn\n\tAdapt.on(\"device:resize navigationView:postRender\", function() {\n\t\t//capture height\n\t\tvisibility.height = parseInt(bottomnavigation.$el.css(\"height\"));\n\n\t\t//set width to window width (to align with restricted aspect ratios)\n\t\tbottomnavigation.$el.css({width: $(window).width()});\n\t});\n\n\tAdapt.bottomnavigation = bottomnavigation;\n});\n\n",
    "define('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleView',[\n    'coreJS/adapt',\n    'coreViews/articleView'\n], function(Adapt, AdaptArticleView) {\n\n    var AssessmentView = {\n\n        postRender: function() {\n            AdaptArticleView.prototype.postRender.call(this);\n            if (this.model.isAssessmentEnabled()) {\n                this._setupEventListeners();\n\n                var config = this.model.getConfig();\n                if (config && config._questions && config._questions._canShowMarking === false) {\n                    this.$el.addClass('no-marking');\n                }\n            }\n            this.$el.addClass('assessment');\n        },\n\n        _setupEventListeners: function() {\n            this.listenTo(Adapt, \"assessments:complete\", this._onAssessmentComplete);\n            this.listenTo(Adapt, \"assessments:reset\", this._onAssessmentReset);\n            this.listenTo(Adapt, \"remove\", this._onRemove);\n        },\n\n        _removeEventListeners: function() {\n            this.stopListening(Adapt, \"assessments:complete\", this._onAssessmentComplete);\n            this.stopListening(Adapt, \"assessments:reset\", this._onAssessmentReset);\n        },\n\n        _onAssessmentComplete: function(state, model) {\n            if (state.id != this.model.get(\"_assessment\")._id) return;\n\n            console.log(\"assessment complete\", state, model);\n\n        },\n\n        _onAssessmentReset: function(state, model) {\n            if (state.id != this.model.get(\"_assessment\")._id) return;\n\n            console.log(\"assessment reset\", state, model);\n\n        },\n\n        _onRemove: function() {\n            this._removeEventListeners();\n        }\n\n    };\n\n    return AssessmentView;\n\n});\n\n",
    "define('extensions/adapt-contrib-assessment/js/adapt-assessmentQuestionBank',['require'],function(require) {\n    \n    var QuestionBank = function(quizBankid, articleId, numQuestionBlocks, uniqueQuestions) {\n\n        this._id = quizBankid;\n        this._articleId = articleId;\n        this._numQuestionBlocks = numQuestionBlocks;\n        this._uniqueQuestions = uniqueQuestions;\n        this.questionBlocks = [];\n        this.unUsedQuestionBlocks = undefined;\n        this.usedQuestionBlocks = [];\n\n    };\n\n    QuestionBank.prototype = {\n\n        getID: function() {\n            return this._id;\n        },\n\n        addBlock: function(block) {\n            this.questionBlocks.push(block);\n        },\n\n        getRandomQuestionBlocks: function() {\n            this.checkResetUnunsedBlocks();\n\n            var questionBlocks = [];\n            var usedQuestionBlocks = this.usedQuestionBlocks.slice(0);\n\n            for (var i = 0; i < this._numQuestionBlocks; i++) {\n                var question = this.getRandomQuestion();\n                if (question !== undefined) {\n                    questionBlocks.push(question);\n                } else {\n                    if (usedQuestionBlocks.length === 0) break;\n                    var index = Math.floor(Math.random() * (usedQuestionBlocks.length-1));\n                    question = usedQuestionBlocks.splice(index,1)[0];\n                    questionBlocks.push(question);\n                }\n            }\n                \n            return questionBlocks;\n        },\n\n        checkResetUnunsedBlocks: function() {\n            if (this.unUsedQuestionBlocks !== undefined && this._uniqueQuestions) return;\n            \n            this.unUsedQuestionBlocks = this.questionBlocks.slice(0);\n        },\n\n        getRandomQuestion: function() {\n            if (this.unUsedQuestionBlocks !== undefined && this.unUsedQuestionBlocks.length < 1) {\n               console.warn(\"assessment:\"+this._articleId+\" No more unique questions for _assessment._quizBankID \" + this._id);\n               return undefined;\n            }\n\n            var index = Math.round(Math.random() * (this.unUsedQuestionBlocks.length-1));\n            var questionBlock = this.unUsedQuestionBlocks[index];\n            this.usedQuestionBlocks.push(questionBlock);\n\n            this.unUsedQuestionBlocks.splice(index, 1);\n\n            return questionBlock;\n        }\n        \n    };\n\n    return QuestionBank;\n\n});\n",
    "define('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleModel',[\n    'coreJS/adapt',\n    './adapt-assessmentQuestionBank'\n], function(Adapt, QuestionBank) {\n\n\n    var givenIdCount = 0;\n    var assessmentConfigDefaults = {\n        \"_isEnabled\":true,\n        \"_questions\": {\n            \"_resetType\": \"soft\",\n            \"_canShowFeedback\": false,\n            \"_canShowMarking\": false,\n            \"_canShowModelAnswer\": false\n        },\n        \"_isPercentageBased\" : true,\n        \"_scoreToPass\" : 100,\n        \"_includeInTotalScore\": true,\n        \"_assessmentWeight\": 1,\n        \"_isResetOnRevisit\": true,\n        \"_reloadPageOnReset\": true,\n        \"_attempts\": \"infinite\"\n    };\n\n    var AssessmentModel = {\n\n    //Private functions\n\n        _postInitialize: function() {\n            if (!this.isAssessmentEnabled()) return;\n\n            var assessmentConfig = this.getConfig();\n\n            _.extend(this, {\n                '_currentQuestionComponents': null,\n                \"_originalChildModels\": null,\n                \"_questionBanks\": null,\n                \"_forceResetOnRevisit\": false\n            });\n\n            var attemptsLeft;\n            switch (assessmentConfig._attempts) {\n                case \"infinite\": case 0: case undefined: case -1: case null:\n                     attemptsLeft = \"infinite\";\n                    break;\n                default:\n                    attemptsLeft = assessmentConfig._attempts;\n                    break;\n            }\n\n\n            //if assessment passed required and assessment included in total\n            //set attemptsleft to infinite\n            var centralAssessmentState = Adapt.assessment.getState();\n\n            if (assessmentConfig._includeInTotalScore &&\n                centralAssessmentState.requireAssessmentPassed) {\n                attemptsLeft = \"infinite\";\n            }\n\n            this.set({\n                '_currentQuestionComponentIds': [],\n                '_assessmentCompleteInSession': false,\n                '_attemptInProgress': false,\n                \"_isAssessmentComplete\": false,\n                '_numberOfQuestionsAnswered': 0,\n                '_lastAttemptScoreAsPercent': 0,\n                \"_attempts\": attemptsLeft,\n                \"_attemptsLeft\": attemptsLeft,\n                \"_attemptsSpent\": 0\n            });\n\n            this.listenToOnce(Adapt, \"app:dataReady\", this._onDataReady);\n            this.listenTo(Adapt, \"remove\", this._onRemove);\n\n        },\n\n        init: function() {\n            //save original children\n            this._originalChildModels = this.getChildren().models;\n            //collect all question components\n            this._currentQuestionComponents = this.findDescendants(\"components\").where({_isQuestionType: true});\n            var currentQuestionsCollection = new Backbone.Collection(this._currentQuestionComponents);\n            this.set(\"_currentQuestionComponentIds\", currentQuestionsCollection.pluck(\"_id\"));\n\n            this._setAssessmentOwnershipOnChildrenModels();\n\n        },\n\n        _setAssessmentOwnershipOnChildrenModels: function() {\n            //mark all children components as belonging to an assessment\n            for (var i = 0, l = this._originalChildModels.length; i < l; i++) {\n                var blockModel = this._originalChildModels[i];\n                blockModel.set({\n                    _isPartOfAssessment: true\n                });\n                //make sure components are set to _isPartOfAssessment for plp checking\n                blockModel.setOnChildren({\n                    _isPartOfAssessment: true\n                });\n            }\n        },\n        \n\n        _onDataReady: function() {\n            //register assessment\n            Adapt.assessment.register(this);\n        },\n\n        _setupAssessmentData: function(force) {\n            var assessmentConfig = this.getConfig();\n            var state = this.getState();\n            var shouldResetAssessment = (!this.get(\"_attemptInProgress\") && !state.isPass)\n                                || force == true;\n\n            var quizModels;\n            if (shouldResetAssessment) {\n                this.set(\"_numberOfQuestionsAnswered\", 0);\n                this.set(\"_isAssessmentComplete\", false);\n                this.set(\"_assessmentCompleteInSession\", false);\n                this.set(\"_score\", 0);\n                this.getChildren().models = this._originalChildModels;\n                if(assessmentConfig._banks && \n                        assessmentConfig._banks._isEnabled && \n                        assessmentConfig._banks._split.length > 1) {\n\n                    quizModels = this._setupBankedAssessment();\n                } else if(assessmentConfig._randomisation && \n                        assessmentConfig._randomisation._isEnabled) {\n\n                    quizModels = this._setupRandomisedAssessment();\n                }\n            }\n\n            if (!quizModels) {\n                // leave the order as before, completed or not\n                quizModels = this.getChildren().models;\n            } else if ( quizModels.length === 0 ) {\n                quizModels = this.getChildren().models;\n                console.warn(\"assessment: Not enough unique questions to create a fresh assessment, using last selection\");\n            }\n\n            this.getChildren().models = quizModels;\n\n            this._currentQuestionComponents = this.findDescendants('components').where({_isQuestionType: true});\n            var currentQuestionsCollection = new Backbone.Collection(this._currentQuestionComponents);\n            this.set(\"_currentQuestionComponentIds\", currentQuestionsCollection.pluck(\"_id\"));\n\n            var shouldResetQuestions = (assessmentConfig._isResetOnRevisit !== false && !state.isPass) \n                                        || force == true;\n\n            if (shouldResetAssessment || shouldResetQuestions) {\n                this._resetQuestions();\n                this.set(\"_attemptInProgress\", true);\n                Adapt.trigger('assessments:reset', this.getState(), this);\n            }\n            \n            if (!state.isComplete) {\n                this.set(\"_attemptInProgress\", true);\n            }\n            \n            this._overrideQuestionComponentSettings();\n            this._setupQuestionListeners();\n            this._checkNumberOfQuestionsAnswered();\n            this._updateQuestionsState();\n\n            Adapt.assessment.saveState();\n\n        },\n\n        _setupBankedAssessment: function() {\n            var assessmentConfig = this.getConfig();\n\n            this._setupBanks();\n\n            //get random questions from banks\n            var questionModels = [];\n            for (var bankId in this._questionBanks) {\n                var questionBank = this._questionBanks[bankId];\n                var questions = questionBank.getRandomQuestionBlocks();\n                questionModels = questionModels.concat(questions);\n            }\n\n            //if overall question order should be randomized\n            if (assessmentConfig._banks._randomisation) {\n                questionModels = _.shuffle(questionModels);\n            }\n\n            return questionModels;\n        },\n\n        _setupBanks: function() {\n            var assessmentConfig = this.getConfig();\n            var banks = assessmentConfig._banks._split.split(\",\");\n\n            this._questionBanks = [];\n\n            //build fresh banks\n            for (var i = 0, l = banks.length; i < l; i++) {\n                var bank = banks[i];\n                var bankId = (i+1);\n                var questionBank = new QuestionBank(bankId, \n                                                this.get(\"_id\"), \n                                                bank, \n                                                true);\n\n                this._questionBanks[bankId] = questionBank;\n            }\n\n            //add blocks to banks\n            var children = this.getChildren().models;\n            for (var i = 0, l = children.length; i < l; i++) {\n                var blockModel = children[i];\n                var blockAssessmentConfig = blockModel.get('_assessment');\n                var bankId = blockAssessmentConfig._quizBankID;\n                this._questionBanks[bankId].addBlock(blockModel);\n            }\n\n        },\n\n        _setupRandomisedAssessment: function() {\n            var assessmentConfig = this.getConfig();\n\n            var randomisationModel = assessmentConfig._randomisation;\n            var blockModels = this.getChildren().models;\n            \n            var questionModels = _.shuffle(blockModels);\n\n            questionModels = questionModels.slice(0, randomisationModel._blockCount);\n            \n            return questionModels;\n        },\n\n        _overrideQuestionComponentSettings: function() {\n            var questionConfig = this.getConfig()._questions;\n            var questionComponents = this._currentQuestionComponents;\n\n            var newSettings = {};\n            if(questionConfig.hasOwnProperty('_canShowFeedback')) {\n                newSettings._canShowFeedback = questionConfig._canShowFeedback;\n            }\n\n            if(questionConfig.hasOwnProperty('_canShowModelAnswer')) {\n                newSettings._canShowModelAnswer = questionConfig._canShowModelAnswer;\n            }\n\n            if(!_.isEmpty(newSettings)) {\n                for (var i = 0, l = questionComponents.length; i < l; i++) {\n                    questionComponents[i].set(newSettings, { pluginName: \"_assessment\" });\n                }\n            }\n\n        },\n\n        _setupQuestionListeners: function() {\n            var questionComponents = this._currentQuestionComponents;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                if (question.get(\"_isInteractionComplete\")) continue;\n                this.listenTo(question, 'change:_isInteractionComplete', this._onQuestionCompleted);\n            }\n        },\n\n        _checkNumberOfQuestionsAnswered: function() {\n            var questionComponents = this._currentQuestionComponents;\n            var numberOfQuestionsAnswered = 0;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                if (question.get(\"_isInteractionComplete\")) {\n                    numberOfQuestionsAnswered++;\n                }\n            }\n            this.set(\"_numberOfQuestionsAnswered\", numberOfQuestionsAnswered);\n        },\n\n        _removeQuestionListeners: function() {\n            var questionComponents = this._currentQuestionComponents;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                this.stopListening(question, 'change:_isInteractionComplete', this._onQuestionCompleted);\n            }\n        },\n\n        _onQuestionCompleted: function(questionModel, value) {\n            if (value === false) return;\n            if(!questionModel.get('_isInteractionComplete')) return;\n\n            var numberOfQuestionsAnswered = this.get(\"_numberOfQuestionsAnswered\");\n            numberOfQuestionsAnswered++;\n            this.set(\"_numberOfQuestionsAnswered\", numberOfQuestionsAnswered);\n\n            this._updateQuestionsState();\n            Adapt.assessment.saveState();\n\n            this._checkAssessmentComplete();\n        },\n\n        _checkAssessmentComplete: function() {\n            var numberOfQuestionsAnswered = this.get(\"_numberOfQuestionsAnswered\");\n\n            var allQuestionsAnswered = numberOfQuestionsAnswered >= this._currentQuestionComponents.length;\n            if (!allQuestionsAnswered) return;\n            \n            this._onAssessmentComplete();\n        },\n\n        _onAssessmentComplete: function() {\n            var assessmentConfig = this.getConfig();\n\n            this.set(\"_attemptInProgress\", false);\n            this._spendAttempt();\n\n            var scoreAsPercent = this._getScoreAsPercent();\n            var score = this._getScore();\n            var maxScore = this._getMaxScore();\n\n            this.set({\n                '_scoreAsPercent': scoreAsPercent,\n                '_score': score,\n                '_maxScore': maxScore,\n                '_lastAttemptScoreAsPercent': scoreAsPercent,\n                '_assessmentCompleteInSession': true,\n                '_isAssessmentComplete': true\n            });\n\n            this._updateQuestionsState();\n\n            this._checkIsPass();\n\n            this._removeQuestionListeners();\n            \n            Adapt.trigger('assessments:complete', this.getState(), this);\n        },\n\n        _updateQuestionsState: function() {\n            var questions = [];\n\n            var questionComponents = this._currentQuestionComponents;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var questionComponent = questionComponents[i];\n\n                var questionModel = {\n                    _id: questionComponent.get(\"_id\"),\n                    _isCorrect: questionComponent.get(\"_isCorrect\") === undefined ? null : questionComponent.get(\"_isCorrect\")\n                };\n\n                //build array of questions\n                questions.push(questionModel);\n\n            }\n            \n            this.set({\n                '_questions': questions\n            });\n        },\n\n        _checkIsPass: function() {\n            var assessmentConfig = this.getConfig();\n\n            var isPercentageBased = assessmentConfig._isPercentageBased;\n            var scoreToPass = assessmentConfig._scoreToPass;\n\n            var scoreAsPercent = this.get(\"_scoreAsPercent\");\n            var score = this.get(\"_score\");\n\n            var isPass = false;\n            if (score && scoreAsPercent) {\n                if (isPercentageBased) {\n                    isPass = (scoreAsPercent >= scoreToPass) ? true : false;\n                } else {\n                    isPass = (score >= scoreToPass) ? true : false;\n                }\n            }\n\n            this.set(\"_isPass\", isPass);\n        },\n\n        _isAttemptsLeft: function() {\n            var assessmentConfig = this.getConfig();\n\n            var isAttemptsEnabled = assessmentConfig._attempts && assessmentConfig._attempts != \"infinite\";\n\n            if (!isAttemptsEnabled) return true;\n\n            if (this.get('_attemptsLeft') === 0) return false;\n        \n            return true;\n        },\n\n        _spendAttempt: function() {\n            if (!this._isAttemptsLeft()) return false;\n\n            var attemptsSpent = this.get(\"_attemptsSpent\");\n            attemptsSpent++;\n            this.set(\"_attemptsSpent\", attemptsSpent);\n\n            if (this.get('_attempts') == \"infinite\") return true;\n\n            var attemptsLeft = this.get('_attemptsLeft');\n            attemptsLeft--;\n            this.set('_attemptsLeft', attemptsLeft);\n\n            return true;\n        },\n\n        _getScore: function() {\n            var score = 0;\n            var questionComponents = this._currentQuestionComponents;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                if (question.get('_isCorrect') && \n                    question.get('_questionWeight')) {\n                    score += question.get('_questionWeight');\n                }\n            }\n            return score;\n        },\n        \n        _getMaxScore: function() {\n            var maxScore = 0;\n            var questionComponents = this._currentQuestionComponents;\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                if (question.get('_questionWeight')) {\n                    maxScore += question.get('_questionWeight');\n                }\n            }\n            return maxScore;\n        },\n        \n        _getScoreAsPercent: function() {\n            if (this._getMaxScore() === 0) return 0;\n            return Math.round((this._getScore() / this._getMaxScore()) * 100);\n        },\n\n        _getLastAttemptScoreAsPercent: function() {\n            return this.get('_lastAttemptScoreAsPercent');\n        },\n\n        _checkReloadPage: function() {\n            if (!this.canResetInPage()) return false;\n\n            var parentId = this.getParent().get(\"_id\");\n            var currentLocation = Adapt.location._currentId;\n\n            //check if on assessment page and should rerender page\n            if (currentLocation != parentId) return false;\n            if (!this.get(\"_isReady\")) return false;\n\n            return true;\n        },\n\n        _reloadPage: function() {\n            this._forceResetOnRevisit = true;\n\n            Backbone.history.navigate(\"#/id/\"+Adapt.location._currentId, { replace:true, trigger: true });\n        },\n\n        _resetQuestions: function() {\n            var assessmentConfig = this.getConfig();\n            var questionComponents = this._currentQuestionComponents;\n\n            for (var i = 0, l = questionComponents.length; i < l; i++) {\n                var question = questionComponents[i];\n                question.reset(assessmentConfig._questions._resetType, true);\n            }\n        },\n\n        _onRemove: function() {\n            this._removeQuestionListeners();\n        },\n\n\n\n        _setCompletionStatus: function() {\n            this.set({\n                \"_isComplete\": true,\n                \"_isInteractionComplete\": true,\n            });\n        },\n\n        _checkIfQuestionsWereRestored: function() {\n            if (this.get(\"_assessmentCompleteInSession\")) return;\n            if (!this.get(\"_isAssessmentComplete\")) return;\n\n            //fix for courses that do not remember the user selections\n            //force assessment to reset if user revisits an assessment page in a new session which is completed\n            var wereQuestionsRestored = true;\n\n            var questions = this.get(\"_questions\");\n            for (var i = 0, l = questions.length; i < l; i++) {\n                var question = questions[i];\n                var questionModel = Adapt.findById(question._id);\n                if (!questionModel.get(\"_isSubmitted\")) {\n                    wereQuestionsRestored = false;\n                    break;\n                }\n            }\n        \n            if (!wereQuestionsRestored) {\n                this.set(\"_assessmentCompleteInSession\", true);\n                return true;\n            }\n\n            return false;\n        },\n\n\n    //Public Functions\n\n        isAssessmentEnabled: function() {\n            if (this.get(\"_assessment\") && \n                this.get(\"_assessment\")._isEnabled) return true;\n            return false;\n        },\n\n        canResetInPage: function() {\n            var assessmentConfig = this.getConfig();\n            if (assessmentConfig._reloadPageOnReset === false) return false;\n            return true;\n        },\n\n        reset: function(force) {\n            var assessmentConfig = this.getConfig();\n\n            //check if forcing reset via page revisit or force parameter\n            force = this._forceResetOnRevisit || force == true;\n            this._forceResetOnRevisit = false;\n\n            var isPageReload = this._checkReloadPage();\n\n            //stop resetting if not complete or not allowed\n            if (this.get(\"_assessmentCompleteInSession\") && \n                    !assessmentConfig._isResetOnRevisit && \n                    !isPageReload && \n                    !force) return false;\n            \n            //check if new session and questions not restored\n            force = force || this._checkIfQuestionsWereRestored();\n            \n            //stop resetting if no attempts left\n            if (!this._isAttemptsLeft() && !force) return false;\n\n            if (!isPageReload) {\n                //only perform this section when not attempting to reload the page\n                this._setupAssessmentData(force);\n            } else {\n                this._reloadPage();\n            }\n\n            return true;\n        },\n\n        getSaveState: function() {\n            var state = this.getState();\n            var questions = state.questions;\n            var indexByIdQuestions = _.indexBy(questions, \"_id\");\n\n            for (var id in indexByIdQuestions) {\n                indexByIdQuestions[id] = indexByIdQuestions[id]._isCorrect\n            }\n\n            var saveState = [\n                state.isComplete ? 1:0,\n                state.attemptsSpent,\n                state.maxScore,\n                state.score,\n                state.attemptInProgress ? 1:0,\n                indexByIdQuestions\n            ];\n\n            return saveState;\n        },\n\n        setRestoreState: function(restoreState) {\n            var isComplete = restoreState[0] == 1 ? true : false;\n            var attempts = this.get(\"_attempts\");\n            var attemptsSpent = restoreState[1];\n            var maxScore = restoreState[2];\n            var score = restoreState[3];\n            var attemptInProgress = restoreState[4] == 1 ? true : false;\n            var scoreAsPercent;\n\n            var indexByIdQuestions = restoreState[5];\n\n            var blockIds = {};\n            for (var id in indexByIdQuestions) {\n                var blockId = Adapt.findById(id).get(\"_parentId\");\n                blockIds[blockId] = Adapt.findById(blockId);\n            }\n            var restoredChildrenModels = _.values(blockIds);\n            \n            if (indexByIdQuestions.length) this.getChildren().models = restoredChildrenModels;\n\n\n            this.set(\"_isAssessmentComplete\", isComplete);\n            this.set(\"_assessmentCompleteInSession\", false);\n            this.set(\"_attemptsSpent\", attemptsSpent );\n            this.set(\"_attemptInProgress\", attemptInProgress )\n\n            if (attempts == \"infinite\") this.set(\"_attemptsLeft\", \"infinite\");\n            else this.set(\"_attemptsLeft\" , attempts - attemptsSpent);\n\n            this.set(\"_maxScore\", maxScore || this._getMaxScore());\n            this.set(\"_score\", score || 0);\n\n            if (score) {\n                scoreAsPercent = Math.floor( score / maxScore  * 100);\n            } else {\n                scoreAsPercent = 0;\n            }\n        \n            this.set(\"_scoreAsPercent\", scoreAsPercent);\n            this.set(\"_lastAttemptScoreAsPercent\", scoreAsPercent)\n\n            \n            var questions = [];\n            for (var id in indexByIdQuestions) {\n                questions.push({\n                    _id: id,\n                    _isCorrect: indexByIdQuestions[id]\n                });\n            }\n\n            \n\n            this.set(\"_questions\", questions);\n            this._checkIsPass();\n\n        },\n\n        getState: function() {\n            //return the current state of the assessment\n            //create snapshot of values so as not to create memory leaks\n            var assessmentConfig = this.getConfig();\n\n            var state = {\n                id: assessmentConfig._id,\n                type: \"article-assessment\",\n                pageId: this.getParent().get(\"_id\"),\n                isEnabled: assessmentConfig._isEnabled,\n                isComplete: this.get(\"_isAssessmentComplete\"),\n                isPercentageBased: assessmentConfig._isPercentageBased,\n                scoreToPass: assessmentConfig._scoreToPass,\n                score: this.get(\"_score\"),\n                scoreAsPercent: this.get(\"_scoreAsPercent\"),\n                maxScore: this.get(\"_maxScore\"),\n                isPass: this.get(\"_isPass\"),\n                includeInTotalScore: assessmentConfig._includeInTotalScore,\n                assessmentWeight: assessmentConfig._assessmentWeight,\n                attempts: this.get(\"_attempts\"),\n                attemptsSpent: this.get(\"_attemptsSpent\"),\n                attemptsLeft: this.get(\"_attemptsLeft\"),\n                attemptInProgress: this.get(\"_attemptInProgress\"),\n                lastAttemptScoreAsPercent: this.get('_lastAttemptScoreAsPercent'),\n                questions: this.get(\"_questions\"),\n                questionModels: new Backbone.Collection(this._currentQuestionComponents)\n            };\n\n            return state;\n        },\n\n        getConfig: function() {\n            var assessmentConfig = this.get(\"_assessment\");\n\n            if (assessmentConfig._id === undefined) {\n                assessmentConfig._id = \"givenId\"+(givenIdCount++);\n            } else {\n                return assessmentConfig;\n            }\n\n            if (!assessmentConfig) {\n                assessmentConfig = $.extend(true, {}, assessmentConfigDefaults);\n            } else {\n                assessmentConfig = $.extend(true, {}, assessmentConfigDefaults, assessmentConfig);\n            }\n\n            this.set(\"_assessment\", assessmentConfig);\n\n            return assessmentConfig;\n        }\n        \n    };\n\n    return AssessmentModel;\n});\n\n",
    "define('extensions/adapt-contrib-assessment/js/assessment',[\n    'coreJS/adapt'\n], function(Adapt) {\n\n    /*\n        Here we setup a registry for all assessments\n    */\n\n    var assessmentsConfigDefaults = {\n        \"_postTotalScoreToLms\": true,\n        \"_isPercentageBased\": true,\n        \"_scoreToPass\": 100,\n        \"_requireAssessmentPassed\": false,\n        \"_isDefaultsLoaded\": true\n    };\n\n    Adapt.assessment = _.extend({\n\n    //Private functions\n\n        _assessments: _.extend([], {\n            _byPageId: {},\n            _byAssessmentId: {}\n        }),\n\n        initialize: function() {\n            this.listenTo(Adapt, \"assessments:complete\", this._onAssessmentsComplete);\n            this.listenTo(Adapt, \"router:location\", this._checkResetAssessmentsOnRevisit);\n        },\n\n        _onAssessmentsComplete: function(state) {\n            var assessmentId = state.id;\n\n            state.isComplete = true;\n\n            if (assessmentId === undefined) return;\n\n            if (!this._getStateByAssessmentId(assessmentId)) {\n                console.warn(\"assessments: state was not registered when assessment was created\");\n            }\n\n            this.saveState();\n\n            this._setPageProgress();\n\n            this._checkAssessmentsComplete();\n\n            //need to add spoor assessment state saving\n\n        },\n\n        _restoreModelState: function(assessmentModel) {\n\n            if (!this._saveStateModel) {\n                this._saveStateModel = Adapt.offlineStorage.get(\"assessment\");\n            }\n            if (this._saveStateModel) {\n                var state = assessmentModel.getState();\n                if (this._saveStateModel[state.id]) {\n                    assessmentModel.setRestoreState(this._saveStateModel[state.id]);\n                }\n            }\n\n        },\n\n        _checkResetAssessmentsOnRevisit: function(toObject) {\n            /* \n                Here we hijack router:location to reorganise the assessment blocks \n                this must happen before trickle listens to block completion\n            */\n            if (toObject._contentType !== \"page\") return;\n\n            //initialize assessment on page visit before pageView:preRender (and trickle)\n            var pageAssessmentModels = this._getAssessmentByPageId(toObject._currentId);\n            if (pageAssessmentModels === undefined) return;\n\n            for (var i = 0, l = pageAssessmentModels.length; i < l; i++) {\n                var pageAssessmentModel = pageAssessmentModels[i];\n                pageAssessmentModel.reset();\n            }\n\n            this._setPageProgress();\n        },\n\n        _checkAssessmentsComplete: function() {\n            var allAssessmentsComplete = true;\n            var assessmentToPostBack = 0;\n            var states = this._getStatesByAssessmentId();\n\n            var assessmentStates = [];\n\n            for (var id in states) {\n                var state = states[id];\n                if (!state.includeInTotalScore) continue;\n                if (!state.isComplete) {\n                    allAssessmentsComplete = false;\n                    break;\n                }\n                assessmentToPostBack++;\n                assessmentStates.push(state);\n            }\n\n            if (!allAssessmentsComplete || assessmentToPostBack === 0) return false;\n\n            if (assessmentToPostBack === 1) {\n                this._setupSingleAssessmentConfiguration(assessmentStates[0]);\n            }\n\n            this._postScoreToLms();\n\n            return true;\n        },\n\n        _setupSingleAssessmentConfiguration: function(assessmentState) {\n            var assessmentsConfig = Adapt.course.get(\"_assessment\");\n            $.extend(true, assessmentsConfig, {\n                \"_postTotalScoreToLms\": assessmentState.includeInTotalScore,\n                \"_isPercentageBased\": assessmentState.isPercentageBased,\n                \"_scoreToPass\": assessmentState.scoreToPass\n            });\n            Adapt.course.set(\"_assessment\", assessmentsConfig);\n        },\n        \n        _postScoreToLms: function() {\n            var assessmentsConfig = this.getConfig();\n            if (assessmentsConfig._postTotalScoreToLms === false) return;\n            \n            var completionState = this.getState();\n            //post completion to spoor\n            _.defer(function() {\n                Adapt.trigger(\"assessment:complete\", completionState);\n            });\n        },\n\n        _getAssessmentByPageId: function(pageId) {\n            return this._assessments._byPageId[pageId];\n        },\n\n        _getStateByAssessmentId: function(assessmentId) {\n            return this._assessments._byAssessmentId[assessmentId].getState();\n        },\n\n        _getStatesByAssessmentId: function() {\n            var states = {};\n            for (var i = 0, l = this._assessments.length; i < l; i++) {\n                var assessmentModel = this._assessments[i];\n                var state = assessmentModel.getState();\n                states[state.id] = state;\n            }\n            return states;\n        },\n\n        _setPageProgress: function() {\n            //set _subProgressTotal and _subProgressComplete on pages that have assessment progress indicator requirements\n            \n            var requireAssessmentPassed = this.getConfig()._requireAssessmentPassed;\n\n            for (var k in this._assessments._byPageId) {\n\n                var assessments = this._assessments._byPageId[k];\n\n                var assessmentsTotal = assessments.length;\n                var assessmentsPassed = 0;\n\n                for (var i = 0, l = assessments.length; i < l; i++) {\n                    var assessmentState = assessments[i].getState();\n\n                    var isComplete;\n\n                    if (requireAssessmentPassed) {\n                        \n                        if (!assessmentState.includeInTotalScore) {\n                            isComplete = assessmentState.isComplete;\n                        } else if (assessmentState.isPass) {\n                            isComplete = assessmentState.isComplete;\n                        }\n\n                    } else {\n\n                        isComplete = assessmentState.isComplete;\n                    }\n\n                    if ( isComplete ) {\n                        assessmentsPassed+=1; \n                    }\n                }\n\n                try {\n                    var pageModel = Adapt.findById(k);\n                    pageModel.set(\"_subProgressTotal\", assessmentsTotal);\n                    pageModel.set(\"_subProgressComplete\", assessmentsPassed);\n                } catch(e) {\n\n                }\n\n            }\n        },\n\n\n    //Public functions\n\n        register: function(assessmentModel) {\n            var state = assessmentModel.getState();\n            var assessmentId = state.id;\n            var pageId = state.pageId;\n\n            if (this._assessments._byPageId[pageId] === undefined) {\n                this._assessments._byPageId[pageId] = [];\n            }\n            this._assessments._byPageId[pageId].push(assessmentModel);\n\n            if (assessmentId) {\n                this._assessments._byAssessmentId[assessmentId] = assessmentModel;\n            }\n\n            this._assessments.push(assessmentModel);\n\n            this._restoreModelState(assessmentModel);\n\n            Adapt.trigger(\"assessments:register\", state, assessmentModel);\n\n            this._setPageProgress();\n        },\n\n        get: function(id) {\n            if (id === undefined) {\n                return this._assessments.slice(0);\n            } else {\n                return this._assessments._byAssessmentId[id];\n            }\n        },\n\n        saveState: function() {\n\n            this._saveStateModel = {};\n            for (var i = 0, assessmentModel; assessmentModel = this._assessments[i++];) {\n                var state = assessmentModel.getState();\n                this._saveStateModel[state.id] = assessmentModel.getSaveState();\n            }\n\n            Adapt.offlineStorage.set(\"assessment\", this._saveStateModel);\n        },\n\n        getConfig: function () {\n            var assessmentsConfig = Adapt.course.get(\"_assessment\");\n\n            if (assessmentsConfig && assessmentsConfig._isDefaultLoaded) {\n                return assessmentsConfig;\n            }\n\n            if (assessmentsConfig === undefined) {\n                assessmentsConfig = $.extend(true, {}, assessmentsConfigDefaults);\n            } else {\n                assessmentsConfig = $.extend(true, {}, assessmentsConfigDefaults, assessmentsConfig);\n            }\n\n            Adapt.course.set(\"_assessment\", assessmentsConfig);\n\n            return assessmentsConfig;\n        },\n        \n        getState: function() {\n            var assessmentsConfig = this.getConfig();\n\n            var score = 0;\n            var maxScore = 0;\n            var isPass = false;\n            var totalAssessments = 0;\n\n            var states = this._getStatesByAssessmentId();\n\n            var assessmentsComplete = 0;\n\n            for (var id in states) {\n                var state = states[id];\n                if (!state.includeInTotalScore) continue;\n                if (state.isComplete) assessmentsComplete++;\n                totalAssessments++;\n                maxScore += state.maxScore / state.assessmentWeight;\n                score += state.score / state.assessmentWeight;\n                isPass = isPass === false ? false : state.isPass;\n            }\n\n            var isComplete = assessmentsComplete == totalAssessments;\n            \n            var scoreAsPercent = Math.round((score / maxScore) * 100);\n\n            if ((assessmentsConfig._scoreToPass || 100) && isComplete) {\n                if (assessmentsConfig._isPercentageBased || true) {\n                    if (scoreAsPercent >= assessmentsConfig._scoreToPass) isPass = true;\n                } else {\n                    if (score >= assessmentsConfig._scoreToPass) isPass = true;\n                }\n            }\n\n            return {\n                isComplete: isComplete,\n                isPercentageBased: assessmentsConfig._isPercentageBased,\n                requireAssessmentPassed: assessmentsConfig._requireAssessmentPassed,\n                isPass: isPass,\n                scoreAsPercent: scoreAsPercent,\n                maxScore: maxScore,\n                score: score,\n                assessmentsComplete: assessmentsComplete,\n                assessments: totalAssessments\n            };\n        },\n\n    }, Backbone.Events);\n\n    Adapt.assessment.initialize();\n\n});\n\n",
    "define('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension',[\n    'coreJS/adapt',\n    'coreViews/articleView',\n    'coreModels/articleModel',\n    './adapt-assessmentArticleView',\n    './adapt-assessmentArticleModel',\n    './assessment',\n], function(Adapt, ArticleView, ArticleModel, AdaptAssessmentArticleView, AdaptAssessmentArticleModel) {\n\n    /*  \n        Here we are extending the articleView and articleModel in Adapt.\n        This is to accomodate the assessment functionality on the article.\n        The advantage of this method is that the assessment behaviour can utilize all of the predefined article behaviour in both the view and the model.\n    */  \n\n    //Extends core/js/views/articleView.js\n    var ArticleViewInitialize = ArticleView.prototype.initialize;\n    ArticleView.prototype.initialize = function(options) {\n        if (this.model.get(\"_assessment\") && this.model.get(\"_assessment\")._isEnabled === true) {\n            //extend the articleView with new functionality\n            _.extend(this, AdaptAssessmentArticleView);\n        }\n        //initialize the article in the normal manner\n        return ArticleViewInitialize.apply(this, arguments);\n    };\n\n    //Extends core/js/models/articleModel.js\n    var ArticleModelInitialize = ArticleModel.prototype.initialize;\n    ArticleModel.prototype.initialize = function(options) {\n        if (this.get(\"_assessment\") && this.get(\"_assessment\")._isEnabled === true) {\n            //extend the articleModel with new functionality\n            _.extend(this, AdaptAssessmentArticleModel);\n\n            //initialize the article in the normal manner\n            var returnValue = ArticleModelInitialize.apply(this, arguments);\n\n            //initialize assessment article\n            this._postInitialize();\n\n            return returnValue;\n        }\n\n        //initialize the article in the normal manner if no assessment\n        return ArticleModelInitialize.apply(this, arguments);\n    };\n\n});\n\n",
    "define('extensions/adapt-contrib-bookmarking/js/adapt-contrib-bookmarking',[\n    'coreJS/adapt'\n], function(Adapt) {\n\n    var Bookmarking = _.extend({\n\n        bookmarkLevel: null,\n        watchViewIds: null,\n        watchViews: [],\n        restoredLocationID: null,\n        currentLocationID: null,\n\n        initialize: function () {\n            this.listenToOnce(Adapt, \"router:location\", this.onAdaptInitialize);\n        },\n\n        onAdaptInitialize: function() {\n            if (!this.checkIsEnabled()) return;\n            this.setupEventListeners();\n            this.checkRestoreLocation();\n        },\n\n        checkIsEnabled: function() {\n            var courseBookmarkModel = Adapt.course.get('_bookmarking');\n            if (!courseBookmarkModel || !courseBookmarkModel._isEnabled) return false;\n            if (!Adapt.offlineStorage) return false;\n            return true;\n        },\n\n        setupEventListeners: function() {\n            this._onScroll = _.debounce(_.bind(this.checkLocation, Bookmarking), 1000);\n            this.listenTo(Adapt, 'menuView:ready', this.setupMenu);\n            this.listenTo(Adapt, 'pageView:preRender', this.setupPage);\n        },\n\n        checkRestoreLocation: function() {\n            this.restoredLocationID = Adapt.offlineStorage.get(\"location\");\n\n            if (!this.restoredLocationID) return;\n\n            this.listenToOnce(Adapt, \"pageView:ready menuView:ready\", this.restoreLocation);\n        },\n\n        restoreLocation: function() {\n            _.defer(_.bind(function() {\n                this.stopListening(Adapt, \"pageView:ready menuView:ready\", this.restoreLocation);\n\n                if (this.restoredLocationID == Adapt.location._currentId) return;\n\n                try {\n                    var model = Adapt.findById(this.restoredLocationID);\n                } catch (error) {\n                    return;\n                }\n\n                var locationOnscreen = $(\".\" + this.restoredLocationID).onscreen();\n                var isLocationOnscreen = locationOnscreen && (locationOnscreen.percentInview > 0);\n                var isLocationFullyInview = locationOnscreen && (locationOnscreen.percentInview === 100);\n                if (isLocationOnscreen && isLocationFullyInview) return;\n\n                this.showPrompt();\n            }, this));\n        },\n\n        showPrompt: function() {\n            var courseBookmarkModel = Adapt.course.get('_bookmarking');\n            if (!courseBookmarkModel._buttons) {\n                courseBookmarkModel._buttons = {\n                    yes: \"Yes\",\n                    no: \"No\"\n                };\n            }\n            if (!courseBookmarkModel._buttons.yes) courseBookmarkModel._buttons.yes = \"Yes\";\n            if (!courseBookmarkModel._buttons.no) courseBookmarkModel._buttons.no = \"No\";\n\n\n            this.listenToOnce(Adapt, \"bookmarking:continue\", this.navigateToPrevious);\n            this.listenToOnce(Adapt, \"bookmarking:cancel\", this.navigateCancel);\n\n            var promptObject = {\n                title: courseBookmarkModel.title,\n                body: courseBookmarkModel.body,\n                _prompts:[\n                    {\n                        promptText: courseBookmarkModel._buttons.yes,\n                        _callbackEvent: \"bookmarking:continue\",\n                    },\n                    {\n                        promptText: courseBookmarkModel._buttons.no,\n                        _callbackEvent: \"bookmarking:cancel\",\n                    }\n                ],\n                _showIcon: true\n            }\n\n            if (Adapt.config.get(\"_accessibility\") && Adapt.config.get(\"_accessibility\")._isActive) {\n                $(\".loading\").show();\n                $(\"#a11y-focuser\").focus();\n                $(\"body\").attr(\"aria-hidden\", true);\n                _.delay(function() {\n                    $(\".loading\").hide();\n                    $(\"body\").removeAttr(\"aria-hidden\");\n                    Adapt.trigger('notify:prompt', promptObject);\n                }, 3000);\n            } else {\n                Adapt.trigger('notify:prompt', promptObject);\n            }\n        },\n\n        navigateToPrevious: function() {\n            _.defer(_.bind(function() {\n                var isSinglePage = Adapt.contentObjects.models.length == 1; \n                Backbone.history.navigate('#/id/' + this.restoredLocationID, {trigger: true, replace: isSinglePage});\n            }, this));\n            \n            this.stopListening(Adapt, \"bookmarking:cancel\");\n        },\n\n        navigateCancel: function() {\n            this.stopListening(Adapt, \"bookmarking:continue\");\n        },\n\n        resetLocationID: function () {\n            this.setLocationID('');\n        },\n\n        setupMenu: function(menuView) {\n            var menuModel = menuView.model;\n            //set location as menu id unless menu is course, then reset location\n            if (menuModel.get(\"_parentId\")) return this.setLocationID(menuModel.get(\"_id\"));\n            else this.resetLocationID();\n        },\n        \n        setupPage: function (pageView) {\n            var hasPageBookmarkObject = pageView.model.has('_bookmarking');\n            var bookmarkModel = (hasPageBookmarkObject) ? pageView.model.get('_bookmarking') : Adapt.course.get('_bookmarking');\n            this.bookmarkLevel = bookmarkModel._level;\n\n            if (!bookmarkModel._isEnabled) {\n                this.resetLocationID();\n                return;\n            } else {\n                //set location as page id\n                this.setLocationID(pageView.model.get('_id'));\n\n                this.watchViewIds = pageView.model.findDescendants(this.bookmarkLevel+\"s\").pluck(\"_id\");\n                this.listenTo(Adapt, this.bookmarkLevel + \"View:postRender\", this.captureViews);\n                this.listenToOnce(Adapt, \"remove\", this.releaseViews);\n                $(window).on(\"scroll\", this._onScroll);\n            }\n        },\n\n        captureViews: function (view) {\n            this.watchViews.push(view);\n        },\n\n        setLocationID: function (id) {\n            if (!Adapt.offlineStorage) return;\n            if (this.currentLocationID == id) return;\n            Adapt.offlineStorage.set(\"location\", id);\n            this.currentLocationID = id;\n        },\n\n        releaseViews: function () {\n            this.watchViews.length = 0;\n            this.watchViewIds.length = 0;\n            this.stopListening(Adapt, 'remove', this.releaseViews);\n            this.stopListening(Adapt, this.bookmarkLevel + 'View:postRender', this.captureViews);\n            $(window).off(\"scroll\", this._onScroll);\n        },\n\n        checkLocation: function() {\n            var highestOnscreen = 0;\n            var highestOnscreenLocation = \"\";\n\n            var locationObjects = [];\n            for (var i = 0, l = this.watchViews.length; i < l; i++) {\n                var view = this.watchViews[i];\n\n                var isViewAPageChild = (_.indexOf(this.watchViewIds, view.model.get(\"_id\")) > -1 );\n\n                if ( !isViewAPageChild ) continue;\n\n                var element = $(\".\" + view.model.get(\"_id\"));\n                var isVisible = (element.is(\":visible\"));\n\n                if (!isVisible) continue;\n\n                var measurements = element.onscreen();\n                if (measurements.percentInview > highestOnscreen) {\n                    highestOnscreen = measurements.percentInview;\n                    highestOnscreenLocation = view.model.get(\"_id\");\n                }\n            }\n\n            //set location as most inview component\n            if (highestOnscreenLocation) this.setLocationID(highestOnscreenLocation);\n        }\n\n    }, Backbone.Events)\n\n    Bookmarking.initialize();\n\n});\n\n",
    "define('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView',['require','coreJS/adapt','backbone'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n\n    var PageLevelProgressMenuView = Backbone.View.extend({\n\n        className: 'page-level-progress-menu-item',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n\n            this.ariaText = '';\n            if (Adapt.course.get('_globals')._extensions && Adapt.course.get('_globals')._extensions._pageLevelProgress && Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressMenuBar) {\n                this.ariaText = Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressMenuBar + ' ';\n            }\n\n            this.render();\n\n            _.defer(_.bind(function() {\n                this.updateProgressBar();\n            }, this));\n        },\n\n        events: {\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            _.extend(data, {\n                _globals: Adapt.course.get('_globals')\n            });\n            var template = Handlebars.templates['pageLevelProgressMenu'];\n\n            this.$el.html(template(data));\n            return this;\n        },\n\n        updateProgressBar: function() {\n            if (this.model.get('completedChildrenAsPercentage')) {\n                var percentageOfCompleteComponents = this.model.get('completedChildrenAsPercentage');\n            } else {\n                var percentageOfCompleteComponents = 0;\n            }\n\n            // Add percentage of completed components as an aria label attribute\n            this.$('.page-level-progress-menu-item-indicator-bar .aria-label').html(this.ariaText + Math.floor(percentageOfCompleteComponents) + '%');\n\n        },\n\n    });\n\n    return PageLevelProgressMenuView;\n\n});\n\n",
    "define('extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress',['require','coreJS/adapt','backbone','./completionCalculations','extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView','extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var completionCalculations = require('./completionCalculations');\n\n    var PageLevelProgressMenuView = require('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView');\n    var PageLevelProgressNavigationView = require('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView');\n\n    function setupPageLevelProgress(pageModel, enabledProgressComponents) {\n\n        new PageLevelProgressNavigationView({model: pageModel, collection:  new Backbone.Collection(enabledProgressComponents) });\n\n    }\n\n    // This should add/update progress on menuView\n    Adapt.on('menuView:postRender', function(view) {\n\n        if (view.model.get('_id') == Adapt.location._currentId) return;\n\n        // do not proceed until pageLevelProgress enabled on course.json\n        if (!Adapt.course.get('_pageLevelProgress') || !Adapt.course.get('_pageLevelProgress')._isEnabled) {\n            return;\n        }\n\n        var pageLevelProgress = view.model.get('_pageLevelProgress');\n        var viewType = view.model.get('_type');\n\n        // Progress bar should not render for course viewType\n        if (viewType == 'course') return;\n\n        if (pageLevelProgress && pageLevelProgress._isEnabled) {\n\n            var completionObject = completionCalculations.calculateCompletion(view.model);\n\n            //take all non-assessment components and subprogress info into the percentage\n            //this allows the user to see if the assessments are passed (subprogress) and all other components are complete\n            \n            var completed = completionObject.nonAssessmentCompleted + completionObject.subProgressCompleted;\n            var total = completionObject.nonAssessmentTotal + completionObject.subProgressTotal;\n\n            var percentageComplete = Math.floor((completed / total)*100);\n            \n            view.model.set('completedChildrenAsPercentage', percentageComplete);\n            view.$el.find('.menu-item-inner').append(new PageLevelProgressMenuView({model: view.model}).$el);\n\n        }\n\n    });\n\n    // This should add/update progress on page navigation bar\n    Adapt.on('router:page', function(pageModel) {\n\n        // do not proceed until pageLevelProgress enabled on course.json\n        if (!Adapt.course.get('_pageLevelProgress') || !Adapt.course.get('_pageLevelProgress')._isEnabled) {\n            return;\n        }\n\n        var currentPageComponents = pageModel.findDescendants('components').where({'_isAvailable': true});\n        var enabledProgressComponents = completionCalculations.getPageLevelProgressEnabledModels(currentPageComponents);\n\n        if (enabledProgressComponents.length > 0) {\n            setupPageLevelProgress(pageModel, enabledProgressComponents);\n        }\n\n    });\n\n});\n\n",
    "define('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView',['require','backbone','coreJS/adapt'],function(require) {\n\n    var Backbone = require('backbone');\n    var Adapt = require('coreJS/adapt');\n\n    var ResourcesView = Backbone.View.extend({\n\n        className: \"resources\",\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n        },\n\n        events: {\n            'click .resources-filter button': 'onFilterClicked',\n            'click .resources-item-container button': 'onResourceClicked'\n        },\n\n        render: function() {\n            var collectionData = this.collection.toJSON();\n            var modelData = this.model.toJSON();\n            var template = Handlebars.templates[\"resources\"];\n            this.$el.html(template({model: modelData, resources:collectionData, _globals: Adapt.course.get('_globals')}));\n            _.defer(_.bind(this.postRender, this));\n            return this;\n        },\n\n        postRender: function() {\n            this.listenTo(Adapt, 'drawer:triggerCustomView', this.remove);\n        },\n\n        onFilterClicked: function(event) {\n            event.preventDefault();\n            var $currentTarget = $(event.currentTarget);\n            this.$('.resources-filter button').removeClass('selected');\n            var filter = $currentTarget.addClass('selected').attr('data-filter');\n            var items = [];\n\n            if (filter === 'all') {\n                items = this.$('.resources-item').removeClass('display-none');\n            } else {\n                this.$('.resources-item').removeClass('display-none').not(\".\" + filter).addClass('display-none');\n                items = this.$('.resources-item.' + filter);\n            }\n\n            if (items.length === 0) return;\n            $(items[0]).a11y_focus();\n        },\n\n        onResourceClicked: function(event) {\n            window.open($(event.currentTarget).data(\"href\"));\n        }\n    });\n\n    return ResourcesView;\n})\n;\n",
    "define('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers',['require','handlebars'],function(require) {\n\n\tvar Handlebars = require('handlebars');\n\n\tHandlebars.registerHelper('if_collection_contains', function(collection, attribute, value, block) {\n\t\tvar makeBlockVisible = false;\n\n\t\t_.each(collection, function(resource) {\n\t\t\tif (resource[attribute] === value) {\n\t\t\t\tmakeBlockVisible = true;\n\t\t\t}\n\t\t});\n\t\tif(makeBlockVisible) {\n            return block.fn(this);\n        } else {\n            return block.inverse();\n        }\n    });\n\n    Handlebars.registerHelper('if_collection_contains_only_one_item', function(collection, attribute, block) {\n\t\tvar attributeCount = [];\n\n\t\t_.each(collection, function(resource) {\n\t\t\tvar resourceAttribute = resource[attribute];\n\t\t\tif (_.indexOf(attributeCount, resourceAttribute) === -1) {\n\t\t\t\tattributeCount.push(resourceAttribute);\n\t\t\t}\n\t\t});\n\n\t\tif (attributeCount.length <= 1) {\n\t\t\treturn block.fn(this);\n\t\t} else {\n\t\t\treturn block.inverse(this);\n\t\t}\n\n    });\n\n    Handlebars.registerHelper('return_column_layout_from_collection_length', function(collection, attribute) {\n\t\tvar attributeCount = [];\n\n\t\t_.each(collection, function(resource) {\n\t\t\tvar resourceAttribute = resource[attribute];\n\t\t\tif (_.indexOf(attributeCount, resourceAttribute) === -1) {\n\t\t\t\tattributeCount.push(resourceAttribute);\n\t\t\t}\n\t\t});\n\n\t\treturn (attributeCount.length + 1);\n\n    });\n\n})\n\t;\n",
    "define('extensions/adapt-contrib-resources/js/adapt-contrib-resources',['require','coreJS/adapt','backbone','extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView','extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers'],function(require) {\n\n\tvar Adapt = require('coreJS/adapt');\n\tvar Backbone = require('backbone');\n\tvar ResourcesView = require('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView');\n\tvar ResourcesHelpers = require('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers');\n\n\tfunction setupResources(resourcesModel, resourcesItems) {\n\n\t\tvar resourcesCollection = new Backbone.Collection(resourcesItems);\n\t\tvar resourcesModel = new Backbone.Model(resourcesModel);\n\n\t\tAdapt.on('resources:showResources', function() {\n\t\t\tAdapt.drawer.triggerCustomView(new ResourcesView({\n\t\t\t\tmodel: resourcesModel, \n\t\t\t\tcollection: resourcesCollection\n\t\t\t}).$el);\n\t\t});\n\t\n\t}\n\n\tAdapt.once('app:dataReady', function() {\n\n\t\tvar courseResources = Adapt.course.get('_resources');\n\n\t\tif (courseResources) {\n\t\t\tvar drawerObject = {\n\t\t        title: courseResources.title,\n\t\t        description: courseResources.description,\n\t\t        className: 'resources-drawer'\n\t\t    };\n\t\t    // Syntax for adding a Drawer item\n\t\t    // Adapt.drawer.addItem([object], [callbackEvent]);\n\t\t    Adapt.drawer.addItem(drawerObject, 'resources:showResources');\n\t\t} else {\n\t\t\treturn console.log('Sorry, no resources object is set on the course.json file');\n\t\t}\n\n\t\tsetupResources(courseResources, courseResources._resourcesItems);\n\n\t});\n\n});\n",
    "/*global console*/\n\n/* ===========================================================\n\npipwerks SCORM Wrapper for JavaScript\nv1.1.20150614\n\nCreated by Philip Hutchison, January 2008-2014\nhttps://github.com/pipwerks/scorm-api-wrapper\n\nCopyright (c) Philip Hutchison\nMIT-style license: http://pipwerks.mit-license.org/\n\nThis wrapper works with both SCORM 1.2 and SCORM 2004.\n\nInspired by APIWrapper.js, created by the ADL and\nConcurrent Technologies Corporation, distributed by\nthe ADL (http://www.adlnet.gov/scorm).\n\nSCORM.API.find() and SCORM.API.get() functions based\non ADL code, modified by Mike Rustici\n(http://www.scorm.com/resources/apifinder/SCORMAPIFinder.htm),\nfurther modified by Philip Hutchison\n\n=============================================================== */\n\n\nvar pipwerks = {};                                  //pipwerks 'namespace' helps ensure no conflicts with possible other \"SCORM\" variables\npipwerks.UTILS = {};                                //For holding UTILS functions\npipwerks.debug = { isActive: true };                //Enable (true) or disable (false) for debug mode\n\npipwerks.SCORM = {                                  //Define the SCORM object\n    version:    null,                               //Store SCORM version.\n    handleCompletionStatus: true,                   //Whether or not the wrapper should automatically handle the initial completion status\n    handleExitMode: true,                           //Whether or not the wrapper should automatically handle the exit mode\n    API:        { handle: null,\n                  isFound: false },                 //Create API child object\n    connection: { isActive: false },                //Create connection child object\n    data:       { completionStatus: null,\n                  exitStatus: null },               //Create data child object\n    debug:      {}                                  //Create debug child object\n};\n\n\n\n/* --------------------------------------------------------------------------------\n   pipwerks.SCORM.isAvailable\n   A simple function to allow Flash ExternalInterface to confirm\n   presence of JS wrapper before attempting any LMS communication.\n\n   Parameters: none\n   Returns:    Boolean (true)\n----------------------------------------------------------------------------------- */\n\npipwerks.SCORM.isAvailable = function(){\n    return true;\n};\n\n\n\n// ------------------------------------------------------------------------- //\n// --- SCORM.API functions ------------------------------------------------- //\n// ------------------------------------------------------------------------- //\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.API.find(window)\n   Looks for an object named API in parent and opener windows\n\n   Parameters: window (the browser window object).\n   Returns:    Object if API is found, null if no API found\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.API.find = function(win){\n\n    var API = null,\n        findAttempts = 0,\n        findAttemptLimit = 500,\n        traceMsgPrefix = \"SCORM.API.find\",\n        trace = pipwerks.UTILS.trace,\n        scorm = pipwerks.SCORM;\n\n    while ((!win.API && !win.API_1484_11) &&\n           (win.parent) &&\n           (win.parent != win) &&\n           (findAttempts <= findAttemptLimit)){\n\n                findAttempts++;\n                win = win.parent;\n\n    }\n\n    //If SCORM version is specified by user, look for specific API\n    if(scorm.version){\n\n        switch(scorm.version){\n\n            case \"2004\" :\n\n                if(win.API_1484_11){\n\n                    API = win.API_1484_11;\n\n                } else {\n\n                    trace(traceMsgPrefix +\": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.\");\n\n                }\n\n                break;\n\n            case \"1.2\" :\n\n                if(win.API){\n\n                    API = win.API;\n\n                } else {\n\n                    trace(traceMsgPrefix +\": SCORM version 1.2 was specified by user, but API cannot be found.\");\n\n                }\n\n                break;\n\n        }\n\n    } else {                             //If SCORM version not specified by user, look for APIs\n\n        if(win.API_1484_11) {            //SCORM 2004-specific API.\n\n            scorm.version = \"2004\";      //Set version\n            API = win.API_1484_11;\n\n        } else if(win.API){              //SCORM 1.2-specific API\n\n            scorm.version = \"1.2\";       //Set version\n            API = win.API;\n\n        }\n\n    }\n\n    if(API){\n\n        trace(traceMsgPrefix +\": API found. Version: \" +scorm.version);\n        trace(\"API: \" +API);\n\n    } else {\n\n        trace(traceMsgPrefix +\": Error finding API. \\nFind attempts: \" +findAttempts +\". \\nFind attempt limit: \" +findAttemptLimit);\n\n    }\n\n    return API;\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.API.get()\n   Looks for an object named API, first in the current window's frame\n   hierarchy and then, if necessary, in the current window's opener window\n   hierarchy (if there is an opener window).\n\n   Parameters:  None.\n   Returns:     Object if API found, null if no API found\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.API.get = function(){\n\n    var API = null,\n        win = window,\n        scorm = pipwerks.SCORM,\n        find = scorm.API.find,\n        trace = pipwerks.UTILS.trace;\n\n    API = find(win);\n\n    if(!API && win.parent && win.parent != win){\n        API = find(win.parent);\n    }\n\n    if(!API && win.top && win.top.opener){\n        API = find(win.top.opener);\n    }\n\n    //Special handling for Plateau\n    //Thanks to Joseph Venditti for the patch\n    if(!API && win.top && win.top.opener && win.top.opener.document) {\n        API = find(win.top.opener.document);\n    }\n\n    if(API){\n        scorm.API.isFound = true;\n    } else {\n        trace(\"API.get failed: Can't find the API!\");\n    }\n\n    return API;\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.API.getHandle()\n   Returns the handle to API object if it was previously set\n\n   Parameters:  None.\n   Returns:     Object (the pipwerks.SCORM.API.handle variable).\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.API.getHandle = function() {\n\n    var API = pipwerks.SCORM.API;\n\n    if(!API.handle && !API.isFound){\n\n        API.handle = API.get();\n\n    }\n\n    return API.handle;\n\n};\n\n\n\n// ------------------------------------------------------------------------- //\n// --- pipwerks.SCORM.connection functions --------------------------------- //\n// ------------------------------------------------------------------------- //\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.connection.initialize()\n   Tells the LMS to initiate the communication session.\n\n   Parameters:  None\n   Returns:     Boolean\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.connection.initialize = function(){\n\n    var success = false,\n        scorm = pipwerks.SCORM,\n        completionStatus = scorm.data.completionStatus,\n        trace = pipwerks.UTILS.trace,\n        makeBoolean = pipwerks.UTILS.StringToBoolean,\n        debug = scorm.debug,\n        traceMsgPrefix = \"SCORM.connection.initialize \";\n\n    trace(\"connection.initialize called.\");\n\n    if(!scorm.connection.isActive){\n\n        var API = scorm.API.getHandle(),\n            errorCode = 0;\n\n        if(API){\n\n            switch(scorm.version){\n                case \"1.2\" : success = makeBoolean(API.LMSInitialize(\"\")); break;\n                case \"2004\": success = makeBoolean(API.Initialize(\"\")); break;\n            }\n\n            if(success){\n\n                //Double-check that connection is active and working before returning 'true' boolean\n                errorCode = debug.getCode();\n\n                if(errorCode !== null && errorCode === 0){\n\n                    scorm.connection.isActive = true;\n\n                    if(scorm.handleCompletionStatus){\n\n                        //Automatically set new launches to incomplete\n                        completionStatus = scorm.status(\"get\");\n\n                        if(completionStatus){\n\n                            switch(completionStatus){\n\n                                //Both SCORM 1.2 and 2004\n                                case \"not attempted\": scorm.status(\"set\", \"incomplete\"); break;\n\n                                //SCORM 2004 only\n                                case \"unknown\" : scorm.status(\"set\", \"incomplete\"); break;\n\n                                //Additional options, presented here in case you'd like to use them\n                                //case \"completed\"  : break;\n                                //case \"incomplete\" : break;\n                                //case \"passed\"     : break;    //SCORM 1.2 only\n                                //case \"failed\"     : break;    //SCORM 1.2 only\n                                //case \"browsed\"    : break;    //SCORM 1.2 only\n\n                            }\n\n                            //Commit changes\n                            scorm.save();\n\n                        }\n\n                    }\n\n                } else {\n\n                    success = false;\n                    trace(traceMsgPrefix +\"failed. \\nError code: \" +errorCode +\" \\nError info: \" +debug.getInfo(errorCode));\n\n                }\n\n            } else {\n\n                errorCode = debug.getCode();\n\n                if(errorCode !== null && errorCode !== 0){\n\n                    trace(traceMsgPrefix +\"failed. \\nError code: \" +errorCode +\" \\nError info: \" +debug.getInfo(errorCode));\n\n                } else {\n\n                    trace(traceMsgPrefix +\"failed: No response from server.\");\n\n                }\n            }\n\n        } else {\n\n            trace(traceMsgPrefix +\"failed: API is null.\");\n\n        }\n\n    } else {\n\n          trace(traceMsgPrefix +\"aborted: Connection already active.\");\n\n     }\n\n     return success;\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.connection.terminate()\n   Tells the LMS to terminate the communication session\n\n   Parameters:  None\n   Returns:     Boolean\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.connection.terminate = function(){\n\n    var success = false,\n        scorm = pipwerks.SCORM,\n        exitStatus = scorm.data.exitStatus,\n        completionStatus = scorm.data.completionStatus,\n        trace = pipwerks.UTILS.trace,\n        makeBoolean = pipwerks.UTILS.StringToBoolean,\n        debug = scorm.debug,\n        traceMsgPrefix = \"SCORM.connection.terminate \";\n\n\n    if(scorm.connection.isActive){\n\n        var API = scorm.API.getHandle(),\n            errorCode = 0;\n\n        if(API){\n\n             if(scorm.handleExitMode && !exitStatus){\n\n                if(completionStatus !== \"completed\" && completionStatus !== \"passed\"){\n\n                    switch(scorm.version){\n                        case \"1.2\" : success = scorm.set(\"cmi.core.exit\", \"suspend\"); break;\n                        case \"2004\": success = scorm.set(\"cmi.exit\", \"suspend\"); break;\n                    }\n\n                } else {\n\n                    switch(scorm.version){\n                        case \"1.2\" : success = scorm.set(\"cmi.core.exit\", \"logout\"); break;\n                        case \"2004\": success = scorm.set(\"cmi.exit\", \"normal\"); break;\n                    }\n\n                }\n\n            }\n\n            //Ensure we persist the data\n            success = scorm.save();\n\n            if(success){\n     \n                switch(scorm.version){\n                    case \"1.2\" : success = makeBoolean(API.LMSFinish(\"\")); break;\n                    case \"2004\": success = makeBoolean(API.Terminate(\"\")); break;\n                }\n                   \n                if(success){\n                        \n                    scorm.connection.isActive = false;\n                   \n                } else {\n                        \n                    errorCode = debug.getCode();\n                    trace(traceMsgPrefix +\"failed. \\nError code: \" +errorCode +\" \\nError info: \" +debug.getInfo(errorCode));\n       \n                }\n                \n            }\n\n        } else {\n\n            trace(traceMsgPrefix +\"failed: API is null.\");\n\n        }\n\n    } else {\n\n        trace(traceMsgPrefix +\"aborted: Connection already terminated.\");\n\n    }\n\n    return success;\n\n};\n\n\n\n// ------------------------------------------------------------------------- //\n// --- pipwerks.SCORM.data functions --------------------------------------- //\n// ------------------------------------------------------------------------- //\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.data.get(parameter)\n   Requests information from the LMS.\n\n   Parameter: parameter (string, name of the SCORM data model element)\n   Returns:   string (the value of the specified data model element)\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.data.get = function(parameter){\n\n    var value = null,\n        scorm = pipwerks.SCORM,\n        trace = pipwerks.UTILS.trace,\n        debug = scorm.debug,\n        traceMsgPrefix = \"SCORM.data.get(\" +parameter +\") \";\n\n    if(scorm.connection.isActive){\n\n        var API = scorm.API.getHandle(),\n            errorCode = 0;\n\n          if(API){\n\n            switch(scorm.version){\n                case \"1.2\" : value = API.LMSGetValue(parameter); break;\n                case \"2004\": value = API.GetValue(parameter); break;\n            }\n\n            errorCode = debug.getCode();\n\n            //GetValue returns an empty string on errors\n            //If value is an empty string, check errorCode to make sure there are no errors\n            if(value !== \"\" || errorCode === 0){\n\n                //GetValue is successful.  \n                //If parameter is lesson_status/completion_status or exit status, let's\n                //grab the value and cache it so we can check it during connection.terminate()\n                switch(parameter){\n\n                    case \"cmi.core.lesson_status\":\n                    case \"cmi.completion_status\" : scorm.data.completionStatus = value; break;\n\n                    case \"cmi.core.exit\":\n                    case \"cmi.exit\"     : scorm.data.exitStatus = value; break;\n\n                }\n\n            } else {\n\n                trace(traceMsgPrefix +\"failed. \\nError code: \" +errorCode +\"\\nError info: \" +debug.getInfo(errorCode));\n\n            }\n\n        } else {\n\n            trace(traceMsgPrefix +\"failed: API is null.\");\n\n        }\n\n    } else {\n\n        trace(traceMsgPrefix +\"failed: API connection is inactive.\");\n\n    }\n\n    trace(traceMsgPrefix +\" value: \" +value);\n\n    return String(value);\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.data.set()\n   Tells the LMS to assign the value to the named data model element.\n   Also stores the SCO's completion status in a variable named\n   pipwerks.SCORM.data.completionStatus. This variable is checked whenever\n   pipwerks.SCORM.connection.terminate() is invoked.\n\n   Parameters: parameter (string). The data model element\n               value (string). The value for the data model element\n   Returns:    Boolean\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.data.set = function(parameter, value){\n\n    var success = false,\n        scorm = pipwerks.SCORM,\n        trace = pipwerks.UTILS.trace,\n        makeBoolean = pipwerks.UTILS.StringToBoolean,\n        debug = scorm.debug,\n        traceMsgPrefix = \"SCORM.data.set(\" +parameter +\") \";\n\n\n    if(scorm.connection.isActive){\n\n        var API = scorm.API.getHandle(),\n            errorCode = 0;\n\n        if(API){\n\n            switch(scorm.version){\n                case \"1.2\" : success = makeBoolean(API.LMSSetValue(parameter, value)); break;\n                case \"2004\": success = makeBoolean(API.SetValue(parameter, value)); break;\n            }\n\n            if(success){\n\n                if(parameter === \"cmi.core.lesson_status\" || parameter === \"cmi.completion_status\"){\n\n                    scorm.data.completionStatus = value;\n\n                }\n\n            } else {\n\n                errorCode = debug.getCode();\n\n                trace(traceMsgPrefix +\"failed. \\nError code: \" +errorCode +\". \\nError info: \" +debug.getInfo(errorCode));\n\n            }\n\n        } else {\n\n            trace(traceMsgPrefix +\"failed: API is null.\");\n\n        }\n\n    } else {\n\n        trace(traceMsgPrefix +\"failed: API connection is inactive.\");\n\n    }\n\n    return success;\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.data.save()\n   Instructs the LMS to persist all data to this point in the session\n\n   Parameters: None\n   Returns:    Boolean\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.data.save = function(){\n\n    var success = false,\n        scorm = pipwerks.SCORM,\n        trace = pipwerks.UTILS.trace,\n        makeBoolean = pipwerks.UTILS.StringToBoolean,\n        traceMsgPrefix = \"SCORM.data.save failed\";\n\n\n    if(scorm.connection.isActive){\n\n        var API = scorm.API.getHandle();\n\n        if(API){\n\n            switch(scorm.version){\n                case \"1.2\" : success = makeBoolean(API.LMSCommit(\"\")); break;\n                case \"2004\": success = makeBoolean(API.Commit(\"\")); break;\n            }\n\n        } else {\n\n            trace(traceMsgPrefix +\": API is null.\");\n\n        }\n\n    } else {\n\n        trace(traceMsgPrefix +\": API connection is inactive.\");\n\n    }\n\n    return success;\n\n};\n\n\npipwerks.SCORM.status = function (action, status){\n\n    var success = false,\n        scorm = pipwerks.SCORM,\n        trace = pipwerks.UTILS.trace,\n        traceMsgPrefix = \"SCORM.getStatus failed\",\n        cmi = \"\";\n\n    if(action !== null){\n\n        switch(scorm.version){\n            case \"1.2\" : cmi = \"cmi.core.lesson_status\"; break;\n            case \"2004\": cmi = \"cmi.completion_status\"; break;\n        }\n\n        switch(action){\n\n            case \"get\": success = scorm.data.get(cmi); break;\n\n            case \"set\": if(status !== null){\n\n                            success = scorm.data.set(cmi, status);\n\n                        } else {\n\n                            success = false;\n                            trace(traceMsgPrefix +\": status was not specified.\");\n\n                        }\n\n                        break;\n\n            default      : success = false;\n                        trace(traceMsgPrefix +\": no valid action was specified.\");\n\n        }\n\n    } else {\n\n        trace(traceMsgPrefix +\": action was not specified.\");\n\n    }\n\n    return success;\n\n};\n\n\n// ------------------------------------------------------------------------- //\n// --- pipwerks.SCORM.debug functions -------------------------------------- //\n// ------------------------------------------------------------------------- //\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.debug.getCode\n   Requests the error code for the current error state from the LMS\n\n   Parameters: None\n   Returns:    Integer (the last error code).\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.debug.getCode = function(){\n\n    var scorm = pipwerks.SCORM,\n        API = scorm.API.getHandle(),\n        trace = pipwerks.UTILS.trace,\n        code = 0;\n\n    if(API){\n\n        switch(scorm.version){\n            case \"1.2\" : code = parseInt(API.LMSGetLastError(), 10); break;\n            case \"2004\": code = parseInt(API.GetLastError(), 10); break;\n        }\n\n    } else {\n\n        trace(\"SCORM.debug.getCode failed: API is null.\");\n\n    }\n\n    return code;\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.debug.getInfo()\n   \"Used by a SCO to request the textual description for the error code\n   specified by the value of [errorCode].\"\n\n   Parameters: errorCode (integer).\n   Returns:    String.\n----------------------------------------------------------------------------- */\n\npipwerks.SCORM.debug.getInfo = function(errorCode){\n\n    var scorm = pipwerks.SCORM,\n        API = scorm.API.getHandle(),\n        trace = pipwerks.UTILS.trace,\n        result = \"\";\n\n\n    if(API){\n\n        switch(scorm.version){\n            case \"1.2\" : result = API.LMSGetErrorString(errorCode.toString()); break;\n            case \"2004\": result = API.GetErrorString(errorCode.toString()); break;\n        }\n\n    } else {\n\n        trace(\"SCORM.debug.getInfo failed: API is null.\");\n\n    }\n\n    return String(result);\n\n};\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.SCORM.debug.getDiagnosticInfo\n   \"Exists for LMS specific use. It allows the LMS to define additional\n   diagnostic information through the API Instance.\"\n\n   Parameters: errorCode (integer).\n   Returns:    String (Additional diagnostic information about the given error code).\n---------------------------------------------------------------------------- */\n\npipwerks.SCORM.debug.getDiagnosticInfo = function(errorCode){\n\n    var scorm = pipwerks.SCORM,\n        API = scorm.API.getHandle(),\n        trace = pipwerks.UTILS.trace,\n        result = \"\";\n\n    if(API){\n\n        switch(scorm.version){\n            case \"1.2\" : result = API.LMSGetDiagnostic(errorCode); break;\n            case \"2004\": result = API.GetDiagnostic(errorCode); break;\n        }\n\n    } else {\n\n        trace(\"SCORM.debug.getDiagnosticInfo failed: API is null.\");\n\n    }\n\n    return String(result);\n\n};\n\n\n// ------------------------------------------------------------------------- //\n// --- Shortcuts! ---------------------------------------------------------- //\n// ------------------------------------------------------------------------- //\n\n// Because nobody likes typing verbose code.\n\npipwerks.SCORM.init = pipwerks.SCORM.connection.initialize;\npipwerks.SCORM.get  = pipwerks.SCORM.data.get;\npipwerks.SCORM.set  = pipwerks.SCORM.data.set;\npipwerks.SCORM.save = pipwerks.SCORM.data.save;\npipwerks.SCORM.quit = pipwerks.SCORM.connection.terminate;\n\n\n\n// ------------------------------------------------------------------------- //\n// --- pipwerks.UTILS functions -------------------------------------------- //\n// ------------------------------------------------------------------------- //\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.UTILS.StringToBoolean()\n   Converts 'boolean strings' into actual valid booleans.\n\n   (Most values returned from the API are the strings \"true\" and \"false\".)\n\n   Parameters: String\n   Returns:    Boolean\n---------------------------------------------------------------------------- */\n\npipwerks.UTILS.StringToBoolean = function(value){\n    var t = typeof value;\n    switch(t){\n       //typeof new String(\"true\") === \"object\", so handle objects as string via fall-through. \n       //See https://github.com/pipwerks/scorm-api-wrapper/issues/3\n       case \"object\":  \n       case \"string\": return (/(true|1)/i).test(value);\n       case \"number\": return !!value;\n       case \"boolean\": return value;\n       case \"undefined\": return null;\n       default: return false;\n    }\n};\n\n\n\n/* -------------------------------------------------------------------------\n   pipwerks.UTILS.trace()\n   Displays error messages when in debug mode.\n\n   Parameters: msg (string)\n   Return:     None\n---------------------------------------------------------------------------- */\n\npipwerks.UTILS.trace = function(msg){\n\n     if(pipwerks.debug.isActive){\n\n        if(window.console && window.console.log){\n            window.console.log(msg);\n        } else {\n            //alert(msg);\n        }\n\n     }\n};\n\ndefine(\"extensions/adapt-contrib-spoor/js/scorm/API\", function(){});\n\n",
    "define ('extensions/adapt-contrib-spoor/js/scorm/wrapper',['require'],function(require) {\n\n\t/*\n\t\tIMPORTANT: This wrapper uses the Pipwerks SCORM wrapper and should therefore support both SCORM 1.2 and 2004. Ensure any changes support both versions.\n\t*/\n\n\tvar ScormWrapper = function() {\n\t\t/* configuration */\n\t\tthis.setCompletedWhenFailed = true;// this only applies to SCORM 2004\n\t\t/**\n\t\t * whether to commit each time there's a change to lesson_status or not\n\t\t */\n\t\tthis.commitOnStatusChange = true;\n\t\t/**\n\t\t * how frequently (in minutes) to commit automatically. set to 0 to disable.\n\t\t */\n\t\tthis.timedCommitFrequency = 10;\n\t\t/**\n\t\t * how many times to retry if a commit fails\n\t\t */\n\t\tthis.maxCommitRetries = 5;\n\t\t/**\n\t\t * time (in milliseconds) to wait between retries\n\t\t */\n\t\tthis.commitRetryDelay = 1000;\n\t\t\n\t\t/**\n\t\t * prevents commit from being called if there's already a 'commit retry' pending.\n\t\t */\n\t\tthis.commitRetryPending = false;\n\t\t/**\n\t\t * how many times we've done a 'commit retry'\n\t\t */\n\t\tthis.commitRetries = 0;\n\t\t/**\n\t\t * not currently used - but you could include in an error message to show when data was last saved\n\t\t */\n\t\tthis.lastCommitSuccessTime = null;\n\t\t\n\t\tthis.timedCommitIntervalID = null;\n\t\tthis.retryCommitTimeoutID = null;\n\t\tthis.logOutputWin = null;\n\t\tthis.startTime = null;\n\t\tthis.endTime = null;\n\t\t\n\t\tthis.lmsConnected = false;\n\t\tthis.finishCalled = false;\n\t\t\n\t\tthis.logger = Logger.getInstance();\n\t\tthis.scorm = pipwerks.SCORM;\n\n        \tthis.suppressErrors = false;\n        \n\t\tif (window.__debug)\n\t\t\tthis.showDebugWindow();\n\t};\n\n\t// static\n\tScormWrapper.instance = null;\n\n\t/******************************* public methods *******************************/\n\n\t// static\n\tScormWrapper.getInstance = function() {\n\t\tif (ScormWrapper.instance === null)\n\t\t\tScormWrapper.instance = new ScormWrapper();\n\t\treturn ScormWrapper.instance;\n\t};\n\n\tScormWrapper.prototype.getVersion = function() {\n\t\treturn this.scorm.version;\n\t};\n\n\tScormWrapper.prototype.setVersion = function(value) {\n\t\tthis.scorm.version = value;\n\t\t/**\n\t\t * stop the pipwerks code from setting cmi.core.exit to suspend/logout when targeting SCORM 1.2.\n\t\t * there doesn't seem to be any tangible benefit to doing this in 1.2 and it can actually cause problems with some LMSes\n\t\t * (e.g. setting it to 'logout' apparently causes Plateau to log the user completely out of the LMS!)\n\t\t * It needs to be on for SCORM 2004 though, otherwise the LMS might not restore the suspend_data\n\t\t */\n\t\tthis.scorm.handleExitMode = this.isSCORM2004();\n\t};\n\n\tScormWrapper.prototype.initialize = function() {\n\t\tthis.lmsConnected = this.scorm.init();\n\n\t\tif (this.lmsConnected) {\n\t\t\tthis.startTime = new Date();\n\t\t\t\n\t\t\tthis.initTimedCommit();\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course could not connect to the LMS\");\n\t\t}\n\t\t\n\t\treturn this.lmsConnected;\n\t};\n\n\t/**\n\t* allows you to check if this is the user's first ever 'session' of a SCO, even after the lesson_status has been set to 'incomplete'\n\t*/\n\tScormWrapper.prototype.isFirstSession = function() {\n\t\treturn (this.getValue(this.isSCORM2004() ? \"cmi.entry\" :\"cmi.core.entry\") === \"ab-initio\");\n\t};\n\n\tScormWrapper.prototype.setIncomplete = function() {\n\t\tthis.setValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\", \"incomplete\");\n\n\t\tif(this.commitOnStatusChange) this.commit();\n\t};\n\n\tScormWrapper.prototype.setCompleted = function() {\n\t\tthis.setValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\", \"completed\");\n\t\t\n\t\tif(this.commitOnStatusChange) this.commit();\n\t};\n\n\tScormWrapper.prototype.setPassed = function() {\n\t\tif (this.isSCORM2004()) {\n\t\t\tthis.setValue(\"cmi.completion_status\", \"completed\");\n\t\t\tthis.setValue(\"cmi.success_status\", \"passed\");\n\t\t}\n\t\telse {\n\t\t\tthis.setValue(\"cmi.core.lesson_status\", \"passed\");\n\t\t}\n\n\t\tif(this.commitOnStatusChange) this.commit();\n\t};\n\n\tScormWrapper.prototype.setFailed = function() {\n\t\tif (this.isSCORM2004()) {\n\t\t\tthis.setValue(\"cmi.success_status\", \"failed\");\n\t\t\t\n\t\t\tif(this.setCompletedWhenFailed)\n\t\t\t\tthis.setValue(\"cmi.completion_status\", \"completed\");\n\t\t}\n\t\telse {\n\t\t\tthis.setValue(\"cmi.core.lesson_status\", \"failed\");\n\t\t}\n\n\t\t\tif(this.commitOnStatusChange) this.commit();\n\t};\n\n\tScormWrapper.prototype.getStatus = function() {\n\t\tvar status = this.getValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\");\n\n\t\tswitch(status.toLowerCase()) {// workaround for some LMSes (e.g. Arena) not adhering to the all-lowercase rule\n\t\t\tcase \"passed\":\n\t\t\tcase \"completed\":\n\t\t\tcase \"incomplete\":\n\t\t\tcase \"failed\":\n\t\t\tcase \"browsed\":\n\t\t\tcase \"not attempted\":\n\t\t\tcase \"not_attempted\":// mentioned in SCORM 2004 docs but not sure it ever gets used\n\t\t\tcase \"unknown\": //the SCORM 2004 version if not attempted\n\t\t\t\treturn status;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.handleError(\"ScormWrapper::getStatus: invalid lesson status '\" + status + \"' received from LMS\");\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\tScormWrapper.prototype.setStatus = function(status) {\n\t\tswitch (status.toLowerCase()){\n        case \"incomplete\":\n          this.setIncomplete();\n          break;\n        case \"completed\":\n          this.setCompleted();\n          break;\n        case \"passed\":\n          this.setPassed();\n          break;\n        case \"failed\":\n          this.setFailed();\n          break;\n        default:\n          this.handleError(\"ScormWrapper::setStatus: the status '\" + status + \"' is not supported.\");\n          break;\n      }\n\t}\n\n\tScormWrapper.prototype.getScore = function() {\n\t\treturn this.getValue(this.isSCORM2004() ? \"cmi.score.raw\" : \"cmi.core.score.raw\");\n\t};\n\n\tScormWrapper.prototype.setScore = function(_score, _minScore, _maxScore) {\n\t\tif (this.isSCORM2004()) {\n\t\t\tthis.setValue(\"cmi.score.raw\", _score) && this.setValue(\"cmi.score.min\", _minScore) && this.setValue(\"cmi.score.max\", _maxScore) && this.setValue(\"cmi.score.scaled\", _score / 100);\n\t\t}\n\t\telse {\n\t\t\tthis.setValue(\"cmi.core.score.raw\", _score);\n\n\t\t\tif(this.isSupported(\"cmi.core.score.min\")) this.setValue(\"cmi.core.score.min\", _minScore);\n\n\t\t\tif(this.isSupported(\"cmi.core.score.max\")) this.setValue(\"cmi.core.score.max\", _maxScore);\n\t\t}\n\t};\n\n\tScormWrapper.prototype.getLessonLocation = function() {\n\t\treturn this.getValue(this.isSCORM2004() ? \"cmi.location\" : \"cmi.core.lesson_location\");\n\t};\n\n\tScormWrapper.prototype.setLessonLocation = function(_location) {\n\t\tthis.setValue(this.isSCORM2004() ? \"cmi.location\" : \"cmi.core.lesson_location\", _location);\n\t};\n\n\tScormWrapper.prototype.getSuspendData = function() {\n\t\treturn this.getValue(\"cmi.suspend_data\");\n\t};\n\n\tScormWrapper.prototype.setSuspendData = function(_data) {\n\t\tthis.setValue(\"cmi.suspend_data\", _data);\n\t};\n\n\tScormWrapper.prototype.getStudentName = function() {\n\t\treturn this.getValue(this.isSCORM2004() ? \"cmi.learner_name\" : \"cmi.core.student_name\");\n\t};\n\n\tScormWrapper.prototype.getStudentId = function(){\n\t\treturn this.getValue(this.isSCORM2004() ? \"cmi.learner_id\":\"cmi.core.student_id\");\n\t};\n\n\tScormWrapper.prototype.commit = function() {\n\t\tthis.logger.debug(\"ScormWrapper::commit\");\n\t\t\n\t\tif (this.lmsConnected) {\n\t\t\tif (this.commitRetryPending) {\n\t\t\t\tthis.logger.debug(\"ScormWrapper::commit: skipping this commit call as one is already pending.\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (this.scorm.save()) {\n\t\t\t\t\tthis.commitRetries = 0;\n\t\t\t\t\tthis.lastCommitSuccessTime = new Date();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (this.commitRetries < this.maxCommitRetries && !this.finishCalled) {\n\t\t\t\t\t\tthis.commitRetries++;\n\t\t\t\t\t\tthis.initRetryCommit();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar _errorCode = this.scorm.debug.getCode();\n\n\t\t\t\t\t\tvar _errorMsg = \"Course could not commit data to the LMS\";\n\t\t\t\t\t\t_errorMsg += \"\\nError \" + _errorCode + \": \" + this.scorm.debug.getInfo(_errorCode);\n\t\t\t\t\t\t_errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\n\t\t\t\t\t\tthis.handleError(_errorMsg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course is not connected to the LMS\");\n\t\t}\n\t};\n\n\tScormWrapper.prototype.finish = function() {\n\t\tthis.logger.debug(\"ScormWrapper::finish\");\n\t\t\n\t\tif (this.lmsConnected && !this.finishCalled) {\n\t\t\tthis.finishCalled = true;\n\t\t\t\n\t\t\tif(this.timedCommitIntervalID != null) {\n\t\t\t\twindow.clearInterval(this.timedCommitIntervalID);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.commitRetryPending) {\n\t\t\t\twindow.clearTimeout(this.retryCommitTimeoutID);\n\t\t\t\tthis.commitRetryPending = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.logOutputWin && !this.logOutputWin.closed) {\n\t\t\t\tthis.logOutputWin.close();\n\t\t\t}\n\t\t\t\n\t\t\tthis.endTime = new Date();\n\t\t\t\n\t\t\tif (this.isSCORM2004()) {\n\t\t\t\tthis.scorm.set(\"cmi.session_time\", this.convertMilliSecondsToSCORM2004Time(this.endTime.getTime() - this.startTime.getTime()));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.scorm.set(\"cmi.core.session_time\", this.convertMilliSecondsToSCORMTime(this.endTime.getTime() - this.startTime.getTime()));\n\t\t\t\tthis.scorm.set(\"cmi.core.exit\", \"\");\n\t\t\t}\n\t\t\t\n\t\t\t// api no longer available from this point\n\t\t\tthis.lmsConnected = false;\n\t\t\t\n\t\t\tif (!this.scorm.quit()) {\n\t\t\t\tthis.handleError(\"Course could not finish\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course is not connected to the LMS\");\n\t\t}\n\t};\n\n\tScormWrapper.prototype.recordInteraction = function(strID, strResponse, strCorrect, strLatency, scormInteractionType) {\n\t\tif(this.isSupported(\"cmi.interactions._count\")) {\n\t\t\tswitch(scormInteractionType) {\n\t\t\t\tcase \"choice\":\n\t\t\t\t\tvar responseIdentifiers = [];\n\t\t\t\t\tvar answers = strResponse.split(\"#\");\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0, count = answers.length; i < count; i++) {\n\t\t\t\t\t\tresponseIdentifiers.push(new ResponseIdentifier(answers[i], answers[i]));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.recordMultipleChoiceInteraction(strID, responseIdentifiers, strCorrect, null, null, null, strLatency, null);\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"matching\":\n\t\t\t\t\tvar matchingResponses = [];\n\t\t\t\t\tvar sourceTargetPairs = strResponse.split(\"#\");\n\t\t\t\t\tvar sourceTarget = null;\n\t\t\t\t\t\n\t\t\t\t\tfor (var i = 0, count = sourceTargetPairs.length; i < count; i++) {\n\t\t\t\t\t\tsourceTarget = sourceTargetPairs[i].split(\".\");\n\t\t\t\t\t\tmatchingResponses.push(new MatchingResponse(sourceTarget[0], sourceTarget[1]));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.recordMatchingInteraction(strID, matchingResponses, strCorrect, null, null, null, strLatency, null);\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"numeric\":\n\t\t\t\t\tthis.recordNumericInteraction(strID, strResponse, strCorrect, null, null, null, strLatency, null);\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"fill-in\":\n\t\t\t\t\tthis.recordFillInInteraction(strID, strResponse, strCorrect, null, null, null, strLatency, null);\n\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(\"ScormWrapper.recordInteraction: unknown interaction type of '\" + scormInteractionType + \"' encountered...\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.logger.info(\"ScormWrapper::recordInteraction: cmi.interactions are not supported by this LMS...\");\n\t\t}\n\t}\n\n\t/****************************** private methods ******************************/\n\tScormWrapper.prototype.getValue = function(_property) {\n\t\tthis.logger.debug(\"ScormWrapper::getValue: _property=\" + _property);\n\n\t\tif(this.finishCalled) {\n\t\t\tthis.logger.debug(\"ScormWrapper::getValue: ignoring request as 'finish' has been called\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this.lmsConnected) {\n\t\t\tvar _value = this.scorm.get(_property);\n\t\t\tvar _errorCode = this.scorm.debug.getCode();\n\t\t\tvar _errorMsg = \"\";\n\t\t\t\n\t\t\tif (_errorCode !== 0) {\n\t\t\t\tif (_errorCode === 403) {\n\t\t\t\t\tthis.logger.warn(\"ScormWrapper::getValue: data model element not initialized\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t_errorMsg += \"Course could not get \" + _property;\n\t\t\t\t\t_errorMsg += \"\\nError Info: \" + this.scorm.debug.getInfo(_errorCode);\n\t\t\t\t\t_errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\t\t\t\t\t\n\t\t\t\t\tthis.handleError(_errorMsg);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.logger.debug(\"ScormWrapper::getValue: returning \" + _value);\n\t\t\treturn _value + \"\";\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course is not connected to the LMS\");\n\t\t}\n\t};\n\n\tScormWrapper.prototype.setValue = function(_property, _value) {\n\t\tthis.logger.debug(\"ScormWrapper::setValue: _property=\" + _property + \" _value=\" + _value);\n\n\t\tif(this.finishCalled)\t{\n\t\t\tthis.logger.debug(\"ScormWrapper::setValue: ignoring request as 'finish' has been called\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this.lmsConnected) {\n\t\t\tvar _success = this.scorm.set(_property, _value);\n\t\t\tvar _errorCode = this.scorm.debug.getCode();\n\t\t\tvar _errorMsg = \"\";\n\t\t\t\n\t\t\tif (!_success) {\n\t\t\t/*\n\t\t\t* Some LMSes have an annoying tendency to return false from a set call even when it actually worked fine.\n\t\t\t* So, we should throw an error _only_ if there was a valid error code...\n\t\t\t*/\n\t\t\t\tif(_errorCode !== 0) {\n\t\t\t\t\t_errorMsg += \"Course could not set \" + _property + \" to \" + _value;\n\t\t\t\t\t_errorMsg += \"\\nError Info: \" + this.scorm.debug.getInfo(_errorCode);\n\t\t\t\t\t_errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\t\t\t\t\t\n\t\t\t\t\tthis.handleError(_errorMsg);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.logger.warn(\"ScormWrapper::setValue: LMS reported that the 'set' call failed but then said there was no error!\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn _success;\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course is not connected to the LMS\");\n\t\t}\n\t};\n\n\t/**\n\t* used for checking any data field that is not 'LMS Mandatory' to see whether the LMS we're running on supports it or not.\n\t* Note that the way this check is being performed means it wouldn't work for any element that is\n\t* 'write only', but so far we've not had a requirement to check for any optional elements that are.\n\t*/\n\tScormWrapper.prototype.isSupported = function(_property) {\n\t\tthis.logger.debug(\"ScormWrapper::isSupported: _property=\" + _property);\n\n\t\tif(this.finishCalled) {\n\t\t\tthis.logger.debug(\"ScormWrapper::isSupported: ignoring request as 'finish' has been called\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this.lmsConnected) {\n\t\t\tvar _value = this.scorm.get(_property);\n\t\t\tvar _errorCode = this.scorm.debug.getCode();\n\t\t\t\n\t\t\treturn (_errorCode === 401 ? false : true);\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"Course is not connected to the LMS\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tScormWrapper.prototype.initTimedCommit = function() {\n\t\tthis.logger.debug(\"ScormWrapper::initTimedCommit\");\n\t\t\n\t\tif(this.timedCommitFrequency > 0) {\n\t\t\tvar delay = this.timedCommitFrequency * (60 * 1000);\n\t\t\tthis.timedCommitIntervalID = window.setInterval(_.bind(this.commit, this), delay);\n\t\t}\n\t};\n\n\tScormWrapper.prototype.initRetryCommit = function() {\n\t\tthis.logger.debug(\"ScormWrapper::initRetryCommit \" + this.commitRetries + \" out of \" + this.maxCommitRetries);\n\t\t\n\t\tthis.commitRetryPending = true;// stop anything else from calling commit until this is done\n\t\t\n\t\tthis.retryCommitTimeoutID = window.setTimeout(_.bind(this.doRetryCommit, this), this.commitRetryDelay);\n\t};\n\n\tScormWrapper.prototype.doRetryCommit = function() {\n\t\tthis.logger.debug(\"ScormWrapper::doRetryCommit\");\n\n\t\tthis.commitRetryPending = false;\n\n\t\tthis.commit();\n\t};\n\n\tScormWrapper.prototype.handleError = function(_msg) {\n\t\tthis.logger.error(_msg);\n\t\t\n\t\tif (!this.suppressErrors && (!this.logOutputWin || this.logOutputWin.closed) && confirm(\"An error has occured:\\n\\n\" + _msg + \"\\n\\nPress 'OK' to view debug information to send to technical support.\"))\n\t\t\tthis.showDebugWindow();\n\t};\n\n\tScormWrapper.prototype.createValidIdentifier = function(str)\n\t{\n\t\tstr = this.trim(new String(str));\n\n\t\tif (_.indexOf(str.toLowerCase(), \"urn:\") === 0) {\n\t\t\tstr = str.substr(4);\n\t\t}\n\t\t\n\t\t// URNs may only contain the following characters: letters, numbers - ( ) + . : = @ ; $ _ ! * ' %\n\t\t// if anything else is found, replace it with _\n\t\tstr = str.replace(/[^\\w\\-\\(\\)\\+\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\%]/g, \"_\");\n\n\t\treturn str;\n\t};\n\n\tScormWrapper.prototype.createResponseIdentifier = function(strShort, strLong) {\n\t\t\n\t\tif (strShort.length != 1 || strShort.search(/\\w/) < 0) {\n\t\t\tstrShort = \"\";\n\t\t}\n\t\telse {\n\t\t\tstrShort = strShort.toLowerCase();\n\t\t}\n\t\t\n\t\tstrLong = this.createValidIdentifier(strLong);\n\t\t\n\t\treturn new ResponseIdentifier(strShort, strLong);\n\t};\n\n\tScormWrapper.prototype.recordInteraction12 = function(strID, strResponse, bCorrect, strCorrectResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, scormInteractionType, strAlternateResponse, strAlternateCorrectResponse) {\n\t\tvar bResult;\n\t\tvar bTempResult;\n\t\tvar interactionIndex;\n\t\tvar strResult;\n\t\t\n\t\t// in SCORM 1.2, add a new interaction rather than updating an old one, because some LMS vendors have misinterpreted the \"write only\" rule regarding interactions to mean \"write once\"\n\t\tinteractionIndex = this.getValue(\"cmi.interactions._count\");\n\t\t\n\t\tif (interactionIndex === \"\") {\n\t\t\tinteractionIndex = 0;\n\t\t}\n\t\t\n\t\tif (bCorrect === true || bCorrect === \"true\" || bCorrect === \"correct\") {\n\t\t\tstrResult = \"correct\";\n\t\t}\n\t\telse if (bCorrect === false || bCorrect === \"false\" || bCorrect === \"wrong\") {\n\t\t\tstrResult = \"wrong\";\n\t\t}\n\t\telse if (bCorrect === \"unanticipated\") {\n\t\t\tstrResult = \"unanticipated\";\n\t\t}\n\t\telse if (bCorrect === \"neutral\") {\n\t\t\tstrResult = \"neutral\";\n\t\t}\n\n\t\tvar prefix = \"cmi.interactions.\" + interactionIndex;\n\t\t\n\t\tbResult = this.setValue(prefix + \".id\", strID);\n\t\tbResult = bResult && this.setValue(prefix + \".type\", scormInteractionType);\n\t\t\n\t\tbTempResult = this.setValue(prefix + \".student_response\", strResponse);\n\t\t\n\t\tif (bTempResult === false) {\n\t\t\tbTempResult = this.setValue(prefix + \".student_response\", strAlternateResponse);\n\t\t}\n\t\t\n\t\tbResult = bResult && bTempResult;\n\t\t\n\t\tif (!_.isEmpty(strCorrectResponse)) {\n\t\t\tbTempResult = this.setValue(prefix + \".correct_responses.0.pattern\", strCorrectResponse);\n\t\t\tif (bTempResult === false) {\n\t\t\t\tbTempResult = this.setValue(prefix + \".correct_responses.0.pattern\", strAlternateCorrectResponse);\n\t\t\t}\n\t\t\t\n\t\t\tbResult = bResult && bTempResult;\n\t\t}\n\n\t\tif (!_.isEmpty(strResult)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".result\", strResult);\n\t\t}\n\t\t\n\t\t// ignore the description parameter in SCORM 1.2, there is nothing we can do with it\n\t\t\n\t\tif (!_.isEmpty(intWeighting)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".weighting\", intWeighting);\n\t\t}\n\n\t\tif (!_.isEmpty(intLatency)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".latency\", this.convertMilliSecondsToSCORMTime(intLatency));\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(strLearningObjectiveID)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".objectives.0.id\", strLearningObjectiveID);\n\t\t}\n\t\t\n\t\tbResult = bResult && this.setValue(prefix + \".time\", this.convertDateToCMITime(dtmTime));\n\t\t\n\t\treturn bResult;\n\t};\n\n\tScormWrapper.prototype.recordInteraction2004 = function(strID, strResponse, bCorrect, strCorrectResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, scormInteractionType) {\t\n\t\tvar bResult;\n\t\tvar interactionIndex;\n\t\tvar strResult;\n\t\t\n\t\tbCorrect = new String(bCorrect);\n\t\t\n\t\tinteractionIndex = this.getValue(\"cmi.interactions._count\");\n\t\t\n\t\tif (interactionIndex === \"\") {\n\t\t\tinteractionIndex = 0;\n\t\t}\n\t\t\n\t\tif (bCorrect === true || bCorrect === \"true\" || bCorrect === \"correct\") {\n\t\t\tstrResult = \"correct\";\n\t\t}\n\t\telse if (bCorrect === false || bCorrect == \"false\" || bCorrect === \"wrong\") {\n\t\t\tstrResult = \"incorrect\";\n\t\t}\n\t\telse if (bCorrect === \"unanticipated\") {\n\t\t\tstrResult = \"unanticipated\";\n\t\t}\n\t\telse if (bCorrect === \"neutral\") {\n\t\t\tstrResult = \"neutral\";\n\t\t}\n\t\telse {\n\t\t\tstrResult = \"\";\n\t\t}\n\t\t\n\t\tstrID = this.createValidIdentifier(strID);\n\n\t\tvar prefix = \"cmi.interactions.\" + interactionIndex;\n\t\t\n\t\tbResult = this.setValue(prefix + \".id\", strID);\n\t\tbResult = bResult && this.setValue(prefix + \".type\", scormInteractionType);\n\t\tbResult = bResult && this.setValue(prefix + \".learner_response\", strResponse);\n\t\t\n\t\tif (!_.isEmpty(strResult)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".result\", strResult);\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(strCorrectResponse)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".correct_responses.0.pattern\", strCorrectResponse);\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(strDescription)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".description\", strDescription);\n\t\t}\n\t\t\n\t\t// ignore the description parameter in SCORM 1.2, there is nothing we can do with it\n\t\t\n\t\tif (!_.isEmpty(intWeighting)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".weighting\", intWeighting);\n\t\t}\n\n\t\tif (!_.isEmpty(intLatency)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".latency\", this.convertMilliSecondsToSCORM2004Time(intLatency));\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(strLearningObjectiveID)) {\n\t\t\tbResult = bResult && this.setValue(prefix + \".objectives.0.id\", strLearningObjectiveID);\n\t\t}\n\t\t\n\t\tbResult = bResult && this.setValue(prefix + \".timestamp\", this.convertDateToISO8601Timestamp(dtmTime));\n\t\t\n\t\treturn bResult;\n\t};\n\n\tScormWrapper.prototype.recordMultipleChoiceInteraction = function(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID) {\n\t\tvar _responseArray = null;\n\t\tvar _correctResponseArray = null;\n\t\t\n\t\tif (response.constructor == String) {\n\t\t\t_responseArray = [this.createResponseIdentifier(response, response)];\n\t\t}\n\t\telse if (response.constructor == ResponseIdentifier) {\n\t\t\t_responseArray = [response];\n\t\t}\n\t\telse if (response.constructor == Array || response.constructor.toString().search(\"Array\") > 0) {\n\t\t\t_responseArray = response;\n\t\t}\n\t\telse if (window.console && response.constructor.toString() == \"(Internal Function)\" && response.length > 0) {\n\t\t\t_responseArray = response;\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"ScormWrapper::recordMultipleChoiceInteraction: response is not in the correct format\");\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(correctResponse)) {\n\t\t\tif (correctResponse.constructor == String) {\n\t\t\t\t_correctResponseArray = [this.createResponseIdentifier(correctResponse, correctResponse)];\n\t\t\t}\n\t\t\telse if (correctResponse.constructor == ResponseIdentifier) {\n\t\t\t\t_correctResponseArray = [correctResponse];\n\t\t\t}\n\t\t\telse if (correctResponse.constructor == Array || correctResponse.constructor.toString().search(\"Array\") > 0) {\n\t\t\t\t_correctResponseArray = correctResponse;\n\t\t\t}\n\t\t\telse if (window.console && correctResponse.constructor.toString() == \"(Internal Function)\" && correctResponse.length > 0) {\n\t\t\t\t_correctResponseArray = correctResponse;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.handleError(\"ScormWrapper::recordMultipleChoiceInteraction: correct response is not in the correct format\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t_correctResponseArray = [];\n\t\t}\n\t\t\n\t\tvar dtmTime = new Date();\n\t\t\n\t\tvar strResponse = \"\";\n\t\tvar strResponseLong = \"\";\n\t\t\n\t\tvar strCorrectResponse = \"\";\n\t\tvar strCorrectResponseLong = \"\";\n\t\t\n\t\tfor (var i = 0; i < _responseArray.length; i++)\t{\n\t\t\tif (strResponse.length > 0) {strResponse += this.isSCORM2004() ? \"[,]\" : \",\";}\n\t\t\tif (strResponseLong.length > 0) {strResponseLong += \",\";}\n\t\t\t\n\t\t\tstrResponse += this.isSCORM2004() ? _responseArray[i].Long : _responseArray[i].Short;\n\t\t\tstrResponseLong += _responseArray[i].Long;\n\t\t}\n\n\t\tfor (var i = 0; i < _correctResponseArray.length; i++)\t{\n\t\t\tif (strCorrectResponse.length > 0) {strCorrectResponse += this.isSCORM2004() ? \"[,]\" : \",\";}\n\t\t\tif (strCorrectResponseLong.length > 0) {strCorrectResponseLong += \",\";}\n\t\t\t\n\t\t\tstrCorrectResponse += this.isSCORM2004() ? _correctResponseArray[i].Long : _correctResponseArray[i].Short;\n\t\t\tstrCorrectResponseLong += _correctResponseArray[i].Long;\n\t\t}\n\t\t\n\t\tif (this.isSCORM2004())\n\t\t\treturn this.recordInteraction2004(strID, strResponse, blnCorrect, strCorrectResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"choice\");\n\t\t\n\t\treturn this.recordInteraction12(strID, strResponseLong, blnCorrect, strCorrectResponseLong, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"choice\",  strResponse, strCorrectResponse);\n\t};\n\n\tScormWrapper.prototype.recordMatchingInteraction = function(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID) {\n\t\tvar _responseArray = null;\n\t\tvar _correctResponseArray = null;\n\t\t\n\t\tif (response.constructor == MatchingResponse) {\n\t\t\t_responseArray = [response];\n\t\t}\n\t\telse if (response.constructor == Array || response.constructor.toString().search(\"Array\") > 0) {\n\t\t\t_responseArray = response;\n\t\t}\n\t\telse if (window.console && response.constructor.toString() == \"(Internal Function)\" && response.length > 0) {\n\t\t\t_responseArray = response;\n\t\t}\n\t\telse {\n\t\t\tthis.handleError(\"ScormWrapper::recordMatchingInteraction: response is not in the correct format\");\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif (!_.isEmpty(correctResponse)) {\n\t\t\tif (correctResponse.constructor == MatchingResponse) {\n\t\t\t\t_correctResponseArray = [correctResponse];\n\t\t\t}\n\t\t\telse if (correctResponse.constructor == Array || correctResponse.constructor.toString().search(\"Array\") > 0) {\n\t\t\t\t_correctResponseArray = correctResponse;\n\t\t\t}\n\t\t\telse if (window.console && correctResponse.constructor.toString() == \"(Internal Function)\" && correctResponse.length > 0)\t{\n\t\t\t\t_correctResponseArray = correctResponse;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.handleError(\"ScormWrapper::recordMatchingInteraction: correct response is not in the correct format\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t_correctResponseArray = [];\n\t\t}\n\t\t\n\t\tvar dtmTime = new Date();\n\t\t\n\t\tvar strResponse = \"\";\n\t\tvar strResponseLong = \"\";\n\t\t\n\t\tvar strCorrectResponse = \"\";\n\t\tvar strCorrectResponseLong = \"\";\n\t\t\n\t\tfor (var i = 0; i < _responseArray.length; i++) {\n\t\t\tif (strResponse.length > 0) {strResponse += \",\";}\n\t\t\tif (strResponseLong.length > 0) {strResponseLong += this.isSCORM2004() ? \"[,]\" : \",\";}\n\t\t\t\n\t\t\tstrResponse += _responseArray[i].Source.Short + \".\" + _responseArray[i].Target.Short;\n\t\t\tstrResponseLong += _responseArray[i].Source.Long + (this.isSCORM2004() ? \"[.]\" : \".\") + _responseArray[i].Target.Long;\n\t\t}\n\n\t\tfor (var i = 0; i < _correctResponseArray.length; i++) {\n\t\t\tif (strCorrectResponse.length > 0) {strCorrectResponse += \",\";}\n\t\t\tif (strCorrectResponseLong.length > 0) {strCorrectResponseLong += this.isSCORM2004() ? \"[,]\" : \",\";}\n\t\t\t\n\t\t\tstrCorrectResponse += _correctResponseArray[i].Source.Short + \".\" + _correctResponseArray[i].Target.Short;\n\t\t\tstrCorrectResponseLong += _correctResponseArray[i].Source.Long + (this.isSCORM2004() ? \"[.]\" : \".\") + _correctResponseArray[i].Target.Long;\n\t\t}\n\t\t\n\t\tif (this.isSCORM2004())\n\t\t\treturn this.recordInteraction2004(strID, strResponseLong, blnCorrect, strCorrectResponseLong, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"matching\");\n\t\t\n\t\treturn this.recordInteraction12(strID, strResponseLong, blnCorrect, strCorrectResponseLong, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"matching\", strResponse, strCorrectResponse);\n\t};\n\n\tScormWrapper.prototype.recordNumericInteraction = function(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID) {\n\t\tvar dtmTime = new Date();\n\n\t\tif (this.isSCORM2004())\n\t\t\treturn this.recordInteraction2004(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"numeric\");\n\t\t\n\t\treturn this.recordInteraction12(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"numeric\", response, correctResponse);\n\t};\n\n\tScormWrapper.prototype.recordFillInInteraction = function(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID) {\n\t\tvar dtmTime = new Date();\n\n\t\tvar max_len = this.isSCORM2004() ? 250 : 255;\n\n\t\tif(response.length > max_len) {\n\t\t\tresponse = response.substr(0,max_len);\n\n\t\t\tthis.logger.warn(\"ScormWrapper::recordFillInInteraction: response data for \" + strID + \" is longer than the maximum allowed length of \" + max_len + \" characters; data will be truncated to avoid an error.\");\n\t\t}\n\n\t\tif (this.isSCORM2004())\n\t\t\treturn this.recordInteraction2004(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"fill-in\");\n\t\t\n\t\treturn this.recordInteraction12(strID, response, blnCorrect, correctResponse, strDescription, intWeighting, intLatency, strLearningObjectiveID, dtmTime, \"fill-in\", response, correctResponse);\n\t};\n\n\tScormWrapper.prototype.showDebugWindow = function() {\n\t\t\n\t\tif (this.logOutputWin && !this.logOutputWin.closed) {\n\t\t\tthis.logOutputWin.close();\n\t\t}\n\t\t\n\t\tthis.logOutputWin = window.open(\"log_output.html\", \"Log\", \"width=600,height=300,status=no,scrollbars=yes,resize=yes,menubar=yes,toolbar=yes,location=yes,top=0,left=0\");\n\t\t\n\t\tif (this.logOutputWin)\n\t\t\tthis.logOutputWin.focus();\n\t\t\n\t\treturn;\n\t};\n\n\tScormWrapper.prototype.convertMilliSecondsToSCORMTime = function(value) {\n\t\tvar h;\n\t\tvar m;\n\t\tvar s;\n\t\tvar ms;\n\t\tvar cs;\n\t\tvar CMITimeSpan;\n\t\t\n\t\tms = value % 1000;\n\n\t\ts = ((value - ms) / 1000) % 60;\n\n\t\tm = ((value - ms - (s * 1000)) / 60000) % 60;\n\n\t\th = (value - ms - (s * 1000) - (m * 60000)) / 3600000;\n\t\t\n\t\tif (h === 10000)\t{\n\t\t\th = 9999;\n\t\t\t\n\t\t\tm = (value - (h * 3600000)) / 60000;\n\t\t\tif (m === 100)\t{\n\t\t\t\tm = 99;\n\t\t\t}\n\t\t\tm = Math.floor(m);\n\t\t\t\n\t\t\ts = (value - (h * 3600000) - (m * 60000)) / 1000;\n\t\t\tif (s === 100)\t{\n\t\t\t\ts = 99;\n\t\t\t}\n\t\t\ts = Math.floor(s);\n\t\t\t\n\t\t\tms = (value - (h * 3600000) - (m * 60000) - (s * 1000));\n\t\t}\n\n\t\tcs = Math.floor(ms / 10);\n\n\t\tCMITimeSpan = this.zeroPad(h, 4) + \":\" + this.zeroPad(m, 2) + \":\" +\tthis.zeroPad(s, 2);\n\t\tCMITimeSpan += \".\" + cs;\n\t\t\n\t\tif (h > 9999) {\n\t\t\tCMITimeSpan = \"9999:99:99\";\n\t\t\t\n\t\t\tCMITimeSpan += \".99\";\n\t\t}\n\t\t\n\t\treturn CMITimeSpan;\n\t};\n\n\tScormWrapper.prototype.convertDateToCMITime = function(_value) {\n\t\tvar h;\n\t\tvar m;\n\t\tvar s;\n\t\t\n\t\tvar dtmDate = new Date(_value);\n\t\t\n\t\th = dtmDate.getHours();\n\t\tm = dtmDate.getMinutes();\n\t\ts = dtmDate.getSeconds();\n\t\t\n\t\treturn this.zeroPad(h, 2) + \":\" + this.zeroPad(m, 2) + \":\" + this.zeroPad(s, 2);\n\t};\n\n\tScormWrapper.prototype.convertMilliSecondsToSCORM2004Time = function(_value) {\n\t\tvar str = \"\";\n\t\tvar cs;\n\t\tvar s;\n\t\tvar m;\n\t\tvar h;\n\t\tvar d;\n\t\tvar mo; // assumed to be an \"average\" month (a leap year every 4 years) = ((365*4) + 1) / 48 = 30.4375 days per month\n\t\tvar y;\n\t\t\n\t\tvar HUNDREDTHS_PER_SECOND = 100;\n\t\tvar HUNDREDTHS_PER_MINUTE = HUNDREDTHS_PER_SECOND * 60;\n\t\tvar HUNDREDTHS_PER_HOUR   = HUNDREDTHS_PER_MINUTE * 60;\n\t\tvar HUNDREDTHS_PER_DAY    = HUNDREDTHS_PER_HOUR * 24;\n\t\tvar HUNDREDTHS_PER_MONTH  = HUNDREDTHS_PER_DAY * (((365 * 4) + 1) / 48);\n\t\tvar HUNDREDTHS_PER_YEAR   = HUNDREDTHS_PER_MONTH * 12;\n\t\t\n\t\tcs = Math.floor(_value / 10);\n\t\t\n\t\ty = Math.floor(cs / HUNDREDTHS_PER_YEAR);\n\t\tcs -= (y * HUNDREDTHS_PER_YEAR);\n\t\t\n\t\tmo = Math.floor(cs / HUNDREDTHS_PER_MONTH);\n\t\tcs -= (mo * HUNDREDTHS_PER_MONTH);\n\t\t\n\t\td = Math.floor(cs / HUNDREDTHS_PER_DAY);\n\t\tcs -= (d * HUNDREDTHS_PER_DAY);\n\t\t\n\t\th = Math.floor(cs / HUNDREDTHS_PER_HOUR);\n\t\tcs -= (h * HUNDREDTHS_PER_HOUR);\n\t\t\n\t\tm = Math.floor(cs / HUNDREDTHS_PER_MINUTE);\n\t\tcs -= (m * HUNDREDTHS_PER_MINUTE);\n\t\t\n\t\ts = Math.floor(cs / HUNDREDTHS_PER_SECOND);\n\t\tcs -= (s * HUNDREDTHS_PER_SECOND);\n\t\t\n\t\tif (y > 0)\n\t\t\tstr += y + \"Y\";\n\t\tif (mo > 0)\n\t\t\tstr += mo + \"M\";\n\t\tif (d > 0)\n\t\t\tstr += d + \"D\";\n\t\t\n\t\t// check to see if we have any time before adding the \"T\"\n\t\tif ((cs + s + m + h) > 0 ) {\n\t\t\t\n\t\t\tstr += \"T\";\n\t\t\t\n\t\t\tif (h > 0)\n\t\t\t\tstr += h + \"H\";\n\t\t\t\n\t\t\tif (m > 0)\n\t\t\t\tstr += m + \"M\";\n\t\t\t\n\t\t\tif ((cs + s) > 0) {\n\t\t\t\tstr += s;\n\t\t\t\t\n\t\t\t\tif (cs > 0)\n\t\t\t\t\tstr += \".\" + cs;\n\t\t\t\t\n\t\t\t\tstr += \"S\";\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (str === \"\")\n\t\t\tstr = \"0S\";\n\t\t\n\t\tstr = \"P\" + str;\n\t\t\n\t\treturn str;\n\t};\n\n\tScormWrapper.prototype.convertDateToISO8601Timestamp = function(_value) {\n\t\tvar str;\n\t\t\n\t\tvar dtm = new Date(_value);\n\t\t\n\t\tvar y = dtm.getFullYear();\n\t\tvar mo = dtm.getMonth() + 1;\n\t\tvar d = dtm.getDate();\n\t\tvar h = dtm.getHours();\n\t\tvar m = dtm.getMinutes();\n\t\tvar s = dtm.getSeconds();\n\t\t\n\t\tmo = this.zeroPad(mo, 2);\n\t\td = this.zeroPad(d, 2);\n\t\th = this.zeroPad(h, 2);\n\t\tm = this.zeroPad(m, 2);\n\t\ts = this.zeroPad(s, 2);\n\t\t\n\t\tstr = y + \"-\" + mo + \"-\" + d + \"T\" + h + \":\" + m + \":\" + s;\n\t\t\n\t\treturn str;\n\t};\n\n\tScormWrapper.prototype.zeroPad = function(intNum, intNumDigits) {\n\t\tvar strTemp;\n\t\tvar intLen;\n\t\tvar i;\n\t\t\n\t\tstrTemp = new String(intNum);\n\t\tintLen = strTemp.length;\n\t\t\n\t\tif (intLen > intNumDigits) {\n\t\t\tstrTemp = strTemp.substr(0, intNumDigits);\n\t\t}\n\t\telse {\n\t\t\tfor (i = intLen; i < intNumDigits; i++)\n\t\t\t\tstrTemp = \"0\" + strTemp;\n\t\t}\n\t\t\n\t\treturn strTemp;\n\t};\n\n\tScormWrapper.prototype.trim = function(str) {\n\t\treturn str.replace(/^\\s*|\\s*$/g, \"\");\n\t};\n\n\tScormWrapper.prototype.isSCORM2004 = function() {\n\t\treturn this.scorm.version === \"2004\";\n\t};\n\n\tvar MatchingResponse = function(source, target){\n\t\tif (source.constructor == String){\n\t\t\tsource = ScormWrapper.getInstance().createResponseIdentifier(source, source);\n\t\t}\n\n\t\tif (target.constructor == String){\n\t\t\ttarget = ScormWrapper.getInstance().createResponseIdentifier(target, target);\n\t\t}\n\t\t\n\t\tthis.Source = source;\n\t\tthis.Target = target;\n\t};\n\n\tMatchingResponse.prototype.toString = function(){\n\t\treturn \"[Matching Response \" + this.Source + \", \" + this.Target + \"]\";\n\t};\n\n\tvar ResponseIdentifier = function(strShort, strLong) {\n\t\tthis.Short = new String(strShort);\n\t\tthis.Long = new String(strLong);\n\t};\n\n\tResponseIdentifier.prototype.toString = function() {\n\t\treturn \"[Response Identifier \" + this.Short + \", \" + this.Long + \"]\";\n\t};\n\n\treturn ScormWrapper;\n});\n\n",
    "Logger = function() {\n\tthis.logArr = new Array();\n\tthis.registeredViews = new Array();\n};\n\n// static\nLogger.instance = null;\nLogger.LOG_TYPE_INFO = 0;\nLogger.LOG_TYPE_WARN = 1;\nLogger.LOG_TYPE_ERROR = 2;\nLogger.LOG_TYPE_DEBUG = 3;\n\nLogger.getInstance = function() {\n\tif (Logger.instance == null)\n\t\tLogger.instance = new Logger();\n\treturn Logger.instance;\n};\n\nLogger.prototype.getEntries = function() {\n\treturn this.logArr;\n};\n\nLogger.prototype.getLastEntry = function() {\n\treturn this.logArr[this.logArr.length - 1];\n};\n\nLogger.prototype.info = function(str) {\n\tthis.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_INFO};\n\tthis.updateViews();\n};\n\nLogger.prototype.warn = function(str) {\n\tthis.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_WARN};\n\tthis.updateViews();\n};\n\nLogger.prototype.error = function(str) {\n\tthis.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_ERROR};\n\tthis.updateViews();\n};\n\nLogger.prototype.debug = function(str) {\n\tthis.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_DEBUG};\n\tthis.updateViews();\n};\n\n//register a view\nLogger.prototype.registerView = function(_view) {\n\tthis.registeredViews[this.registeredViews.length] = _view;\n};\n\n//unregister a view\nLogger.prototype.unregisterView = function(_view) {\n\tfor (var i = 0; i < this.registeredViews.length; i++)\n\t\tif (this.registeredViews[i] == _view) {\n\t\t\tthis.registeredViews.splice(i, 1);\n\t\t\ti--;\n\t\t}\n};\n\n// update all views\nLogger.prototype.updateViews = function() {\n\tfor (var i = 0; i < this.registeredViews.length; i++) {\n\t\tif (this.registeredViews[i])\n\t\t\tthis.registeredViews[i].update(this);\n\t}\n};\ndefine(\"extensions/adapt-contrib-spoor/js/scorm/logger\", function(){});\n\n",
    "define('extensions/adapt-contrib-spoor/js/scorm',[\n\t'./scorm/API',\n \t'./scorm/wrapper',\n\t'./scorm/logger',\n], function(API, wrapper, logger) {\n\n\t//Load and prepare SCORM API\n\n\treturn wrapper.getInstance();\n\n});\n",
    "define('extensions/adapt-contrib-spoor/js/serializers/default',[\n    'coreJS/adapt'\n], function (Adapt) {\n\n    //Captures the completion status of the blocks\n    //Returns and parses a '1010101' style string\n\n    var serializer = {\n        serialize: function () {\n            return this.serializeSaveState('_isComplete');\n        },\n\n        serializeSaveState: function(attribute) {\n            if (Adapt.course.get('_latestTrackingId') === undefined) {\n                var message = \"This course is missing a latestTrackingID.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                console.error(message);\n            }\n\n            var excludeAssessments = Adapt.config.get('_spoor') && Adapt.config.get('_spoor')._tracking && Adapt.config.get('_spoor')._tracking._excludeAssessments;\n\n            // create the array to be serialised, pre-populated with dashes that represent unused tracking ids - because we'll never re-use a tracking id in the same course\n            var data = [];\n            var length = Adapt.course.get('_latestTrackingId') + 1;\n            for (var i = 0; i < length; i++) {\n                data[i] = \"-\";\n            }\n\n            // now go through all the blocks, replacing the appropriate dashes with 0 (incomplete) or 1 (completed) for each of the blocks\n            _.each(Adapt.blocks.models, function(model, index) {\n                var _trackingId = model.get('_trackingId'),\n                    isPartOfAssessment = model.getParent().get('_assessment'),\n                    state = model.get(attribute) ? 1: 0;\n\n                if(excludeAssessments && isPartOfAssessment) {\n                    state = 0;\n                }\n\n                if (_trackingId === undefined) {\n                    var message = \"Block '\" + model.get('_id') + \"' doesn't have a tracking ID assigned.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                    console.error(message);\n                } else {\n                    data[_trackingId] = state;\n                }\n            }, this);\n\n            return data.join(\"\");\n        },\n\n        deserialize: function (completion) {\n\n            _.each(this.deserializeSaveState(completion), function(state, blockTrackingId) {\n                if (state === 1) {\n                    this.markBlockAsComplete(Adapt.blocks.findWhere({_trackingId: blockTrackingId}));\n                }\n            }, this);\n\n        },    \n\n        deserializeSaveState: function (string) {\n            var completionArray = string.split(\"\");\n\n            for (var i = 0; i < completionArray.length; i++) {\n                if (completionArray[i] === \"-\") {\n                    completionArray[i] = -1;\n                } else {\n                    completionArray[i] = parseInt(completionArray[i], 10);\n                }\n            }\n\n            return completionArray;\n        },\n\n        markBlockAsComplete: function(block) {\n            if (!block || block.get('_isComplete')) {\n                return;\n            }\n        \n            block.getChildren().each(function(child) {\n                child.set('_isComplete', true);\n            }, this);\n        }\n\n    };\n\n    return serializer;\n});\n",
    "//https://raw.githubusercontent.com/oliverfoster/SCORMSuspendDataSerializer 2015-06-27\n(function(_) {\n\n\tfunction toPrecision(number, precision) {\n\t\tif (precision === undefined) precision = 2\n\t\tvar multiplier = 1 * Math.pow(10, precision);\n\t\treturn Math.round(number * multiplier) / multiplier;\n\t}\n\n\tfunction BinaryToNumber(bin, length) {\n\t\treturn parseInt(bin.substr(0, length), 2);\n\t}\n\n\tfunction NumberToBinary(number, length) {\n\t\treturn Padding.fillLeft( number.toString(2), length );\n\t}\n\n\tvar Padding = {\n\t\taddLeft: function PaddingAddLeft(str, x , char) {\n\t\t\tchar = char || \"0\";\n\t\t\treturn (new Array( x + 1)).join(char) + str;\n\t\t},\n\t\taddRight: function PaddingAddRight(str, x, char) {\n\t\t\tchar = char || \"0\";\n\t\t\treturn  str + (new Array( x + 1)).join(char);\n\t\t},\n\t\tfillLeft: function PaddingFillLeft(str, x, char) {\n\t\t\tif (str.length < x) {\n\t        \tvar paddingLength = x - str.length;\n\t        \treturn Padding.addLeft(str, paddingLength, char)\n\t        }\n\t        return str;\n\t\t},\n\t\tfillRight: function PaddingFillLeft(str, x, char) {\n\t\t\tif (str.length < x) {\n\t        \tvar paddingLength = x - str.length;\n\t        \treturn Padding.addRight(str, paddingLength, char)\n\t        }\n\t        return str;\n\t\t},\n\t\tfillBlockLeft: function PaddingFillBlockRight(str, x, char) {\n\t\t\tif (str.length % x) {\n\t        \tvar paddingLength = x - (str.length % x);\n\t        \treturn Padding.addLeft(str, paddingLength, char)\n\t        }\n\t        return str;\n\t\t},\n\t\tfillBlockRight: function PaddingFillBlockRight(str, x, char) {\n\t\t\tif (str.length % x) {\n\t        \tvar paddingLength = x - (str.length % x);\n\t        \treturn Padding.addRight(str, paddingLength, char)\n\t        }\n\t        return str;\n\t\t}\n\t};\n\n\tfunction Base64() {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tvar firstArgumentType = typeof arguments[0];\n\t\t\tswitch (firstArgumentType) {\n\t\t\tcase \"number\":\n\t\t\t\treturn Base64._indexes[arguments[0]];\n\t\t\tcase \"string\":\n\t\t\t\treturn Base64._chars[arguments[0]];\n\t\t\tdefault:\n\t\t\t\tthrow \"Invalid arguments type\";\n\t\t\t}\n\t\tcase 2:\n\t\t\tvar char = arguments[0];\n\t\t\tvar index = arguments[1];\n\t\t\tBase64._chars[char] = index;\n\t\t\tBase64._indexes[index] = char;\n\t\t\treturn;\n\t\tdefault:\n\t\t\tthrow \"Invalid number of arguments\";\n\t\t}\n\t}\n\tBase64._chars = {};\n\tBase64._indexes = {};\n\t(function() {\n\t\tvar alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\t\tfor (var i = 0, l = alphabet.length; i<l; i++) {\n\t\t\tBase64(alphabet[i], i);\n\t\t}\n\t})();\n\n\n\tfunction DataType() {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tswitch (typeof  arguments[0]) {\n\t\t\tcase \"object\":\n\t\t\t\tvar item = arguments[0]\n\t\t\t\tif (DataType._types[item.type] === undefined) DataType._types[item.type] = [];\n\t\t\t\tDataType._types[item.type].push(item);\n\t\t\t\titem.index = DataType._indexes.length\n\t\t\t\tDataType._indexes.push(item);\n\t\t\t\tDataType[item.name] = item;\n\t\t\t\treturn;\n\t\t\tcase \"string\":\n\t\t\t\treturn DataType.getName(arguments[0]);\n\t\t\tcase \"number\":\n\t\t\t\treturn DataType.getIndex(arguments[0]);\n\t\t\tdefault:\n\t\t\t\tthrow \"Argument type not allowed\";\n\t\t\t}\n\t\tdefault:\n\t\t\tthrow \"Too many arguments\";\n\t\t}\n\t\t\n\t}\n\tDataType.VARIABLELENGTHDESCRIPTORSIZE = 8;\n\tDataType._types = {};\n\tDataType._indexes = [];\n\tDataType.getName = function DataTypeGetName(name) {\n\t\tif (DataType[name])\n\t\t\treturn DataType[name];\n\t\tthrow \"Type name not found '\"+name+\"'\";\n\t};\n\tDataType.getIndex = function DataTypeGetIndex(index) {\n\t\tif (DataType._indexes[index])\n\t\t\treturn DataType._indexes[index];\n\t\tthrow \"Type index not found '\"+index+\"'\";\n\t};\n\tDataType.getTypes = function DataTypeGetTypes(type) {\n\t\tif (DataType._types[type])\n\t\t\treturn DataType._types[type];\n\t\tthrow \"Type not found '\"+type+\"'\";\n\t};\n\tDataType.checkBounds = function DataTypeCheckBounds(name, number) {\n\t\tvar typeDef = DataType(name);\n\t\tif (number > typeDef.max) throw name + \" value is larger than \"+typeDef.max;\n\t\tif (number < typeDef.min) throw name + \" value is smaller than \"+typeDef.min;\n\t};\n\tDataType.getNumberType = function DataTypeGetNumberType(number) {\n\t\tvar isDecimal = (number - Math.floor(number)) !== 0;\n\t\tvar numberDataTypes = DataType.getTypes(\"number\");\n\t\tfor (var t = 0, type; type = numberDataTypes[t++];) {\n\t\t\tif (number <= type.max && number >= type.min && (!isDecimal || isDecimal == type.decimal) ) {\n\t\t\t\treturn type;\n\t\t\t}\n\t\t}\n\t};\n\tDataType.getVariableType = function DataTypeGetVariableType(variable) {\n\t\tvar variableNativeType = variable instanceof Array ? \"array\" : typeof variable;\n\t\tvar variableDataType;\n\n\t\tswitch(variableNativeType) {\n\t\tcase \"number\":\n\t\t\tvariableDataType = DataType.getNumberType(variable);\n\t\t\tbreak;\n\t\tcase \"string\":\n\t\t\tvariableDataType = DataType.getName(\"string\");\n\t\t\tbreak;\n\t\tdefault: \n\t\t\tvar supportedItemDataTypes = DataType.getTypes(variableNativeType);\n\t\t\tswitch (supportedItemDataTypes.length) {\n\t\t\tcase 1:\n\t\t\t\tvariableDataType = supportedItemDataTypes[0];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow \"Type not found '\"+variableNativeType+\"'\";\n\t\t\t}\n\t\t}\n\t\n\t\tif (!variableDataType) throw \"Cannot assess type '\"+variableNativeType+\"'\";\n\n\t\treturn variableDataType;\n\t};\n\tDataType.getArrayType = function getArrayType(arr) {\n\t\tvar foundItemTypes = [];\n\n\t\tfor (var i = 0, l = arr.length; i < l; i++) {\n\t\t\tvar item = arr[i];\n\t\t\tvar itemDataType = DataType.getVariableType(item);\n\n\t\t\tif (_.findWhere(foundItemTypes, { name: itemDataType.name })) continue;\n\t\n\t\t\tfoundItemTypes.push(itemDataType);\n\t\t}\n\n\t\tswitch (foundItemTypes.length) {\n\t\tcase 0:\n\t\t\tthrow \"Cannot determine array data types\";\n\t\tcase 1:\n\t\t\t//single value type\n\t\t \treturn foundItemTypes[0];\n\t\tdefault: \n\t\t\t//many value types\n\t\t\tvar nativeTypeNames = _.pluck(foundItemTypes, 'type');\n\t\t\tvar uniqueNativeTypeNames = _.uniq(nativeTypeNames);\n\t\t\tvar hasManyNativeTypes = (uniqueNativeTypeNames.length > 1);\n\n\t\t\tif (hasManyNativeTypes) return DataType(\"variable\"); //multiple types in array\n\n\t\t\t//single native type in array, multiple datatype lengths\n\t\t\tswitch (uniqueNativeTypeNames[0]) {\n\t\t\tcase \"number\":\n\t\t\t\tvar foundDecimal = _.findWhere(foundItemTypes, { decimal: true});\n\t\t\t\tif (foundDecimal) return foundDecimal;\n\t\t\t\treturn _.max(foundItemTypes, function(type) {\n\t\t\t\t\treturn type.max;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthrow \"Unsupported data types\";\n\t\t}\n\t\t\n\t};\n\t(function() {\n\t\tvar types = [\n\t\t\t{\n\t\t\t\t\"size\": \"fixed\",\n\t\t\t\t\"length\": 1,\n\t\t\t\t\"name\": \"boolean\",\n\t\t\t\t\"type\": \"boolean\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"max\": 15,\n\t\t\t\t\"min\": 0,\n\t\t\t\t\"decimal\": false,\n\t\t\t\t\"size\": \"fixed\",\n\t\t\t\t\"length\": 4,\n\t\t\t\t\"name\": \"half\",\n\t\t\t\t\"type\": \"number\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"max\": 255,\n\t\t\t\t\"min\": 0,\n\t\t\t\t\"decimal\": false,\n\t\t\t\t\"size\": \"fixed\",\n\t\t\t\t\"length\": 8,\n\t\t\t\t\"name\": \"byte\",\n\t\t\t\t\"type\": \"number\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"max\": 65535,\n\t\t\t\t\"min\": 0,\n\t\t\t\t\"decimal\": false,\n\t\t\t\t\"size\": \"fixed\",\n\t\t\t\t\"length\": 16,\n\t\t\t\t\"name\": \"short\",\n\t\t\t\t\"type\": \"number\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"max\": 4294967295,\n\t\t\t\t\"min\": 0,\n\t\t\t\t\"decimal\": false,\n\t\t\t\t\"size\": \"fixed\",\n\t\t\t\t\"length\": 32,\n\t\t\t\t\"name\": \"long\",\n\t\t\t\t\"type\": \"number\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"max\": 4294967295,\n\t\t\t\t\"min\": -4294967295,\n\t\t\t\t\"decimal\": true,\n\t\t\t\t\"precision\": 2,\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"name\": \"double\",\n\t\t\t\t\"type\": \"number\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"base16\",\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"base64\",\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"array\",\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"type\": \"array\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"variable\",\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"type\": \"variable\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"string\",\n\t\t\t\t\"size\": \"variable\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t];\n\t\tfor (var i = 0, type; type = types[i++];) {\n\t\t\tDataType(type);\n\t\t}\n\t})();\n\n\t\n\n\tfunction Converter(fromType, toType) {\n\t\tfromType = Converter.translateTypeAlias(fromType);\n\t\ttoType = Converter.translateTypeAlias(toType);\n\n\t\tvar args = [].slice.call(arguments, 2);\n\n\t\tif (fromType != \"binary\" && toType != \"binary\") {\n\t\t\tif (!Converter._converters[fromType]) throw \"Type not found '\" + fromType + \"'\";\n\t\t\tif (!Converter._converters[fromType]['binary']) throw \"Type not found 'binary'\";\n\t\t\t\n\t\t\tvar bin = Converter._converters[fromType]['binary'].call(this, args[0], Converter.WRAPOUTPUT);\n\n\t\t\tif (!Converter._converters['binary'][toType]) throw \"Type not found '\"+toType+\"'\";\n\n\t\t\treturn Converter._converters['binary'][toType].call(this, bin, Converter.WRAPOUTPUT);\n\t\t}\n\n\t\tif (!Converter._converters[fromType]) throw \"Type not found '\" + fromType + \"'\";\n\t\tif (!Converter._converters[fromType][toType]) throw \"Type not found '\" + toType + \"'\";\n\n\t\treturn Converter._converters[fromType][toType].call(this, args[0], Converter.WRAPOUTPUT);\n\t}\n\tConverter.WRAPOUTPUT = false;\n\tConverter.translateTypeAlias = function ConverterTranslateTypeAlias(type) {\n\t\ttype = type.toLowerCase();\n\t\tfor (var Type in Converter._typeAliases) {\n\t\t\tif (Type == type || (\" \"+Converter._typeAliases[Type].join(\" \")+\" \").indexOf(\" \"+type+\" \") >= 0 ) return Type;\n\t\t}\n\t\tthrow \"Type not found '\" + type + \"'\";\n\t};\n\tConverter._typeAliases = {\n\t\t\"base64\": [ \"b64\" ],\n\t\t\"base16\" : [ \"hex\", \"b16\" ],\n\t\t\"double\": [ \"dbl\", \"decimal\", \"d\" ],\n\t\t\"long\": [ \"lng\", \"l\" ],\n\t\t\"short\": [ \"s\" ],\n\t\t\"byte\" : [ \"b\" ],\n\t\t\"half\": [ \"h\" ],\n\t\t\"number\": [ \"num\", \"n\" ],\n\t\t\"binary\": [ \"bin\" ],\n\t\t\"boolean\": [ \"bool\" ],\n\t\t\"array\": [ \"arr\" ]\n\t};\n\tConverter._variableWrapLength = function ConverterVariableWrapLength(bin) {\n\t\tvar variableLength = bin.length;\n\t\tvar binLength = NumberToBinary(variableLength, DataType.VARIABLELENGTHDESCRIPTORSIZE)\n\n\t\treturn binLength + bin;\n\t};\n\tConverter._variableLength = function ConverterVariableLength(bin) {\n\t\tvar VLDS =  DataType.VARIABLELENGTHDESCRIPTORSIZE;\n\t\tvar variableLength = BinaryToNumber(bin, VLDS );\n\t\treturn variableLength;\n\t};\n\tConverter._variableUnwrapLength = function ConverterVariableUnwrapLength(bin) {\n\t\tvar VLDS =  DataType.VARIABLELENGTHDESCRIPTORSIZE;\n\t\tvar variableLength = BinaryToNumber(bin, VLDS );\n\n\t\treturn bin.substr( VLDS, variableLength);\n\t};\n\tConverter._converters = {\n\t\t\"base64\": {\n\t\t\t\"binary\": function ConverterBase64ToBinary(base64) { //TODO PADDING... ?\n\t\t\t\tvar firstByte = Base64(base64.substr(0,1));\n\t\t\t\tvar binFirstByte = NumberToBinary(firstByte, 6);\n\t\t\t\tvar paddingLength = BinaryToNumber(binFirstByte, 6);\n\n\t\t\t    var bin = \"\";\n\t\t\t    for (var i = 0, ch; ch = base64[i++];) {\n\t\t\t        var block = Base64(ch).toString(2);\n\t\t\t        block = Padding.fillLeft(block, 6);\n\t\t\t        bin += block;\n\t\t\t    }\n\t\t\t    bin =  bin.substr(6+paddingLength);\n\t\t\t    return bin;\n\t\t\t}\n\t\t},\n\t\t\"base16\": {\n\t\t\t\"binary\": function ConverterBase16ToBinary(hex) {\n\t\t\t\tvar firstByte = Base64(base64.substr(0,1));\n\t\t\t\tvar binFirstByte = NumberToBinary(firstByte, 4);\n\t\t\t\tvar paddingLength = BinaryToNumber(binFirstByte, 4);\n\n\t\t\t    var bin = \"\";\n\t\t\t    for (var i = 0, ch; ch = hex[i++];) {\n\t\t\t        var block = parseInt(ch, 16).toString(2);\n\t\t\t        block = Padding.fillLeft(block, 4);\n\t\t\t        bin += block;\n\t\t\t    }\n\n\t\t\t     bin =  bin.substr(6+paddingLength);\n\t\t\t    return bin;\n\t\t\t}\n\t\t},\n\t\t\"double\": {\n\t\t\t\"binary\": function ConverterDoubleToBinary(dbl, wrap) {\n\t\t\t\tvar typeDef = DataType(\"double\");\n\t\t\t\tDataType.checkBounds(\"double\", dbl);\n\n\t\t\t\tdbl = toPrecision(dbl, typeDef.precision);\n\n\t\t\t\tvar dblStr = dbl.toString(10);\n\n\t\t\t\tvar isMinus = dbl < 0;\n\t\t\t\n\t\t\t\tvar baseStr, exponentStr, highStr, lowStr, decimalPosition, hasDecimal;\n\n\t\t\t\t\n\t\t\t\tvar exponentPos = dblStr.indexOf(\"e\");\n\t\t\t\tif (exponentPos > -1) {\n\t\t\t\t\t//exponential float representation \"nE-x\"\n\t\t\t\t\tbaseStr = dblStr.substr(0, exponentPos);\n\t\t\t\t\texponentStr = Math.abs(dblStr.substr(exponentPos+1));\n\n\t\t\t\t\tif (isMinus) baseStr = baseStr.substr(1);\n\n\t\t\t\t\tdecimalPosition = baseStr.indexOf(\".\");\n\t\t\t\t\thasDecimal = (decimalPosition > -1);\n\n\t\t\t\t\tif (hasDecimal) {\n\t\t\t\t\t\thighStr = baseStr.substr(0, decimalPosition);\n\t\t\t\t\t\tlowStr = baseStr.substr(decimalPosition+1);\n\n\t\t\t\t\t\texponentStr = (Math.abs(exponentStr) + lowStr.length);\n\n\t\t\t\t\t\tbaseStr = highStr + lowStr;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//normal long float representation \"0.00000000\"\n\t\t\t\t\tbaseStr = dblStr;\n\t\t\t\t\texponentStr = \"0\";\n\n\t\t\t\t\tif (isMinus) dblStr = dblStr.substr(1);\n\n\t\t\t\t\tdecimalPosition = dblStr.indexOf(\".\");\n\t\t\t\t\thasDecimal = (decimalPosition > -1);\n\t\t\t\t\tif (hasDecimal) {\n\t\t\t\t\t\thighStr = dblStr.substr(0, decimalPosition);\n\t\t\t\t\t\tlowStr = dblStr.substr(decimalPosition+1);\n\n\t\t\t\t\t\texponentStr = (lowStr.length);\n\t\t\t\t\t\tif (highStr == \"0\") {\n\t\t\t\t\t\t\tbaseStr = parseInt(lowStr, 10).toString(10);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbaseStr = highStr + lowStr;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbaseStr = dblStr;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar bin = [];\n\n\t\t\t\tvar binLong = Padding.fillBlockLeft (parseInt(baseStr, 10).toString(2), 4);\n\t\t\t\tvar binMinus = isMinus ? \"1\" : \"0\";\n\t\t\t\tvar binExponent = Padding.fillLeft( parseInt(exponentStr, 10).toString(2), 7);\n\t\t\t\t\n\t\t\t\tbin.push( binMinus );\n\t\t\t\tbin.push( binExponent );\n\t\t\t\tbin.push( binLong );\n\n\t\t\t\tif (wrap === false) {\n\t\t\t\t\treturn bin.join(\"\");\n\t\t\t\t} else {\n\t\t\t\t\treturn Converter._variableWrapLength(bin.join(\"\"));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"long\": {\n\t\t\t\"binary\": function ConverterLongToBinary(value) {\n\t\t\t\tvar typeDef = DataType(\"long\");\n\t\t\t\tDataType.checkBounds(\"long\", value);\n\t\t\t\tvalue = toPrecision(value, 0);\n\t\t\t\treturn Padding.fillLeft(value.toString(2), typeDef.length);\n\t\t\t}\n\t\t},\n\t\t\"short\": {\n\t\t\t\"binary\": function ConverterShortToBinary(value) {\n\t\t\t\tvar typeDef = DataType(\"short\");\n\t\t\t\tDataType.checkBounds(\"short\", value);\n\t\t\t\tvalue = toPrecision(value, 0);\n\t\t\t\treturn Padding.fillLeft(value.toString(2), typeDef.length);\n\t\t\t}\n\t\t},\n\t\t\"byte\": {\n\t\t\t\"binary\": function ConverterByteToBinary(value) {\n\t\t\t\tvar typeDef = DataType(\"byte\");\n\t\t\t\tDataType.checkBounds(\"byte\", value);\n\t\t\t\tvalue = toPrecision(value, 0);\n\t\t\t\treturn Padding.fillLeft(value.toString(2), typeDef.length);\n\t\t\t}\n\t\t},\n\t\t\"half\": {\n\t\t\t\"binary\": function ConverterHalfToBinary(value) {\n\t\t\t\tvar typeDef = DataType(\"half\");\n\t\t\t\tDataType.checkBounds(\"half\", value);\n\t\t\t\tvalue = toPrecision(value, 0);\n\t\t\t\treturn Padding.fillLeft(value.toString(2), typeDef.length);\n\t\t\t}\n\t\t},\n\t\t\"boolean\": {\n\t\t\t\"binary\": function ConverterBooleanToBinary(bool) {\n\t\t\t\treturn bool ? \"1\" : \"0\";\n\t\t\t},\n\t\t},\n\t\t\"array\": {\n\t\t\t\"binary\": function ConverterArrayToBinary(arr, wrap) { //TODO PADDING NOT GOOD\n\t\t\t\tvar typeDef = DataType(\"array\");\n\t\t\t\tvar arrayItemType = DataType.getArrayType(arr);\n\t\t\t\tvar isVariableArray = arrayItemType.name == \"vairable\";\n\n\t\t\t\tif (isVariableArray) {\n\t\t\t\t\tvar bin = half2bin(15);\n\t\t\t\t\t//variable array\n\t\t\t\t\treturn bin;\n\t\t\t\t} else {\n\t\t\t\t\tvar binArrayIdentifier = Converter._converters['half']['binary'](arrayItemType.index);\n\n\t\t\t\t\tvar binItemsArray = [];\n\t\t\t\t\tfor (var i = 0, l = arr.length; i < l; i++) {\n\t\t\t\t\t\tvar item = arr[i];\n\t\t\t\t\t\tvar binItem = Converter._converters[arrayItemType.name]['binary'](item);\n\t\t\t\t\t\t//console.log(\"binItem\", binItem);\n\t\t\t\t\t\tbinItemsArray.push( binItem );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar binItems = binItemsArray.join(\"\");\n\n\t\t\t\t\tvar paddingLength = 0;\n\t\t\t\t\tif (binItems.length % 4) paddingLength = 4 - (binItems.length % 4);\n\t\t\t\t\tvar binPaddingLen = NumberToBinary(paddingLength, 2);\n\n\t\t\t\t\tvar binPadding = (new Array(paddingLength+1)).join(\"0\");\n\n\t\t\t\t\tvar bin = [];\n\t\t\t\t\tbin.push(binArrayIdentifier);\n\t\t\t\t\tbin.push(binPaddingLen);\n\t\t\t\t\tbin.push(binPadding);\n\t\t\t\t\tbin.push(binItems);\n\n\t\t\t\t\tvar finished = bin.join(\"\");\n\t\t\t\t\t//console.log(\"unwrapped\", finished);\n\n\t\t\t\t\tif (wrap === false) return finished;\n\n\t\t\t\t\tvar wrapped = Converter._variableWrapLength( finished);\n\t\t\t\t\t//console.log(\"wrapped\", wrapped);\n\n\t\t\t\t\treturn wrapped;\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\t\t\"binary\": {\n\t\t\t\"array\": function ConverterBinaryToArray(bin, wrap) { //TODO PADDING NOT GOOD\n\t\t\t\tvar typeDef = DataType(\"array\");\n\n\t\t\t\t//console.log(\"wrapped\", bin);\n\t\t\t\tif (wrap !== false)\n\t\t\t\t\tbin = Converter._variableUnwrapLength( bin);\n\t\t\t\t//console.log(\"unwrapped\", bin);\n\n\t\t\t\tvar binArrayIdentifier = bin.substr(0, 4);\n\t\t\t\tvar binPaddingLen = bin.substr(4 , 2);\n\n\t\t\t\tvar arrayIdentifier = Converter._converters['binary'][ 'half' ]( binArrayIdentifier );\n\t\t\t\tvar paddingLength = BinaryToNumber( binPaddingLen, 2 );\n\n\t\t\t\tvar dataStart = 4 + 2 + paddingLength;\n\t\t\t\tvar dataLength = bin.length - dataStart;\n\n\t\t\t\tvar binItems = bin.substr(dataStart, dataLength );\n\n\t\t\t\tvar arrayItemType = DataType(arrayIdentifier);\n\t\t\t\tvar isVariableArray = arrayItemType.name == \"variable\";\n\n\t\t\t\tvar rtn = [];\n\t\t\t\tif (isVariableArray) {\n\n\t\t\t\t} else {\n\t\t\t\t\tvar hasVariableLengthChildren = arrayItemType.size == \"variable\";\n\t\t\t\t\tif (hasVariableLengthChildren) {\n\t\t\t\t\t\tvar VLDS = DataType.VARIABLELENGTHDESCRIPTORSIZE;\n\t\t\t\t\t\twhile ( binItems != \"\" ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar variableLength = Converter._variableLength( binItems );\n\t\t\t\t\t\t\tvar binItem = binItems.substr(0, VLDS + variableLength);\n\t\t\t\t\t\t\tbinItems = binItems.substr(VLDS+variableLength);\n\t\t\t\t\t\t\t//console.log(\"binItem\", binItem, BinaryToNumber(binItem, 16));\n\n\t\t\t\t\t\t\trtn.push( Converter._converters['binary'][ arrayItemType.name ]( binItem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twhile ( binItems != \"\" ) {\n\t\t\t\t\t\t\tvar binItem = binItems.substr(0, arrayItemType.length);\n\t\t\t\t\t\t\tbinItems = binItems.substr(arrayItemType.length);\n\n\t\t\t\t\t\t\trtn.push( Converter._converters['binary'][ arrayItemType.name ](binItem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn rtn;\n\n\t\t\t},\n\t\t\t\"base64\": function ConverterBinaryToBase64(bin) { //TODO PADDING NOT GOOD\n\t\t\t\tvar paddingLength = 0;\n\t\t\t\tif (bin.length % 6) paddingLength = 6 - (bin.length % 6);\n\t\t\t\tbinPaddingLen = NumberToBinary(paddingLength, 6);\n\t\t\t\tbinPadding = Padding.addLeft(\"\", paddingLength);\n\t\t\t\tbin = binPaddingLen + binPadding + bin;\n\n\t\t\t\tvar binLength = bin.length;\n\t\t\t    var base64 = \"\";\n\t\t\t    for (var b = 0; b < 10000; b++) {\n\t\t\t        if (b*6 >= binLength) break;\n\t\t\t     \n\t\t\t        var block = bin.substr(b*6,6);\n\t\t\t        base64 += Base64(parseInt(block, 2));\n\t\t\t    }\n\n\t\t\t    return base64;\n\t\t\t},\n\t\t\t\"base16\": function ConverterBinaryToBase16(bin) {\n\t\t\t\tvar paddingLength = 0;\n\t\t\t\tif (bin.length % 4) paddingLength = 4 - (bin.length % 4);\n\t\t\t\tbinPaddingLen = NumberToBinary(paddingLength, 4);\n\t\t\t\tbinPadding = Padding.addLeft(\"\", paddingLength);\n\t\t\t\tbin = binPaddingLen + binPadding + bin;\n\n\t\t\t    var binLength = bin.length;\n\t\t\t    var hex = \"\";\n\t\t\t    for (var b = 0; b < 10000; b++) {\n\t\t\t        if (b*4 >= binLength) break;\n\t\t\t     \n\t\t\t        var block = bin.substr(b*4,4);\n\t\t\t        hex += parseInt(block, 2).toString(16);\n\t\t\t    }\n\t\t\t    return hex;\n\t\t\t},\n\t\t\t\"double\": function ConverterBinaryToDouble(bin, wrap) {\n\t\t\t\tvar typeDef = DataType(\"double\");\n\t\t\t\t\n\t\t\t\tif (wrap !== false)\n\t\t\t\t\tbin = Converter._variableUnwrapLength(bin);\n\n\t\t\t\tvar isMinus = bin.substr(0 ,1) == 1;\n\n\t\t\t\tvar exponentByte = parseInt(\"0\" + bin.substr(1, 7), 2);\n\t\t\t\tvar baseLong = parseInt( bin.substr(8, bin.length), 2);\n\n\t\t\t\tvar dbl = parseFloat(baseLong+\"E-\"+exponentByte, 10);\n\t\t\t\tif (isMinus) dbl = dbl * -1;\n\n\t\t\t\treturn dbl;\n\t\t\t},\n\t\t\t\"long\": function ConverterBinaryToLong(bin) {\n\t\t\t\treturn parseInt(bin.substr(0, 32), 2);\n\t\t\t},\n\t\t\t\"short\": function ConverterBinaryToShort(bin) {\n\t\t\t\treturn parseInt(bin.substr(0, 16), 2);\n\t\t\t},\n\t\t\t\"byte\": function ConverterBinaryToByte(bin) {\n\t\t\t\treturn parseInt(bin.substr(0, 8), 2);\n\t\t\t},\n\t\t\t\"half\": function ConverterBinaryToHalf(bin) {\n\t\t\t\treturn parseInt(bin.substr(0, 4), 2);\n\t\t\t},\n\t\t\t\"boolean\": function ConverterBinaryToBoolean(bin) {\n\t\t\t\treturn bin.substr(0,1) == \"1\" ? true: false;\n\t\t\t},\n\t\t\t\"number\": function ConverterBinaryToNumber(bin) {\n\t\t\t\treturn parseInt(bin, 2);\n\t\t\t}\n\t\t}\n\t};\n\t\n\twindow.SCORMSuspendData = {\n\t\tserialize: function SCORMSuspendDataSerialize(arr) {\n\t\t\treturn Converter (\"array\", \"base64\", arr);\n\t\t},\n\t\tdeserialize: function SCORMSuspendDataDeserialize(base64) {\n\t\t\treturn Converter(\"base64\", \"array\", base64);\n\t\t},\n\t\tBase64: Base64,\n\t\tConverter: Converter,\n\t\tDataType: DataType\n\t};\n\n\n})(_);\n\ndefine(\"extensions/adapt-contrib-spoor/js/serializers/scormSuspendDataSerializer\", function(){});\n\n",
    "define('extensions/adapt-contrib-spoor/js/serializers/questions',[\n    'coreJS/adapt',\n    './scormSuspendDataSerializer'\n], function (Adapt) {\n\n    //Captures the completion status and user selections of the question components\n    //Returns and parses a base64 style string\n    var includes = {\n        \"_isQuestionType\": true,\n        \"_isResetOnRevisit\": false\n    };\n\n    var serializer = {\n        serialize: function () {\n            return this.serializeSaveState();\n        },\n\n        serializeSaveState: function() {\n            if (Adapt.course.get('_latestTrackingId') === undefined) {\n                var message = \"This course is missing a latestTrackingID.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                console.error(message);\n                return \"\";\n            }\n\n            var rtn = \"\";\n            try {\n                var data = this.captureData();\n                if (data.length === 0) return \"\";\n                rtn = SCORMSuspendData.serialize(data);\n            } catch(e) {\n                console.error(e);\n            }\n\n            return rtn;\n        },\n\n        captureData: function() {\n            var data = [];\n            \n            var trackingIds = Adapt.blocks.pluck(\"_trackingId\");\n            var blocks = {};\n            var countInBlock = {};\n\n            for (var i = 0, l = trackingIds.length; i < l; i++) {\n\n                var trackingId = trackingIds[i];\n                var blockModel = Adapt.blocks.findWhere({_trackingId: trackingId });\n                var componentModels = blockModel.getChildren().where(includes);\n\n                for (var c = 0, cl = componentModels.length; c < cl; c++) {\n\n                    var component = componentModels[c].toJSON();\n                    var blockId = component._parentId;\n\n                    if (!blocks[blockId]) {\n                        blocks[blockId] = blockModel.toJSON();\n                    }\n\n                    var block = blocks[blockId];\n                    if (countInBlock[blockId] === undefined) countInBlock[blockId] = -1;\n                    countInBlock[blockId]++;\n\n                    var blockLocation = countInBlock[blockId];\n\n                    if (component['_isInteractionComplete'] === false || component['_isComplete'] === false) {\n                        //if component is not currently complete skip it\n                        continue;\n                    }\n\n                    var hasUserAnswer = (component['_userAnswer'] !== undefined);\n                    var isUserAnswerArray = (component['_userAnswer'] instanceof Array);\n\n\n                    var numericParameters = [\n                            blockLocation,\n                            block['_trackingId'],\n                            component['_score'] || 0,\n                            component['_attemptsLeft'] || 0\n                        ];\n\n                    var booleanParameters = [\n                            hasUserAnswer,\n                            isUserAnswerArray,\n                            component['_isInteractionComplete'],\n                            component['_isSubmitted'],\n                            component['_isCorrect'] || false\n                        ];\n\n                    var dataItem = [\n                        numericParameters,\n                        booleanParameters\n                    ];\n\n\n                    if (hasUserAnswer) {\n                        var userAnswer = isUserAnswerArray ? component['_userAnswer'] : [component['_userAnswer']];\n\n                        var arrayType = SCORMSuspendData.DataType.getArrayType(userAnswer);\n\n                        switch(arrayType.name) {\n                        case \"string\": case \"variable\":\n                            console.log(\"Cannot store _userAnswers from component \" + component._id + \" as array is of variable or string type.\");\n                            continue;\n                        }\n\n                        dataItem.push(userAnswer);\n                    }\n\n                    data.push(dataItem);\n\n                }\n\n            }\n\n            return data;\n\n        },\n\n        deserialize: function (str) {\n\n            try {\n                var data = SCORMSuspendData.deserialize(str);\n                this.releaseData( data );\n            } catch(e) {\n                console.error(e);\n            }\n            \n        },    \n\n        releaseData: function (arr) {\n            \n            for (var i = 0, l = arr.length; i < l; i++) {\n                var dataItem = arr[i];\n\n                var numericParameters = dataItem[0];\n                var booleanParameters = dataItem[1];\n\n                var blockLocation = numericParameters[0];\n                var trackingId = numericParameters[1];\n                var score = numericParameters[2];\n                var attemptsLeft = numericParameters[3] || 0;\n\n                var hasUserAnswer = booleanParameters[0];\n                var isUserAnswerArray = booleanParameters[1];\n                var isInteractionComplete = booleanParameters[2];\n                var isSubmitted = booleanParameters[3];\n                var isCorrect = booleanParameters[4];\n\n                var block = Adapt.blocks.findWhere({_trackingId: trackingId});\n                var components = block.getChildren();\n                components = components.where(includes);\n                var component = components[blockLocation];\n\n                component.set(\"_isComplete\", true);\n                component.set(\"_isInteractionComplete\", isInteractionComplete);\n                component.set(\"_isSubmitted\", isSubmitted);\n                component.set(\"_score\", score);\n                component.set(\"_isCorrect\", isCorrect);\n                component.set(\"_attemptsLeft\", attemptsLeft);\n\n                if (hasUserAnswer) {\n                    var userAnswer = dataItem[2];\n                    if (!isUserAnswerArray) userAnswer = userAnswer[0];\n\n                    component.set(\"_userAnswer\", userAnswer);\n                }\n\n\n            }\n        }\n    };\n\n    return serializer;\n});\n\n",
    "define('extensions/adapt-contrib-spoor/js/adapt-stateful-session',[\n\t'coreJS/adapt',\n\t'./serializers/default',\n\t'./serializers/questions'\n], function(Adapt, serializer, questions) {\n\n\t//Implements Adapt session statefulness\n\t\n\tvar AdaptStatefulSession = _.extend({\n\n\t\t_sessionID: null,\n\t\t_config: null,\n\t\t_shouldStoreResponses: false,\n\t\t_shouldRecordInteractions: true,\n\n\t//Session Begin\n\t\tinitialize: function() {\n\t\t\tthis.getConfig();\n\t\t\tthis.restoreSessionState();\n\t\t\tthis.assignSessionId();\n\t\t\tthis.setupEventListeners();\n\t\t},\n\n\t\tgetConfig: function() {\n\t\t\tthis._config = Adapt.config.has('_spoor')\n\t\t\t\t? Adapt.config.get('_spoor')\n\t\t\t\t: false;\n\t\t\t\n\t\t\tthis._shouldStoreResponses = (this._config && this._config._tracking && this._config._tracking._shouldStoreResponses);\n\t\t\t\n\t\t\t// default should be to record interactions, so only avoid doing that if _shouldRecordInteractions is set to false\n\t\t\tif (this._config && this._config._tracking && this._config._tracking._shouldRecordInteractions === false) {\n\t\t\t\tthis._shouldRecordInteractions = false;\n\t\t\t}\n\t\t},\n\n\t\tsaveSessionState: function() {\n\t\t\tvar sessionPairs = this.getSessionState();\n\t\t\tAdapt.offlineStorage.set(sessionPairs);\n\t\t},\n\n\t\trestoreSessionState: function() {\n\t\t\tvar sessionPairs = Adapt.offlineStorage.get();\n\t\t\tvar hasNoPairs = _.keys(sessionPairs).length === 0;\n\n\t\t\tif (hasNoPairs) return;\n\n\t\t\tif (sessionPairs.completion) serializer.deserialize(sessionPairs.completion);\n\t\t\tif (sessionPairs.questions && this._shouldStoreResponses) questions.deserialize(sessionPairs.questions);\n\t\t\tif (sessionPairs._isCourseComplete) Adapt.course.set('_isComplete', sessionPairs._isCourseComplete);\t\t\t\n\t\t\tif (sessionPairs._isAssessmentPassed) Adapt.course.set('_isAssessmentPassed', sessionPairs._isAssessmentPassed);\n\t\t},\n\n\t\tgetSessionState: function() {\n\t\t\tvar sessionPairs = {\n\t\t\t\t\"completion\": serializer.serialize(),\n\t\t\t\t\"questions\": (this._shouldStoreResponses == true ? questions.serialize() : \"\"),\n\t\t\t\t\"_isCourseComplete\": Adapt.course.get(\"_isComplete\") || false,\n\t\t\t\t\"_isAssessmentPassed\": Adapt.course.get('_isAssessmentPassed') || false\n\t\t\t};\n\t\t\treturn sessionPairs;\n\t\t},\n\n\t\tassignSessionId: function () {\n\t\t\tthis._sessionID = Math.random().toString(36).slice(-8);\n\t\t},\n\n\t//Session In Progress\n\t\tsetupEventListeners: function() {\n\t\t\tthis._onWindowUnload = _.bind(this.onWindowUnload, this);\n\t\t\t$(window).on('unload', this._onWindowUnload);\n\n\t\t\tif (this._shouldStoreResponses) {\n\t\t\t\tthis.listenTo(Adapt.components, 'change:_isInteractionComplete', this.onQuestionComponentComplete);\n\t\t\t}\n\n\t\t\tif(this._shouldRecordInteractions) {\n\t\t\t\tthis.listenTo(Adapt, 'questionView:recordInteraction', this.onQuestionRecordInteraction);\n\t\t\t}\n\n\t\t\tthis.listenTo(Adapt.blocks, 'change:_isComplete', this.onBlockComplete);\n\t\t\tthis.listenTo(Adapt.course, 'change:_isComplete', this.onCompletion);\n\t\t\tthis.listenTo(Adapt, 'assessment:complete', this.onAssessmentComplete);\n\t\t\tthis.listenTo(Adapt, 'questionView:complete', this.onQuestionComplete);\n\t\t\tthis.listenTo(Adapt, 'questionView:reset', this.onQuestionReset);\n\t\t},\n\n\t\tonBlockComplete: function(block) {\n\t\t\tthis.saveSessionState();\n\t\t},\n\n\t\tonQuestionComponentComplete: function(component) {\n\t\t\tif (!component.get(\"_isQuestionType\")) return;\n\n\t\t\tthis.saveSessionState();\n\t\t},\n\n\t\tonCompletion: function() {\n\t\t\tif (!this.checkTrackingCriteriaMet()) return;\n\n\t\t\tthis.saveSessionState();\n\t\t\t\n\t\t\tAdapt.offlineStorage.set(\"status\", this._config._reporting._onTrackingCriteriaMet);\n\t\t},\n\n\t\tonAssessmentComplete: function(stateModel) {\n\t\t\tAdapt.course.set('_isAssessmentPassed', stateModel.isPass)\n\t\t\t\n\t\t\tthis.saveSessionState();\n\n\t\t\tthis.submitScore(stateModel.scoreAsPercent);\n\n\t\t\tif (stateModel.isPass) {\n\t\t\t\tthis.onCompletion();\n\t\t\t} else if (this._config && this._config._tracking._requireAssessmentPassed) {\n\t\t\t\tthis.submitAssessmentFailed();\n\t\t\t}\n\t\t},\n\n\t\tonQuestionRecordInteraction:function(questionView) {\n\t\t\tvar id = questionView.model.get('_id');\n\t\t\tvar latency = questionView.getLatency();\n\t\t\tvar response = questionView.getResponse();\n\t\t\tvar responseType = questionView.getResponseType();\n\t\t\tvar result = questionView.isCorrect();\n\t\t\t\n\t\t\tAdapt.offlineStorage.set(\"interaction\", id, response, result, latency, responseType);\n\t\t},\n\n\t\tsubmitScore: function(score) {\n\t\t\tif (this._config && !this._config._tracking._shouldSubmitScore) return;\n\t\t\t\n\t\t\tAdapt.offlineStorage.set(\"score\", score, 0, 100);\n\t\t},\n\n\t\tsubmitAssessmentFailed: function() {\n\t\t\tif (this._config && this._config._reporting.hasOwnProperty(\"_onAssessmentFailure\")) {\n\t\t\t\tvar onAssessmentFailure = this._config._reporting._onAssessmentFailure;\n\t\t\t\tif (onAssessmentFailure === \"\") return;\n\t\t\t\t\t\n\t\t\t\tAdapt.offlineStorage.set(\"status\", onAssessmentFailure);\n\t\t\t}\n\t\t},\n\n\t\tonQuestionComplete: function(questionView) {\n\t\t\tquestionView.model.set('_sessionID', this._sessionID);\n\t\t},\n\n\t\tonQuestionReset: function(questionView) {\n\t\t\tif (this._sessionID !== questionView.model.get('_sessionID')) {\n\t\t\t\tquestionView.model.set('_isEnabledOnRevisit', true);\n\t\t\t}\n\t\t},\n\t\t\n\t\tcheckTrackingCriteriaMet: function() {\n\t\t\tvar criteriaMet = false;\n\n\t\t\tif (!this._config) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this._config._tracking._requireCourseCompleted && this._config._tracking._requireAssessmentPassed) { // user must complete all blocks AND pass the assessment\n\t\t\t\tcriteriaMet = (Adapt.course.get('_isComplete') && Adapt.course.get('_isAssessmentPassed'));\n\t\t\t} else if (this._config._tracking._requireCourseCompleted) { //user only needs to complete all blocks\n\t\t\t\tcriteriaMet = Adapt.course.get('_isComplete');\n\t\t\t} else if (this._config._tracking._requireAssessmentPassed) { // user only needs to pass the assessment\n\t\t\t\tcriteriaMet = Adapt.course.get('_isAssessmentPassed');\n\t\t\t}\n\n\t\t\treturn criteriaMet;\n\t\t},\n\n\t//Session End\n\t\tonWindowUnload: function() {\n\t\t\t$(window).off('unload', this._onWindowUnload);\n\n\t\t\tthis.stopListening();\n\t\t}\n\t\t\n\t}, Backbone.Events);\n\n\treturn AdaptStatefulSession;\n\n});\n\n",
    "define('extensions/adapt-contrib-spoor/js/adapt-offlineStorage-scorm',[\n\t'coreJS/adapt',\n\t'./scorm',\n\t'coreJS/offlineStorage'\n], function(Adapt, scorm) {\n\n\t//SCORM handler for Adapt.offlineStorage interface.\n\n\t//Stores to help handle posting and offline uniformity\n\tvar temporaryStore = {};\n\tvar suspendDataStore = {};\n\tvar suspendDataRestored = false;\n\n\tAdapt.offlineStorage.initialize({\n\n\t\tget: function(name) {\n\t\t\tif (name === undefined) {\n\t\t\t\t//If not connected return just temporary store.\n\t\t\t\tif (this.useTemporaryStore()) return temporaryStore;\n\n\t\t\t\t//Get all values as a combined object\n\t\t\t\tsuspendDataStore = this.getCustomStates();\n\n\t\t\t\tvar data = _.extend(_.clone(suspendDataStore), {\n\t\t\t\t\tlocation: scorm.getLessonLocation(),\n\t\t\t\t\tscore: scorm.getScore(),\n\t\t\t\t\tstatus: scorm.getStatus(),\n\t\t\t\t\tstudent: scorm.getStudentName()\n\t\t\t\t});\n\n\t\t\t\tsuspendDataRestored = true;\n\t\t\t\t\n\t\t\t\treturn data;\n\t\t\t}\n\n\t\t\t//If not connected return just temporary store value.\n\t\t\tif (this.useTemporaryStore()) return temporaryStore[name];\n\n\t\t\t//Get by name\n\t\t\tswitch (name.toLowerCase()) {\n\t\t\t\tcase \"location\":\n\t\t\t\t\treturn scorm.getLessonLocation();\n\t\t\t\tcase \"score\":\n\t\t\t\t\treturn scorm.getScore();\n\t\t\t\tcase \"status\":\n\t\t\t\t\treturn scorm.getStatus();\n\t\t\t\tcase \"student\":\n\t\t\t\t\treturn scorm.getStudentName();\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.getCustomState(name);\n\t\t\t}\n\t\t},\n\n\t\tset: function(name, value) {\n\t\t\t//Convert arguments to array and drop the 'name' parameter\n\t\t\tvar args = [].slice.call(arguments, 1);\n\t\t\tvar isObject = typeof name == \"object\";\n\n\t\t\tif (isObject) {\n\t\t\t\tvalue = name;\n\t\t\t\tname = \"suspendData\";\n\t\t\t}\n\n\t\t\tif (this.useTemporaryStore()) {\n\t\t\t\tif (isObject) {\n\t\t\t\t\ttemporaryStore = _.extend(temporaryStore, value);\n\t\t\t\t} else {\n\t\t\t\t\ttemporaryStore[name] = value;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tswitch (name.toLowerCase()) {\n\t\t\t\tcase \"interaction\":\n\t\t\t\t\treturn scorm.recordInteraction.apply(scorm, args);\n\t\t\t\tcase \"location\":\n\t\t\t\t\treturn scorm.setLessonLocation.apply(scorm, args);\n\t\t\t\tcase \"score\":\n\t\t\t\t\treturn scorm.setScore.apply(scorm, args);\n\t\t\t\tcase \"status\":\n\t\t\t\t\treturn scorm.setStatus.apply(scorm, args);\n\t\t\t\tcase \"student\":\n\t\t\t\t\treturn false;\n\t\t\t\tcase \"suspenddata\":\n\t\t\t\tdefault:\n\t\t\t\t\tif (isObject) {\n\t\t\t\t\t\tsuspendDataStore = _.extend(suspendDataStore, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsuspendDataStore[name] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dataAsString = JSON.stringify(suspendDataStore);\n\t\t\t\t\treturn (suspendDataRestored) ? scorm.setSuspendData(dataAsString) : false;\n\t\t\t}\n\t\t},\n\n\t\tgetCustomStates: function() {\n\t\t\tvar isSuspendDataStoreEmpty = _.isEmpty(suspendDataStore);\n\t\t\tif (!isSuspendDataStoreEmpty && suspendDataRestored) return _.clone(suspendDataStore);\n\n\t\t\tvar dataAsString = scorm.getSuspendData();\n\t\t\tif (dataAsString === \"\" || dataAsString === \" \" || dataAsString === undefined) return {};\n\n\t\t\tvar dataAsJSON = JSON.parse(dataAsString);\n\t\t\tif (!isSuspendDataStoreEmpty && !suspendDataRestored) dataAsJSON = _.extend(dataAsJSON, suspendDataStore);\n\t\t\treturn dataAsJSON;\n\t\t},\n\n\t\tgetCustomState: function(name) {\n\t\t\tvar dataAsJSON = this.getCustomStates();\n\t\t\treturn dataAsJSON[name];\n\t\t},\n\t\t\n\t\tuseTemporaryStore: function() {\n\t\t\tvar cfg = Adapt.config.get('_spoor');\n\t\t\t\n\t\t\tif (!scorm.lmsConnected || (cfg && cfg._isEnabled === false)) return true;\n\t\t\treturn false;\n\t\t}\n\t\t\n\t});\n\n});\n\n",
    "define('extensions/adapt-contrib-spoor/js/adapt-contrib-spoor',[\n  'coreJS/adapt',\n  './scorm',\n  './adapt-stateful-session',\n  './adapt-offlineStorage-scorm'\n], function(Adapt, scorm, adaptStatefulSession) {\n\n  //SCORM session manager\n\n  var Spoor = _.extend({\n\n    _config: null,\n\n  //Session Begin\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"configModel:dataLoaded\", this.onConfigLoaded);\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onDataReady);\n    },\n\n    onConfigLoaded: function() {\n      if (!this.checkConfig()) return;\n\n      this.configureAdvancedSettings();\n\n      scorm.initialize();\n\n      this.setupEventListeners();\n    },\n\n    onDataReady: function() {\n      adaptStatefulSession.initialize();\n    },\n\n    checkConfig: function() {\n      this._config = Adapt.config.has('_spoor') \n        ? Adapt.config.get('_spoor')\n        : false;\n\n      if (this._config && this._config._isEnabled !== false) return true;\n      \n      return false;\n    },\n\n    configureAdvancedSettings: function() {\n      if(this._config._advancedSettings) {\n        var settings = this._config._advancedSettings;\n\n        if(settings._showDebugWindow) scorm.showDebugWindow();\n\n        scorm.setVersion(settings._scormVersion || \"1.2\");\n\n        if(settings.hasOwnProperty(\"_suppressErrors\")) {\n          scorm.suppressErrors = settings._suppressErrors;\n        }\n\n        if(settings.hasOwnProperty(\"_commitOnStatusChange\")) {\n          scorm.commitOnStatusChange = settings._commitOnStatusChange;\n        }\n\n        if(settings.hasOwnProperty(\"_timedCommitFrequency\")) {\n          scorm.timedCommitFrequency = settings._timedCommitFrequency;\n        }\n\n        if(settings.hasOwnProperty(\"_maxCommitRetries\")) {\n          scorm.maxCommitRetries = settings._maxCommitRetries;\n        }\n\n        if(settings.hasOwnProperty(\"_commitRetryDelay\")) {\n          scorm.commitRetryDelay = settings._commitRetryDelay;\n        }\n      } else {\n        /**\n        * force use of SCORM 1.2 by default - some LMSes (SABA/Kallidus for instance) present both APIs to the SCO and, if given the choice,\n        * the pipwerks code will automatically select the SCORM 2004 API - which can lead to unexpected behaviour.\n        */\n        scorm.setVersion(\"1.2\");\n      }\n\n      /**\n      * suppress SCORM errors if 'nolmserrors' is found in the querystring\n      */\n      if(window.location.search.indexOf('nolmserrors') != -1) scorm.suppressErrors = true;\n    },\n\n    setupEventListeners: function() {\n      this._onWindowUnload = _.bind(this.onWindowUnload, this);\n      $(window).on('unload', this._onWindowUnload);\n    },\n\n  //Session End\n\n    onWindowUnload: function() {\n      scorm.finish();\n\n      $(window).off('unload', this._onWindowUnload);\n    }\n    \n  }, Backbone.Events);\n\n  Spoor.initialize();\n\n});\n\n",
    "define('extensions/adapt-contrib-trickle/js/Defaults/DefaultTrickleConfig',[],function() {\n\n\tvar DefaultTrickleConfig = {\n\t\t_isEnabled: true,\n\t\t_scrollDuration: 500,\n\t\t_autoScroll: true,\n\t\t_onChildren: true,\n\t\t_button: {\n\t\t\t_isEnabled: true,\n\t\t\t_isFullWidth: true,\n\t\t\t_styleBeforeCompletion: \"hidden\",\n\t\t\t_styleAfterClick: \"hidden\",\n\t\t\t_autoHide: true,\n\t\t\ttext: \"Continue\",\n\t\t\t_component: \"trickle-button\"\n\t\t},\n\t\t_stepLocking: {\n\t        _isEnabled: true, \n\t        _isCompletionRequired: true,\n\t        _isLockedOnRevisit: false\n\t    },\n\t    _isInteractionComplete: false,\n\t    _scrollTo: \"@block +1\"\n\t};\n\n\treturn DefaultTrickleConfig;\n});\n",
    "define('extensions/adapt-contrib-trickle/js/DataTypes/StructureType',[],function() {\n\t\n\tfunction StructureType(id, plural, level) {\n\t\tthis._id = id;\n\t\tthis._plural = plural;\n\t\tthis._level = level;\n\t\tStructureType.levels+=1;\n\t}\n\tStructureType.levels = 0;\n\n\tStructureType.prototype = {};\n\n\tStructureType.prototype.toString = function() {\n\t\treturn this._id;\n\t};\n\n\tStructureType.fromString = function(value) {\n\t\tswitch (value) {\n\t\tcase StructureType.Page._id: case StructureType.Page._plural:\n\t\t\treturn StructureType.Page;\n\t\tcase StructureType.Article._id: case StructureType.Article._plural:\n\t\t\treturn StructureType.Article;\n\t\tcase StructureType.Block._id: case StructureType.Block._plural:\n\t\t\treturn StructureType.Block;\n\t\tcase StructureType.Component._id: case StructureType.Component._plural:\n\t\t\treturn StructureType.Component;\n\t\t}\n\t};\n\n\tStructureType.fromInt = function(value) {\n\t\tswitch (value) {\n\t\tcase StructureType.Page._level: \n\t\t\treturn StructureType.Page;\n\t\tcase StructureType.Article._level: \n\t\t\treturn StructureType.Article;\n\t\tcase StructureType.Block._level: \n\t\t\treturn StructureType.Block;\n\t\tcase StructureType.Component._level: \n\t\t\treturn StructureType.Component;\n\t\t}\n\t};\n\n\tStructureType.Page = new StructureType(\"page\", \"pages\", 1);\n\tStructureType.Article = new StructureType(\"article\", \"articles\", 2);\n\tStructureType.Block = new StructureType(\"block\", \"blocks\", 3);\n\tStructureType.Component = new StructureType(\"component\", \"components\", 4);\n\n\treturn StructureType;\n\n});\n",
    "define('extensions/adapt-contrib-trickle/js/Utility/Models',[\n    'coreJS/adapt',\n    '../DataTypes/StructureType'\n], function(Adapt, StructureType) {\n\n    var ModelUtilities = {\n        \n        /*\n        * Fetchs the sub structure of an id as a flattened array\n        *\n        *   Such that the tree:\n        *       { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }\n        *\n        *   will become the array (parent first = false):\n        *       [ c1, c2, b1, c3, c4, b2, a1, c5, c6, b3, a2 ]\n        *\n        *   or (parent first = true):\n        *       [ a1, b1, c1, c2, b2, c3, c4, a2, b3, c5, c6 ]\n        *\n        * This is useful when sequential operations are performed on the page/article/block/component hierarchy.\n        */\n        getDescendantsFlattened: function(id, parentFirst) {\n            var model = Adapt.findById(id);\n            if (model === undefined) return undefined;\n\n            var descendants = [];\n\n            var modelStructureType = StructureType.fromString(model.get(\"_type\"));\n            var isLastType = (modelStructureType._level === StructureType.levels);\n\n            if (isLastType) {\n                descendants.push(model);\n                return new Backbone.Collection(descendants);\n            }\n\n            var children = model.getChildren();\n\n            for (var i = 0, l = children.models.length; i < l; i++) {\n\n                var child = children.models[i];\n\n                var modelStructureType = StructureType.fromString(child.get(\"_type\"));\n                var isLastType = (modelStructureType._level === StructureType.levels);\n\n                if (isLastType) {\n\n                    descendants.push(child);\n\n                } else {\n\n                    var subDescendants = ModelUtilities.getDescendantsFlattened(child.get(\"_id\"), parentFirst);\n                    if (parentFirst == true) descendants.push(child);\n                    descendants = descendants.concat(subDescendants.models);\n                    if (parentFirst != true) descendants.push(child);\n\n                }\n\n            }\n\n            return new Backbone.Collection(descendants);\n        },\n\n        /*\n        * Returns a relative structural item from the Adapt hierarchy\n        *   \n        *   Such that in the tree:\n        *       { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }\n        *\n        *       findRelative(modelC1, \"@block +1\") = modelB2;\n        *       findRelative(modelC1, \"@component +4\") = modelC5;\n        *\n        */\n        findRelative: function(model, relativeString) {\n            //return a model relative to the specified one\n            var pageModel;\n            if (model.get(\"_type\") == \"page\") pageModel = model;\n            else pageModel = model.findAncestor(\"contentObjects\");\n\n            var pageId = pageModel.get(\"_id\");\n            var pageDescendants = ModelUtilities.getDescendantsFlattened(pageId).toJSON();\n\n            function parseRelative(relativeString) {\n                var type = relativeString.substr(0, _.indexOf(relativeString, \" \"));\n                var offset = parseInt(relativeString.substr(type.length));\n                type = type.substr(1);\n\n                /*RETURN THE TYPE AND OFFSET OF THE SCROLLTO\n                * \"@component +1\"  : \n                * {\n                *       type: \"component\",\n                *       offset: 1\n                * }\n                */\n                return { \n                    type: type,\n                    offset: offset\n                };\n            }\n\n            function getTypeOffset(model) {\n                var modelType = StructureType.fromString(model.get(\"_type\"));\n\n                //CREATE HASH FOR MODEL OFFSET IN PARENTS ACCORDING TO MODEL TYPE\n                var offsetCount = {};\n                for (var i = modelType._level - 1, l = 0; i > l; i--) {\n                    offsetCount[StructureType.fromInt(i)._id] = -1;\n                }\n\n                return offsetCount;\n            }\n\n            var pageDescendantIds = _.pluck(pageDescendants, \"_id\");\n\n            var modelId = model.get(\"_id\");\n            var fromIndex = _.indexOf( pageDescendantIds, modelId );\n\n            var typeOffset = getTypeOffset(model);\n            var relativeInstructions = parseRelative(relativeString);\n\n            for (var i = fromIndex +1, l = pageDescendants.length; i < l; i++) {\n                var item = pageDescendants[i];\n\n                if (!typeOffset[item._type]) typeOffset[item._type] = 0;\n\n                typeOffset[item._type]++;\n\n                if (typeOffset[relativeInstructions.type] >= relativeInstructions.offset) {\n                    if (!$(\".\"+item._id).is(\":visible\")) {\n                        //IGNORE VISIBLY HIDDEN ELEMENTS\n                        relativeInstructions.offset++;\n                        continue;\n                    }\n\n                    return Adapt.findById(item._id);\n                }\n            }\n\n            return undefined;\n        },\n\n        isLastStructureType: function(model) {\n            var modelStructureType = StructureType.fromString(model.get(\"_type\"));\n            var isLastType = (modelStructureType._level === StructureType.levels);\n            return isLastType;\n        }\n    };\n\n    return ModelUtilities;\n\n});\n\n",
    "define('extensions/adapt-contrib-trickle/js/trickle-tutorPlugin',[\n    'coreJS/adapt', \n], function(Adapt) {\n\n    var TrickleTutorPlugin = _.extend({\n\n        onDataReady: function() {\n            this.setupEventListeners();\n        },\n\n        onStepLockingWaitCheck: function(model) {\n            if ( model.get(\"_type\") !== \"component\" || !model.get(\"_isQuestionType\") || !model.get(\"_canShowFeedback\")) return;\n\n            if (this._isTrickleWaiting) return;\n            Adapt.trigger(\"steplocking:wait\");\n            this._isTrickleWaiting = true;\n        },\n\n        onTutorOpened: function() {\n            if (this._isTrickleWaiting) return;\n            Adapt.trigger(\"steplocking:wait\");\n        },\n\n        onTutorClosed: function() {\n\n            if (!this._isTrickleWaiting) return;\n\n            Adapt.trigger(\"steplocking:unwait\");\n            this._isTrickleWaiting = false;\n        },\n\n        _isTrickleWaiting: false,\n\n        initialize: function() {\n            this.listenToOnce(Adapt, \"app:dataReady\", this.onDataReady);\n        },\n\n        setupEventListeners: function() {\n            this.listenTo(Adapt, \"steplocking:waitCheck\", this.onStepLockingWaitCheck);\n            this.listenTo(Adapt, \"tutor:open\", this.onTutorOpened);\n            this.listenTo(Adapt, \"tutor:closed\", this.onTutorClosed);\n        }\n\n    }, Backbone.Events);\n\n    TrickleTutorPlugin.initialize();\n\n})\n;\n",
    "define('extensions/adapt-contrib-trickle/js/trickle-buttonView',[\n    'coreJS/adapt',\n    'coreViews/componentView'\n], function(Adapt, ComponentView) {\n\n    var completionAttribute = \"_isInteractionComplete\";\n\n    var TrickleButtonView = ComponentView.extend({\n\n        onEnabledChange: function(model, value) {\n            this.setDisabledState(!value);\n        },\n\n        onSteplockingCheckWait: function(parentModel) {\n            this.checkCurrentInteraction(parentModel);\n        },\n\n        onInteractionRequired: function(parentModel) {\n            this.showButton(parentModel); \n        },\n\n        onOnScreen: function() {\n            //show or hide the button when button is inview/outview\n            this.checkAutoHide( this.isOnScreen() );\n        },\n\n        onClick: function() {\n            if (!this.model.get(\"_isLocking\")) {\n                this.completeJump();\n            } else {\n                this.completeLock();\n            }\n        },\n\n        onRemove: function() {\n            this.undelegateEvents();\n            this.$el.remove();\n        },\n\n        events: {\n            \"click .trickle-button-inner > *\": \"onClick\",\n            \"onscreen\": \"onOnScreen\"\n        },\n\n        _isTrickleWaiting: false,\n\n        initialize: function() {\n            var trickleConfig = Adapt.config.get(\"_trickle\");\n            if (trickleConfig && trickleConfig._completionAttribute) completionAttribute = trickleConfig._completionAttribute;\n\n            this.addCustomClasses();\n            ComponentView.prototype.initialize.apply(this);\n\n            this.model.set(\"_isEnabled\", this.isInEnabledState());\n\n            this.checkAutoHide(this.isInVisibleState(), false);\n        },\n\n        addCustomClasses: function() {\n            if (!this.model.get(\"_trickle\")._button || !this.model.get(\"_trickle\")._button._className) return;\n            \n            this.$el.addClass(this.model.get(\"_trickle\")._button._className);\n        },\n\n        postRender: function() {\n            this.setDisabledState( !this.isInEnabledState() );\n\n            this.setReadyStatus();\n            this.setupEventListeners();\n        },\n\n        setDisabledState: function(bool) {\n            if (bool) this.$el.find(\".trickle-button-inner > *\").addClass(\"disabled\").attr(\"disabled\",\"disabled\");\n            else this.$el.find(\".trickle-button-inner > *\").removeClass(\"disabled\").removeAttr(\"disabled\");\n        },\n\n        setupEventListeners: function() {\n\n            var trickleConfig = this.model.get(\"_trickle\");\n            if (!trickleConfig._button._autoHide) this.$el.off(\"onscreen\");\n\n            this.listenTo(Adapt, \"trickle:interactionRequired\", this.onInteractionRequired);\n            this.listenTo(Adapt, \"steplocking:waitCheck\", this.onSteplockingCheckWait);\n            this.listenTo(this.model, \"change:_isEnabled\", this.onEnabledChange);\n            this.listenTo(this.model, \"change:_isVisible\", this.onVisibilityChange);\n            this.listenToOnce(Adapt, \"remove\", this.onRemove);\n            this.listenToOnce(Adapt, \"trickle:kill\", this.onRemove);\n        },\n\n        toggleLock: function(bool) {\n            if (!this.isStepLockingEnabled()) return;\n\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            if (bool) {\n\n                this.$el.find('.component-inner').addClass(\"locking\");\n\n                this.model.set(\"_isLocking\", true);\n\n                this.steplockingWait();\n\n            } else {\n\n                this.$el.find('.component-inner').removeClass(\"locking\");\n\n                this.model.set(\"_isLocking\", false);\n\n                this.steplockingUnwait();\n            }\n        },\n\n        isStepLockingEnabled: function() {\n            var trickleConfig = this.model.get(\"_trickle\");\n            if (trickleConfig && trickleConfig._stepLocking && trickleConfig._stepLocking._isEnabled) {\n                return true;\n            }\n            return false;\n        },\n\n        steplockingWait: function() {\n            if (!this._isTrickleWaiting) Adapt.trigger(\"steplocking:wait\");\n            this._isTrickleWaiting = true;\n        },\n\n        steplockingUnwait: function() {\n            if (this._isTrickleWaiting) Adapt.trigger(\"steplocking:unwait\");\n            this._isTrickleWaiting = false;\n        },\n\n        checkCurrentInteraction: function(parentModel) {\n            if (parentModel.get(\"_id\") != this.model.get(\"_parentId\")) return;\n\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            if (trickleConfig._isInteractionComplete) return;\n\n            this.model.set(\"_isEnabled\", this.isInEnabledState() );\n        },\n\n        showButton: function(parentModel) {\n            //check if the interaction required event is intended for this button\n            if (parentModel.get(\"_id\") != this.model.get(\"_parentId\")) return;\n\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            if (trickleConfig._isInteractionComplete) return;\n\n            this.model.set(\"_isEnabled\",  this.isInEnabledState() );\n\n            this.toggleLock(true);\n\n            this.checkAutoHide(true, true);\n        },\n\n        checkAutoHide: function(bool, animate) {\n            \n            if (!this.isInVisibleState()) {\n                //override visible state if button should not be visible\n                bool = false;\n            }\n\n            this.model.set(\"_isVisible\", bool);\n\n            var trickleConfig = this.model.get(\"_trickle\");\n            if (!trickleConfig._button._autoHide) return;\n\n            if (this.model.get(\"_isHidden\") == bool) return;\n\n            this.model.set(\"_isHidden\", bool);\n\n            if (animate === false || Adapt.config.get('_disableAnimation')) {\n                //show or hide without animations\n                if (!bool) this.$('.component-inner').css(\"visibility\", \"hidden\");\n                else if (bool) this.$('.component-inner').css(\"visibility\", \"visible\");\n            } else {\n                //perform animation from visible<>hidden\n                if (bool) this.$('.component-inner').css(\"visibility\", \"visible\");\n                this.$('.component-inner').velocity(\"stop\", true).velocity({opacity: bool ? 1 : 0 }, {\n                    duration: 250,\n                    complete: _.bind(function() {\n                        if (!bool) this.$('.component-inner').css(\"visibility\", \"hidden\");\n                    }, this)\n                })\n            }\n            \n        },\n\n        isInEnabledState: function() {\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            var _isEnabled = true;\n\n            var isEnabledBeforeCompletion = false;\n            //Check to see if autohide component should always be visible or if it has a precompletion hidden state\n            if (trickleConfig._button._styleBeforeCompletion == \"visible\") {\n                isEnabledBeforeCompletion = (!trickleConfig._stepLocking._isEnabled || !trickleConfig._stepLocking._isCompletionRequired);\n            }\n\n            var isEnabledAfterClick = (trickleConfig._button._styleAfterClick != \"hidden\" && trickleConfig._button._styleAfterClick != \"disabled\");\n\n            var parentModel = Adapt.findById(this.model.get(\"_parentId\"));\n            var isComplete = parentModel.get(completionAttribute);\n            var isClicked = trickleConfig._isInteractionComplete;\n\n            var isBeforeCompletionEnabled = (!isComplete && !isClicked && isEnabledBeforeCompletion);\n            var isAfterCompletionEnabled = (isClicked && isEnabledAfterClick);\n            var isInInteractionEnabled = (isComplete && !isClicked);\n\n            _isEnabled = isBeforeCompletionEnabled || isAfterCompletionEnabled || isInInteractionEnabled;\n\n            return _isEnabled;\n        },\n\n        isInVisibleState: function() {\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            var _isVisible = true;\n\n            var isVisibleBeforeCompletion = true;\n            //Check to see if autohide component should always be visible or if it has a precompletion hidden state\n            if (trickleConfig._button._styleBeforeCompletion == \"hidden\") {\n                isVisibleBeforeCompletion = (trickleConfig._button._styleBeforeCompletion != \"hidden\");\n            }\n\n            var isVisibleAfterClick = (trickleConfig._button._styleAfterClick != \"hidden\");\n\n            var parentModel = Adapt.findById(this.model.get(\"_parentId\"));\n            var isComplete = parentModel.get(completionAttribute);\n            var isClicked = trickleConfig._isInteractionComplete;\n\n            var isOnScreen = true;\n            if (trickleConfig._button._autoHide) {\n                isOnScreen = this.isOnScreen();\n            }\n\n            var isBeforeCompletionVisible = (!isComplete && !isClicked && isVisibleBeforeCompletion && isOnScreen);\n            var isInInteractionVisible = (isComplete && !isClicked && isOnScreen);\n            var isAfterCompletionVisible = (isClicked && isVisibleAfterClick && isOnScreen);\n\n            _isVisible = isBeforeCompletionVisible || isAfterCompletionVisible || isInInteractionVisible;\n\n\n            return _isVisible;\n\n        },\n\n        isOnScreen: function() {\n            var onscreen = false;\n            var measurements = this.$el.onscreen();\n            var parent = this.$el.offsetParent();\n            var isParentHtml = parent.is(\"html\");\n            if (!isParentHtml && measurements.bottom > -(this.$(\".component-inner\").outerHeight()*2)) {\n                onscreen = true;\n            }\n            return onscreen;\n        },\n\n        completeJump: function() {\n\n            var trickleConfig = this.model.get(\"_trickle\");\n            trickleConfig._isInteractionComplete = true;\n\n            this.updateState();\n\n            this.scrollTo();\n        },\n\n        updateState: function() {\n\n            var trickleConfig = this.model.get(\"_trickle\");\n\n            switch (trickleConfig._button._styleAfterClick) {\n            case \"disabled\": case \"hidden\":\n                this.model.set(\"_isEnabled\", this.isInEnabledState() );\n                this.$el.off(\"onscreen\");\n                this.stopListening();\n                break;\n            case \"scroll\":\n                this.model.set(\"_isEnabled\", this.isInEnabledState() );\n                break;\n            }\n\n            this.checkAutoHide(true, true);\n        },\n\n        scrollTo: function() {\n            var trickleConfig = this.model.get(\"_trickle\");\n            var scrollTo = trickleConfig._scrollTo;\n            var parentModel = Adapt.findById(this.model.get(\"_parentId\"));\n            Adapt.trigger(\"trickle:relativeScrollTo\", parentModel, scrollTo);\n        },\n\n        completeLock: function() {\n\n            var trickleConfig = this.model.get(\"_trickle\");\n            trickleConfig._isInteractionComplete = true;\n\n            this.toggleLock(false);\n\n            //as this is an 'out-of-course' component, \n            //we must manually ask trickle to consider the completion of its parent (possibly for a second time)\n            var parentModel = Adapt.findById(this.model.get(\"_parentId\"));\n            Adapt.trigger(\"trickle:interactionComplete\", parentModel);\n            \n            this.updateState();\n        }\n\n    });\n\n    Adapt.register(\"trickle-button\", TrickleButtonView);\n\n    return TrickleButtonView;\n});\n\n",
    "define('extensions/adapt-contrib-trickle/js/Defaults/FullWidthButtonConstants',[],function() {\n\n\tvar FullWidthButtonConstants = {\n\t\t_stepLocking: {\n\t\t\t_isEnabled: true\n\t\t}\n\t};\n\t\n\treturn FullWidthButtonConstants;\n});\n",
    "define('extensions/adapt-contrib-trickle/js/trickle-buttonModel',[\n    'coreModels/adaptModel',\n    './Defaults/FullWidthButtonConstants'\n], function(AdaptModel, FullWidthButtonConstants) {\n\n    var TrickleButtonModel = AdaptModel.extend({\n        \n        initialize: function(options) {\n            if (options.trickleConfig === undefined) return;\n            if (options.parentModel === undefined) return;\n\n            var parentModel = options.parentModel;\n            var trickleConfig = options.trickleConfig;\n\n            var isFullWidth = (trickleConfig._button._isFullWidth);\n            if (isFullWidth) {\n                //setup configuration with FullWidth type constants\n                $.extend(true, trickleConfig, FullWidthButtonConstants);\n            }\n\n            this.setupButtonText(trickleConfig);\n\n            this.set({\n                _id: \"trickle-button-\"+parentModel.get(\"_id\"),\n                _type: \"component\",\n                _component: \"trickle-button\",\n                //turn off accessibility state for button component\n                _classes: \"no-state\" + (isFullWidth ? \" trickle-full-width\" : \"\"),\n                _layout: \"full\",\n                _parentId: parentModel.get(\"_id\"),\n                _parentType: parentModel.get(\"_type\"),\n                _parentComponent: parentModel.get(\"_component\"),\n                _trickle: trickleConfig,\n                _isVisible: true,\n                _isHidden: false,\n                _isAvailable: true,\n                _isEnabled: true,\n                _isLocking: trickleConfig._isLocking,\n                _isComplete: trickleConfig._isInteractionComplete,\n                _isInteractionComplete: trickleConfig._isInteractionComplete,\n                _index: trickleConfig._index\n            });\n\n        },\n\n        setupButtonText: function(trickleConfig) {\n            if (trickleConfig._isLastItem) {\n                //Apply final text to last button\n                if (trickleConfig._button && trickleConfig._button.finalText) {\n                    var previousText = trickleConfig._button.text;\n\n                    trickleConfig._button.text = trickleConfig._button.finalText,\n                    trickleConfig._button.previousText = previousText;\n                }\n            } else {\n                //Reset button to previous text\n                if (trickleConfig && trickleConfig._button.previousText) {\n                    trickleConfig._button.text = trickleConfig._button.previousText;\n                    trickleConfig._button.previousText = null;\n                }\n            }\n        }\n\n    });\n\n    return TrickleButtonModel;\n\n});\n",
    "define('extensions/adapt-contrib-trickle/js/trickle-buttonPlugin',[\n    'coreJS/adapt',\n    './trickle-buttonView',\n    './trickle-buttonModel'\n], function(Adapt, TrickleButtonView, TrickleButtonModel) {\n\n    var completionAttribute = \"_isInteractionComplete\";\n\n    var TrickleButtonPlugin = {\n        \n        onInteractionInitialize: function(model) {\n            var trickleConfig = Adapt.config.get(\"_trickle\");\n            if (trickleConfig && trickleConfig._completionAttribute) completionAttribute = trickleConfig._completionAttribute;\n\n            TrickleButtonPlugin.createButton(model);\n        },\n\n        createButton: function(model) {\n            var trickleConfig = model.get(\"_trickle\");\n            if (!trickleConfig) return false;\n\n            if (!TrickleButtonPlugin.shouldRenderButton(model, trickleConfig)) return;\n            TrickleButtonPlugin.buildAndAppendButton(model, trickleConfig);\n        },\n\n        shouldRenderButton: function(model, trickleConfig) {\n            if (!trickleConfig._button._isEnabled) return false;\n            if (!trickleConfig._button._component == \"trickle-button\") return false;\n\n            return true;\n        },\n\n        buildAndAppendButton: function(model, trickleConfig) {\n            var $containerModelElement = $(\".\" + trickleConfig._id);\n\n            var buttonModel = new TrickleButtonModel({ \n                trickleConfig: trickleConfig, \n                parentModel: model \n            });\n\n            var buttonView = new TrickleButtonView({ \n                model: buttonModel, \n                nthChild: \"additional\" \n            });\n\n            $containerModelElement.append( buttonView.$el );\n        }\n    };\n\n    Adapt.on(\"trickle:interactionInitialize\", TrickleButtonPlugin.onInteractionInitialize);\n\n    return TrickleButtonPlugin;\n});\n",
    "//https://github.com/cgkineo/jquery.resize 2015-08-13\n\n(function() {\n\n  if ($.fn.off.elementResizeOriginalOff) return;\n\n\n  var orig = $.fn.on;\n  $.fn.on = function () {\n    if (arguments[0] !== \"resize\") return $.fn.on.elementResizeOriginalOn.apply(this, _.toArray(arguments));\n    if (this[0] === window) return $.fn.on.elementResizeOriginalOn.apply(this, _.toArray(arguments));\n\n    addResizeListener.call(this, (new Date()).getTime());\n\n    return $.fn.on.elementResizeOriginalOn.apply(this, _.toArray(arguments));\n  };\n  $.fn.on.elementResizeOriginalOn = orig;\n  var orig = $.fn.off;\n  $.fn.off = function () {\n    if (arguments[0] !== \"resize\") return $.fn.off.elementResizeOriginalOff.apply(this, _.toArray(arguments));\n    if (this[0] === window) return $.fn.off.elementResizeOriginalOff.apply(this, _.toArray(arguments));\n\n    removeResizeListener.call(this, (new Date()).getTime());\n\n    return $.fn.off.elementResizeOriginalOff.apply(this, _.toArray(arguments));\n  };\n  $.fn.off.elementResizeOriginalOff = orig;\n\n  var expando = $.expando;\n\n  //element + event handler storage\n  var resizeObjs = {};\n\n  //jQuery element + event handler attachment / removal\n  var addResizeListener = function(data) {\n      resizeObjs[data.guid + \"-\" + this[expando]] = { \n        data: data, \n        $element: $(this) \n      };\n  };\n\n  var removeResizeListener = function(data) {\n    try { \n      delete resizeObjs[data.guid + \"-\" + this[expando]]; \n    } catch(e) {\n\n    }\n  };\n\n  function checkLoopExpired() {\n    if ((new Date()).getTime() - loopData.lastEvent > 500) {\n      stopLoop()\n      return true;\n    }\n  }\n\n  function resizeLoop () {\n    if (checkLoopExpired()) return;\n\n    var resizeHandlers = getEventHandlers(\"resize\");\n\n    if (resizeHandlers.length === 0) {\n      //nothing to resize\n      stopLoop();\n      resizeIntervalDuration = 500;\n      repeatLoop();\n    } else {\n      //something to resize\n      stopLoop();\n      resizeIntervalDuration = 250;\n      repeatLoop();\n    }\n\n    if  (resizeHandlers.length > 0) {\n      var items = resizeHandlers;\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        triggerResize(item);\n      }\n    }\n\n  }\n\n  function getEventHandlers(eventName) {\n    var items = [];\n    \n    switch (eventName) {\n    case \"resize\":\n      for (var k in resizeObjs) {\n        items.push(resizeObjs[k]);\n      }\n      break;\n    }\n\n    return items;\n  }\n\n  function getDimensions($element) {\n      var height = $element.outerHeight();\n      var width = $element.outerWidth();\n\n      return {\n        uniqueMeasurementId: height+\",\"+width\n      };\n  }\n\n  function triggerResize(item) {\n    var measure = getDimensions(item.$element);\n    //check if measure has the same values as last\n    var isFirstRun = false;\n    if (item._resizeData === undefined) isFirstRun = true;\n    if (item._resizeData !== undefined && item._resizeData === measure.uniqueMeasurementId) return;\n    item._resizeData = measure.uniqueMeasurementId;\n    if (isFirstRun) return;\n    \n    //make sure to keep listening until no more resize changes are found\n    loopData.lastEvent = (new Date()).getTime();\n    \n    item.$element.trigger('resize');\n  }\n\n\n  //checking loop interval duration\n  var resizeIntervalDuration = 250;\n\n  var loopData = {\n    lastEvent: 0,\n    interval: null\n  };\n\n  //checking loop start and end\n  function startLoop() {\n    loopData.lastEvent = (new Date()).getTime();\n    if (loopData.interval !== null) {\n      stopLoop();\n    }\n    loopData.interval = setTimeout(resizeLoop, resizeIntervalDuration);\n  }\n\n  function repeatLoop() {\n    if (loopData.interval !== null) {\n      stopLoop();\n    }\n    loopData.interval = setTimeout(resizeLoop, resizeIntervalDuration);\n  }\n\n  function stopLoop() {\n    clearInterval(loopData.interval);\n    loopData.interval = null;\n  }\n\n  $('body').on(\"mousedown mouseup keyup keydown\", startLoop);\n  $(window).on(\"resize\", startLoop);\n\n\n})();\n\ndefine(\"extensions/adapt-contrib-trickle/js/lib/jquery.resize\", function(){});\n\n",
    "define('extensions/adapt-contrib-trickle/js/adapt-contrib-trickle',[\n    'coreJS/adapt',\n    './Defaults/DefaultTrickleConfig',\n    './Utility/Models',\n    './trickle-tutorPlugin',\n    './trickle-buttonPlugin',\n    './lib/jquery.resize'\n], function(Adapt, DefaultTrickleConfig, Models) {\n\n    var completionAttribute = \"_isInteractionComplete\";\n\n    var Trickle = _.extend({\n\n        onDataReady: function() {\n            var trickleConfig = Adapt.config.get(\"_trickle\");\n            if (trickleConfig && trickleConfig._completionAttribute) completionAttribute = trickleConfig._completionAttribute;\n\n            this.setupEventListeners();\n        },\n\n        onPagePreRender: function(view) {\n            this.initializePage(view);\n        },\n\n        onArticlePreRender: function(view) {\n            this.checkApplyTrickleToChildren( view.model );\n        },\n\n        onPagePostRender: function(view) {\n            this.resizeBodyToCurrentIndex();\n        },\n\n        onArticleAndBlockPostRender: function(view) {\n            this.setupStep( view.model );\n        },\n\n        onPageReady: function(view) {\n            this.initializeStep();\n            this.resizeBodyToCurrentIndex();\n            this._listenToResizeEvent = true;\n            this._isPageReady = true;\n            Adapt.trigger(\"trickle:pageReady\");\n        },\n\n        onAnyComplete: function(model, value, isPerformingCompletionQueue) {\n            this.queueOrExecuteCompletion(model, value, isPerformingCompletionQueue);\n        },\n\n        onStepUnlockWait: function() {\n            this._waitForUnlockRequestsCount++;\n        },\n\n        onStepUnlockUnwait: function() {\n            this._waitForUnlockRequestsCount--;\n            if (this._waitForUnlockRequestsCount < 0) this._waitForUnlockRequestsCount = 0;\n\n            if (this._isFinished) return;\n\n            var descendant = this.getCurrentStepModel();\n            this.checkStepComplete(descendant);\n        },\n\n        onWrapperResize: function() {\n            if (!this._listenToResizeEvent) {\n                return;\n            }\n\n            this.resizeBodyToCurrentIndex();\n            this._listenToResizeEvent = true;\n        },\n\n        onRemove: function(view) {\n            this.endTrickle();\n        },\n\n\n        model: new Backbone.Model({}),\n\n        _listenToResizeEvent: false,\n        _isPageInitialized: false,\n        _isPageReady: false,\n        _isFinished: false,\n        _currentStepIndex: 0,\n        _descendantsChildrenFirst: null,\n        _descendantsParentFirst: null,\n        _pageView: null,\n        _isTrickleOn: false,\n\n        initialize: function() {\n            this.listenToOnce(Adapt, \"app:dataReady\", this.onDataReady);\n        },\n\n        setupEventListeners: function() {\n            this._onWrapperResize = _.bind(Trickle.onWrapperResize, Trickle);\n            $(\"#wrapper\").on('resize', this._onWrapperResize );\n\n            this.listenTo(Adapt, \"remove\", this.onRemove);\n            this.listenTo(Adapt, \"pageView:preRender\", this.onPagePreRender);\n            this.listenTo(Adapt, \"pageView:postRender\", this.onPagePostRender);\n            this.listenTo(Adapt, \"pageView:ready\", this.onPageReady);\n\n            this.listenTo(Adapt, \"articleView:preRender\", this.onArticlePreRender);\n            this.listenTo(Adapt, \"blockView:postRender articleView:postRender\", this.onArticleAndBlockPostRender);\n\n            this.listenTo(Adapt.articles, \"change:\"+completionAttribute, this.onAnyComplete);\n            this.listenTo(Adapt.blocks, \"change:\"+completionAttribute, this.onAnyComplete);\n            this.listenTo(Adapt.components, \"change:\"+completionAttribute, this.onAnyComplete);           \n\n            this.listenTo(Adapt, \"trickle:interactionComplete\", this.checkStepComplete);\n\n            this.listenTo(Adapt, \"steplocking:wait\", this.onStepUnlockWait);\n            this.listenTo(Adapt, \"steplocking:unwait\", this.onStepUnlockUnwait);\n\n            this.listenTo(Adapt, \"trickle:relativeScrollTo\", this.relativeScrollTo);\n\n            this.listenTo(Adapt, \"trickle:kill\", this.endTrickle);\n        },\n\n        initializePage: function(view) {\n            var pageId = view.model.get(\"_id\");\n\n            var pageConfig = Adapt.course.get(\"_trickle\");\n            if (pageConfig && pageConfig._isEnabled === false) return;\n\n            this._descendantsChildrenFirst =  Models.getDescendantsFlattened(pageId);\n            this._descendantsParentFirst = Models.getDescendantsFlattened(pageId, true);\n            this._currentStepIndex = 0;\n            this._isFinished = false;\n            this._listenToResizeEvent = false;\n            this._pageView = view;\n\n            this.checkResetChildren();\n\n            this.initializeStepUnlockWait();\n\n            this._isPageInitialized = true;\n\n        },\n\n        checkResetChildren: function() {\n            var descendantsChildrenFirst = this._descendantsChildrenFirst;\n            for (var i = 0, model; model = descendantsChildrenFirst.models[i++];) {\n                this.checkResetModel(model);\n            }\n        },\n\n        checkResetModel: function(model) {\n            var trickleConfig = this.getModelTrickleConfig(model);\n            if (!trickleConfig) return;\n            if (trickleConfig._onChildren) return;\n\n            if (!trickleConfig._stepLocking || !trickleConfig._stepLocking._isEnabled == true) return;      \n            \n            if (model.get(completionAttribute) && !trickleConfig._isLocking) trickleConfig._isInteractionComplete = true;\n\n            if (!trickleConfig._isInteractionComplete) {\n                \n                trickleConfig._isLocking = true;\n\n            }\n\n            if (trickleConfig._stepLocking._isLockedOnRevisit || \n                (trickleConfig._stepLocking._isCompletionRequired && !model.get(completionAttribute))) {\n\n                trickleConfig._isInteractionComplete = false;\n                trickleConfig._isLocking = true;\n\n            }\n\n        },\n\n        getModelTrickleConfig: function(model) {\n\n            function initializeModelTrickleConfig(model, parent) {\n                var trickleConfig = model.get(\"_trickle\");\n\n                var courseConfig = Adapt.course.get(\"_trickle\");\n                if (courseConfig && courseConfig._isEnabled === false) return false;\n\n                var trickleConfig = $.extend(true, \n                    {}, \n                    DefaultTrickleConfig, \n                    trickleConfig,\n                    { \n                        _id: model.get(\"_id\"), \n                        _areDefaultsSet: true,\n                        _index: parent.getModelPageIndex(model)\n                    }\n                );\n\n                if (model.get(\"_type\") != \"article\") {\n                    trickleConfig._onChildren = false;\n                }\n\n                var isLastPageItem = ( trickleConfig._index == parent._descendantsChildrenFirst.length - 2 );\n                if (isLastPageItem && model.get(\"_type\") != \"article\") {\n                    return false;\n                }\n\n                model.set(\"_trickle\", trickleConfig);\n\n                return true;\n            }\n\n            var trickleConfig = model.get(\"_trickle\");\n            if (trickleConfig === undefined) return false;\n\n            //if has been initialized already, return;\n            if (trickleConfig._areDefaultsSet) return trickleConfig;\n\n            if (!initializeModelTrickleConfig(model, this)) return false;\n            \n            return model.get(\"_trickle\");\n        },\n\n        getModelPageIndex: function(model) {\n            var descendants = this._descendantsChildrenFirst.toJSON();\n            var pageDescendantIds = _.pluck(descendants, \"_id\");\n\n            var id = model.get(\"_id\");\n            var index = _.indexOf( pageDescendantIds, id );\n\n            return index;\n        },\n\n        initializeStepUnlockWait: function() {\n            this._waitForUnlockRequestsCount = 0;\n        },\n\n        checkApplyTrickleToChildren: function(model) {\n            if (model.get(\"_type\") != \"article\") return;\n\n            var trickleConfig = this.getModelTrickleConfig(model);\n            if (!trickleConfig) return;\n            if (!trickleConfig._onChildren) return;\n\n            this.applyTrickleToChildren(model, trickleConfig);\n        },\n\n        applyTrickleToChildren: function(model, parentTrickleConfig) {\n            var children = model.getChildren().models;\n            for (var i = 0, l = children.length; i < l; i++) {\n\n                var child = children[i];\n                var childTrickleConfig = child.get(\"_trickle\");\n\n                var isLastItem = (i == l - 1);\n\n                var isEnabled = true;\n                if (childTrickleConfig) {\n                    if (childTrickleConfig._isEnabled === false) {\n                        isEnabled = false;\n                    }\n                }\n                if (parentTrickleConfig) {\n                    if (parentTrickleConfig._isEnabled === false) {\n                        isEnabled = false;\n                    }\n                }\n\n                var trickleConfig = $.extend(true, \n                    {}, \n                    parentTrickleConfig, \n                    childTrickleConfig, \n                    { \n                        _id: child.get(\"_id\"),\n                        _onChildren: false,\n                        _isEnabled: isEnabled,\n                        _isLastItem: isLastItem,\n                        _index: this.getModelPageIndex(child)\n                    }\n                );\n\n                var isLastPageItem = ( trickleConfig._index == this._descendantsChildrenFirst.length - 2 );\n                if (isLastPageItem) {\n                    continue;\n                }\n\n                child.set(\"_trickle\", trickleConfig);\n\n                this.checkResetModel(child);\n                \n            }\n        },\n\n        resizeBodyToCurrentIndex: function() {\n            if (!this._isTrickleOn) return;\n            \n            if (this._isFinished) return this.showElements();\n\n            this._listenToResizeEvent = false;\n\n            this.showElements();\n\n            var id = this.getCurrentStepModel().get(\"_id\");\n            var $element = $(\".\" + id);\n\n            if ($element.length === 0) {\n                return;\n            }\n\n            var elementOffset = $element.offset();\n            var elementBottomOffset = elementOffset.top + $element.outerHeight();\n\n            $('body').css(\"height\", elementBottomOffset + \"px\");\n        },\n\n        showElements: function() {\n            if (!this._descendantsParentFirst) return;\n\n            var model = this.getCurrentStepModel();\n            var ancestors = this._descendantsParentFirst.models;\n            var ancestorIds = _.pluck(this._descendantsParentFirst.toJSON(), \"_id\");\n\n            var showToId;\n            if (model !== undefined) {\n                //Not at end of trickle\n                showToId = model.get(\"_id\");\n\n                var isLastType = Models.isLastStructureType(model);\n\n                if (!isLastType) {\n                    //If current step model is not a component type:\n                    //then show components for the selected parent\n                    var currentAncestorIndex = _.indexOf(ancestorIds, showToId);\n                    var ancestorChildComponents = ancestors[currentAncestorIndex].findDescendants(\"components\");\n\n                    showToId = ancestorChildComponents.models[ancestorChildComponents.models.length-1].get(\"_id\");\n                }\n\n            } else {\n                //At end, show all ids\n                showToId = ancestors[ancestors.length -1].get(\"_id\");\n            }\n            \n            \n            var showToIndex = _.indexOf(ancestorIds, showToId);\n\n            for (var i = 0, l = ancestors.length; i < l; i++) {\n                var itemModel = ancestors[i];\n                if (i <= showToIndex) {\n                    itemModel.set(\"_isVisible\", true, { pluginName: \"trickle\" });\n                } else {\n                    itemModel.set(\"_isVisible\", false, { pluginName: \"trickle\" });\n                }\n            }\n            \n        },\n\n        getCurrentStepModel: function() {\n            if (!this._descendantsChildrenFirst) return;\n\n            return this._descendantsChildrenFirst.models[this._currentStepIndex];\n        },\n\n        setupStep: function(model) {\n            var trickleConfig = this.getModelTrickleConfig(model)\n            if (!trickleConfig) return;\n            if (!trickleConfig._isEnabled) return;\n            if (trickleConfig._onChildren) return;\n\n            var isStepLocking = this.isModelStepLocking(model);\n            trickleConfig._isStepLocking = isStepLocking;\n\n            Adapt.trigger(\"trickle:interactionInitialize\", model);\n        },\n\n        initializeStep: function() {\n            if (this._isFinished) return;\n            this.initializeStepUnlockWait();\n\n            if (this.hasCurrentStepLock()) {\n                this.startTrickle();\n            } else {\n                this.endTrickle();\n            }\n        },\n\n        hasCurrentStepLock: function() {\n            var currentIndex = this._currentStepIndex;\n            var descendants = this._descendantsChildrenFirst.models;\n            for (var i = currentIndex, l = descendants.length; i < l; i++) {\n                var descendant = descendants[i];\n\n                if (!this.isModelStepLocking(descendant)) continue;\n\n                this._currentStepIndex = i;\n                \n\n                return true;\n            }\n\n            return false;\n        },\n\n        isModelStepLocking: function(model) {\n            var trickleConfig = this.getModelTrickleConfig(model)\n            if (!trickleConfig) return false;\n            if (trickleConfig._onChildren) return false;\n\n            if (trickleConfig._isEnabled === false) return false;\n            \n            if (!trickleConfig._stepLocking || !trickleConfig._stepLocking._isEnabled) return false;\n            \n            if (trickleConfig._isLocking) return true;\n            if (trickleConfig._isInteractionComplete) return false;\n\n            var isComplete = model.get(completionAttribute);\n            if (isComplete !== undefined) return !isComplete;\n\n            return true;\n        },\n\n        startTrickle: function() {\n            this._isTrickleOn = true;\n            $(\"html\").addClass(\"trickle\");\n            Adapt.trigger(\"steplocking:waitInitialize\");\n            this.resizeBodyToCurrentIndex();\n            this._listenToResizeEvent = true;\n        },\n\n        endTrickle: function() {\n            this._currentStepIndex = -1;\n            this._isFinished = true;\n            $(\"body\").css(\"height\", \"\");\n            $(\"html\").removeClass(\"trickle\");\n            this._pageView = null;\n            this.resizeBodyToCurrentIndex();\n            this._isPageReady = false;\n            this._listenToResizeEvent = true;\n            this._isTrickleOn = false;\n        },\n\n        //completion reorder and processing\n        _completionQueue: [],\n        queueOrExecuteCompletion: function(model, value, isPerformCompletionQueue) {\n            if (value === false) return;    \n\n            if (isPerformCompletionQueue !== true) {\n                //article, block and component completion trigger in a,b,c order need in c,b,a order\n                //otherwise block completion events will occur before component completion events\n                \n                var isLastType = Models.isLastStructureType(model);\n\n                if (!isLastType) {\n                    //defer completion event handling if not at component level\n                    return this._completionQueue.push({\n                        model: model,\n                        value: value    \n                    });\n                } else {\n                    //if at component level, handle completion queue events after component completion is handled\n                    if (this._isPageReady) {\n                        _.defer(_.bind(this.performCompletionQueue, this));\n                    } else {\n                        this.listenToOnce(Adapt, \"trickle:pageReady\", function(){                            \n                            this.performCompletionQueue();\n                        });\n                    }\n                }\n            }\n\n            if (this._isPageReady) {\n                Adapt.trigger(\"steplocking:waitCheck\", model);\n                this.checkStepComplete(model);\n            } else {                \n                this.listenToOnce(Adapt, \"trickle:pageReady\", function(){                    \n                    Adapt.trigger(\"steplocking:waitCheck\", model);\n                    this.checkStepComplete(model);\n                });\n            }\n        },\n\n        performCompletionQueue: function() {\n            while (this._completionQueue.length > 0) {\n                var item = this._completionQueue.pop();\n                this.queueOrExecuteCompletion(item.model, item.value, true);\n            }\n        },\n\n        checkStepComplete: function(model) {\n            if (this._isFinished) return;\n\n            var currentModel = this.getCurrentStepModel();\n\n            //if the model does not match the current trickle item then break\n            if (model.get(\"_id\") != currentModel.get(\"_id\")) return;\n\n            var trickleConfig = this.getModelTrickleConfig(model);\n            if (!trickleConfig) return;\n            \n            //if plugins need to present before the interaction then break\n            if (this.isStepUnlockWaiting()) return;\n            \n            //if completion is required and item is not yet complete then break\n            if (trickleConfig._stepLocking._isCompletionRequired && !model.get(completionAttribute)) return;\n\n            Adapt.trigger(\"trickle:interactionRequired\", model);\n            \n            //if plugins need to present before the next step occurs then break\n            if (this.isStepUnlockWaiting()) return;\n\n            //set interaction complete\n            trickleConfig._isLocking = false;\n            trickleConfig._isInteractionComplete = true;\n\n            this.stepComplete(model);\n        },\n\n        stepComplete: function(model) {\n            this.initializeStep();\n\n            Adapt.trigger('device:resize');\n\n            this.scrollToStep(model);\n        },\n\n        scrollToStep: function(model) {\n            var trickleConfig = this.getModelTrickleConfig(model);\n            if (trickleConfig._autoScroll === false) return;\n\n            var scrollTo = trickleConfig._scrollTo;\n            \n            //Allows trickle to scroll to a sibling / cousin component relative to the current trickle item\n            this.relativeScrollTo( model, scrollTo );\n        },\n\n        isStepUnlockWaiting: function() {\n            return this._waitForUnlockRequestsCount > 0;\n        },\n        \n        relativeScrollTo: function(model, scrollTo) {\n            if (scrollTo === undefined) scrollTo = \"@block +1\";\n\n            var scrollToId = \"\";\n            switch (scrollTo.substr(0,1)) {\n            case \"@\":\n                //NAVIGATE BY RELATIVE TYPE\n                \n                //Allows trickle to scroll to a sibling / cousin component relative to the current trickle item\n                var relativeModel = Models.findRelative(model, scrollTo);\n                \n                if (relativeModel === undefined) return;\n                scrollToId = relativeModel.get(\"_id\");\n\n                break;\n            case \".\":\n                //NAVIGATE BY CLASS\n                scrollToId = scrollTo.substr(1, scrollTo.length-1);\n                break;\n            default: \n                scrollToId = scrollTo;\n            }\n\n            if (scrollToId == \"\") return;\n            \n            var duration = model.get(\"_trickle\")._scrollDuration || 500;\n            _.delay(function() {\n                Adapt.scrollTo(\".\" + scrollToId, { duration: duration });\n            }, 250);\n        }\n        \n    }, Backbone.Events);\n\n    Trickle.initialize();\n\n    return Trickle;\n\n})\n;\n",
    "define('extensions/adapt-contrib-tutor/js/adapt-contrib-tutor',[\n    'coreJS/adapt'\n],function(Adapt) {\n\n    Adapt.on('questionView:showFeedback', function(view) {\n\n        var alertObject = {\n            title: view.model.get(\"feedbackTitle\"),\n            body: view.model.get(\"feedbackMessage\")\n        };\n\n        if (view.model.has('_isCorrect')) {\n            // Attach specific classes so that feedback can be styled.\n            if (view.model.get('_isCorrect')) {\n                alertObject._classes = 'correct';\n            } else {\n                if (view.model.has('_isAtLeastOneCorrectSelection')) {\n                    // Partially correct feedback is an option.\n                    alertObject._classes = view.model.get('_isAtLeastOneCorrectSelection')\n                        ? 'partially-correct'\n                        : 'incorrect';\n                } else {\n                    alertObject._classes = 'incorrect';\n                }\n            }\n        }\n\n        Adapt.once(\"notify:closed\", function() {\n            Adapt.trigger(\"tutor:closed\");\n        });\n\n        Adapt.trigger('notify:popup', alertObject);\n\n        Adapt.trigger('tutor:opened');\n    });\n\n});\n\n",
    "define('extensions/adapt-didYouKnow/js/adapt-didYouKnowPopView',[\n    'backbone',\n    'coreJS/adapt'\n], function(Backbone, Adapt) {\n\n    var DidYouKnowPopupView = Backbone.View.extend({\n\n        className: \"didYouKnow-popup display-none\",\n\n        template: \"didYouKnow-popup\",\n\n        events: {\n            'click .popup-close': 'onClickPopCloseButton',\n            'touchstart .popup-close': 'onClickPopCloseButton',\n            'mousedown .popup-toolbar': 'onMouseDownToolbar',\n            'touchstart .popup-toolbar': 'onTouchStartToolbar'\n        },\n\n        initialize: function(options) {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.listenTo(Adapt, 'didYouKnow:showPopup', this.showPopup);\n            this.render();\n\n            this.isScrolling = false;\n            this.mouseOffset = { x: 0, y: 0 };\n            //temporary comment code for Bombardier  Work Package 5\n            /*this.onClickDocumentHandler = _.bind(this.onClickDocument, this);*/\n            this.onTouchStartDocumentHandler = _.bind(this.onTouchStartDocument, this);\n            this.onScrollDocumentHandler = _.bind(this.onScrollDocument, this);\n\n            this.onMouseUpEventHandler = _.bind(this.onMouseUpPopup, this);\n            this.onMouseMoveEventHandler = _.bind(this.onMouseMovePopup, this);\n\n            this.onTouchEndEventHandler = _.bind(this.onTouchEndPopup, this);\n            this.onTouchCancelEventHandler = _.bind(this.onTouchCancelPopup, this);\n            this.onTouchMoveEventHandler = _.bind(this.onTouchMovePopup, this);\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[this.template];\n            this.$el.html(template(data));\n\n            _.defer(_.bind(function() {\n                this.postRender();\n            }, this));\n\n            return this;\n        },\n\n        postRender: function() {\n            //temporary comment code for Bombardier  Work Package 5\n            /*$(document).on('touchend click', this.onClickDocumentHandler);*/\n            $(document).on('touchstart', this.onTouchStartDocumentHandler)\n            $(window).on('touchmove', this.onScrollDocumentHandler);\n            this.showPopupView();\n        },\n\n        remove: function() {\n            //temporary comment code for Bombardier  Work Package 5\n            /*$(document).off('touchend click', this.onClickDocumentHandler);*/\n            $(document).off('touchstart', this.onTouchStartDocumentHandler)\n            $(window).off('touchmove', this.onScrollDocumentHandler);\n            this.unbindEventsForDragging();\n            this.enableScroll();\n            Backbone.View.prototype.remove.call(this);\n        },\n\n        showPopupView: function() {\n            if (!this.$el.hasClass('display-none')) return;\n\n            this.$el.closest('.block').addClass('overflow-hidden');\n            this.$el.css({top: \"25%\", left: \"50%\"}).removeClass('display-none');\n        },\n\n        hidePopupView: function() {\n            if (this.$el.hasClass('display-none')) return;\n\n            this.$el.closest('.block').removeClass('overflow-hidden');\n            this.$el.addClass('display-none');\n            this.remove();\n        },\n\n        showPopup: function(popupModel) {\n            this.hidePopupView();\n        },\n\n        bindEventsForDragging: function() {\n            this.bindMouseEvents();\n            this.bindTouchEvents();\n        },\n\n        unbindEventsForDragging: function() {\n            this.unbindMouseEvents();\n            this.unbindTouchEvents();\n        },\n\n        bindMouseEvents: function() {\n            var $closestBlock = this.$el.closest('.block');\n            $(window).on('mouseup', this.onMouseUpEventHandler);\n            $closestBlock.on('mousemove', this.onMouseMoveEventHandler);\n        },\n\n        unbindMouseEvents: function() {\n            var $closestBlock = this.$el.closest('.block');\n            $(window).off('mouseup', this.onMouseUpEventHandler);\n            $closestBlock.off('mousemove', this.onMouseMoveEventHandler);\n        },\n\n        bindTouchEvents: function() {\n            var $closestBlock = this.$el.closest('.block');\n            $(document).on('touchend', this.onTouchEndEventHandler);\n            $closestBlock.on('touchcancel', this.onTouchCancelEventHandler);\n            $closestBlock.on('touchmove', this.onTouchMoveEventHandler);\n        },\n\n        unbindTouchEvents: function() {\n            var $closestBlock = this.$el.closest('.block');\n            $(document).off('touchend', this.onTouchEndEventHandler);\n            $closestBlock.off('touchcancel', this.onTouchCancelEventHandler);\n            $closestBlock.off('touchmove', this.onTouchMoveEventHandler);\n        },\n\n        disableScroll: function() {\n            if (window.addEventListener) // older FF\n                window.addEventListener('DOMMouseScroll', this.preventDefault, false);\n            window.onwheel = this.preventDefault; // modern standard\n            window.onmousewheel = document.onmousewheel = this.preventDefault; // older browsers, IE\n            window.ontouchmove = this.preventDefault;\n        },\n\n        enableScroll: function() {\n            if (window.removeEventListener)\n                window.removeEventListener('DOMMouseScroll', this.preventDefault, false);\n            window.onmousewheel = document.onmousewheel = null;\n            window.onwheel = null;\n            window.ontouchmove = null;\n        },\n\n        stopPropagation: function(event) {\n            event = event || window.event;\n            if (event.stopPropagation) event.stopPropagation();\n            event.cancelBubble = true;\n        },\n\n        preventDefault: function(event) {\n            event = event || window.event;\n            if (event.preventDefault) event.preventDefault();\n            event.returnValue = false;\n        },\n\n        onClickPopCloseButton: function(event) {\n            this.preventDefault(event);\n            this.hidePopupView();\n        },\n\n        onTouchStartDocument: function(event) {\n            this.isScrolling = false;\n        },\n\n        onScrollDocument: function(event) {\n            this.isScrolling = true;\n        },\n//temporary comments code for Bombardier  Work Package 5\n/*        onClickDocument: function(event) {\n            if(this.isScrolling) return;\n\n            var $target = $(event.target);\n            if($target.hasClass('didYouKnow-popup')) {\n                this.hidePopupView();\n            } else if ($target.closest('.didYouKnow-popup, .didYouKnow-button').length === 0) {\n                this.hidePopupView();\n            }\n        },*/\n\n        onMouseDownToolbar: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.mouseOffset.x = event.clientX - this.$el[0].offsetLeft;\n            this.mouseOffset.y = event.clientY - this.$el[0].offsetTop;\n\n            this.bindMouseEvents();\n            this.disableScroll();\n        },\n\n        onMouseUpPopup: function(event) {\n            this.unbindMouseEvents();\n            this.enableScroll();\n        },\n\n        onMouseMovePopup: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.clientX - this.mouseOffset.x;\n            var top = event.clientY - this.mouseOffset.y;\n            if (top < 0) top = 0;\n            this.$el.css({ 'left': left + 'px', 'top': top + 'px' });\n        },\n\n        onTouchStartToolbar: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            this.mouseOffset.x = event.originalEvent.touches[0].clientX - this.$el[0].offsetLeft;\n            this.mouseOffset.y = event.originalEvent.touches[0].clientY - this.$el[0].offsetTop;\n\n            this.bindTouchEvents();\n            this.disableScroll();\n        },\n\n        onTouchEndPopup: function(event) {\n            this.unbindTouchEvents();\n            this.enableScroll();\n        },\n\n        onTouchCancelPopup: function(event) {\n            this.unbindTouchEvents();\n            this.enableScroll();\n        },\n\n        onTouchMovePopup: function(event) {\n            this.stopPropagation(event);\n            this.preventDefault(event);\n            var left = event.originalEvent.touches[0].clientX - this.mouseOffset.x;\n            var top = event.originalEvent.touches[0].clientY - this.mouseOffset.y;\n            if (top < 0) top = 0;\n            this.$el.css({ 'left': left + 'px', 'top': top + 'px' });\n        }\n\n    });\n\n    return DidYouKnowPopupView;\n\n});\n\n",
    "define('extensions/adapt-didYouKnow/js/adapt-didYouKnowButtonView',[\n    'backbone',\n    'coreJS/adapt',\n    './adapt-didYouKnowPopView'\n], function(Backbone, Adapt, DidYouKnowPopupView) {\n\n    var DidYouKnowButtonView = Backbone.View.extend({\n\n        className: \"didYouKnow-button-container\",\n\n        template: \"didYouKnow-button\",\n\n        events: {\n            'click button': 'onClickDidYouKnowButton'\n        },\n\n        initialize: function(options) {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n        },\n\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[this.template];\n            this.$el.html(template(data));\n            return this;\n        },\n\n        onClickDidYouKnowButton: function (event) {\n            if(this.$popupView) {\n                this.$popupView.remove();\n            }\n\n            Adapt.trigger('didYouKnow:showPopup', this.model);\n\n            this.$popupView = new DidYouKnowPopupView({model: this.model}).$el;\n            this.$el.closest('.block').append(this.$popupView);\n        }\n\n    });\n\n    return DidYouKnowButtonView;\n\n});\n\n",
    "/*\n * adapt-didYouKnow\n */\ndefine('extensions/adapt-didYouKnow/js/adapt-didYouKnow',[\n    'backbone',\n    'coreJS/adapt',\n    './adapt-didYouKnowButtonView'\n], function(Backbone, Adapt, DidYouKnowButtonView) {\n\n    var didYouKnowCourseData;\n\n    function onComponentViewPostRender(componentView) {\n        var didYouKnowComponentData = componentView.model.get('_didYouKnow') || {};\n        if(didYouKnowComponentData._isEnabled !== true) return;\n\n        didYouKnowComponentData = _.extend(_.clone(didYouKnowCourseData), didYouKnowComponentData);\n\n        switch(componentView.model.get('_component')) {\n            case 'accordion':\n                _.each(componentView.model.get('_items'), function(item, index) {\n                    if(item._didYouKnow) {\n                        _.extend(didYouKnowComponentData, item._didYouKnow);\n                        var $buttonView = new DidYouKnowButtonView({model: new Backbone.Model(didYouKnowComponentData)}).$el;\n                        componentView.$('.accordion-item-text').eq(index).after($buttonView);\n                    }\n                });\n            break;\n            case 'narrative':\n                _.each(componentView.model.get('_items'), function(item, index) {\n                    if(item._didYouKnow) {\n                        _.extend(didYouKnowComponentData, item._didYouKnow);\n                        var $buttonView = new DidYouKnowButtonView({model: new Backbone.Model(didYouKnowComponentData)}).$el;\n                        componentView.$('.narrative-content-item').eq(index).append($buttonView);\n                    }\n                });\n            break;\n            case 'text':\n            default:\n                var $buttonView = new DidYouKnowButtonView({model: new Backbone.Model(didYouKnowComponentData)}).$el;\n                componentView.$el.append($buttonView);\n        }\n    }\n\n    function onDataReady() {\n        didYouKnowCourseData = Adapt.course.get('_didYouKnow');\n\n        if (!didYouKnowCourseData || !didYouKnowCourseData._isEnabled) {\n            return console.log('Sorry, no didYouKnow object is set on the course.json file');\n        }\n\n        Adapt.on('componentView:postRender', onComponentViewPostRender);\n    }\n\n    Adapt.once('app:dataReady', onDataReady);\n\n});\n\n",
    "/*\n * adapt-navigationDrawer\n * License - https://github.com/JeromeLam/adapt-navigationDrawer/blob/master/LICENSE\n * Maintainers - Jerome Lam <jerome.lam@gmail.com>\n */\n\ndefine('extensions/adapt-navigationDrawer/js/adapt-navigationDrawerView',['require','coreJS/adapt','backbone'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    //var NavigationDrawerItemView = require('extensions/adapt-navigationDrawer/js/adapt-navigationDrawerItemView');\n\n    var NavigationDrawerView = Backbone.View.extend({\n\n        className: \"navigationDrawerView\",\n/*\n        events: {\n            'keyup input.navigationDrawer-textbox': 'onInputTextBoxValueChange',\n            'input input.navigationDrawer-textbox': 'onInputTextBoxValueChange',\n            'change input.navigationDrawer-checkbox': 'onInputTextBoxValueChange'\n        },\n*/\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            //this.setupModel();\n            this.render();\n        },\n/*\n        // This function will setup glossary model/collection, just before rendering.\n        setupModel: function() {\n            this.arrangeGlossaryItemsToAscendingOrder();\n        },\n\n        // This function will sort glossary collection items to ascending order.\n        arrangeGlossaryItemsToAscendingOrder: function() {\n            this.collection.comparator = \"term\";\n            this.collection.sort();\n            //this.collection.models.sort(function compare(model1, model2) {\n            //    if(model1.get('term') < model2.get('term'))\n            //        return -1;\n            //    if(model1.get('term') > model2.get('term'))\n            //        return 1;\n            //    return 0;\n            //});\n        },\n*/\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[\"navigationDrawerView\"];\n            this.$el.html(template(data));\n            //this.renderGlossaryItems();\n            /*_.defer(_.bind(function() {\n                this.postRender();\n            }, this));*/\n            return this;\n        },\n/*\n        // This function will render glossary items to current view.\n        renderGlossaryItems: function() {\n            var $glossaryItemContainer = this.$('.glossary-items-container').empty();\n            _.each(this.collection.models, function(item, index) {\n                new NavigationDrawerItemView({model: item}).$el.appendTo($glossaryItemContainer);\n            }, this);\n        },\n\n        postRender: function() {\n            this.listenTo(Adapt, 'drawer:openedItemView', this.remove);\n            this.listenTo(Adapt, 'drawer:triggerCustomView', this.remove);\n        },\n\n        onInputTextBoxValueChange: function(event) {\n            this.showItemNotFoundMessage(false);\n            var value = this.$('input.glossary-textbox').val().toLowerCase();\n            var shouldSearchInDescription = this.$('input.glossary-checkbox').is(\":checked\");\n            if(value.length > 0) {\n                var filteredItems = this.getFilteredGlossaryItems(value, shouldSearchInDescription);\n                this.showFilterGlossaryItems(filteredItems);\n            } else {\n                this.showGlossaryItems(true);\n            }\n        },\n\n        // This function will create array of filtered items on basis of supplied arguments.\n        getFilteredGlossaryItems: function(value, shouldSearchInDescription) {\n            var itemAttribute;\n            if(shouldSearchInDescription) {\n                itemAttribute = 'description';\n            } else {\n                itemAttribute = 'term';\n            }\n            return _.filter(this.collection.models, function(item, index) {\n                return item.get(itemAttribute).toLowerCase().indexOf(value) > -1;\n            }, this);\n        },\n\n        // This function should show only the filtered glossary items or no item found message\n        showFilterGlossaryItems: function(filteredItems) {\n            this.showGlossaryItems(false);\n            if(filteredItems.length > 0) {\n                _.each(filteredItems, function(item, index) {\n                    item.set('_isVisible', true);\n                }, this);\n            } else {\n                this.showItemNotFoundMessage(true);\n            }\n        },\n\n        // This function will show/hide the item not found message.\n        showItemNotFoundMessage: function(_isVisible) {\n            var $itemNotFound = this.$('.glossary-item-not-found');\n\n            if(!_isVisible && !$itemNotFound.hasClass('display-none')) {\n                $itemNotFound.addClass('display-none');\n            } else if(_isVisible && $itemNotFound.hasClass('display-none')) {\n                $itemNotFound.removeClass('display-none');\n            }\n        },\n\n        // This function should change the visibility of all glossary items\n        showGlossaryItems: function(_isVisible) {\n            _.invoke(this.collection.models, 'set', {\"_isVisible\": _isVisible});\n            //this.collection.forEach(function(model) {\n            //    model.set(\"_isVisible\", _isVisible);\n            //});\n        }\n*/\n    });\n\n    return NavigationDrawerView;\n});\n\n",
    "/*\n * adapt-navigationDrawer\n * License - https://github.com/JeromeLam/adapt-navigationDrawer/blob/master/LICENSE\n * Maintainers - Jerome Lam <jerome.lam@gmail.com>\n */\n\ndefine('extensions/adapt-navigationDrawer/js/adapt-navigationDrawer',['require','coreJS/adapt','backbone','extensions/adapt-navigationDrawer/js/adapt-navigationDrawerView'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var NavigationDrawerView = require('extensions/adapt-navigationDrawer/js/adapt-navigationDrawerView');\n/*\n    //PRIVATE VARIABLES\n    var visibility = {\n        height: 0,\n        hidden: true\n    };\n    */\n    var navigationDrawer = Backbone.View.extend({\n/*\n        //DRAWING\n        setCustomView: function(view) {\n\n            if (view === navigationDrawer.model.get(\"_customView\")) return;\n\n            view.undelegateEvents();\n\n            navigationDrawer.model.set(\"_customView\", view);\n\n            if (visibility.hidden) {\n                view.$el.css(\"display\",\"\");\n                navigationDrawer.$el.html(\"\").append( view.$el );\n                view.delegateEvents();\n                Adapt.trigger(\"navigationDrawer:setCustomView\", view);\n            } else {\n                navigationDrawer.$el.children().fadeOut({\n                    complete: function() {\n                        view.$el.css(\"display\",\"none\");\n                        navigationDrawer.$el.html(\"\").append( view.$el );\n                        view.$el.fadeIn();\n                        view.delegateEvents();\n                        Adapt.trigger(\"navigationDrawer:setCustomView\", view);\n                    },\n                    duration: 200\n                });\n            }\n\n        },\n*/\n        initialize: function() {\n            this.listenTo(Adapt, 'navigationDrawer:toggle', this.toggle);\n            this.preRender();\n            this.render();\n        },\n\n        preRender: function() {},\n\n        render: function() {\n            /*if (navigationDrawer.model.get(\"_customView\") && typeof navigationDrawer.model.get(\"_customView\").render == \"function\") {\n                navigationDrawer.model.get(\"_customView\").render();\n            }\n            else {*/\n                this.$el = $('<div>').addClass(\"navigationDrawer\").appendTo($(\"body\"));\n\n                if (this.model.get(\"_display\")) {\n                    var elementSelector = $(this.model.get(\"_display\").elementSelector);\n                    var openFrom = this.model.get(\"_display\").openFrom;\n                    if (elementSelector) {\n                        this.$el.addClass('open-from-' + openFrom);\n\n                        switch (openFrom) {\n                            case 'bottom':\n                                this.$el.css('top', elementSelector.offset().top + elementSelector.height());\n                                break;\n                            case 'top':\n                                this.$el.css('bottom', elementSelector.offset().top);\n                                break;\n                        }\n                    }\n                }\n\n                var template = Handlebars.templates[\"navigationDrawer\"];\n                this.$el.html(template());\n\n                _.defer(_.bind(function() {\n                    this.postRender();\n                }, this));\n            //}\n        },\n\n        postRender: function() {\n            /*if (navigationDrawer.model.get(\"_customView\") && typeof navigationDrawer.model.get(\"_customView\").render == \"function\") {\n                navigationDrawer.model.get(\"_customView\").render();\n            }\n            else {*/\n                /*\n                var $navigationDrawerInner = this.$('.navigationDrawer-inner').empty();\n\n                var navigationDrawerView = new NavigationDrawerView({model: new Backbone.Model({\n                    label: 'Course',\n                    value: 'Proof of Concept',\n                })});\n                this.$('.navigationDrawer-inner').html(navigationDrawerView.$el.html());\n\n                Adapt.navigationDrawerControl = new navigationDrawerControl({ model: this.model });\n                */\n                var $navigationDrawerInner = this.$('.navigationDrawer-inner ul').empty();\n\n                this.$('.navigationDrawer-inner ul').append(new NavigationDrawerView({model: new Backbone.Model({\n                    label: 'Course',\n                    value: 'Proof of Concept',\n                })}).$el.html());\n                this.$('.navigationDrawer-inner ul').append(new NavigationDrawerView({model: new Backbone.Model({\n                    label: 'Course',\n                    value: 'Proof of Concept',\n                })}).$el.html());\n                this.$('.navigationDrawer-inner ul').append(new NavigationDrawerView({model: new Backbone.Model({\n                    label: 'Course',\n                    value: 'Proof of Concept',\n                })}).$el.html());\n\n                Adapt.navigationDrawerControl = new navigationDrawerControl({ model: this.model });\n            //}\n        },\n        /*\n        //MAIN\n        showMobile: function(bool) {\n            navigationDrawer.model.set(\"_showOnMobile\", (bool == true) );\n\n            if (bool) $(\"html\").removeClass(\"navigationDrawer-hidden-mobile\");\n            else $(\"html\").addClass(\"navigationDrawer-hidden-mobile\");\n        },\n        */\n        toggle: function() {\n            this.$el.toggleClass('active');\n        }\n        /*\n        show: function(duration) {\n            if (!visibility.hidden) return;\n\n            Adapt.trigger(\"popup:opened\");\n\n            navigationDrawer.render();\n\n            if (typeof duration == \"undefined\") duration = navigationDrawer.model.get(\"_duration\").show;\n\n            function start() {\n                $(\"html\").addClass(\"has-navigationDrawer\");\n                navigationDrawer.$el.css({\n                    \"height\": \"0px\",\n                    \"display\": \"block\",\n                    width: $(window).width()\n                });\n            }\n\n            function complete() {\n                visibility.hidden = false;\n                navigationDrawer.$el.css({\n                    height: \"\",\n                    display: \"block\"\n                });\n                Adapt.trigger(\"navigationDrawer:opened\");\n            }\n\n            if (duration > 0 ) {\n                navigationDrawer.$el.animate({\n                    height: visibility.height + \"px\"\n                }, {\n                    duration: duration,\n                    start: start,\n                    complete: complete\n                });\n            } else {\n                start();\n                complete();\n            }\n        },\n\n        hide: function(duration) {\n            if (visibility.hidden) return;\n\n            if (typeof duration == \"undefined\") duration = navigationDrawer.model.get(\"_duration\").hide;\n\n            function start() {\n                $(\"html\").removeClass(\"has-navigationDrawer\");\n            }\n\n            function complete() {\n                visibility.hidden = true;\n                Adapt.trigger(\"popup:closed\");\n                Adapt.trigger(\"navigationDrawer:closed\");\n                navigationDrawer.$el.hide();\n                navigationDrawer.$el.css(\"height\", \"\");\n            }\n\n            if (duration > 0) {\n                navigationDrawer.$el.animate({\n                    height: \"0px\"\n                }, {\n                    duration:duration,\n                    start: start,\n                    complete: complete\n                });\n            } else {\n                start();\n                complete();\n            }\n        }*/\n\n    });\n\n    var navigationDrawerControl = Backbone.View.extend({\n\n        tagName: 'a',\n\n        className: 'navigation-drawer-control',\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.$el.attr('href', '#');\n            this.preRender();\n            this.render();\n            this.postRender();\n        },\n\n        events: {\n            'click': 'trigger'\n        },\n\n        preRender: function() {},\n\n        render: function() {\n            var template = Handlebars.templates[\"navigationDrawerControl\"];\n            this.$el.html(template());\n\n            if (this.model.get(\"_display\")) {\n                var appendControlToSelector = $(this.model.get(\"_display\").appendControlToSelector);\n                appendControlToSelector.append(this.$el);\n            }\n\n            return this;\n        },\n\n        postRender: function() {},\n\n        trigger: function(event) {\n            event.preventDefault();\n            Adapt.trigger(\"navigationDrawer:toggle\");\n        }\n\n    });\n\n    Adapt.once(\"app:dataReady\", function() {\n        Adapt.navigationDrawer = new navigationDrawer({ model: new Backbone.Model(Adapt.course.get(\"_navigationDrawer\")) });\n\n        /*\n        if (typeof navigationDrawer.model.get(\"_duration\") == \"undefined\") navigationDrawer.model.set(\"_duration\", {\n            show:100,\n            hide:100\n        });\n\n        if (typeof navigationDrawer.model.get(\"_showOnMobile\") == \"undefined\") navigationDrawer.model.set(\"_showOnMobile\", false);\n\n        if (navigationDrawer.model.get(\"_showOnMobile\")) $(\"html\").addClass(\"navigationDrawer-hidden-mobile\");\n\n        //capture height\n        visibility.height = parseInt(navigationDrawer.$el.css(\"height\"));\n\n        Adapt.trigger(\"navigationDrawer:initialized\");\n        */\n    });\n/*\n    //device resize and navigation drawn\n    Adapt.on(\"device:resize navigationView:postRender\", function() {\n        //capture height\n        visibility.height = parseInt(navigationDrawer.$el.css(\"height\"));\n\n        //set width to window width (to align with restricted aspect ratios)\n        navigationDrawer.$el.css({width: $(window).width()});\n    });\n*/\n});\n\n",
    "/**\n * @license jquery.panzoom.js v3.2.2\n * Updated: Sun Aug 28 2016\n * Add pan and zoom functionality to any element\n * Copyright (c) timmy willison\n * Released under the MIT license\n * https://github.com/timmywil/jquery.panzoom/blob/master/MIT-License.txt\n */\n\n(function(global, factory) {\n\t// AMD\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('extensions/adapt-panZoom/js/jquery.panzoom',[ 'jquery' ], function(jQuery) {\n\t\t\treturn factory(global, jQuery);\n\t\t});\n\t// CommonJS/Browserify\n\t} else if (typeof exports === 'object') {\n\t\tfactory(global, require('jquery'));\n\t// Global\n\t} else {\n\t\tfactory(global, global.jQuery);\n\t}\n}(typeof window !== 'undefined' ? window : this, function(window, $) {\n\t'use strict';\n\n\tvar document = window.document;\n\tvar datakey = '__pz__';\n\tvar slice = Array.prototype.slice;\n\tvar rIE11 = /trident\\/7./i;\n\tvar supportsInputEvent = (function() {\n\t\t// IE11 returns a false positive\n\t\tif (rIE11.test(navigator.userAgent)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar input = document.createElement('input');\n\t\tinput.setAttribute('oninput', 'return');\n\t\treturn typeof input.oninput === 'function';\n\t})();\n\n\t// Regex\n\tvar rupper = /([A-Z])/g;\n\tvar rsvg = /^http:[\\w\\.\\/]+svg$/;\n\n\tvar floating = '(\\\\-?\\\\d[\\\\d\\\\.e-]*)';\n\tvar commaSpace = '\\\\,?\\\\s*';\n\tvar rmatrix = new RegExp(\n\t\t'^matrix\\\\(' +\n\t\tfloating + commaSpace +\n\t\tfloating + commaSpace +\n\t\tfloating + commaSpace +\n\t\tfloating + commaSpace +\n\t\tfloating + commaSpace +\n\t\tfloating + '\\\\)$'\n\t);\n\n\t/**\n\t * Utility for determining transform matrix equality\n\t * Checks backwards to test translation first\n\t * @param {Array} first\n\t * @param {Array} second\n\t */\n\tfunction matrixEquals(first, second) {\n\t\tvar i = first.length;\n\t\twhile(--i) {\n\t\t\tif (Math.round(+first[i]) !== Math.round(+second[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Creates the options object for reset functions\n\t * @param {Boolean|Object} opts See reset methods\n\t * @returns {Object} Returns the newly-created options object\n\t */\n\tfunction createResetOptions(opts) {\n\t\tvar options = { range: true, animate: true };\n\t\tif (typeof opts === 'boolean') {\n\t\t\toptions.animate = opts;\n\t\t} else {\n\t\t\t$.extend(options, opts);\n\t\t}\n\t\treturn options;\n\t}\n\n\t/**\n\t * Represent a transformation matrix with a 3x3 matrix for calculations\n\t * Matrix functions adapted from Louis Remi's jQuery.transform (https://github.com/louisremi/jquery.transform.js)\n\t * @param {Array|Number} a An array of six values representing a 2d transformation matrix\n\t */\n\tfunction Matrix(a, b, c, d, e, f, g, h, i) {\n\t\tif ($.type(a) === 'array') {\n\t\t\tthis.elements = [\n\t\t\t\t+a[0], +a[2], +a[4],\n\t\t\t\t+a[1], +a[3], +a[5],\n\t\t\t\t    0,     0,     1\n\t\t\t];\n\t\t} else {\n\t\t\tthis.elements = [\n\t\t\t\ta, b, c,\n\t\t\t\td, e, f,\n\t\t\t\tg || 0, h || 0, i || 1\n\t\t\t];\n\t\t}\n\t}\n\n\tMatrix.prototype = {\n\t\t/**\n\t\t * Multiply a 3x3 matrix by a similar matrix or a vector\n\t\t * @param {Matrix|Vector} matrix\n\t\t * @return {Matrix|Vector} Returns a vector if multiplying by a vector\n\t\t */\n\t\tx: function(matrix) {\n\t\t\tvar isVector = matrix instanceof Vector;\n\n\t\t\tvar a = this.elements,\n\t\t\t\tb = matrix.elements;\n\n\t\t\tif (isVector && b.length === 3) {\n\t\t\t\t// b is actually a vector\n\t\t\t\treturn new Vector(\n\t\t\t\t\ta[0] * b[0] + a[1] * b[1] + a[2] * b[2],\n\t\t\t\t\ta[3] * b[0] + a[4] * b[1] + a[5] * b[2],\n\t\t\t\t\ta[6] * b[0] + a[7] * b[1] + a[8] * b[2]\n\t\t\t\t);\n\t\t\t} else if (b.length === a.length) {\n\t\t\t\t// b is a 3x3 matrix\n\t\t\t\treturn new Matrix(\n\t\t\t\t\ta[0] * b[0] + a[1] * b[3] + a[2] * b[6],\n\t\t\t\t\ta[0] * b[1] + a[1] * b[4] + a[2] * b[7],\n\t\t\t\t\ta[0] * b[2] + a[1] * b[5] + a[2] * b[8],\n\n\t\t\t\t\ta[3] * b[0] + a[4] * b[3] + a[5] * b[6],\n\t\t\t\t\ta[3] * b[1] + a[4] * b[4] + a[5] * b[7],\n\t\t\t\t\ta[3] * b[2] + a[4] * b[5] + a[5] * b[8],\n\n\t\t\t\t\ta[6] * b[0] + a[7] * b[3] + a[8] * b[6],\n\t\t\t\t\ta[6] * b[1] + a[7] * b[4] + a[8] * b[7],\n\t\t\t\t\ta[6] * b[2] + a[7] * b[5] + a[8] * b[8]\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false; // fail\n\t\t},\n\t\t/**\n\t\t * Generates an inverse of the current matrix\n\t\t * @returns {Matrix}\n\t\t */\n\t\tinverse: function() {\n\t\t\tvar d = 1 / this.determinant(),\n\t\t\t\ta = this.elements;\n\t\t\treturn new Matrix(\n\t\t\t\td * ( a[8] * a[4] - a[7] * a[5]),\n\t\t\t\td * (-(a[8] * a[1] - a[7] * a[2])),\n\t\t\t\td * ( a[5] * a[1] - a[4] * a[2]),\n\n\t\t\t\td * (-(a[8] * a[3] - a[6] * a[5])),\n\t\t\t\td * ( a[8] * a[0] - a[6] * a[2]),\n\t\t\t\td * (-(a[5] * a[0] - a[3] * a[2])),\n\n\t\t\t\td * ( a[7] * a[3] - a[6] * a[4]),\n\t\t\t\td * (-(a[7] * a[0] - a[6] * a[1])),\n\t\t\t\td * ( a[4] * a[0] - a[3] * a[1])\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Calculates the determinant of the current matrix\n\t\t * @returns {Number}\n\t\t */\n\t\tdeterminant: function() {\n\t\t\tvar a = this.elements;\n\t\t\treturn a[0] * (a[8] * a[4] - a[7] * a[5]) - a[3] * (a[8] * a[1] - a[7] * a[2]) + a[6] * (a[5] * a[1] - a[4] * a[2]);\n\t\t}\n\t};\n\n\t/**\n\t * Create a vector containing three values\n\t */\n\tfunction Vector(x, y, z) {\n\t\tthis.elements = [ x, y, z ];\n\t}\n\n\t/**\n\t * Get the element at zero-indexed index i\n\t * @param {Number} i\n\t */\n\tVector.prototype.e = Matrix.prototype.e = function(i) {\n\t\treturn this.elements[ i ];\n\t};\n\n\t/**\n\t * Create a Panzoom object for a given element\n\t * @constructor\n\t * @param {Element} elem - Element to use pan and zoom\n\t * @param {Object} [options] - An object literal containing options to override default options\n\t *  (See Panzoom.defaults for ones not listed below)\n\t * @param {jQuery} [options.$zoomIn] - zoom in buttons/links collection (you can also bind these yourself\n\t *  e.g. $button.on('click', function(e) { e.preventDefault(); $elem.panzoom('zoomIn'); });)\n\t * @param {jQuery} [options.$zoomOut] - zoom out buttons/links collection on which to bind zoomOut\n\t * @param {jQuery} [options.$zoomRange] - zoom in/out with this range control\n\t * @param {jQuery} [options.$reset] - Reset buttons/links collection on which to bind the reset method\n\t * @param {Function} [options.on[Start|Change|Zoom|Pan|End|Reset] - Optional callbacks for panzoom events\n\t */\n\tfunction Panzoom(elem, options) { //console.log(\"pan activated\",options);\n\n\t\t// Allow instantiation without `new` keyword\n\t\tif (!(this instanceof Panzoom)) {\n\t\t\treturn new Panzoom(elem, options);\n\t\t}\n\n\t\t// Sanity checks\n\t\tif (elem.nodeType !== 1) {\n\t\t\t$.error('Panzoom called on non-Element node');\n\t\t}\n\t\t/////////////////////////////////////added by nayan////////////////////\n\t\tif(options.isIFrame){\n            document=options.iFrameWindow.document;\n\t\t}else{\n\t\t\tdocument=window.document;\n\t\t}\n\t\t/////////////////////////////////////end//////////////////////////////\n\t\tif (!$.contains(document, elem)) {\n\t\t\t$.error('Panzoom element must be attached to the document');\n\t\t}\n\n\t\t// Don't remake\n\t\tvar d = $.data(elem, datakey);\n\t\tif (d) {\n\t\t\treturn d;\n\t\t}\n\n\t\t// Extend default with given object literal\n\t\t// Each instance gets its own options\n\t\tthis.options = options = $.extend({}, Panzoom.defaults, options);\n\t\tthis.elem = elem;\n\n\t\tvar $elem = this.$elem = $(elem);\n\t\tthis.$set = options.$set && options.$set.length ? options.$set : $elem;\n\t\tthis.$doc = $(elem.ownerDocument || document);\n\t\tthis.$parent = $elem.parent();\n\t\tthis.parent = this.$parent[0];\n\t\t//console.log(\"this.elem\",this.elem);\n\n\t\t// This is SVG if the namespace is SVG\n\t\t// However, while <svg> elements are SVG, we want to treat those like other elements\n\t\tthis.isSVG = rsvg.test(elem.namespaceURI) && elem.nodeName.toLowerCase() !== 'svg';\n\n\t\tthis.panning = false;\n\n\t\t// Save the original transform value\n\t\t// Save the prefixed transform style key\n\t\t// Set the starting transform\n\t\tthis._buildTransform();\n\n\t\t// Build the appropriately-prefixed transform style property name\n\t\t// De-camelcase\n\t\tthis._transform = $.cssProps.transform.replace(rupper, '-$1').toLowerCase();\n\n\t\t// Build the transition value\n\t\tthis._buildTransition();\n\n\t\t// Build containment dimensions\n\t\tthis.resetDimensions();\n\n\t\t// Add zoom and reset buttons to `this`\n\t\tvar $empty = $();\n\t\tvar self = this;\n\t\t$.each([ '$zoomIn', '$zoomOut', '$zoomRange', '$reset' ], function(i, name) {\n\t\t\tself[ name ] = options[ name ] || $empty;\n\t\t});\n\n\t\tthis.enable();\n\n\t\tthis.scale = this.getMatrix()[0];\n\t\tthis._checkPanWhenZoomed();\n\t\t// Save the instance\n\t\t$.data(elem, datakey, this);\n\t}\n\n\t// Attach regex for possible use (immutable)\n\tPanzoom.rmatrix = rmatrix;\n    \n\tPanzoom.defaults = {  \n\t\t// Should always be non-empty\n\t\t// Used to bind jQuery events without collisions\n\t\t// A guid is not added here as different instantiations/versions of panzoom\n\t\t// on the same element is not supported, so don't do it.\n\t\teventNamespace: '.panzoom',\n\n\t\t// Whether or not to transition the scale\n\t\ttransition: true,\n\n\t\t// Default cursor style for the element\n\t\tcursor: 'pointer', //'move',\n\n\t\t// There may be some use cases for zooming without panning or vice versa\n\t\tdisablePan: false,\n\t\tdisableZoom: false,\n\n\t\t// Pan only on the X or Y axes\n\t\tdisableXAxis: false,\n\t\tdisableYAxis: false,\n\n\t\t// Set whether you'd like to pan on left (1), middle (2), or right click (3)\n\t\twhich: 1,\n\n\t\t// The increment at which to zoom\n\t\t// Should be a number greater than 0\n\t\tincrement: 0.3,\n\n\t\t// When no scale is passed, this option tells\n\t\t// the `zoom` method to increment\n\t\t// the scale *linearly* based on the increment option.\n\t\t// This often ends up looking like very little happened at larger zoom levels.\n\t\t// The default is to multiply/divide the scale based on the increment.\n\t\tlinearZoom: false,\n\n\t\t// Pan only when the scale is greater than minScale\n\t\tpanOnlyWhenZoomed: false,\n\n\t\t// min and max zoom scales\n\t\tminScale: 0.3,\n\t\tmaxScale: 6.0,\n\n\t\t// The default step for the range input\n\t\t// Precendence: default < HTML attribute < option setting\n\t\trangeStep: 0.05,\n\n\t\t// Animation duration (ms)\n\t\tduration: 200,\n\t\t// CSS easing used for scale transition\n\t\teasing: 'ease-in-out',\n\n\t\t// Indicate that the element should be contained within it's parent when panning\n\t\t// Note: this does not affect zooming outside of the parent\n\t\t// Set this value to 'invert' to only allow panning outside of the parent element (basically the opposite of the normal use of contain)\n\t\t// 'invert' is useful for a large panzoom element where you don't want to show anything behind it\n\t\tcontain: false\n\t};\n\n\tPanzoom.prototype = {\n\t\tconstructor: Panzoom,\n\n\t\t/**\n\t\t * @returns {Panzoom} Returns the instance\n\t\t */\n\t\tinstance: function() {\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Enable or re-enable the panzoom instance\n\t\t */\n\t\tenable: function() {\n\t\t\t// Unbind first\n\t\t\tthis._initStyle();\n\t\t\tthis._bind();\n\t\t\tthis.disabled = false;\n\t\t},\n\n\t\t/**\n\t\t * Disable panzoom\n\t\t */\n\t\tdisable: function() {\n\t\t\tthis.disabled = true;\n\t\t\tthis._resetStyle();\n\t\t\tthis._unbind();\n\t\t},\n\n\t\t/**\n\t\t * @returns {Boolean} Returns whether the current panzoom instance is disabled\n\t\t */\n\t\tisDisabled: function() {\n\t\t\treturn this.disabled;\n\t\t},\n\n\t\t/**\n\t\t * Destroy the panzoom instance\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.disable();\n\t\t\t$.removeData(this.elem, datakey);\n\t\t},\n\n\t\t/**\n\t\t * Builds the restricing dimensions from the containment element\n\t\t * Also used with focal points\n\t\t * Call this method whenever the dimensions of the element or parent are changed\n\t\t */\n\t\tresetDimensions: function() { //console.log(\"reset dimensions\");\n\t\t\t// Reset container properties\n\t\t\tthis.container = this.parent.getBoundingClientRect();\n\n\t\t\t// Set element properties\n\t\t\tvar elem = this.elem;\n\t\t\t// getBoundingClientRect() works with SVG, offsetWidth does not\n\t\t\tvar dims = elem.getBoundingClientRect();\n\t\t\tvar absScale = Math.abs(this.scale);\n\t\t\tthis.dimensions = {\n\t\t\t\twidth: dims.width,\n\t\t\t\theight: dims.height,\n\t\t\t\tleft: $.css(elem, 'left', true) || 0,\n\t\t\t\ttop: $.css(elem, 'top', true) || 0,\n\t\t\t\t// Borders and margins are scaled\n\t\t\t\tborder: {\n\t\t\t\t\ttop: $.css(elem, 'borderTopWidth', true) * absScale || 0,\n\t\t\t\t\tbottom: $.css(elem, 'borderBottomWidth', true) * absScale || 0,\n\t\t\t\t\tleft: $.css(elem, 'borderLeftWidth', true) * absScale || 0,\n\t\t\t\t\tright: $.css(elem, 'borderRightWidth', true) * absScale || 0\n\t\t\t\t},\n\t\t\t\tmargin: {\n\t\t\t\t\ttop: $.css(elem, 'marginTop', true) * absScale || 0,\n\t\t\t\t\tleft: $.css(elem, 'marginLeft', true) * absScale || 0\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Return the element to it's original transform matrix\n\t\t * @param {Boolean} [options] If a boolean is passed, animate the reset (default: true). If an options object is passed, simply pass that along to setMatrix.\n\t\t * @param {Boolean} [options.silent] Silence the reset event\n\t\t */\n\t\treset: function(options) { //console.log(\"reset\",options);\n\t\t\toptions = createResetOptions(options);\n\t\t\t// Reset the transform to its original value\n\t\t\tvar matrix = this.setMatrix(this._origTransform, options);\n\t\t\tif (!options.silent) {\n\t\t\t\tthis._trigger('reset', matrix);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Only resets zoom level\n\t\t * @param {Boolean|Object} [options] Whether to animate the reset (default: true) or an object of options to pass to zoom()\n\t\t */\n\t\tresetZoom: function(options) { // console.log(\"resetZoom\",options);\n\t\t\toptions = createResetOptions(options);\n\t\t\tvar origMatrix = this.getMatrix(this._origTransform);\n\t\t\toptions.dValue = origMatrix[ 3 ];\n\t\t\tthis.zoom(origMatrix[0], options);\n\t\t},\n\n\t\t/**\n\t\t * Only reset panning\n\t\t * @param {Boolean|Object} [options] Whether to animate the reset (default: true) or an object of options to pass to pan()\n\t\t */\n\t\tresetPan: function(options) {\n\t\t\tvar origMatrix = this.getMatrix(this._origTransform);\n\t\t\tthis.pan(origMatrix[4], origMatrix[5], createResetOptions(options));\n\t\t},\n\n\t\t/**\n\t\t * Sets a transform on the $set\n\t\t * For SVG, the style attribute takes precedence\n\t\t * and allows us to animate\n\t\t * @param {String} transform\n\t\t */\n\t\tsetTransform: function(transform) { //console.log(\"setTransform called \",transform);\n\t\t\tvar $set = this.$set;\n\t\t\tvar i = $set.length;\n\t\t\t\n\t\t\twhile(i--) {\n\t\t\t\t$.style($set[i], 'transform', transform);\n\n\t\t\t\t// Support IE9-11, Edge 13-14+\n\t\t\t\t// Set attribute alongside style attribute\n\t\t\t\t// since IE and Edge do not respect style settings on SVG\n\t\t\t\t// See https://css-tricks.com/transforms-on-svg-elements/\n\t\t\t\tif (this.isSVG) {\n\t\t\t\t\t$set[i].setAttribute('transform', transform);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Retrieving the transform is different for SVG\n\t\t *  (unless a style transform is already present)\n\t\t * Uses the $set collection for retrieving the transform\n\t\t * @param {String} [transform] Pass in an transform value (like 'scale(1.1)')\n\t\t *  to have it formatted into matrix format for use by Panzoom\n\t\t * @returns {String} Returns the current transform value of the element\n\t\t */\n\t\tgetTransform: function(transform) { //console.log(\"getTransform called \");\n\t\t\tvar $set = this.$set;\n\t\t\tvar transformElem = $set[0];\n\t\t\tif (transform) {\n\t\t\t\tthis.setTransform(transform);\n\t\t\t} else {\n\n\t\t\t\t// IE and Edge still set the transform style properly\n\t\t\t\t// They just don't render it on SVG\n\t\t\t\t// So we get a correct value here\n\t\t\t\ttransform = $.style(transformElem, 'transform');\n\n\t\t\t\tif (this.isSVG && (!transform || transform === 'none')) {\n\t\t\t\t\ttransform = $.attr(transformElem, 'transform') || 'none';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert any transforms set by the user to matrix format\n\t\t\t// by setting to computed\n\t\t\tif (transform !== 'none' && !rmatrix.test(transform)) {\n\n\t\t\t\t// Get computed and set for next time\n\t\t\t\tthis.setTransform(transform = $.css(transformElem, 'transform'));\n\t\t\t}\n\n\t\t\treturn transform || 'none';\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the current transform matrix for $elem (or turn a transform into it's array values)\n\t\t * @param {String} [transform] matrix-formatted transform value\n\t\t * @returns {Array} Returns the current transform matrix split up into it's parts, or a default matrix\n\t\t */\n\t\tgetMatrix: function(transform) {\n\t\t\tvar matrix = rmatrix.exec(transform || this.getTransform());\n\t\t\tif (matrix) {\n\t\t\t\tmatrix.shift();\n\t\t\t}\n\t\t\treturn matrix || [ 1, 0, 0, 1, 0, 0 ];\n\t\t},\n\n\t\t/**\n\t\t * Given a matrix object, quickly set the current matrix of the element\n\t\t * @param {Array|String} matrix\n\t\t * @param {Object} [options]\n\t\t * @param {Boolean|String} [options.animate] Whether to animate the transform change, or 'skip' indicating that it is unnecessary to set\n\t\t * @param {Boolean} [options.contain] Override the global contain option\n\t\t * @param {Boolean} [options.range] If true, $zoomRange's value will be updated.\n\t\t * @param {Boolean} [options.silent] If true, the change event will not be triggered\n\t\t * @returns {Array} Returns the newly-set matrix\n\t\t */\n\t\tsetMatrix: function(matrix, options) {\n\t\t\tif (this.disabled) { return; }\n\t\t\tif (!options) { options = {}; }\n\t\t\t// Convert to array\n\t\t\tif (typeof matrix === 'string') {\n\t\t\t\tmatrix = this.getMatrix(matrix);\n\t\t\t}\n\t\t\tvar scale = +matrix[0];\n\t\t\tvar contain = typeof options.contain !== 'undefined' ? options.contain : this.options.contain;\n\n\t\t\t// Apply containment\n\t\t\tif (contain) {\n\t\t\t\tvar dims = options.dims;\n\t\t\t\tif (!dims) {\n\t\t\t\t\tthis.resetDimensions();\n\t\t\t\t\tdims = this.dimensions;\n\t\t\t\t}\n\t\t\t\tvar spaceWLeft, spaceWRight, scaleDiff;\n\t\t\t\tvar container = this.container;\n\t\t\t\tvar width = dims.width;\n\t\t\t\tvar height = dims.height;\n\t\t\t\tvar conWidth = container.width;\n\t\t\t\tvar conHeight = container.height;\n\t\t\t\tvar zoomAspectW = conWidth / width;\n\t\t\t\tvar zoomAspectH = conHeight / height;\n\n\t\t\t\t// If the element is not naturally centered,\n\t\t\t\t// assume full space right\n\t\t\t\tif (this.$parent.css('textAlign') !== 'center' || $.css(this.elem, 'display') !== 'inline') {\n\t\t\t\t\t// offsetWidth gets us the width without the transform\n\t\t\t\t\tscaleDiff = (width - this.elem.offsetWidth);\n\t\t\t\t\tspaceWLeft = scaleDiff - dims.border.left;\n\t\t\t\t\tspaceWRight = width - conWidth; // - scaleDiff + dims.border.right;\n\t\t\t\t} else {\n\t\t\t\t\tspaceWLeft = spaceWRight = ((width - conWidth));\n\t\t\t\t}\n\t\t\t\tvar spaceHTop = ((height - conHeight)) + dims.border.top;\n\t\t\t\tvar spaceHBottom = ((height - conHeight)) - dims.border.top - dims.border.bottom;\n\n\t\t\t\tif (contain === 'invert' || contain === 'automatic' && zoomAspectW < 1.01) {\n\t\t\t\t\tmatrix[4] = Math.max(Math.min(matrix[4], spaceWLeft - dims.border.left), -spaceWRight);\n\t\t\t\t} else {\n\t\t\t\t\tmatrix[4] = Math.min(Math.max(matrix[4], spaceWLeft), -spaceWRight);\n\t\t\t\t}\n\n\t\t\t\tif (contain === 'invert' || (contain === 'automatic' && zoomAspectH < 1.01)) {\n\t\t\t\t\tmatrix[5] = Math.max(Math.min(matrix[5], spaceHTop - dims.border.top), -spaceHBottom);\n\t\t\t\t} else {\n\t\t\t\t\tmatrix[5] = Math.min(Math.max(matrix[5], spaceHTop), -spaceHBottom);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Animate\n\t\t\tif (options.animate !== 'skip') {\n\t\t\t\t// Set transition\n\t\t\t\tthis.transition(!options.animate);\n\t\t\t}\n\n\t\t\t// Update range element\n\t\t\tif (options.range) {\n\t\t\t\tthis.$zoomRange.val(scale);\n\t\t\t}\n\n\t\t\t// Set the matrix on this.$set\n\t\t\tif (this.options.disableXAxis || this.options.disableYAxis) {\n\t\t\t\tvar originalMatrix = this.getMatrix();\n\t\t\t\tif (this.options.disableXAxis) {\n\t\t\t\t\tmatrix[4] = originalMatrix[4];\n\t\t\t\t}\n\t\t\t\tif (this.options.disableYAxis) {\n\t\t\t\t\tmatrix[5] = originalMatrix[5];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setTransform('matrix(' + matrix.join(',') + ')');\n\n\t\t\tthis.scale = scale;\n\n\t\t\t// Disable/enable panning if zooming is at minimum and panOnlyWhenZoomed is true\n\t\t\tthis._checkPanWhenZoomed(scale);\n\n\t\t\tif (!options.silent) {\n\t\t\t\tthis._trigger('change', matrix);\n\t\t\t}\n\n\t\t\treturn matrix;\n\t\t},\n\n\t\t/**\n\t\t * @returns {Boolean} Returns whether the panzoom element is currently being dragged\n\t\t */\n\t\tisPanning: function() {\n\t\t\treturn this.panning;\n\t\t},\n\n\t\t/**\n\t\t * Apply the current transition to the element, if allowed\n\t\t * @param {Boolean} [off] Indicates that the transition should be turned off\n\t\t */\n\t\ttransition: function(off) {\n\t\t\tif (!this._transition) { return; }\n\t\t\tvar transition = off || !this.options.transition ? 'none' : this._transition;\n\t\t\tvar $set = this.$set;\n\t\t\tvar i = $set.length;\n\t\t\twhile(i--) {\n\t\t\t\t// Avoid reflows when zooming\n\t\t\t\tif ($.style($set[i], 'transition') !== transition) {\n\t\t\t\t\t$.style($set[i], 'transition', transition);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Pan the element to the specified translation X and Y\n\t\t * Note: this is not the same as setting jQuery#offset() or jQuery#position()\n\t\t * @param {Number} x\n\t\t * @param {Number} y\n\t\t * @param {Object} [options] These options are passed along to setMatrix\n\t\t * @param {Array} [options.matrix] The matrix being manipulated (if already known so it doesn't have to be retrieved again)\n\t\t * @param {Boolean} [options.silent] Silence the pan event. Note that this will also silence the setMatrix change event.\n\t\t * @param {Boolean} [options.relative] Make the x and y values relative to the existing matrix\n\t\t */\n\t\tpan: function(x, y, options) {\n\t\t\tif (this.options.disablePan) { return; }\n\t\t\tif (!options) { options = {}; }\n\t\t\tvar matrix = options.matrix;\n\t\t\tif (!matrix) {\n\t\t\t\tmatrix = this.getMatrix();\n\t\t\t}\n\t\t\t// Cast existing matrix values to numbers\n\t\t\tif (options.relative) {\n\t\t\t\tx += +matrix[4];\n\t\t\t\ty += +matrix[5];\n\t\t\t}\n\t\t\tmatrix[4] = x;\n\t\t\tmatrix[5] = y;\n\t\t\tthis.setMatrix(matrix, options);\n\t\t\tif (!options.silent) {\n\t\t\t\tthis._trigger('pan', matrix[4], matrix[5]);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Zoom in/out the element using the scale properties of a transform matrix\n\t\t * @param {Number|Boolean} [scale] The scale to which to zoom or a boolean indicating to transition a zoom out\n\t\t * @param {Object} [opts] All global options can be overwritten by this options object. For example, override the default increment.\n\t\t * @param {Boolean} [opts.noSetRange] Specify that the method should not set the $zoomRange value (as is the case when $zoomRange is calling zoom on change)\n\t\t * @param {jQuery.Event|Object} [opts.focal] A focal point on the panzoom element on which to zoom.\n\t\t *  If an object, set the clientX and clientY properties to the position relative to the parent\n\t\t * @param {Boolean} [opts.animate] Whether to animate the zoom (defaults to true if scale is not a number, false otherwise)\n\t\t * @param {Boolean} [opts.silent] Silence the zoom event\n\t\t * @param {Array} [opts.matrix] Optionally pass the current matrix so it doesn't need to be retrieved\n\t\t * @param {Number} [opts.dValue] Think of a transform matrix as four values a, b, c, d\n\t\t *  where a/d are the horizontal/vertical scale values and b/c are the skew values\n\t\t *  (5 and 6 of matrix array are the tx/ty transform values).\n\t\t *  Normally, the scale is set to both the a and d values of the matrix.\n\t\t *  This option allows you to specify a different d value for the zoom.\n\t\t *  For instance, to flip vertically, you could set -1 as the dValue.\n\t\t */\n\t\tzoom: function(scale, opts) {\n\t\t\t// Shuffle arguments\n\t\t\tif (typeof scale === 'object') {\n\t\t\t\topts = scale;\n\t\t\t\tscale = null;\n\t\t\t} else if (!opts) {\n\t\t\t\topts = {};\n\t\t\t}\n\t\t\tvar options = $.extend({}, this.options, opts);\n\t\t\t// Check if disabled\n\t\t\tif (options.disableZoom) { return; }\n\t\t\tvar animate = false;\n\t\t\tvar matrix = options.matrix || this.getMatrix();\n\t\t\tvar startScale = +matrix[0];\n\n\t\t\t// Calculate zoom based on increment\n\t\t\tif (typeof scale !== 'number') {\n\t\t\t\tif (options.linearZoom) {\n\t\t\t\t\tscale = startScale + (options.increment * (scale ? -1 : 1));\n\t\t\t\t} else {\n\t\t\t\t\tscale = scale ? (startScale / (1 + options.increment)) : (startScale * (1 + options.increment));\n\t\t\t\t}\n\t\t\t\tanimate = true;\n\t\t\t}\n\n\t\t\t// Constrain scale\n\t\t\tscale = Math.max(Math.min(scale, options.maxScale), options.minScale);\n\n\t\t\t// Calculate focal point based on scale\n\t\t\tvar focal = options.focal;\n\t\t\tif (focal && !options.disablePan) {\n\t\t\t\t// Adapted from code by Florian Gnther\n\t\t\t\t// https://github.com/florianguenther/zui53\n\t\t\t\tthis.resetDimensions();\n\t\t\t\tvar dims = options.dims = this.dimensions;\n\t\t\t\tvar clientX = focal.clientX;\n\t\t\t\tvar clientY = focal.clientY;\n\n\t\t\t\t// Adjust the focal point for transform-origin 50% 50%\n\t\t\t\t// SVG elements have a transform origin of 0 0\n\t\t\t\tif (!this.isSVG) {\n\t\t\t\t\tclientX -= (dims.width / startScale) / 2;\n\t\t\t\t\tclientY -= (dims.height / startScale) / 2;\n\t\t\t\t}\n\n\t\t\t\tvar clientV = new Vector(clientX, clientY, 1);\n\t\t\t\tvar surfaceM = new Matrix(matrix);\n\t\t\t\t// Supply an offset manually if necessary\n\t\t\t\tvar o = this.parentOffset || this.$parent.offset();\n\t\t\t\tvar offsetM = new Matrix(1, 0, o.left - this.$doc.scrollLeft(), 0, 1, o.top - this.$doc.scrollTop());\n\t\t\t\tvar surfaceV = surfaceM.inverse().x(offsetM.inverse().x(clientV));\n\t\t\t\tvar scaleBy = scale / matrix[0];\n\t\t\t\tsurfaceM = surfaceM.x(new Matrix([scaleBy, 0, 0, scaleBy, 0, 0]));\n\t\t\t\tclientV = offsetM.x(surfaceM.x(surfaceV));\n\t\t\t\tmatrix[4] = +matrix[4] + (clientX - clientV.e(0));\n\t\t\t\tmatrix[5] = +matrix[5] + (clientY - clientV.e(1));\n\t\t\t}\n\n\t\t\t// Set the scale\n\t\t\tmatrix[0] = scale;\n\t\t\tmatrix[3] = typeof options.dValue === 'number' ? options.dValue : scale;\n\n\t\t\t// Calling zoom may still pan the element\n\t\t\tthis.setMatrix(matrix, {\n\t\t\t\tanimate: typeof options.animate !== 'undefined' ? options.animate : animate,\n\t\t\t\t// Set the zoomRange value\n\t\t\t\trange: !options.noSetRange\n\t\t\t});\n\n\t\t\t// Trigger zoom event\n\t\t\tif (!options.silent) {\n\t\t\t\tthis._trigger('zoom', matrix[0], options);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get/set option on an existing instance\n\t\t * @returns {Array|undefined} If getting, returns an array of all values\n\t\t *   on each instance for a given key. If setting, continue chaining by returning undefined.\n\t\t */\n\t\toption: function(key, value) {\n\t\t\tvar options;\n\t\t\tif (!key) {\n\t\t\t\t// Avoids returning direct reference\n\t\t\t\treturn $.extend({}, this.options);\n\t\t\t}\n\n\t\t\tif (typeof key === 'string') {\n\t\t\t\tif (arguments.length === 1) {\n\t\t\t\t\treturn this.options[ key ] !== undefined ?\n\t\t\t\t\t\tthis.options[ key ] :\n\t\t\t\t\t\tnull;\n\t\t\t\t}\n\t\t\t\toptions = {};\n\t\t\t\toptions[ key ] = value;\n\t\t\t} else {\n\t\t\t\toptions = key;\n\t\t\t}\n\n\t\t\tthis._setOptions(options);\n\t\t},\n\n\t\t/**\n\t\t * Internally sets options\n\t\t * @param {Object} options - An object literal of options to set\n\t\t * @private\n\t\t */\n\t\t_setOptions: function(options) {\n\t\t\t$.each(options, $.proxy(function(key, value) {\n\t\t\t\tswitch(key) {\n\t\t\t\t\tcase 'disablePan':\n\t\t\t\t\t\tthis._resetStyle();\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tcase '$zoomIn':\n\t\t\t\t\tcase '$zoomOut':\n\t\t\t\t\tcase '$zoomRange':\n\t\t\t\t\tcase '$reset':\n\t\t\t\t\tcase 'disableZoom':\n\t\t\t\t\tcase 'onStart':\n\t\t\t\t\tcase 'onChange':\n\t\t\t\t\tcase 'onZoom':\n\t\t\t\t\tcase 'onPan':\n\t\t\t\t\tcase 'onEnd':\n\t\t\t\t\tcase 'onReset':\n\t\t\t\t\tcase 'eventNamespace':\n\t\t\t\t\t\tthis._unbind();\n\t\t\t\t}\n\t\t\t\tthis.options[ key ] = value;\n\t\t\t\tswitch(key) {\n\t\t\t\t\tcase 'disablePan':\n\t\t\t\t\t\tthis._initStyle();\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tcase '$zoomIn':\n\t\t\t\t\tcase '$zoomOut':\n\t\t\t\t\tcase '$zoomRange':\n\t\t\t\t\tcase '$reset':\n\t\t\t\t\t\t// Set these on the instance\n\t\t\t\t\t\tthis[ key ] = value;\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tcase 'disableZoom':\n\t\t\t\t\tcase 'onStart':\n\t\t\t\t\tcase 'onChange':\n\t\t\t\t\tcase 'onZoom':\n\t\t\t\t\tcase 'onPan':\n\t\t\t\t\tcase 'onEnd':\n\t\t\t\t\tcase 'onReset':\n\t\t\t\t\tcase 'eventNamespace':\n\t\t\t\t\t\tthis._bind();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'cursor':\n\t\t\t\t\t\t$.style(this.elem, 'cursor', value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'minScale':\n\t\t\t\t\t\tthis.$zoomRange.attr('min', value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'maxScale':\n\t\t\t\t\t\tthis.$zoomRange.attr('max', value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'rangeStep':\n\t\t\t\t\t\tthis.$zoomRange.attr('step', value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'startTransform':\n\t\t\t\t\t\tthis._buildTransform();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'duration':\n\t\t\t\t\tcase 'easing':\n\t\t\t\t\t\tthis._buildTransition();\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tcase 'transition':\n\t\t\t\t\t\tthis.transition();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'panOnlyWhenZoomed':\n\t\t\t\t\t\tthis._checkPanWhenZoomed();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '$set':\n\t\t\t\t\t\tif (value instanceof $ && value.length) {\n\t\t\t\t\t\t\tthis.$set = value;\n\t\t\t\t\t\t\t// Reset styles\n\t\t\t\t\t\t\tthis._initStyle();\n\t\t\t\t\t\t\tthis._buildTransform();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this));\n\t\t},\n\n\t\t/**\n\t\t * Disable/enable panning depending on whether the current scale\n\t\t * matches the minimum\n\t\t * @param {Number} [scale]\n\t\t * @private\n\t\t */\n\t\t_checkPanWhenZoomed: function(scale) {\n\t\t\tvar options = this.options;\n\t\t\tif (options.panOnlyWhenZoomed) {\n\t\t\t\tif (!scale) { //console.log('scale');\n\t\t\t\t\tscale = this.getMatrix()[0];\n\t\t\t\t}\n\t\t\t\tvar toDisable = scale <= options.minScale;\n\t\t\t\tif (options.disablePan !== toDisable) {\n\t\t\t\t\tthis.option('disablePan', toDisable);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Initialize base styles for the element and its parent\n\t\t * @private\n\t\t */\n\t\t_initStyle: function() { \n\t\t\tvar styles = {\n\t\t\t\t// Set the same default whether SVG or HTML\n\t\t\t\t// transform-origin cannot be changed to 50% 50% in IE9-11 or Edge 13-14+\n\t\t\t\t'transform-origin': this.isSVG ? '0 0' : '50% 50%'\n\t\t\t};\n\t\t\t// Set elem styles\n\t\t\tif (!this.options.disablePan) { //console.log('disablePan');\n\t\t\t\tstyles.cursor = this.options.cursor;\n\t\t\t}\n\t\t\tthis.$set.css(styles);\n\t\t\t//console.log(this.options.isIframe);\n\t\t\t// Set parent to relative if set to static\n\t\t\tvar $parent = this.$parent;\n\t\t\t// No need to add styles to the body\n\t\t\tif ($parent.length && !$.nodeName(this.parent, 'body')) {\n\t\t\t\tif(!this.options.isIframe){\n\t\t\t\t\tstyles = {\n\t\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t\t};\n\t\t\t  } else {\n\t\t\t  \tstyles = {\n\t\t\t\t\t\toverflow: 'auto'\n\t\t\t\t};\n\t\t\t  }\n\t\t\t\tif ($parent.css('position') === 'static') {\n\t\t\t\t\tstyles.position = 'relative';\n\t\t\t\t}\n\t\t\t\t$parent.css(styles);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Undo any styles attached in this plugin\n\t\t * @private\n\t\t */\n\t\t_resetStyle: function() { //console.log(\"On Reset called\");\n\t\t\tthis.$elem.css({\n\t\t\t\t'cursor': '',\n\t\t\t\t'transition': ''\n\t\t\t});\n\t\t\tthis.$parent.css({\n\t\t\t\t'overflow': '',\n\t\t\t\t'position': ''\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Binds all necessary events\n\t\t * @private\n\t\t */\n\t\t_bind: function() {\n\t\t\tvar self = this;\n\t\t\tvar options = this.options;\n\t\t\tvar ns = options.eventNamespace;\n\t\t\tvar str_down = 'mousedown' + ns + ' pointerdown' + ns + ' MSPointerDown' + ns;\n\t\t\tvar str_start = 'touchstart' + ns + ' ' + str_down;\n\t\t\tvar str_click = 'touchend' + ns + ' click' + ns + ' pointerup' + ns + ' MSPointerUp' + ns;\n\t\t    \n\t\t    var events = {};\n\t\t\tvar $reset = this.$reset;\n\t\t\tvar $zoomRange = this.$zoomRange;\n\n\t\t\t// Bind panzoom events from options\n\t\t\t$.each([ 'Start', 'Change', 'Zoom', 'Pan', 'End', 'Reset' ], function() {\n\t\t\t\tvar m = options[ 'on' + this ];\n\t\t\t\tif ($.isFunction(m)) {\n\t\t\t\t\tevents[ 'panzoom' + this.toLowerCase() + ns ] = m;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// Bind $elem drag and click/touchdown events\n\t\t\t// Bind touchstart if either panning or zooming is enabled\n\t\t\tif (!options.disablePan || !options.disableZoom) { //console.log(events[ str_start ]);\n\t\t\t\tevents[ str_start ] = function(e) { //console.log(\"2\");\n\t\t\t\t\t//console.log(e);\n\t\t\t\t\tvar touches;\n\t\t\t\t\tif (e.type === 'touchstart' ?\n\t\t\t\t\t\t// Touch\n\t\t\t\t\t\t(touches = e.touches || e.originalEvent.touches) &&\n\t\t\t\t\t\t\t((touches.length === 1 && !options.disablePan) || touches.length === 2) :\n\t\t\t\t\t\t// Mouse/Pointer: Ignore unexpected click types\n\t\t\t\t\t\t// Support: IE10 only\n\t\t\t\t\t\t// IE10 does not support e.button for MSPointerDown, but does have e.which\n\t\t\t\t\t\t!options.disablePan && (e.which || e.originalEvent.which) === options.which) {\n\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._startMove(e, touches);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// Prevent the contextmenu event\n\t\t\t\t// if we're binding to right-click\n\t\t\t\tif (options.which === 3) {\n\t\t\t\t\tevents.contextmenu = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$elem.on(events);\n\n\t\t\t// Bind reset\n\t\t\tif ($reset.length) {\n\t\t\t\t$reset.on(str_click, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.reset();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set default attributes for the range input\n\t\t\tif ($zoomRange.length) {\n\t\t\t\t$zoomRange.attr({\n\t\t\t\t\t// Only set the range step if explicit or\n\t\t\t\t\t// set the default if there is no attribute present\n\t\t\t\t\tstep: options.rangeStep === Panzoom.defaults.rangeStep &&\n\t\t\t\t\t\t$zoomRange.attr('step') ||\n\t\t\t\t\t\toptions.rangeStep,\n\t\t\t\t\tmin: options.minScale,\n\t\t\t\t\tmax: options.maxScale\n\t\t\t\t}).prop({\n\t\t\t\t\tvalue: this.getMatrix()[0]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// No bindings if zooming is disabled\n\t\t\tif (options.disableZoom) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $zoomIn = this.$zoomIn;\n\t\t\tvar $zoomOut = this.$zoomOut;\n\t\t\t\n\t\t\t// Bind zoom in/out\n\t\t\t// Don't bind one without the other\n\t\t\tif ($zoomIn.length && $zoomOut.length) {\n\t\t\t\t// preventDefault cancels future mouse events on touch events\n\t\t\t\t$zoomIn.on(str_click, function(e) { //console.log(\"zoomIn.on\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.zoom();\n\t\t\t\t});\n\t\t\t\t$zoomOut.on(str_click, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.zoom(true);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ($zoomRange.length) {\n\t\t\t\tevents = {};\n\t\t\t\t// Cannot prevent default action here\n\t\t\t\tevents[ str_down ] = function() {\n\t\t\t\t\tself.transition(true);\n\t\t\t\t};\n\t\t\t\t// Zoom on input events if available and change events\n\t\t\t\t// See https://github.com/timmywil/jquery.panzoom/issues/90\n\t\t\t\tevents[ (supportsInputEvent ? 'input' : 'change') + ns ] = function() {\n\t\t\t\t\tself.zoom(+this.value, { noSetRange: true });\n\t\t\t\t};\n\t\t\t\t$zoomRange.on(events);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Unbind all events\n\t\t * @private\n\t\t */\n\t\t_unbind: function() {\n\t\t\tthis.$elem\n\t\t\t\t.add(this.$zoomIn)\n\t\t\t\t.add(this.$zoomOut)\n\t\t\t\t.add(this.$reset)\n\t\t\t\t.off(this.options.eventNamespace);\n\t\t},\n\n\t\t/**\n\t\t * Builds the original transform value\n\t\t * @private\n\t\t */\n\t\t_buildTransform: function() { //console.log(\"_buildTransform\",this.options.startTransform);\n\t\t\t// Save the original transform\n\t\t\t// Retrieving this also adds the correct prefixed style name\n\t\t\t// to jQuery's internal $.cssProps\n\t\t\treturn this._origTransform = this.getTransform(this.options.startTransform);\n\t\t},\n\n\t\t/**\n\t\t * Set transition property for later use when zooming\n\t\t * @private\n\t\t */\n\t\t_buildTransition: function() {\n\t\t\tif (this._transform) {\n\t\t\t\tvar options = this.options;\n\t\t\t\tthis._transition = this._transform + ' ' + options.duration + 'ms ' + options.easing;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Calculates the distance between two touch points\n\t\t * Remember pythagorean?\n\t\t * @param {Array} touches\n\t\t * @returns {Number} Returns the distance\n\t\t * @private\n\t\t */\n\t\t_getDistance: function(touches) {\n\t\t\tvar touch1 = touches[0];\n\t\t\tvar touch2 = touches[1];\n\t\t\treturn Math.sqrt(Math.pow(Math.abs(touch2.clientX - touch1.clientX), 2) + Math.pow(Math.abs(touch2.clientY - touch1.clientY), 2));\n\t\t},\n\n\t\t/**\n\t\t * Constructs an approximated point in the middle of two touch points\n\t\t * @returns {Object} Returns an object containing pageX and pageY\n\t\t * @private\n\t\t */\n\t\t_getMiddle: function(touches) {\n\t\t\tvar touch1 = touches[0];\n\t\t\tvar touch2 = touches[1];\n\t\t\treturn {\n\t\t\t\tclientX: ((touch2.clientX - touch1.clientX) / 2) + touch1.clientX,\n\t\t\t\tclientY: ((touch2.clientY - touch1.clientY) / 2) + touch1.clientY\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Trigger a panzoom event on our element\n\t\t * The event is passed the Panzoom instance\n\t\t * @param {String|jQuery.Event} event\n\t\t * @param {Mixed} arg1[, arg2, arg3, ...] Arguments to append to the trigger\n\t\t * @private\n\t\t */\n\t\t_trigger: function (event) {\n\t\t\tif (typeof event === 'string') {\n\t\t\t\tevent = 'panzoom' + event;\n\t\t\t}\n\t\t\tthis.$elem.triggerHandler(event, [this].concat(slice.call(arguments, 1)));\n\t\t},\n\n\t\t/**\n\t\t * Starts the pan\n\t\t * This is bound to mouse/touchmove on the element\n\t\t * @param {jQuery.Event} event An event with pageX, pageY, and possibly the touches list\n\t\t * @param {TouchList} [touches] The touches list if present\n\t\t * @private\n\t\t */\n\t\t_startMove: function(event, touches) { //console.log(\"startmove\")\n\n\t\t\t//console.log(this.elem);\n\t\t\tif (this.panning) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar moveEvent, endEvent,\n\t\t\t\tstartDistance, startScale, startMiddle,\n\t\t\t\tstartPageX, startPageY, touch;\n\t\t\tvar self = this;\n\t\t\tvar options = this.options;\n\t\t\tvar ns = options.eventNamespace;\n\t\t\tvar matrix = this.getMatrix();\n\t\t\tvar original = matrix.slice(0);\n\t\t\tvar origPageX = +original[4];\n\t\t\tvar origPageY = +original[5];\n\t\t\tvar panOptions = { matrix: matrix, animate: 'skip' };\n\t\t\tvar type = event.type;\n\t\t\t//console.log(options);\n\t\t\t// Use proper events\n\t\t\tif (type === 'pointerdown') {\n\t\t\t\tmoveEvent = 'pointermove';\n\t\t\t\tendEvent = 'pointerup';\n\t\t\t} else if (type === 'touchstart') {\n\t\t\t\tmoveEvent = 'touchmove';\n\t\t\t\tendEvent = 'touchend';\n\t\t\t} else if (type === 'MSPointerDown') {\n\t\t\t\tmoveEvent = 'MSPointerMove';\n\t\t\t\tendEvent = 'MSPointerUp';\n\t\t\t} else {\n\t\t\t\tmoveEvent = 'mousemove';\n\t\t\t\tendEvent = 'mouseup';\n\t\t\t}\n\t\t\t//custome changes\n\t\t\t// Add namespace\n\t\t\tmoveEvent += ns;\n\t\t\tendEvent += ns;\n\t\t\t//console.log(moveEvent)\n\t\t\t// Remove any transitions happening\n\t\t\tthis.transition(true);\n\n\t\t\t// Indicate that we are currently panning\n\t\t\tthis.panning = true;\n\n\t\t\t// Trigger start event\n\t\t\tthis._trigger('start', event, touches);\n\n\t\t\tvar setStart = function(event, touches) {\n\t\t\t\tif (touches) {\n\t\t\t\t\tif (touches.length === 2) {//console.log(\"1\");\n\t\t\t\t\t\tif (startDistance != null) {//console.log(\"2\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstartDistance = self._getDistance(touches);\n\t\t\t\t\t\tstartScale = +matrix[0];\n\t\t\t\t\t\tstartMiddle = self._getMiddle(touches);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (startPageX != null) { //console.log(\"3\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ((touch = touches[0])) { //console.log(\"4\");\n\t\t\t\t\t\tstartPageX = touch.pageX;\n\t\t\t\t\t\tstartPageY = touch.pageY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startPageX != null) {  //console.log(\"5\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tstartPageX = event.pageX;\n\t\t\t\tstartPageY = event.pageY;\n\t\t\t\t//console.log(startPageX,startPageY)\n\t\t\t};\n\n\t\t\tsetStart(event, touches);\n\n\t\t\tvar move = function(e) { //console.log(\"move\")\n\t\t\t\tvar coords;\n\t\t\t\te.preventDefault();\n\t\t\t\ttouches = e.touches || e.originalEvent.touches;\n\t\t\t\tsetStart(e, touches);\n\t\t\t\t$(document).off('click mousedown');\n\t\t\t\t\n\t\t\t\tif (touches) {\n\t\t\t\t\tif (touches.length === 2) {\n\n\t\t\t\t\t\t// Calculate move on middle point\n\t\t\t\t\t\tvar middle = self._getMiddle(touches);\n\t\t\t\t\t\tvar diff = self._getDistance(touches) - startDistance;\n\n\t\t\t\t\t\t// Set zoom\n\t\t\t\t\t\tself.zoom(diff * (options.increment / 100) + startScale, {\n\t\t\t\t\t\t\tfocal: middle,\n\t\t\t\t\t\t\tmatrix: matrix,\n\t\t\t\t\t\t\tanimate: 'skip'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Set pan\n\t\t\t\t\t\tself.pan(\n\t\t\t\t\t\t\t+matrix[4] + middle.clientX - startMiddle.clientX,\n\t\t\t\t\t\t\t+matrix[5] + middle.clientY - startMiddle.clientY,\n\t\t\t\t\t\t\tpanOptions\n\t\t\t\t\t\t);\n\t\t\t\t\t\tstartMiddle = middle;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcoords = touches[0] || { pageX: 0, pageY: 0 };\n\t\t\t\t}\n\n\t\t\t\tif (!coords) {\n\t\t\t\t\tcoords = e;\n\t\t\t\t}\n\n\t\t\t\tself.pan(\n\t\t\t\t\torigPageX + coords.pageX - startPageX,\n\t\t\t\t\torigPageY + coords.pageY - startPageY,\n\t\t\t\t\tpanOptions\n\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\t/*var x=event.offsetX;\n\t\t\t\t\tvar y=event.offsetY;\n\t\t\t\t\tvar point =x+'px '+y+'px'+' 0px';\n\t\t\t\t\tconsole.log(\"point\",point);\n\t\t\t\t\tvar currentElement= $(event.currentTarget);\n\t\t\t\t\tcurrentElement.css('transform-origin',point);*/\n\t\t\t\t\t\n\t\t\t};\n\n\t\t\t// Bind the handlers\n\t\t\t$(options.isIFrame?options.iFrameWindow.document:window.document)//updated by nayan default was $(document)\n\t\t\t\t.off(ns)\n\t\t\t\t.on(moveEvent, move)\n\t\t\t\t.on(endEvent, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t// Unbind all document events\n\t\t\t\t\t$(this).off(ns);\n\t\t\t\t\tself.panning = false;\n\t\t\t\t\t// Trigger our end event\n\t\t\t\t\t// Simply set the type to \"panzoomend\" to pass through all end properties\n\t\t\t\t\t// jQuery's `not` is used here to compare Array equality\n\t\t\t\t\te.type = 'panzoomend';\n\t\t\t\t\tself._trigger(e, matrix, !matrixEquals(matrix, original));\n\t\t\t\t});\n\t\t}\n\t};\n\n\t// Add Panzoom as a static property\n\t$.Panzoom = Panzoom;\n\n\t/**\n\t * Extend jQuery\n\t * @param {Object|String} options - The name of a method to call on the prototype\n\t *  or an object literal of options\n\t * @returns {jQuery|Mixed} jQuery instance for regular chaining or the return value(s) of a panzoom method call\n\t */\n\t$.fn.panzoom = function(options) {\n\t\tvar instance, args, m, ret;\n\n\t\t// Call methods widget-style\n\t\tif (typeof options === 'string') {\n\t\t\tret = [];\n\t\t\targs = slice.call(arguments, 1);\n\t\t\tthis.each(function() {\n\t\t\t\tinstance = $.data(this, datakey);\n\n\t\t\t\tif (!instance) {\n\t\t\t\t\tret.push(undefined);\n\n\t\t\t\t// Ignore methods beginning with `_`\n\t\t\t\t} else if (options.charAt(0) !== '_' &&\n\t\t\t\t\ttypeof (m = instance[ options ]) === 'function' &&\n\t\t\t\t\t// If nothing is returned, do not add to return values\n\t\t\t\t\t(m = m.apply(instance, args)) !== undefined) {\n\n\t\t\t\t\tret.push(m);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Return an array of values for the jQuery instances\n\t\t\t// Or the value itself if there is only one\n\t\t\t// Or keep chaining\n\t\t\treturn ret.length ?\n\t\t\t\t(ret.length === 1 ? ret[0] : ret) :\n\t\t\t\tthis;\n\t\t}\n\n\t\treturn this.each(function() { new Panzoom(this, options); });\n\t};\n\n\treturn Panzoom;\n}));\n\n",
    "define('extensions/adapt-panZoom/js/adapt-panZoomContainerView',[\n    'backbone',\n    'coreJS/adapt',\n    './jquery.panzoom'\n], function(Backbone, Adapt, jqueryPanZoom) {\n\n    var panZoomContainerView = Backbone.View.extend({\n\n        className: \"panZoom\",\n\n        events: {\n            'click .zoom-in': 'onPanZoomActivate',\n            'click .reset': 'deActivatePanZoom',\n            'touchstart .reset': 'deActivatePanZoom',\n            'touchstart .zoom-in': 'onPanZoomActivate',\n        },\n\n        initialize: function(options) {\n            this.listenTo(Adapt, 'remove', this.remove);\n            this.render();\n            if (this.model.get('_isRIframe') && this.model.get('_isEnabled')) {\n                this.model.get('_component').$el.find('iframe').addClass(\"panZoom-border\");\n                this.$('.panZoom-container').css({\n                    'position': 'absolute',\n                    'bottom': 0,\n                    'margin-left':'0px'\n                });\n            }\n            if (this.model.get('_isGraphic') && this.model.get('_isEnabled')) {\n                var graphicWidget = this.model.get('_component').$el.find('.graphic-widget');\n                graphicWidget.wrap(\"<div class='panZoom-border'></div>\");\n                graphicWidget.imageready(_.bind(function() {\n                    graphicWidget.parent().css({'height':graphicWidget.height(),'width':graphicWidget.width()}); //.addClass(\"panZoom-border\").css({\"margin-right\":'4% !important;'});\n                }, this));\n            }\n            this.counter = 0;\n            this.iFrameWindow = null;\n\n        },\n\n        deActivatePanZoom: function(events) {\n            var zoomElement = null;\n            if (this.model.get('_isRIframe') && this.model.get('_isEnabled')) {\n                zoomElement = this.model.get('stage');\n            }\n            if (this.model.get('_isGraphic') && this.model.get('_isEnabled')) {\n                zoomElement = this.$el.parent().find('.graphic-widget');//$('.graphic-widget');\n            }\n            this.unBindEvents(zoomElement);\n            this.resetComponent(zoomElement);\n            this.counter = 0;\n        },\n\n        resetComponent: function(zoomElement) {\n            this.$(\".reset\").removeClass('reset-graphic-btn').addClass('display-none');\n            this.$(\".zoom-in\").removeClass('display-none zoom-selected');\n            //for Iframe\n            if (this.model.get('_isRIframe') && this.model.get('_isEnabled')) {\n                this.$('.panZoom-container').addClass('panzoom-iFrame-container');\n            }\n             //for Iframe content style\n            if(this.model.get('stageStyle')){\n                zoomElement.attr('style',this.model.get('stageStyle'));\n\n            }else{\n                zoomElement.css({\n                    'transform': '',\n                    'transform-origin': '',\n                    'right': '',\n                    'position': '',\n                    'bottom': ''\n                });\n            }\n        },\n\n        unBindEvents: function(element) {\n            element.panzoom(\"destroy\");\n            element.off('mouseenter mouseleave');\n        },\n\n        toggleZoomIcon: function(currentElement) {\n            currentElement.hover(function() {\n                currentElement.addClass(\"zoom-in-icon\");\n            }, function() {\n                currentElement.removeClass(\"zoom-in-icon\");\n            });\n        },\n\n        onPanZoomActivate: function(events) {\n\n            var currentTarget = $($(events.currentTarget).parents()[3]);\n            var zoomElement = $(events.currentTarget);\n            zoomElement.addClass('zoom-selected');\n            if (this.model.get('_isGraphic') && this.model.get('_isEnabled')) {\n                var currentElement = currentTarget.find('.graphic-widget');\n                var getZoomLevel = this.model.get('_zoomLevel');\n                this.toggleZoomIcon(currentElement);\n                var self = this;\n                currentElement.one(\"click\", function(e) {\n                    e.preventDefault();\n                    var x = e.offsetX;\n                    var y = e.offsetY;\n\n                    currentElement.panzoom({\n                        //$zoomIn: $(events.currentTarget),\n                        //$zoomOut: $(\".zoom-out\"),\n                        //$reset: $(\".reset\"),\n                        panOnlyWhenZoomed: true,\n                        //$set: currentElement,\n                        minScale: self.model.get('_minScale')||0.3,\n                        maxScale: self.model.get('_maxScale')||1.5,\n                        startTransform: 'scale(' + getZoomLevel + ')',\n                        increment: self.model.get('_increment')||0.3,\n                        contain: 'invert',\n                        isIFrame: false\n                    }).panzoom('zoom');\n                    var currentZoomPosition = x + 'px ' + y + 'px' + ' 0px';\n                    currentElement.css('transform-origin', currentZoomPosition);\n                    self.$(\".reset\").addClass('reset-graphic-btn').removeClass('display-none');\n                    self.$(\".zoom-in\").addClass('display-none');\n                });\n            }\n\n            if (this.model.get('_isRIframe') && this.model.get('_isEnabled')) {\n                var currentElement = currentTarget.find('.responsiveIframe-iframe-holder iframe');\n                var getZoomLevel = this.model.get('_zoomLevel') || 1.5;\n                this.activateIframeZoom(currentElement, getZoomLevel);\n            }\n        },\n\n        activateIframeZoom: function(currentElement, getZoomLevel) {\n            if (!this.iFrameWindow) {\n                this.iFrameWindow = currentElement[0].contentWindow;\n                this.iFrameWindow.jQuery = window.jQuery;\n                this.iFrameWindow.$ = window.$;\n                this.model.set('stage', $(this.iFrameWindow.document.getElementById('Stage')));\n                this.model.set('stageStyle', $(this.iFrameWindow.document.getElementById('Stage')).attr('style'));\n                this.addCSSToIFrame();\n            }\n            this.zoomIFrame(getZoomLevel);\n        },\n        zoomIFrame: function(getZoomLevel) {\n            var stage = this.model.get('stage'),\n                self = this;\n            this.toggleZoomIcon(stage);\n            stage.one('click', function(e) {\n                e.preventDefault();\n                var x = e.clientX;\n                var y = e.clientY;\n                self.panZoomContainerPosition();\n                stage.panzoom({\n                    //$zoomIn: stage,\n                    //$zoomOut: $(\".zoom-out\"),\n                    //$reset: $(\".reset\"),\n                    panOnlyWhenZoomed: true,\n                    minScale: self.model.get('_minScale')||0.3,\n                    maxScale: self.model.get('_maxScale')||1.5,\n                    startTransform: 'scale(' + getZoomLevel + ')',\n                    increment: self.model.get('_increment')||0.3,\n                    contain: 'invert',\n                    isIFrame: true,\n                    iFrameWindow: self.iFrameWindow\n                }).panzoom('zoom');\n\n                var currentZoomPosition = x + 'px ' + y + 'px' + ' 0px';\n                stage.css('transform-origin', currentZoomPosition);\n                self.$(\".reset\").removeClass('display-none');\n                self.$(\".zoom-in\").addClass('display-none');\n            });\n        },\n        panZoomContainerPosition: function() {\n            var btnHeight = this.$el.find('.zoom-in').height()||this.$el.find('.reset').height();\n            var border = parseInt(this.$el.parent().find('.panZoom-border').css(\"border-width\"))||2;\n            var scale = 1.5;\n            var bottom=(btnHeight * scale) + border;\n            this.$('.panZoom-container').addClass('panzoom-iFrame-container');\n\n        },\n        addCSSToIFrame: function() {\n            var iFrame = this.iFrameWindow.document;\n            var head = $(iFrame).find(\"head\");\n            var css = '<style type=\"text/css\">' +\n                '#Stage{height: 720px !important; background-color: transparent !important;}' +\n                '.zoom-in-icon {cursor: -webkit-zoom-in;cursor: zoom-in;}' +\n                '</style>';\n            $(head).append(css);\n        },\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[\"panZoom\"];\n            this.$el.html(template(data));\n            return this;\n        }\n    });\n\n    return panZoomContainerView;\n});\n",
    "define('extensions/adapt-panZoom/js/adapt-panZoom',[\n    'backbone',\n    'coreJS/adapt',\n    './adapt-panZoomContainerView'\n], function(Backbone, Adapt,panZoomComponentView) {\n\n    function onComponentViewPostRender (componentView) {\n          var componentType=componentView.model.get('_component');\n          var panZoomComponentData = componentView.model.get('_panZoom') || {};\n            if(!panZoomComponentData._isEnabled || !panZoomComponentData._isPartOfVerticalBlockSlider) return ;\n\n               if(componentType === \"graphic\" || componentType === \"responsiveIframe\") { //\n                  if(componentType === \"graphic\") panZoomComponentData._isGraphic=true;\n                  if(componentType === \"responsiveIframe\") panZoomComponentData._isRIframe=true;\n\n                  panZoomComponentData._component=componentView;\n                  var $panZoomView = new panZoomComponentView({model: new Backbone.Model(panZoomComponentData)}).$el;\n                  var $componentBody = componentView.$el.find('.component-widget');\n                  $panZoomView.insertAfter($componentBody);\n               }\n          }\n\n        Adapt.on('componentView:postRender', function(componentView) {\n              var panZoomData=Adapt.course.get('_panZoom');\n              if(!panZoomData || !panZoomData._isEnabled) {\n                return ;\n              }\n              onComponentViewPostRender(componentView);\n        });\n});\n\n\n",
    "define('extensions/adapt-progressTracking/js/helper.min',['require','handlebars'],function(require){var Handlebars=require('handlebars'),Helper=function(context){helpers={switch:function(value,options){this.switchValue=value;this.switchBreak=false;var html=options.fn(this);delete this.switchBreak;delete this.switchBreak;return html;},case:function(value,options){var args=Array.prototype.slice.call(arguments);var options=args.pop();var caseValues=args;if(this.switchBreak||caseValues.indexOf(this.switchValue)===-1){return'';}else{if(options.hash.break===true){this.switchBreak=true;}\nreturn options.fn(this);}},default:function(options){if(!this.switchBreak){return options.fn(this);}}};for(var name in helpers){if(helpers.hasOwnProperty(name)){Handlebars.registerHelper(name,helpers[name]);}}};return Helper;});\n",
    "define('extensions/adapt-progressTracking/js/adapt-progressTrackingView',['require','coreJS/adapt','backbone','extensions/adapt-progressTracking/js/helper.min'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var Helper = require('extensions/adapt-progressTracking/js/helper.min');\n\n    var ProgressTrackingView = Backbone.View.extend({\n\n        className: \"progressTracking\",\n\n        initialize: function() {\n            this.listenTo(Adapt, 'remove', this.remove);\n            // On initialize start the render process\n            this.preRender();\n            this.newWindow = null;\n            this.listenTo(this.model, 'change:_isComplete', this.blockChangedAttribute);\n            this.render();\n        },\n\n        events: {\n            'click .progressTracking-icon': 'showTooltip',\n            'click .tooltip a': 'openExternalResource'\n        },\n\n        preRender: function() {\n            new Helper(this);\n            this.setIsTooltipAvailable();\n        },\n        setIsTooltipAvailable:function(){\n            var status=false;\n           tooltipObject = this.model.get(\"_progressTracking\").tooltip;\n            if (!_.isEmpty(tooltipObject)) {\n                if (!(tooltipObject.linkText || tooltipObject.description)) {\n                   this.model.set('isTooltipAvailable',status);\n                   return;\n                }\n                status=true;\n            }\n            this.model.set('isTooltipAvailable',status);\n        },\n        blockChangedAttribute: function(model) {\n            if (model.get('_isComplete')) {\n                var element = this.$el.find('.progressTracking-icon');\n                if (!element.hasClass('complete')) {\n                    element.removeClass('inComplete').addClass('complete')\n                }\n            }\n        },\n        showTooltip: function(event) {\n            event = event || window.event;\n            if (event.stopPropagation) event.stopPropagation();\n            event.cancelBubble = true;\n            var element = event.currentTarget;\n                $('.tooltip').not(this.$(element).children('.tooltip')).not('.visibility-hidden').addClass('visibility-hidden');\n                this.$(element).children('.tooltip').toggleClass('visibility-hidden');\n        },\n        openExternalResource: function(event) {\n            if (event.preventDefault) event.preventDefault();\n            var src = this.model.get('_progressTracking').tooltip.src;\n            if (!this.newWindow) {\n                this.newWindow = window.open(src, \"_blank\", \"width=500,height=500\");\n                $(this.newWindow).on(\"beforeunload\", _.bind(this.onWindowClose, this));\n            }\n        },\n        onWindowClose: function() {\n            this.newWindow = null;\n        },\n        render: function() {\n            var data = this.model.toJSON();\n            var template = Handlebars.templates[\"progressTracking\"];\n            // Push data into template and append template\n            this.$el.html(template(data));\n            return this;\n\n        }\n    });\n    return ProgressTrackingView;\n\n});\n",
    "define('extensions/adapt-progressTracking/js/adapt-progressTracking',['require','coreJS/adapt','backbone','extensions/adapt-progressTracking/js/adapt-progressTrackingView'],function(require) {\n\n    var Adapt = require('coreJS/adapt');\n    var Backbone = require('backbone');\n    var ProgressTrackingView = require('extensions/adapt-progressTracking/js/adapt-progressTrackingView');\n\n    // Listen to when the data is all loaded\n    /*    Adapt.on('app:dataReady', function() {\n            console.log('Plugin has loaded and data is ready');\n        });*/\n\n    function setupProgressTrackingView(block) {\n        var progressTrackingData = block.model.get('_progressTracking') || {};\n        if (!progressTrackingData._isEnabled) return;\n        if(progressTrackingData._blockIcon.type===\"\"&&progressTrackingData._blockIcon.isInteractive===false)return;\n        if (!componentsType(block)) return;\n        block.$el.prepend(new ProgressTrackingView({\n            model: block.model\n        }).$el);\n        var blockTitle = block.model.get(\"displayTitle\") || \"Linked\";\n        if(blockTitle === \"Linked\"){\n            block.$el.find(\".progressTracking-icon\").css(\"top\",\"0px\");\n        }\n        return;\n    }\n    //return true for a block which contain components except for the  text or the graphic or blank or these with any intractive component(e.g.mcq)\n    function componentsType(block) {\n        var components = block.model.findDescendants('components'),\n            componentType = [],\n            totalComponent = components.models.length;\n        for (var i = 0; i < totalComponent; i++) {\n            componentType.push(components.models[i].get('_component'));\n        }\n        var tottalInteractiveComponents = _.without(componentType, \"graphic\", \"text\", \"blank\").length;\n        if (!tottalInteractiveComponents) {\n            if(!block.model.get('_progressTracking')._blockIcon.type)\n             return false;\n        }\n        if (!(totalComponent == tottalInteractiveComponents)) {\n            //block.model.get(\"_progressTracking\")._blockIcon = {};\n        }\n        return true;\n    }\n    // Listen to when the blockView postRender\n    Adapt.on('blockView:postRender', function(block) {\n        if (!Adapt.course.get('_progressTracking') || !Adapt.course.get('_progressTracking')._isEnabled)\n            return console.log('Sorry, no progressTracking object is set on the course.json file');\n        setupProgressTrackingView(block);\n    });\n\n});\n\n",
    "define('extensions/adapt-verticalBlockSlider/js/adapt-verticalBlockSlider',['require','coreJS/adapt'],function(require) {\n\n  var Adapt = require('coreJS/adapt');\n  function setupverticalBlockSliderView (verticalBlockSliderArticle) {\n\n    var verticalBlockSliderView = Backbone.View.extend({\n\n      className: \"extension-verticalBlockSlider\",\n\n      el: '.' + verticalBlockSliderArticle.get('_id'),\n\n      events: {\n        'click .verticalBlockSlider-controls' : 'navigateClick',\n        'click .verticalBlockSlider-tab' : 'navigateTab',\n        'touchstart .verticalBlockSlider-tab' :'navigationOnTouchDevices'\n      },\n\n      initialize: function() {\n        if(verticalBlockSliderArticle.get('_verticalBlockSlider')._isEnabled !== true) return;\n        this.setupverticalBlockSlider();\n        this.checkDeviceLayout();\n        this.render();\n        _.defer(_.bind(function() {\n          this.setInitialSlide();\n        }, this));\n        \n        this.listenTo(Adapt, 'remove', this.remove, this);\n        this.listenTo(Adapt, 'device:changed', this.checkDeviceLayout, this);\n        this.listenTo(Adapt, 'pageView:ready', this.setBlockHeight, this);\n      },\n\n      postRender:function() {\n        $(window).on('keydown',_.bind(this.setupStageNavigationOnKeys, this));\n      },\n\n      navigationOnTouchDevices:function(events) {\n        event.preventDefault();\n        this.$('.verticalBlockSlider-tab').removeClass('active');\n        this.$(event.currentTarget).addClass('active visited');\n        var currentIndex = this.$('.verticalBlockSlider-tab.active').index();\n        var $currnetBlock=this.$('.verticalBlockSlider-tab').eq(currentIndex).attr('id');\n        var movementSize =this.$('.'+ $currnetBlock).height();\n        this.navigateToIndex(currentIndex, movementSize);\n        Adapt.scrollTo(0);\n      },\n\n      remove: function() {\n          this.unbindEvents();\n          Backbone.View.prototype.remove.call(this);\n          $('.bottomnavigation').removeClass('display-none');\n           if(!$('html').hasClass('has-bottomnavigation')) {\n            $('html').addClass('has-bottomnavigation');\n          }\n      },\n\n      unbindEvents:function() {\n          $(window).off('keydown');\n          $(window).off('mousewheel');\n          $(window).off('DOMMouseScroll');\n      },\n\n      setupStageNavigationOnKeys:function(event) {\n\n            event.preventDefault();\n            var stage=this.model.get('_stage');\n            var $currnetBlock=this.$('.verticalBlockSlider-tab').eq(stage).attr('id');\n            var movementSize =this.$('.'+ $currnetBlock).height();\n\n            if(event.keyCode === 39 || event.keyCode === 40) {\n              this.navigateToIndex(++stage, movementSize);\n            }\n             if(event.keyCode === 37 || event.keyCode === 38) {\n              this.navigateToIndex(--stage, movementSize);\n            }\n             Adapt.scrollTo(0);\n      },\n\n      setInitialSlide: function() {\n        var initialSlide = this.model.get('_verticalBlockSlider')._initial ? this.model.get('_verticalBlockSlider')._initial-1 : 0;\n        var movementSize = this.$('.verticalBlockSlider-container').width();\n        this.$('.verticalBlockSlider').css({'margin-top': - (movementSize * initialSlide)});\n        this.setStage(initialSlide);\n        this.bindScrollEvent();\n      },\n\n      bindScrollEvent: function() {\n        var self = this;\n        $(window).bind('mousewheel', function(e) {\n          var stage=self.model.get('_stage');\n          var $currnetBlock=self.$('.verticalBlockSlider-tab').eq(stage).attr('id');\n          var movementSize =self.$('.'+ $currnetBlock).height();\n\n          if(e.originalEvent.wheelDelta > 119) {\n            self.navigateToIndex(--stage, movementSize);\n          }\n          else if (e.originalEvent.wheelDelta < -119) {\n            self.navigateToIndex(++stage, movementSize);\n          }\n          Adapt.scrollTo(0);\n        });\n\n        $(window).bind('DOMMouseScroll', function(e) {\n\n          var stage=self.model.get('_stage');\n          var $currnetBlock=self.$('.verticalBlockSlider-tab').eq(stage).attr('id');\n          var movementSize =self.$('.'+ $currnetBlock).height();\n          \n          if(e.originalEvent.detail < -2) {\n            self.navigateToIndex(--stage, movementSize);\n          }\n          else if (e.originalEvent.detail > 2) {\n            self.navigateToIndex(++stage, movementSize);\n          }\n         Adapt.scrollTo(0);\n        });\n      },\n\n      render: function () {\n        var data = this.model.toJSON();\n        var template = Handlebars.templates[\"verticalBlockSlider\"];\n        this.$('.article-inner').addClass('verticalBlockSlider-article');\n        $(template(data)).insertBefore(this.$('.verticalBlockSlider-container'));\n        this.$('.verticalBlockSlider-tab').first().addClass('active visited');\n\n         _.defer(_.bind(function() {\n                this.postRender();\n         }, this));\n\n        return this;\n      },\n\n      checkDeviceLayout: function() {\n        if (Adapt.device.screenSize === 'small') {\n          this.unwrapBlocks();\n        } else if (!this.model.get('_active') && Adapt.device.screenSize != 'small') {\n          this.wrapBlocks();\n        }\n      },\n\n      wrapBlocks: function() {\n        this.$(\".block\").wrapAll( \"<div class='verticalBlockSlider' />\");\n        this.$(\".verticalBlockSlider\").wrapAll(\"<div class='verticalBlockSlider-container' />\");\n        this.$('.verticalBlockSlider-controls-container').removeClass('verticalBlockSlider-hidden');\n        this.model.set('_active', true);\n      },\n\n      getAvailableBlocks: function () {\n        return _.filter(this.model.getChildren().models, function(block) {\n          return block.get('_isAvailable');\n        });\n      },\n\n      unwrapBlocks: function() {\n        this.$(\".verticalBlockSlider\").unwrap();\n        this.$(\".block\").unwrap();\n        this.$('.verticalBlockSlider-controls-container').addClass('verticalBlockSlider-hidden');\n        var availableBlocks = this.getAvailableBlocks();\n        _.each(availableBlocks, function(availableBlock) {\n          availableBlock.set('_isVisible', availableBlock.get('_previousVisibleState'));\n        });\n\n        this.model.set('_active', false);\n      },\n\n      setupverticalBlockSlider: function() {\n        var availableBlocks = this.getAvailableBlocks();\n        console.log(availableBlocks.length);\n\n        \n        this.$('.article-header').addClass('display-none');\n        $('.bottomnavigation').addClass('display-none');\n        if($('html').hasClass('has-bottomnavigation')) {\n          $('html').removeClass('has-bottomnavigation');\n        }\n        _.each(availableBlocks, function(availableBlock) {\n          availableBlock.set('_previousVisibleState', availableBlock.get('_isVisible'));\n           availableBlock.set('_isVisible', false);\n        }, this);\n\n        this.model.set('_blocks', availableBlocks);\n        this.model.set('_blockCount', availableBlocks.length);\n\n        this.wrapBlocks();\n      },\n\n      navigateClick: function (event) {\n        event.preventDefault();\n        var stage = this.model.get('_stage');\n        var $currnetBlock=this.$('.verticalBlockSlider-tab').eq(stage).attr('id');\n        var movementSize =this.$('.'+ $currnetBlock).height();\n       \n         if (this.$(event.currentTarget).hasClass('verticalBlockSlider-control-right')) {\n          this.navigateToIndex(++stage, movementSize);\n        }\n        if (this.$(event.currentTarget).hasClass('verticalBlockSlider-control-left')) {\n          this.navigateToIndex(--stage, movementSize);\n        }\n         Adapt.scrollTo(0);\n      },\n\n      navigateTab: function (event) {\n        event.preventDefault();\n        this.$('.verticalBlockSlider-tab').removeClass('active');\n        this.$(event.currentTarget).addClass('active visited');\n        var currentIndex = this.$('.verticalBlockSlider-tab.active').index();\n        var $currnetBlock=this.$('.verticalBlockSlider-tab').eq(currentIndex).attr('id');\n        var movementSize =this.$('.'+ $currnetBlock).height();\n        this.navigateToIndex(currentIndex, movementSize);\n        Adapt.scrollTo(0);\n      },\n\n      navigateToIndex: function(stage, movementSize) { console.log('stage=',stage);\n        \n        if (stage < this.model.get('_blockCount') && stage >= 0) {\n          this.$('.verticalBlockSlider').stop().animate({'margin-top': - (movementSize * stage)});\n          this.$('.verticalBlockSlider-tab').removeClass('active');\n          this.$('.verticalBlockSlider-tab').eq(stage).addClass('active visited');\n          this.setStage(stage);\n        }\n      },\n\n      setStage: function(stage) {\n        this.model.set('_stage', stage);\n        //Set the block to visible when we navigate to it\n        if (!this.model.get('_blocks')[stage].get('_isVisible')) {\n          this.model.get('_blocks')[stage].set('_isVisible', true);\n        }\n        this.evaluateNavigation();\n      },\n\n      setBlockHeight: function() {\n        // If the user has specified a fixed hieght for slider, use that,\n        // otherwise css will dictate that it's auto\n        if (_.isNumber(parseFloat(this.model.get('_verticalBlockSlider')._height))) {\n          this.$('.verticalBlockSlider-container').height(this.model.get('_verticalBlockSlider')._height);\n        }\n      },\n\n      evaluateNavigation: function() {\n        var currentStage = this.model.get('_stage');\n        var itemCount = this.model.get('_blockCount');\n\n        if (currentStage > 0) {\n          this.$('.verticalBlockSlider-control-left').removeClass('verticalBlockSlider-hidden');\n        } else {\n          this.$('.verticalBlockSlider-control-left').addClass('verticalBlockSlider-hidden');\n        }\n\n        if (itemCount > 1 && currentStage != --itemCount) {\n          this.$('.verticalBlockSlider-control-right').removeClass('verticalBlockSlider-hidden');\n        } else {\n          this.$('.verticalBlockSlider-control-right').addClass('verticalBlockSlider-hidden');\n        }\n      }\n    });\n\n    new verticalBlockSliderView({model: verticalBlockSliderArticle});\n  }\n\n  Adapt.on('articleView:postRender', function(article) {\n    if (article.model.get('_verticalBlockSlider')) {\n      setupverticalBlockSliderView(article.model);\n    }\n  });\n\n});\n\n",
    "define('coreViews/menuView',['require','coreViews/adaptView','coreJS/adapt'],function(require) {\n\n    var AdaptView = require('coreViews/adaptView');\n    var Adapt = require('coreJS/adapt');\n\n    var MenuView = AdaptView.extend({\n\n    \tclassName: function() {\n            var visible = \"visibility-hidden\";\n            if (this.model.get('_isVisible')) {\n                visible = \"\";\n            }\n    \t\treturn 'menu '\n            + 'menu-'\n            + this.model.get('_id')\n            + \" \" + this.model.get('_classes')\n            + \" \" + this.setVisibility();\n    \t},\n\n        preRender: function() {\n            this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n            this.$el.css('opacity', 0);\n            this.listenTo(this.model, 'change:_isReady', this.isReady);\n        },\n\n        postRender: function() {\n        },\n\n        isReady: function() {\n            if (this.model.get('_isReady')) {\n                _.defer(_.bind(function() {\n                    $('.loading').hide();\n                    $(window).scrollTop(0);\n                    Adapt.trigger('menuView:ready', this);\n                    var styleOptions = { opacity: 1 };\n                    if (this.disableAnimation) {\n                        this.$el.css(styleOptions)\n                    } else {\n                        this.$el.velocity(styleOptions, 'fast');\n                    }\n                    $(window).scroll();\n                }, this));\n            }\n        }\n\n    }, {\n        type:'menu'\n    });\n\n    return MenuView;\n\n});\n\n",
    "define('menu/adapt-contrib-boxMenu/js/adapt-contrib-boxmenu',[\n    'coreJS/adapt',\n    'coreViews/menuView'\n], function(Adapt, MenuView) {\n\n    var BoxMenuView = MenuView.extend({\n\n        postRender: function() {\n            var nthChild = 0;\n            this.model.getChildren().each(function(item) {\n                if (item.get('_isAvailable')) {\n                    nthChild++;\n                    item.set(\"_nthChild\", nthChild);\n                    this.$('.menu-container-inner').append(new BoxMenuItemView({model: item}).$el);\n                }\n            });\n        }\n\n    }, {\n        template: 'boxmenu'\n    });\n\n    var BoxMenuItemView = MenuView.extend({\n\n        events: {\n            'click button' : 'onClickMenuItemButton'\n        },\n\n        className: function() {\n            var nthChild = this.model.get(\"_nthChild\");\n            return [\n                'menu-item',\n                'menu-item-' + this.model.get('_id') ,\n                this.model.get('_classes'),\n                'nth-child-' + nthChild,\n                nthChild % 2 === 0 ? 'nth-child-even' : 'nth-child-odd'\n            ].join(' ');\n        },\n\n        preRender: function() {\n            this.model.checkCompletionStatus();\n            this.model.checkInteractionCompletionStatus();\n        },\n\n        postRender: function() {\n            var graphic = this.model.get('_graphic');\n            if (graphic && graphic.src && graphic.src.length > 0) {\n                this.$el.imageready(_.bind(function() {\n                    this.setReadyStatus();\n                }, this));\n            } else {\n                this.setReadyStatus();\n            }\n        },\n\n        onClickMenuItemButton: function(event) {\n            if(event && event.preventDefault) event.preventDefault();\n            Backbone.history.navigate('#/id/' + this.model.get('_id'), {trigger: true});\n        }\n\n    }, {\n        template: 'boxmenu-item'\n    });\n\n    Adapt.on('router:menu', function(model) {\n\n        $('#wrapper').append(new BoxMenuView({model: model}).$el);\n\n    });\n\n});\n\n",
    "\ndefine('theme/EOM/js/theme-block',['require','coreJS/adapt','backbone'],function(require) {\n\t\n\tvar Adapt = require('coreJS/adapt');\n\tvar Backbone = require('backbone');\n\n\tvar ThemeBlockView = Backbone.View.extend({\n\n\t\tinitialize: function() {\n\t\t\tthis.setStyles();\n\t\t\tthis.listenTo(Adapt, 'device:resize', this.setStyles);\n\t\t\tthis.listenTo(Adapt, 'remove', this.remove);\n\t\t},\n\n\t\tsetStyles: function() {\n\t\t\tthis.setBackground();\n\t\t\tthis.setMinHeight();\n\t\t\tthis.setDividerBlock();\n\t\t},\n\n\t\tsetBackground: function() {\n\t\t\tvar backgroundColor = this.model.get('_themeBlockConfig')._backgroundColor;\n\t\t\t\n\t\t\tif (backgroundColor) {\n\t\t\t\tthis.$el.addClass(backgroundColor);\n\t\t\t}\n\t\t},\n\n\t\tsetMinHeight: function() {\n\t\t\tvar minHeight = 0;\n\t\t\tvar minHeights = this.model.get('_themeBlockConfig')._minimumHeights;\n\n\t\t\tif (minHeights) {\n\n\t\t\t\tif(Adapt.device.screenSize == 'large') {\n\t\t\t\t\tminHeight = minHeights._large;\n\t\t\t\t} else if (Adapt.device.screenSize == 'medium') {\n\t\t\t\t\tminHeight = minHeights._medium;\n\t\t\t\t} else {\n\t\t\t\t\tminHeight = minHeights._small;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$el.css({\n\t\t\t\tminHeight: minHeight + \"px\"\n\t\t\t});\n\t\t},\n\n\t\tsetDividerBlock: function() {\n\t\t\tvar dividerBlock = this.model.get('_themeBlockConfig')._isDividerBlock;\n\n\t\t\tif (dividerBlock) {\n\t\t\t\tthis.$el.addClass('divider-block');\n\t\t\t}\n\t\t}\n\t});\n\n\treturn ThemeBlockView;\n\t\n});\n\n",
    "//added this block of code from our EOM 1.1 version to try to update Font-awesome but it did not work //\n//Instead added version 4.5.0 of Font-Awesome manually in the icon.less file located in the theme folder *Barbara*\n\n/*Modernizr.load ([{\n    test: true,\n    yep: [\n        'adapt/css/font-awesome/font-awesome.min.css'\n    ]\n}, {\n    test: true,\n    yep: 'libraries/swfObjects.js'\n}]);\n*/\ndefine('theme/EOM/js/eom',['require','coreJS/adapt','backbone','handlebars','coreViews/componentView','coreViews/questionView','theme/EOM/js/theme-block'],function(require) {\n\n\tvar Adapt = require('coreJS/adapt');\n\tvar Backbone = require('backbone');\n\tvar Handlebars = require('handlebars');\n  var ComponentView = require('coreViews/componentView');\n  var QuestionView = require('coreViews/questionView');\n\tvar ThemeBlock = require('theme/EOM/js/theme-block');\n\n\n//Bottom Navigation addition\n//==========================\n\n    // Run when all the assets are loaded for a page.\n    Adapt.once(\"pageView:preRender\", function(currentView) {\n        // Create a view to feed into bottom navigation.\n        var fakeView = Backbone.View.extend({\n            initialize: function() {\n                this.preRender();\n                this.render();\n            },\n\n            preRender: function() {},\n\n            postRender: function() {},\n\n            render: function() {\n                var data = this.model.toJSON();\n                this.$('.bottomnavigation').css({\n                    \"background-color\": data._globals._accessibility._theme.colorB\n                });\n                var template = Handlebars.templates['bottomNavigation'];\n                this.$el.html(template(data));\n\n                _.defer(_.bind(function() {\n                    this.postRender();\n                }, this));\n                return this;\n            },\n\n            remove: function() {\n                this.$el.remove();\n                this.stopListening();\n                return this;\n            },\n\n            undelegateEvents: function() {},\n            delegateEvents: function() {}\n        });\n\n        var _globals_obj = Adapt.course.get('_globals');\n        var theme_obj = _globals_obj._accessibility._theme;\n\n        // Populate bottom navigation with course info.\n        var bottomNavigation = new Backbone.Model({\n            courseTitle: Adapt.course.get('title'),\n            moduleTitle: currentView.model.get('title'),\n            _globals: _globals_obj,\n            _visible: theme_obj._bottombar\n        });\n\n        Adapt.bottomnavigation.setCustomView(new fakeView({\n            model: bottomNavigation\n        }));\n        if(theme_obj._bottombar == false){\n            Adapt.bottomnavigation = null;\n            $('.navigationDrawer').css({ 'height': '0px' });\n            $('.bottomnavigation').css({ 'height': '0px' });\n        } else\n            Adapt.trigger(\"bottomnavigation:open\");\n\n        if(theme_obj._topnavigationbar == false){\n            $('.navigation').css({ 'display': 'none' });\n            $('#wrapper').css({ 'padding-top': '0px' });\n        }\n    });\n\n    Adapt.once(\"app:dataReady\", function() {\n        Adapt.getModelFromId = (function() {\n            var collections = [\n                Adapt.course,\n                Adapt.contentObjects,\n                Adapt.articles,\n                Adapt.blocks,\n                Adapt.components\n            ];\n\n            return function(id) {\n                var model;\n\n                for (var i = 0; i < collections.length; i++) {\n                    model = collections[i];\n\n                    if (model.get && model.get(\"_id\") == id) {\n                        return model;\n                    } else if (model.findWhere) {\n                        model = model.findWhere({\n                            _id: id\n                        });\n                        if (model) {\n                            return model;\n                        }\n                    }\n                }\n            };\n        }());\n\n        _.each(Adapt.componentStore, function(value, key) {\n            //if(key != \"embeddedLink\"){\n                Adapt.componentStore[key] = Adapt.componentStore[key].extend({\n                    inview: function(event, visible, visiblePartX, visiblePartY) {\n                        //if (this.model.get('_id') != 'c-x01' && visible) {\n                        if (visible) {\n                            /*\n                    if (!this._isVisibleTop && !this._isVisibleBottom && !this._isVisibleLeft && !this._isVisibleRight) {\n                      this._inviewTimestamp = Date.now();\n                      console.log(this.model.get('_id') + ' ' + 'visible init ' + (Date.now() - this._inviewTimestamp));\n                    }\n    console.log(this.model.get('_id') + ' ' + 'visible ' + (Date.now() - this._inviewTimestamp));\n                    */\n                            if (visiblePartY === 'top') {\n                                this._isVisibleTop = true;\n                            } else if (visiblePartY === 'bottom') {\n                                this._isVisibleBottom = true;\n                            } else {\n                                this._isVisibleTop = true;\n                                this._isVisibleBottom = true;\n                            }\n\n                            if (visiblePartX === 'left') {\n                                this._isVisibleLeft = true;\n                            } else if (visiblePartX === 'right') {\n                                this._isVisibleRight = true;\n                            } else {\n                                this._isVisibleLeft = true;\n                                this._isVisibleRight = true;\n                            }\n\n                            if (this._isVisibleTop && this._isVisibleBottom && this._isVisibleLeft && this._isVisibleRight) {\n                                this.$('.component-inner, .component-widget, .component-body, .component-instruction').off('inview');\n                                this.setCompletionStatus();\n                                /*\n    console.log(this.model.get('_id') + ' ' + 'full visible ' + (Date.now() - this._inviewTimestamp));\n                        if (Date.now() - this._inviewTimestamp > 5000) {\n    console.log(this.model.get('_id') + ' ' + 'full visible complete ' + (Date.now() - this._inviewTimestamp));\n                          this.$('.component-widget').off('inview');\n                          this.setCompletionStatus();\n                        }\n                        else {\n                          var triggerInview = function () {\n    console.log(this.model.get('_id') + ' ' + 'full visible trigger ' + (Date.now() - this._inviewTimestamp));\n                            this.$('.component-widget').trigger('inview', [true, visiblePartX, visiblePartY]);\n                          };\n\n    console.log(this.model.get('_id') + ' ' + 'full visible delay ' + (Date.now() - this._inviewTimestamp));\n                          _.delay(_.bind(triggerInview, this), 1000);\n                        }\n                        */\n                            }\n\n                        }\n\n                    }\n                });\n            //}\n        });\n        /* REACTIVATE TO SCALE THE CONTENT INSIDE AN IFRAME\n\t\tAdapt.componentStore['responsiveIframe'] = Adapt.componentStore['responsiveIframe'].extend({\n\t\t\tpreRender: function() {\n\t\t\t\t\tthis.listenTo(Adapt, 'device:changed', this.resizeControl);\n\t\t\t\t\tthis.listenTo(Adapt, 'device:resize', this.resizeControl);\n\t\t\t\t\t$(window).on('resize', _.bind(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tthis.resizeControl();\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t);\n\t\t\t},\n\t\t\tresizeControl: function(size) {\n\t\t\t\t\tvar width = this.$('.responsiveIframe-iframe').attr('data-width-' + size);\n\t\t\t\t\tvar height = this.$('.responsiveIframe-iframe').attr('data-height-' + size);\n\n\t\t\t\t\tvar contentWidth = this.$('.responsiveIframe-iframe').contents().width();\n\t\t\t\t\tvar contentHeight = this.$('.responsiveIframe-iframe').contents().height();\n\n\t\t\t\t\t// Math.max takes a variable number of arguments\n\t\t\t\t\t// `apply` is equivalent to passing each height as an argument\n\t\t\t\t\t//var minDiff = Math.min.apply(null, [width / contentWidth, height / contentHeight]);\n\n\t\t\t\t\t//if (minDiff < 1) {\n\t\t\t\t\tvar zoom = this.$('.responsiveIframe-iframe').width() / width;\n\t\t\t\t\tif (zoom < 1) {\n\t\t\t\t\t\tthis.$('.responsiveIframe-iframe').css(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'width'             : '100%',\n\t\t\t\t\t\t\t\t'height'            : height * zoom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.$('.responsiveIframe-iframe').contents().find('body').css(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'-webkit-transform' : 'scale(' + zoom + ')',\n\t\t\t\t\t\t\t\t'-moz-transform'    : 'scale(' + zoom + ')',\n\t\t\t\t\t\t\t\t'-ms-transform'     : 'scale(' + zoom + ')',\n\t\t\t\t\t\t\t\t'-o-transform'      : 'scale(' + zoom + ')',\n\t\t\t\t\t\t\t\t'transform'         : 'scale(' + zoom + ')',\n\t\t\t\t\t\t\t\t'transform-origin'  : 'top center'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.$('.responsiveIframe-iframe').css(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'width'             : width,\n\t\t\t\t\t\t\t\t'height'            : height\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.$('.responsiveIframe-iframe').contents().find('body').css(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'-webkit-transform' : 'none',\n\t\t\t\t\t\t\t\t'-moz-transform'    : 'none',\n\t\t\t\t\t\t\t\t'-ms-transform'     : 'none',\n\t\t\t\t\t\t\t\t'-o-transform'      : 'none',\n\t\t\t\t\t\t\t\t'transform'         : 'none',\n\t\t\t\t\t\t\t\t'transform-origin'  : 'center center'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t}\n\t\t});*/\n\n        // Make iframe size proportional to its content's aspect ratio.\n        Adapt.componentStore['responsiveIframe'] = Adapt.componentStore['responsiveIframe'].extend({\n            preRender: function() {\n                this.listenTo(Adapt, 'device:changed', this.resizeControl);\n                this.listenTo(Adapt, 'device:resize', this.resizeControl);\n                // Force resizeControl() to be called everytime the window is resized.\n                $(window).on('resize', _.bind(\n                    _.throttle(function() {\n                        this.resizeControl();\n                    }, 100), this\n                ));\n            },\n            resizeControl: function(size) {\n                if ($('.blockslider-container').length) {\n                    var that = this;\n                    // Use the available viewport to size the iframe instead of fixed dimensions.\n                    (function findBottomBarHeight() {\n                        var success = (function() {\n                            // Skip iFrame resize if Edge animation is not detected.\n                            if (Adapt.bottomnavigation) {\n                                if ($('.bottomnavigation').height() != 0) {\n                                    var iframeHeight = $('.bottomnavigation').offset().top - that.$('.responsiveIframe-iframe').offset().top;\n\n                                    var blockContainer = that.$el.closest('.block-inner');\n                                    var blockPadding = (blockContainer.outerHeight() - blockContainer.height()) / 2;\n\n                                    that.$('.responsiveIframe-iframe').css({\n                                        'width': that.$('.responsiveIframe-inner').width(),\n                                        'height': iframeHeight - blockPadding\n                                    });\n                                    return true\n                                } else\n                                    return false;\n                            } else {\n                                var iframeHeight = $(window).height() - that.$('.responsiveIframe-iframe').offset().top;\n\n                                var blockContainer = that.$el.closest('.block-inner');\n                                var blockPadding = (blockContainer.outerHeight() - blockContainer.height()) / 2;\n\n                                that.$('.responsiveIframe-iframe').css({\n                                    'width': that.$('.responsiveIframe-inner').width(),\n                                    'height': iframeHeight - blockPadding\n                                });\n                                return true;\n                            }\n                        })();\n\n                        // Repeat until height is successfully set.\n                        if (!success) {\n                            setTimeout(findBottomBarHeight, 500);\n                        }\n                    })();\n\n                } else {\n                    var that = this;\n                    // Repeatedly resize Edge animation iFrame container until the content is loaded and the internal width and height are accessible.\n                    var g_timeout = 10000;\n                    (function loopResize() {\n                        g_timeout -= 500;\n                        var success = (function() {\n                            // Skip iFrame resize if Edge animation is not detected.\n                            if (g_timeout <= 0) {\n                                return true;\n                            }\n\n                            var contentWidth = that.$('.responsiveIframe-iframe').contents().find('#Stage').width();\n                            var contentHeight = that.$('.responsiveIframe-iframe').contents().find('#Stage').height();\n\n                            if (contentWidth && contentHeight) {\n                                // Use the content's aspect ratio to size the iframe instead of fixed dimensions.\n                                that.$('.responsiveIframe-iframe').css({\n                                    'visibility': 'visible',\n                                    'width': that.$('.responsiveIframe-inner').width(), // '100%' doesn't work well on iPads (REF: 74529390-4e0d-1280-9cdf-1de7af216cf0)\n                                    'height': that.$('.responsiveIframe-inner').width() / (contentWidth / contentHeight)\n                                });\n\n                                return true;\n                            } else {\n                                // Hide the content until the resize has taken place.\n                                that.$('.responsiveIframe-iframe').css({\n                                    'visibility': 'hidden'\n                                });\n                            }\n\n                            return false;\n                        })();\n\n                        // Repeat until width is successfully set.\n                        if (!success) {\n                            setTimeout(loopResize, 500);\n                        }\n                    })();\n                }\n            }\n        });\n    });\n\n\t// Block View\n\t// ==========\n\n\tAdapt.on('blockView:postRender', function(view) {\n\t\tvar theme = view.model.get('_theme');\n\n\t\tif (theme) {\n\t\t\tnew ThemeBlock({\n\t\t\t\tmodel: new Backbone.Model({\n\t\t\t\t\t_themeBlockConfig: theme\n\t\t\t\t}),\n\t\t\t\tel: view.$el\n\t\t\t});\n\t\t}\n\t});\n});\n\n// Block Autoplay\n\n $('.block').on('allAudioStopWithinBlock', function(event, visibility) {\n            //if(visibility < 0.55){\n                var embeddedLink = $(this).closest('.block').find('.embeddedLink-component');\n                if(embeddedLink.length > 0){\n                    $(embeddedLink).trigger('stop');\n                }\n                //Adapt.trigger('stopEmbededLinkAudio');\n\n                var stopAccordionWithAudio = $(this).closest('.block').find('.accordionWithAudio-component');\n                if(stopAccordionWithAudio.length > 0){\n                    $(stopAccordionWithAudio).trigger('stop');\n                }\n\n\n            //}\n        });\n\n $('.volume-control').click(function(event){\n            if($(this).find('.volume-control-off').length){\n                if($(this).find('.volume-control-off').css('display') != \"none\"){\n                    Adapt.trigger(\"blockAutoPlay:ended\");\n                }\n            }\n            Adapt.trigger('stopEmbededLinkAudio');\n            Adapt.trigger('stopAccordionWithAudio');\n        });\n\n        $('.accordionWithAudio-item').click(function(event){\n            if($(event.target).hasClass('icon-sound-mute'))\n                Adapt.trigger('stopAccordionWithAudio');\n\n            if(event.target.className == \"accordionWithAudio-item-title-inner\")\n                Adapt.trigger('stopAccordionWithAudio');\n\n            Adapt.trigger(\"blockAutoPlay:ended\");\n            Adapt.trigger('stopEmbededLinkAudio');\n        });\n\n        $('.embeddedLink-graphic-pin').click(function(event){\n            //event.preventDefault();\n            if($(this).find('.icon-sound-mute').length){\n                Adapt.trigger('stopEmbededLinkAudio');\n            }\n            Adapt.trigger(\"blockAutoPlay:ended\");\n            Adapt.trigger('stopAccordionWithAudio');\n        });\n\n",
    "requirejs.config({map: { \"*\": { \"extensions/extensions\":\"plugins\",\"menu/menu\":\"plugins\",\"theme/theme\":\"plugins\",\"components/components\":\"plugins\" } } });\ndefine(\"plugins\", [\"components/adapt-Tables/js/adapt-Tables\",\"components/adapt-accordionWithAudio/js/adapt-accordionWithAudio\",\"components/adapt-contrib-accordion/js/adapt-contrib-accordion\",\"components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults\",\"components/adapt-contrib-blank/js/adapt-contrib-blank\",\"components/adapt-contrib-gmcq/js/adapt-contrib-gmcq\",\"components/adapt-contrib-graphic/js/adapt-contrib-graphic\",\"components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic\",\"components/adapt-contrib-matching/js/adapt-contrib-matching\",\"components/adapt-contrib-mcq/js/adapt-contrib-mcq\",\"components/adapt-contrib-media/js/adapt-contrib-media\",\"components/adapt-contrib-narrative/js/adapt-contrib-narrative\",\"components/adapt-contrib-responsiveIframe/js/adapt-contrib-responsiveIframe\",\"components/adapt-contrib-slider/js/adapt-contrib-slider\",\"components/adapt-contrib-text/js/adapt-contrib-text\",\"components/adapt-contrib-textInput/js/adapt-contrib-textInput\",\"components/adapt-dragAndDrop/js/adapt-dragAndDrop\",\"components/adapt-embeddedLink/js/adapt-embeddedLink\",\"components/adapt-focalpointGenerator/js/adapt-focalpointGenerator\",\"components/adapt-hotSpot/js/adapt-hotSpot\",\"components/adapt-iframewithedgeAnimate/js/adapt-iframewithedgeAnimate\",\"components/adapt-labelGenerator/js/adapt-labelGenerator\",\"components/adapt-narrativeWithEdgeAnimation/js/adapt-narrativeWithEdgeAnimation\",\"components/adapt-objectMatching/js/adapt-objectMatching\",\"extensions/adapt-EOM-pageLevelProgress/js/adapt-EOM-pageLevelProgress\",\"extensions/adapt-TOC/js/adapt-TOC\",\"extensions/adapt-WCN/js/adapt-wcn\",\"extensions/adapt-blockAutoPlay/js/adapt-blockAutoPlay\",\"extensions/adapt-blockBullets/js/adapt-blockBullets\",\"extensions/adapt-blockContentItems/js/adapt-blockContentItems\",\"extensions/adapt-blockIdentifier/js/adapt-blockIdentifier\",\"extensions/adapt-blockLevelProgress/js/adapt-blockLevelProgress\",\"extensions/adapt-bottomnavigation/js/adapt-bottomnavigation\",\"extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension\",\"extensions/adapt-contrib-bookmarking/js/adapt-contrib-bookmarking\",\"extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress\",\"extensions/adapt-contrib-resources/js/adapt-contrib-resources\",\"extensions/adapt-contrib-spoor/js/adapt-contrib-spoor\",\"extensions/adapt-contrib-trickle/js/adapt-contrib-trickle\",\"extensions/adapt-contrib-tutor/js/adapt-contrib-tutor\",\"extensions/adapt-didYouKnow/js/adapt-didYouKnow\",\"extensions/adapt-expandableNavBar/js/adapt-expandableNavBar\",\"extensions/adapt-navigationDrawer/js/adapt-navigationDrawer\",\"extensions/adapt-panZoom/js/adapt-panZoom\",\"extensions/adapt-progressTracking/js/adapt-progressTracking\",\"extensions/adapt-verticalBlockSlider/js/adapt-verticalBlockSlider\",\"menu/adapt-contrib-boxMenu/js/adapt-contrib-boxmenu\",\"theme/EOM/js/eom\"], function(){});\n\n",
    "/**\n * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com\n * Licensed under MIT\n * @author Ariel Flesler\n * @version 2.1.0\n */\n;(function(l){'use strict';l('scrollTo',['jquery'],function($){var k=$.scrollTo=function(a,b,c){return $(window).scrollTo(a,b,c)};k.defaults={axis:'xy',duration:0,limit:true};function isWin(a){return!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!==-1}$.fn.scrollTo=function(f,g,h){if(typeof g==='object'){h=g;g=0}if(typeof h==='function'){h={onAfter:h}}if(f==='max'){f=9e9}h=$.extend({},k.defaults,h);g=g||h.duration;var j=h.queue&&h.axis.length>1;if(j){g/=2}h.offset=both(h.offset);h.over=both(h.over);return this.each(function(){if(f===null)return;var d=isWin(this),elem=d?this.contentWindow||window:this,$elem=$(elem),targ=f,attr={},toff;switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\\d+(\\.\\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=d?$(targ):$(targ,elem);if(!targ.length)return;case'object':if(targ.is||targ.style){toff=(targ=$(targ)).offset()}}var e=$.isFunction(h.offset)&&h.offset(elem,targ)||h.offset;$.each(h.axis.split(''),function(i,a){var b=a==='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,prev=$elem[key](),max=k.max(elem,a);if(toff){attr[key]=toff[pos]+(d?0:prev-$elem.offset()[pos]);if(h.margin){attr[key]-=parseInt(targ.css('margin'+b),10)||0;attr[key]-=parseInt(targ.css('border'+b+'Width'),10)||0}attr[key]+=e[pos]||0;if(h.over[pos]){attr[key]+=targ[a==='x'?'width':'height']()*h.over[pos]}}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)==='%'?parseFloat(c)/100*max:c}if(h.limit&&/^\\d+$/.test(attr[key])){attr[key]=attr[key]<=0?0:Math.min(attr[key],max)}if(!i&&h.axis.length>1){if(prev===attr[key]){attr={}}else if(j){animate(h.onAfterFirst);attr={}}}});animate(h.onAfter);function animate(a){var b=$.extend({},h,{queue:true,duration:g,complete:a&&function(){a.call(elem,targ,h)}});$elem.animate(attr,b)}})};k.max=function(a,b){var c=b==='x'?'Width':'Height',scroll='scroll'+c;if(!isWin(a))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,doc=a.ownerDocument||a.document,html=doc.documentElement,body=doc.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(t){return $(t.elem)[t.prop]()},set:function(t){var a=this.get(t);if(t.options.interrupt&&t._last&&t._last!==a){return $(t.elem).stop()}var b=Math.round(t.now);if(a!==b){$(t.elem)[t.prop](b);t._last=this.get(t)}}};return k})}(typeof define==='function'&&define.amd?define:function(a,b){'use strict';if(typeof module!=='undefined'&&module.exports){module.exports=b(require('jquery'))}else{b(jQuery)}}));\ndefine(\"scrollTo\", [\"jquery\"], function(){});\n\n",
    "require([\n    'coreJS/adapt',\n    'coreJS/router',\n    'coreJS/drawer',\n    'coreJS/device',\n    'coreJS/popupManager',\n    'coreJS/notify',\n    'coreJS/accessibility',\n    'coreViews/navigationView',\n    'coreJS/adaptCollection',\n    'coreModels/configModel',\n    'coreModels/courseModel',\n    'coreModels/contentObjectModel',\n    'coreModels/articleModel',\n    'coreModels/blockModel',\n    'coreModels/componentModel',\n    'coreJS/offlineStorage',\n    'coreModels/lockingModel',\n    'velocity',\n    'imageReady',\n    'inview',\n    'handlebars',\n    'templates',\n    'jquery',\n    'scrollTo',\n    'components/components',\n    'extensions/extensions',\n    'menu/menu',\n    'theme/theme'\n], function (Adapt, Router, Drawer, Device, PopupManager, Notify, Accessibility, NavigationView, AdaptCollection, ConfigModel, CourseModel, ContentObjectModel, ArticleModel, BlockModel, ComponentModel) {\n\n    // Append loading template and show\n    window.Handlebars = _.extend(require(\"handlebars\"), window.Handlebars)\n\n    var template = Handlebars.templates['loading'];\n    $('#wrapper').append(template());\n\n    // Create config model\n    Adapt.config = new ConfigModel(null, {url: \"course/config.json\", reset:true});\n\n    // This function is called anytime a course object is loaded\n    // Once all course files are loaded trigger events and call Adapt.initialize\n    function checkDataIsLoaded() {\n        if (Adapt.contentObjects.models.length > 0\n            && Adapt.articles.models.length > 0\n            && Adapt.blocks.models.length > 0\n            && Adapt.components.models.length > 0\n            && Adapt.course.get('_id')) {\n\n            mapAdaptIdsToObjects();\n\n            if (typeof Adapt.course.get('_buttons').submit !== 'undefined') {\n                // Backwards compatibility with v1.x\n                var oldButtons = Adapt.course.get('_buttons');\n                var buttons = [];\n\n                for (var key in oldButtons) {\n                    buttons['_' + key] = {\n                        buttonText: oldButtons[key],\n                        ariaLabel: oldButtons[key]\n                    };\n                }\n\n                // HACK - Append other missing values\n                buttons['_showFeedback'] = {\n                    buttonText: 'Show feedback',\n                    ariaLabel: 'Show feedback'\n                };\n\n                // Replace the existing property\n                Adapt.course.set('_buttons', buttons);\n            }\n\n            // Triggered to setup model connections in AdaptModel.js\n            Adapt.trigger('app:dataLoaded');\n            // Sets up collection mapping\n            Adapt.setupMapping();\n            // Triggers once all the data is ready\n            Adapt.trigger('app:dataReady');\n            // Setups a new navigation view\n            // This should be triggered after 'app:dataReady' as plugins might want\n            // to manipulate the navigation\n            new NavigationView();\n            // Called once Adapt is ready to begin\n            Adapt.initialize();\n            // Remove event listeners\n            Adapt.off('adaptCollection:dataLoaded courseModel:dataLoaded');\n\n        }\n    }\n\n    function mapAdaptIdsToObjects () {\n        Adapt.contentObjects._byAdaptID = Adapt.contentObjects.groupBy(\"_id\");\n        Adapt.articles._byAdaptID = Adapt.articles.groupBy(\"_id\");\n        Adapt.blocks._byAdaptID = Adapt.blocks.groupBy(\"_id\");\n        Adapt.components._byAdaptID = Adapt.components.groupBy(\"_id\");\n    }\n\n    // This function is called when the config model triggers 'configModel:loadCourseData'\n    // Once the config model is loaded get the course files\n    // This enables plugins to tap in before the course files are loaded & also to change the default language\n    function loadCourseData() {\n        // All code that needs to run before adapt starts should go here\n        var language = Adapt.config.get('_defaultLanguage');\n\n        var courseFolder = \"course/\" + language +\"/\";\n\n        $('html').attr(\"lang\", language);\n\n        Adapt.course = new CourseModel(null, {url:courseFolder + \"course.json\", reset:true});\n\n        Adapt.contentObjects = new AdaptCollection(null, {\n            model: ContentObjectModel,\n            url: courseFolder +\"contentObjects.json\"\n        });\n\n        Adapt.articles = new AdaptCollection(null, {\n            model: ArticleModel,\n            url: courseFolder + \"articles.json\"\n        });\n\n        Adapt.blocks = new AdaptCollection(null, {\n            model: BlockModel,\n            url: courseFolder + \"blocks.json\"\n        });\n\n        Adapt.components = new AdaptCollection(null, {\n            model: ComponentModel,\n            url: courseFolder + \"components.json\"\n        });\n    }\n\n    // Events that are triggered by the main Adapt content collections and models\n    Adapt.once('configModel:loadCourseData', loadCourseData);\n\n    Adapt.on('adaptCollection:dataLoaded courseModel:dataLoaded', checkDataIsLoaded);\n\n});\n\ndefine(\"core/js/app\", function(){});\n\n"
  ]
}